2025-09-22 00:24:39.406 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 00:24:39.487 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 00:24:39.658 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.672 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.689 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.690 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.691 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.691 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.852 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.853 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.869 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.869 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.870 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.870 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.875 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.876 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:24:39.913 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 00:24:39.913 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 00:24:39.914 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 00:24:40.037 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:24:40.038 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:24:40.038 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:24:40.038 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:24:40.038 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:24:40.038 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:24:40.038 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:24:40.038 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:24:40.038 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:24:40.038 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:24:40.038 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:24:40.166 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 00:24:40.221 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 00:24:40.324 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 00:24:40.357 +07:00 [DBG] Creating DbConnection.
2025-09-22 00:24:40.378 +07:00 [DBG] Created DbConnection. (19ms).
2025-09-22 00:24:40.383 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.559 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.561 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:24:40.566 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 00:24:40.574 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (12ms).
2025-09-22 00:24:40.581 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:24:40.636 +07:00 [INF] Executed DbCommand (53ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:24:40.672 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:24:40.688 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.694 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 53ms reading results.
2025-09-22 00:24:40.696 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.700 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 00:24:40.704 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.705 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.705 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:24:40.705 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.705 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.706 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:24:40.708 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:24:40.709 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:24:40.709 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.709 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:24:40.709 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.709 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:24:40.710 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.710 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.710 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:24:40.710 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.710 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.710 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:24:40.711 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:24:40.711 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:24:40.712 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.712 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:24:40.712 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.712 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:24:40.712 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.712 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.712 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:24:40.713 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.713 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.713 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:24:40.714 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:24:40.714 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:24:40.714 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.715 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:24:40.715 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.715 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:24:40.721 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 00:24:40.727 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 00:24:40.729 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.729 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.729 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:24:40.729 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.729 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.729 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:24:40.733 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:24:40.759 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:24:40.792 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.792 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 58ms reading results.
2025-09-22 00:24:40.792 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.792 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:24:40.795 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 00:24:40.798 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.798 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.798 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:24:40.798 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.798 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.798 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:24:40.799 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:24:40.800 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:24:40.800 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.800 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:24:40.800 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.800 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:24:40.800 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 00:24:40.801 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.801 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.801 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:24:40.801 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.801 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.801 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:24:40.803 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:24:40.803 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:24:40.803 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.803 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:24:40.803 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.804 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:24:40.804 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.805 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.805 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:24:40.805 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.805 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:24:40.805 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:24:40.806 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:24:40.806 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:24:40.807 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.807 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:24:40.807 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.807 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:24:40.807 +07:00 [INF] Data seeding completed successfully
2025-09-22 00:24:40.808 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 00:24:40.809 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:24:40.811 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 00:24:40.836 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 00:24:40.994 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 00:24:41.091 +07:00 [DBG] Hosting starting
2025-09-22 00:24:41.099 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 00:24:41.131 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 00:24:41.149 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 00:24:41.175 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 00:24:41.179 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 00:24:41.179 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 00:24:41.184 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 00:24:41.187 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 00:24:41.187 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 00:24:41.188 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 00:24:41.189 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 00:24:41.190 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 00:24:41.191 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 00:24:41.191 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 00:24:41.196 +07:00 [DBG] Middleware loaded
2025-09-22 00:24:41.197 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 00:24:41.198 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 00:24:41.229 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 00:24:41.241 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 00:24:41.242 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 00:24:41.242 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 00:24:41.242 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 00:24:41.242 +07:00 [INF] Hosting environment: Development
2025-09-22 00:24:41.242 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 00:24:41.243 +07:00 [DBG] Hosting started
2025-09-22 00:24:41.514 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" accepted.
2025-09-22 00:24:41.515 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" started.
2025-09-22 00:24:41.627 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 00:24:41.637 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 00:24:41.675 +07:00 [DBG] Connection id "0HNFP6EVUR6CA" accepted.
2025-09-22 00:24:41.675 +07:00 [DBG] Connection id "0HNFP6EVUR6CA" started.
2025-09-22 00:24:41.780 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 00:24:41.793 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 00:24:41.794 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" completed keep alive response.
2025-09-22 00:24:41.796 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 170.2382ms
2025-09-22 00:24:41.805 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 00:24:41.807 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 00:24:41.808 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" completed keep alive response.
2025-09-22 00:24:41.808 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.9375ms
2025-09-22 00:24:41.996 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 00:24:42.295 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" completed keep alive response.
2025-09-22 00:24:42.296 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 299.5463ms
2025-09-22 00:24:44.155 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 00:24:44.157 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 00:24:44.157 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 00:24:44.157 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" completed keep alive response.
2025-09-22 00:24:44.158 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 2.7789ms
2025-09-22 00:24:44.163 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 00:24:44.164 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 00:24:44.164 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" completed keep alive response.
2025-09-22 00:24:44.165 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 1.4922ms
2025-09-22 00:24:44.210 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 00:24:44.263 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" completed keep alive response.
2025-09-22 00:24:44.263 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 52.3892ms
2025-09-22 00:24:47.398 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 00:24:47.398 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 00:24:47.398 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 00:24:47.399 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" completed keep alive response.
2025-09-22 00:24:47.400 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 1.9434ms
2025-09-22 00:24:47.411 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 00:24:47.411 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 00:24:47.412 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" completed keep alive response.
2025-09-22 00:24:47.412 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 1.5436ms
2025-09-22 00:24:47.485 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 00:24:47.519 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" completed keep alive response.
2025-09-22 00:24:47.519 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 34.8404ms
2025-09-22 00:25:04.662 +07:00 [INF] Application is shutting down...
2025-09-22 00:25:04.664 +07:00 [DBG] Hosting stopping
2025-09-22 00:25:04.669 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" disconnecting.
2025-09-22 00:25:04.669 +07:00 [DBG] Connection id "0HNFP6EVUR6CA" disconnecting.
2025-09-22 00:25:04.670 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" stopped.
2025-09-22 00:25:04.671 +07:00 [DBG] Connection id "0HNFP6EVUR6CA" stopped.
2025-09-22 00:25:04.672 +07:00 [DBG] Connection id "0HNFP6EVUR6CA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 00:25:04.673 +07:00 [DBG] Connection id "0HNFP6EVUR6C9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 00:25:04.678 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 00:25:04.704 +07:00 [DBG] Hosting stopped
2025-09-22 00:25:12.722 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 00:25:12.785 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 00:25:12.943 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:12.957 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:12.965 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:12.967 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:12.967 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:12.969 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:13.106 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:13.106 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:13.118 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:13.118 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:13.118 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:13.119 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:13.122 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:13.123 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 00:25:13.153 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 00:25:13.154 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 00:25:13.154 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 00:25:13.255 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:25:13.255 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:25:13.255 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:25:13.256 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:25:13.256 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:25:13.256 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:25:13.256 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:25:13.257 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:25:13.257 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:25:13.257 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:25:13.258 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:25:13.356 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 00:25:13.393 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 00:25:13.492 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 00:25:13.521 +07:00 [DBG] Creating DbConnection.
2025-09-22 00:25:13.537 +07:00 [DBG] Created DbConnection. (13ms).
2025-09-22 00:25:13.539 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.630 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.632 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:25:13.635 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 00:25:13.639 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-22 00:25:13.644 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:25:13.670 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:25:13.696 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:25:13.709 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.713 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 40ms reading results.
2025-09-22 00:25:13.715 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.718 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 00:25:13.720 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.721 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.721 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:25:13.721 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.721 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.721 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:25:13.723 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:25:13.724 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:25:13.724 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.725 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:25:13.725 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.725 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:25:13.725 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.725 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.725 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:25:13.725 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.725 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.726 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:25:13.726 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:25:13.727 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:25:13.727 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.727 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:25:13.727 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.727 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:25:13.727 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.727 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.727 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:25:13.727 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.727 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.728 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:25:13.728 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:25:13.728 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:25:13.728 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.728 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:25:13.728 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.729 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:25:13.732 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 00:25:13.736 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 00:25:13.738 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.738 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.738 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:25:13.739 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.739 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.739 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:25:13.742 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:25:13.759 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:25:13.777 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.778 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 35ms reading results.
2025-09-22 00:25:13.778 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.778 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:25:13.780 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 00:25:13.782 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.782 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.782 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:25:13.782 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.782 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.782 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:25:13.783 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:25:13.783 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:25:13.783 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.783 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:25:13.783 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.783 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:25:13.784 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 00:25:13.784 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.784 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.784 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:25:13.784 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.784 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.784 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:25:13.785 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:25:13.785 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:25:13.785 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.785 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:25:13.786 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.786 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:25:13.786 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.787 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.787 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:25:13.787 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.787 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:25:13.787 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:25:13.788 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:25:13.788 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:25:13.788 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.788 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:25:13.788 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.788 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:25:13.788 +07:00 [INF] Data seeding completed successfully
2025-09-22 00:25:13.789 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 00:25:13.790 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:25:13.791 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 00:25:13.799 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 00:25:13.903 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 00:25:13.972 +07:00 [DBG] Hosting starting
2025-09-22 00:25:13.978 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 00:25:13.979 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 00:25:13.980 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 00:25:13.982 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 00:25:13.984 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 00:25:13.984 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 00:25:13.988 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 00:25:13.990 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 00:25:13.990 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 00:25:13.991 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 00:25:13.991 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 00:25:13.992 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 00:25:13.992 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 00:25:13.993 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 00:25:13.997 +07:00 [DBG] Middleware loaded
2025-09-22 00:25:13.997 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 00:25:13.998 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 00:25:14.018 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 00:25:14.026 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 00:25:14.026 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 00:25:14.026 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 00:25:14.026 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 00:25:14.026 +07:00 [INF] Hosting environment: Development
2025-09-22 00:25:14.026 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 00:25:14.027 +07:00 [DBG] Hosting started
2025-09-22 00:25:14.150 +07:00 [DBG] Connection id "0HNFP6F9M2T9U" accepted.
2025-09-22 00:25:14.151 +07:00 [DBG] Connection id "0HNFP6F9M2T9U" started.
2025-09-22 00:25:14.184 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 00:25:14.191 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 00:25:14.222 +07:00 [DBG] Connection id "0HNFP6F9M2T9V" accepted.
2025-09-22 00:25:14.223 +07:00 [DBG] Connection id "0HNFP6F9M2T9V" started.
2025-09-22 00:25:14.321 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 00:25:14.332 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 00:25:14.333 +07:00 [DBG] Connection id "0HNFP6F9M2T9U" completed keep alive response.
2025-09-22 00:25:14.336 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 152.4425ms
2025-09-22 00:25:14.344 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 00:25:14.346 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 00:25:14.347 +07:00 [DBG] Connection id "0HNFP6F9M2T9U" completed keep alive response.
2025-09-22 00:25:14.348 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.8017ms
2025-09-22 00:25:14.406 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 00:25:14.666 +07:00 [DBG] Connection id "0HNFP6F9M2T9U" completed keep alive response.
2025-09-22 00:25:14.666 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 259.8038ms
2025-09-22 00:26:08.326 +07:00 [DBG] Connection id "0HNFP6F9M2T9V" received FIN.
2025-09-22 00:26:08.326 +07:00 [DBG] Connection id "0HNFP6F9M2T9U" received FIN.
2025-09-22 00:26:08.330 +07:00 [DBG] Connection id "0HNFP6F9M2T9U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 00:26:08.333 +07:00 [DBG] Connection id "0HNFP6F9M2T9V" disconnecting.
2025-09-22 00:26:08.334 +07:00 [DBG] Connection id "0HNFP6F9M2T9U" disconnecting.
2025-09-22 00:26:08.335 +07:00 [DBG] Connection id "0HNFP6F9M2T9V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 00:26:08.347 +07:00 [DBG] Connection id "0HNFP6F9M2T9U" stopped.
2025-09-22 00:26:08.347 +07:00 [DBG] Connection id "0HNFP6F9M2T9V" stopped.
2025-09-22 00:26:11.697 +07:00 [INF] Application is shutting down...
2025-09-22 00:26:11.700 +07:00 [DBG] Hosting stopping
2025-09-22 00:26:11.713 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 00:26:11.722 +07:00 [DBG] Hosting stopped
2025-09-22 00:26:19.413 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 00:26:19.470 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 00:26:19.617 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.634 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.648 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.650 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.650 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.652 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.788 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.788 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.799 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.800 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.800 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.801 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.804 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.805 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 00:26:19.836 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 00:26:19.837 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 00:26:19.837 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 00:26:19.940 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:26:19.941 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:26:19.941 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:26:19.941 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:26:19.941 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:26:19.941 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:26:19.941 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:26:19.942 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:26:19.942 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:26:19.942 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:26:19.942 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:26:20.044 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 00:26:20.082 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 00:26:20.177 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 00:26:20.207 +07:00 [DBG] Creating DbConnection.
2025-09-22 00:26:20.218 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 00:26:20.220 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.302 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.304 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:26:20.308 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 00:26:20.311 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-22 00:26:20.316 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:26:20.342 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:26:20.368 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:26:20.381 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.386 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 41ms reading results.
2025-09-22 00:26:20.387 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.391 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 00:26:20.392 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.393 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.393 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:26:20.393 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.393 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.394 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:26:20.396 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:26:20.396 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:26:20.397 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.397 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:26:20.397 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.397 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:26:20.398 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.398 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.398 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:26:20.398 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.398 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.398 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:26:20.398 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:26:20.399 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:26:20.399 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.399 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:26:20.399 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.399 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:26:20.399 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.399 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.400 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:26:20.400 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.400 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.400 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:26:20.400 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:26:20.400 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:26:20.401 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.401 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:26:20.401 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.401 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:26:20.404 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 00:26:20.408 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 00:26:20.409 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.410 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.410 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:26:20.410 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.410 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.410 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:26:20.413 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:26:20.434 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:26:20.454 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.454 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 40ms reading results.
2025-09-22 00:26:20.455 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.455 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:26:20.457 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 00:26:20.459 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.460 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.460 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:26:20.460 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.460 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.460 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:26:20.461 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:26:20.461 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:26:20.461 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.461 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:26:20.461 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.461 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:26:20.461 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 00:26:20.462 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.462 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.462 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:26:20.462 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.462 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.462 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:26:20.462 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:26:20.463 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:26:20.463 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.463 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:26:20.463 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.463 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:26:20.463 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.463 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.463 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:26:20.463 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.463 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:20.463 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:26:20.464 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:26:20.464 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:26:20.464 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.464 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:26:20.465 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.465 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:26:20.465 +07:00 [INF] Data seeding completed successfully
2025-09-22 00:26:20.466 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 00:26:20.468 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:20.468 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 00:26:20.477 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 00:26:20.582 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 00:26:20.651 +07:00 [DBG] Hosting starting
2025-09-22 00:26:20.658 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 00:26:20.659 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 00:26:20.660 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 00:26:20.662 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 00:26:20.663 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 00:26:20.664 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 00:26:20.667 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 00:26:20.669 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 00:26:20.669 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 00:26:20.670 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 00:26:20.670 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 00:26:20.671 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 00:26:20.671 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 00:26:20.672 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 00:26:20.675 +07:00 [DBG] Middleware loaded
2025-09-22 00:26:20.676 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 00:26:20.676 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 00:26:20.697 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 00:26:20.704 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 00:26:20.705 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 00:26:20.705 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 00:26:20.705 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 00:26:20.705 +07:00 [INF] Hosting environment: Development
2025-09-22 00:26:20.705 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 00:26:20.706 +07:00 [DBG] Hosting started
2025-09-22 00:26:20.817 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3" accepted.
2025-09-22 00:26:20.817 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3" started.
2025-09-22 00:26:20.848 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 00:26:20.853 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 00:26:20.884 +07:00 [DBG] Connection id "0HNFP6FTHRRJ4" accepted.
2025-09-22 00:26:20.886 +07:00 [DBG] Connection id "0HNFP6FTHRRJ4" started.
2025-09-22 00:26:20.967 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 00:26:20.977 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 00:26:20.977 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3" completed keep alive response.
2025-09-22 00:26:20.979 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 131.8936ms
2025-09-22 00:26:20.983 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 00:26:20.985 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 00:26:20.986 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3" completed keep alive response.
2025-09-22 00:26:20.986 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.7112ms
2025-09-22 00:26:21.046 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 00:26:21.293 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3" completed keep alive response.
2025-09-22 00:26:21.294 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 247.4178ms
2025-09-22 00:26:52.439 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/auth/login - application/json 109
2025-09-22 00:26:52.451 +07:00 [DBG] POST requests are not supported
2025-09-22 00:26:52.452 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 00:26:52.453 +07:00 [DBG] POST requests are not supported
2025-09-22 00:26:52.454 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 00:26:52.455 +07:00 [INF] CORS policy execution successful.
2025-09-22 00:26:52.485 +07:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2025-09-22 00:26:52.486 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2025-09-22 00:26:52.487 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-09-22 00:26:52.513 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-22 00:26:52.520 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-09-22 00:26:52.534 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Entities.DTOs.Auth.LoginDTO) on controller CapBot.api.Controllers.AuthController (CapBot.api).
2025-09-22 00:26:52.535 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 00:26:52.535 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 00:26:52.536 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 00:26:52.536 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 00:26:52.536 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 00:26:52.537 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-09-22 00:26:52.540 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-09-22 00:26:52.543 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-09-22 00:26:52.544 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' using the name '' in request data ...
2025-09-22 00:26:52.545 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 00:26:52.545 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 00:26:52.545 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 00:26:52.545 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 00:26:52.552 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3", Request id "0HNFP6FTHRRJ3:00000004": started reading request body.
2025-09-22 00:26:52.552 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3", Request id "0HNFP6FTHRRJ3:00000004": done reading request body.
2025-09-22 00:26:52.557 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.Auth.LoginDTO'
2025-09-22 00:26:52.557 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-09-22 00:26:52.557 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-09-22 00:26:52.558 +07:00 [DBG] Attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-09-22 00:26:52.563 +07:00 [DBG] Done attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-09-22 00:26:52.614 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 00:26:52.615 +07:00 [DBG] Creating DbConnection.
2025-09-22 00:26:52.616 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 00:26:52.616 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:52.616 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:52.616 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:26:52.616 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:52.616 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:52.616 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:26:52.617 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:26:52.618 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:26:52.618 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:26:52.618 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:26:52.618 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:52.618 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:26:52.630 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .Join(
        inner: DbSet<Role>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-09-22 00:26:52.652 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Name
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 00:26:52.653 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:52.653 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:52.653 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:26:52.653 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:52.653 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:26:52.654 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-09-22 00:26:52.658 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-09-22 00:26:52.659 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:26:52.659 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:26:52.659 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:52.659 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:26:52.728 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 00:26:52.729 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 00:26:52.729 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 00:26:52.731 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 00:26:52.731 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 00:26:52.757 +07:00 [INF] Executed action CapBot.api.Controllers.AuthController.Login (CapBot.api) in 218.6017ms
2025-09-22 00:26:52.757 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-09-22 00:26:52.759 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3" completed keep alive response.
2025-09-22 00:26:52.759 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 00:26:52.759 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:26:52.759 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 00:26:52.760 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/auth/login - 200 null application/json; charset=utf-8 321.0671ms
2025-09-22 00:27:26.838 +07:00 [DBG] Connection id "0HNFP6FTHRRJ4" received FIN.
2025-09-22 00:27:26.838 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 00:27:26.838 +07:00 [DBG] POST requests are not supported
2025-09-22 00:27:26.838 +07:00 [DBG] POST requests are not supported
2025-09-22 00:27:26.839 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 00:27:26.839 +07:00 [DBG] Connection id "0HNFP6FTHRRJ4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 00:27:26.839 +07:00 [INF] CORS policy execution successful.
2025-09-22 00:27:26.841 +07:00 [DBG] Connection id "0HNFP6FTHRRJ4" disconnecting.
2025-09-22 00:27:26.842 +07:00 [DBG] Connection id "0HNFP6FTHRRJ4" stopped.
2025-09-22 00:27:26.844 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 00:27:26.844 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 00:27:26.846 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 00:27:26.880 +07:00 [DBG] Successfully validated the token.
2025-09-22 00:27:26.881 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 00:27:26.885 +07:00 [DBG] Authorization was successful.
2025-09-22 00:27:26.886 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 00:27:26.892 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 00:27:26.892 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 00:27:26.892 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 00:27:26.892 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 00:27:26.892 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 00:27:26.892 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 00:27:26.892 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 00:27:26.967 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 00:27:26.970 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 00:27:26.970 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 00:27:26.970 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 00:27:26.970 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 00:27:26.970 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 00:27:26.970 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 00:27:26.972 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3", Request id "0HNFP6FTHRRJ3:00000005": started reading request body.
2025-09-22 00:27:26.973 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3", Request id "0HNFP6FTHRRJ3:00000005": done reading request body.
2025-09-22 00:27:26.976 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 00:27:26.976 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 00:27:26.976 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 00:27:26.976 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 00:27:26.978 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 00:27:26.978 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 00:27:26.979 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 00:27:26.981 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 00:27:26.981 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 00:27:26.981 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 00:27:26.981 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 00:27:26.983 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 00:27:26.984 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T17:27:17.4990000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 00:27:26.998 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 00:27:27.004 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 00:27:27.012 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 00:27:27.038 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 00:27:27.039 +07:00 [DBG] Creating DbConnection.
2025-09-22 00:27:27.040 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 00:27:27.040 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:27:27.040 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:27:27.040 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:27:27.040 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:27:27.040 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:27:27.040 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 00:27:27.052 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 00:27:27.057 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:27:27.057 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-09-22 00:27:27.057 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:27:27.057 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:27:27.060 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 00:27:27.067 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 00:27:27.067 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 00:27:27.067 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 00:27:27.068 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 00:27:27.109 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 00:27:27.116 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 00:27:27.123 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:27:27.123 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:27:27.123 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:27:27.123 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:27:27.123 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:27:27.123 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 00:27:27.218 +07:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 00:27:27.222 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:27:27.223 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-09-22 00:27:27.223 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:27:27.223 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:27:27.238 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 00:27:27.239 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 00:27:27.239 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 00:27:27.239 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 00:27:32.769 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 599
2025-09-22 00:27:32.809 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 00:27:32.809 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 00:27:32.809 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 00:27:32.809 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 00:27:32.809 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 00:27:32.824 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5932.2462ms
2025-09-22 00:27:32.825 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 00:27:32.825 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3" completed keep alive response.
2025-09-22 00:27:32.825 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 00:27:32.825 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:27:32.825 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 00:27:32.826 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 5987.5178ms
2025-09-22 00:28:50.471 +07:00 [INF] Application is shutting down...
2025-09-22 00:28:50.473 +07:00 [DBG] Hosting stopping
2025-09-22 00:28:50.478 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3" disconnecting.
2025-09-22 00:28:50.478 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3" stopped.
2025-09-22 00:28:50.478 +07:00 [DBG] Connection id "0HNFP6FTHRRJ3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 00:28:50.481 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 00:28:50.483 +07:00 [DBG] Hosting stopped
2025-09-22 00:29:00.483 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 00:29:00.543 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 00:29:00.711 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.734 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.754 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.755 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.755 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.756 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.896 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.897 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.908 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.909 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.909 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.909 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.913 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.913 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 00:29:00.941 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 00:29:00.941 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 00:29:00.941 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 00:29:00.941 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 00:29:00.941 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 00:29:00.941 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 00:29:00.941 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 00:29:00.941 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 00:29:00.942 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 00:29:00.942 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 00:29:00.942 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 00:29:00.942 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 00:29:00.942 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 00:29:00.942 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 00:29:00.942 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 00:29:00.942 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 00:29:00.942 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 00:29:00.942 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 00:29:00.942 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 00:29:01.043 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:29:01.043 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:29:01.043 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:29:01.043 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:29:01.043 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:29:01.043 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:29:01.044 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:29:01.044 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:29:01.044 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:29:01.044 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:29:01.044 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 00:29:01.176 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 00:29:01.211 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 00:29:01.306 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 00:29:01.329 +07:00 [DBG] Creating DbConnection.
2025-09-22 00:29:01.340 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 00:29:01.343 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.436 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.438 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:29:01.442 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 00:29:01.449 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (11ms).
2025-09-22 00:29:01.453 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:29:01.482 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:29:01.509 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:29:01.522 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.526 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 41ms reading results.
2025-09-22 00:29:01.527 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.531 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 00:29:01.532 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.533 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.533 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:29:01.533 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.533 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.533 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:29:01.535 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:29:01.536 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:29:01.536 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.536 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:29:01.536 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.536 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:29:01.537 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.537 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.537 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:29:01.537 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.537 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.537 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:29:01.538 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:29:01.538 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:29:01.538 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.538 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:29:01.538 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.538 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:29:01.539 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.539 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.539 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:29:01.539 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.539 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.539 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:29:01.539 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 00:29:01.540 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:29:01.540 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.540 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:29:01.540 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.540 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:29:01.543 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 00:29:01.548 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 00:29:01.548 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.549 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.549 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:29:01.549 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.549 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.549 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:29:01.552 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:29:01.570 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:29:01.592 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.592 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 39ms reading results.
2025-09-22 00:29:01.592 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.592 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:29:01.594 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 00:29:01.595 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.596 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.596 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:29:01.596 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.596 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.596 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:29:01.597 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:29:01.597 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:29:01.597 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.597 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:29:01.597 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.597 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:29:01.597 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 00:29:01.598 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.598 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.598 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:29:01.598 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.598 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.598 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:29:01.599 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:29:01.599 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:29:01.599 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.599 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:29:01.600 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.600 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:29:01.600 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.600 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.600 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:29:01.600 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.600 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:01.600 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:29:01.601 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 00:29:01.601 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 00:29:01.601 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.601 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 00:29:01.601 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.601 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:29:01.601 +07:00 [INF] Data seeding completed successfully
2025-09-22 00:29:01.602 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 00:29:01.603 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:01.604 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 00:29:01.612 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 00:29:01.722 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 00:29:01.789 +07:00 [DBG] Hosting starting
2025-09-22 00:29:01.796 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 00:29:01.796 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 00:29:01.797 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 00:29:01.800 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 00:29:01.802 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 00:29:01.802 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 00:29:01.806 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 00:29:01.808 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 00:29:01.809 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 00:29:01.810 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 00:29:01.810 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 00:29:01.811 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 00:29:01.811 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 00:29:01.812 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 00:29:01.815 +07:00 [DBG] Middleware loaded
2025-09-22 00:29:01.816 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 00:29:01.816 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 00:29:01.837 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 00:29:01.844 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 00:29:01.845 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 00:29:01.845 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 00:29:01.845 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 00:29:01.845 +07:00 [INF] Hosting environment: Development
2025-09-22 00:29:01.845 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 00:29:01.846 +07:00 [DBG] Hosting started
2025-09-22 00:29:01.965 +07:00 [DBG] Connection id "0HNFP6HDIMACF" accepted.
2025-09-22 00:29:01.965 +07:00 [DBG] Connection id "0HNFP6HDIMACF" started.
2025-09-22 00:29:01.999 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 00:29:02.005 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 00:29:02.046 +07:00 [DBG] Connection id "0HNFP6HDIMACG" accepted.
2025-09-22 00:29:02.046 +07:00 [DBG] Connection id "0HNFP6HDIMACG" started.
2025-09-22 00:29:02.125 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 00:29:02.135 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 00:29:02.136 +07:00 [DBG] Connection id "0HNFP6HDIMACF" completed keep alive response.
2025-09-22 00:29:02.137 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 140.4966ms
2025-09-22 00:29:02.141 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 00:29:02.144 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 00:29:02.145 +07:00 [DBG] Connection id "0HNFP6HDIMACF" completed keep alive response.
2025-09-22 00:29:02.145 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.7325ms
2025-09-22 00:29:02.198 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 00:29:02.440 +07:00 [DBG] Connection id "0HNFP6HDIMACF" completed keep alive response.
2025-09-22 00:29:02.441 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 242.1451ms
2025-09-22 00:29:29.546 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-22 00:29:29.554 +07:00 [DBG] POST requests are not supported
2025-09-22 00:29:29.557 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 00:29:29.557 +07:00 [DBG] POST requests are not supported
2025-09-22 00:29:29.560 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 00:29:29.561 +07:00 [INF] CORS policy execution successful.
2025-09-22 00:29:29.654 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 00:29:29.656 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 00:29:29.660 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 00:29:29.777 +07:00 [DBG] Successfully validated the token.
2025-09-22 00:29:29.780 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 00:29:29.787 +07:00 [DBG] Authorization was successful.
2025-09-22 00:29:29.803 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 00:29:29.841 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 00:29:29.844 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 00:29:29.845 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 00:29:29.846 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 00:29:29.847 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 00:29:29.848 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 00:29:29.854 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 00:29:30.040 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 00:29:30.049 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 00:29:30.053 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 00:29:30.056 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 00:29:30.057 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 00:29:30.058 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 00:29:30.059 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 00:29:30.088 +07:00 [DBG] Connection id "0HNFP6HDIMACF", Request id "0HNFP6HDIMACF:00000004": started reading request body.
2025-09-22 00:29:30.091 +07:00 [DBG] Connection id "0HNFP6HDIMACF", Request id "0HNFP6HDIMACF:00000004": done reading request body.
2025-09-22 00:29:30.104 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 00:29:30.106 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 00:29:30.107 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 00:29:30.108 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 00:29:30.125 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 00:29:30.130 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 00:29:30.131 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 00:29:30.133 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 00:29:30.134 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 00:29:30.135 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 00:29:30.136 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 00:29:30.142 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 00:29:30.146 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1,"UsePrompt":true,"Deadline":"2025-09-21T17:29:12.4650000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 00:29:30.244 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 00:29:30.254 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 00:29:30.276 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 00:29:30.359 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 00:29:30.372 +07:00 [DBG] Creating DbConnection.
2025-09-22 00:29:30.373 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 00:29:30.373 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:30.374 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:30.375 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:29:30.376 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 00:29:30.377 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 00:29:30.381 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 00:29:30.396 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 00:29:30.412 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:29:30.415 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 18ms reading results.
2025-09-22 00:29:30.416 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:30.417 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:29:30.433 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 00:29:30.446 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 00:29:30.446 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 00:29:30.448 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 00:29:30.449 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 00:29:30.587 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 00:29:30.605 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 00:29:30.613 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:30.613 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:30.613 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 00:29:30.614 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:30.614 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 00:29:30.614 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 00:29:30.696 +07:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 00:29:30.709 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 00:29:30.710 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 12ms reading results.
2025-09-22 00:29:30.710 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:30.711 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 00:29:30.760 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 00:29:30.761 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 00:29:30.762 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 00:29:30.762 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 00:29:36.851 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 599
2025-09-22 00:29:36.870 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 00:29:36.874 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 00:29:36.875 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 00:29:36.879 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 00:29:36.881 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 00:29:37.000 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7145.4586ms
2025-09-22 00:29:37.003 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 00:29:37.007 +07:00 [DBG] Connection id "0HNFP6HDIMACF" completed keep alive response.
2025-09-22 00:29:37.008 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 00:29:37.009 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 00:29:37.010 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 00:29:37.014 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 7467.7985ms
2025-09-22 00:31:13.789 +07:00 [DBG] Connection id "0HNFP6HDIMACG" disconnecting.
2025-09-22 00:31:13.793 +07:00 [DBG] Connection id "0HNFP6HDIMACG" stopped.
2025-09-22 00:31:13.801 +07:00 [DBG] Connection id "0HNFP6HDIMACG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 00:31:47.087 +07:00 [DBG] Connection id "0HNFP6HDIMACF" disconnecting.
2025-09-22 00:31:47.087 +07:00 [DBG] Connection id "0HNFP6HDIMACF" stopped.
2025-09-22 00:31:47.087 +07:00 [DBG] Connection id "0HNFP6HDIMACF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 00:31:53.597 +07:00 [INF] Application is shutting down...
2025-09-22 00:31:53.599 +07:00 [DBG] Hosting stopping
2025-09-22 00:31:53.605 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 00:31:53.606 +07:00 [DBG] Hosting stopped
2025-09-22 01:07:06.963 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 01:07:07.023 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 01:07:07.176 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.190 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.202 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.203 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.203 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.203 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.344 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.345 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.360 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.360 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.360 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.361 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.367 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.367 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:07:07.399 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 01:07:07.400 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 01:07:07.400 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 01:07:07.400 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 01:07:07.400 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 01:07:07.400 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 01:07:07.401 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 01:07:07.402 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 01:07:07.501 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:07:07.502 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:07:07.502 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:07:07.502 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:07:07.502 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:07:07.502 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:07:07.502 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:07:07.502 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:07:07.502 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:07:07.503 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:07:07.503 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:07:07.607 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:07:07.645 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 01:07:07.742 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:07:07.764 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:07:07.776 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 01:07:07.779 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.867 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.869 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:07:07.873 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 01:07:07.877 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-22 01:07:07.882 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:07:07.917 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:07:07.944 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:07:07.958 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.962 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 41ms reading results.
2025-09-22 01:07:07.964 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.967 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 01:07:07.969 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.970 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.970 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:07:07.970 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:07.970 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:07.970 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:07:07.972 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:07:07.973 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:07:07.973 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.973 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:07:07.973 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.973 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:07:07.973 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.974 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.974 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:07:07.974 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:07.974 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:07.974 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:07:07.975 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:07:07.975 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:07:07.975 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.975 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:07:07.976 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.976 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:07:07.976 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.977 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.977 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:07:07.977 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:07.977 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:07.977 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:07:07.978 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:07:07.978 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:07:07.978 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.978 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:07:07.978 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.978 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:07:07.981 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 01:07:07.986 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:07:07.987 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.987 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:07.987 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:07:07.987 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:07.987 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:07.988 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:07:07.992 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:07:08.011 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:07:08.032 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.032 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 40ms reading results.
2025-09-22 01:07:08.032 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.032 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:07:08.035 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 01:07:08.036 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.036 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.037 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:07:08.037 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:08.037 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:08.037 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:07:08.038 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:07:08.038 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:07:08.038 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.039 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:07:08.039 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.039 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:07:08.039 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 01:07:08.040 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.040 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.040 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:07:08.040 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:08.040 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:08.040 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:07:08.041 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:07:08.041 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:07:08.041 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.041 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:07:08.041 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.041 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:07:08.042 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.042 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.042 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:07:08.042 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:08.042 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:08.042 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:07:08.043 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:07:08.043 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:07:08.043 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.043 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:07:08.043 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.044 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:07:08.044 +07:00 [INF] Data seeding completed successfully
2025-09-22 01:07:08.045 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:07:08.046 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:08.047 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:07:08.056 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 01:07:08.157 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 01:07:08.232 +07:00 [DBG] Hosting starting
2025-09-22 01:07:08.238 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 01:07:08.273 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 01:07:08.299 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 01:07:08.330 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 01:07:08.333 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 01:07:08.333 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 01:07:08.337 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 01:07:08.339 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 01:07:08.340 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 01:07:08.341 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 01:07:08.341 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 01:07:08.342 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 01:07:08.342 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 01:07:08.343 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 01:07:08.347 +07:00 [DBG] Middleware loaded
2025-09-22 01:07:08.347 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 01:07:08.348 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 01:07:08.369 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 01:07:08.377 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 01:07:08.378 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 01:07:08.378 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 01:07:08.378 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 01:07:08.378 +07:00 [INF] Hosting environment: Development
2025-09-22 01:07:08.378 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 01:07:08.380 +07:00 [DBG] Hosting started
2025-09-22 01:07:08.509 +07:00 [DBG] Connection id "0HNFP76N0S4R9" accepted.
2025-09-22 01:07:08.510 +07:00 [DBG] Connection id "0HNFP76N0S4R9" started.
2025-09-22 01:07:08.546 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 01:07:08.551 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 01:07:08.590 +07:00 [DBG] Connection id "0HNFP76N0S4RA" accepted.
2025-09-22 01:07:08.591 +07:00 [DBG] Connection id "0HNFP76N0S4RA" started.
2025-09-22 01:07:08.677 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 01:07:08.687 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 01:07:08.687 +07:00 [DBG] Connection id "0HNFP76N0S4R9" completed keep alive response.
2025-09-22 01:07:08.690 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 145.1133ms
2025-09-22 01:07:08.694 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 01:07:08.695 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 01:07:08.696 +07:00 [DBG] Connection id "0HNFP76N0S4R9" completed keep alive response.
2025-09-22 01:07:08.697 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.3003ms
2025-09-22 01:07:08.755 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 01:07:09.027 +07:00 [DBG] Connection id "0HNFP76N0S4R9" completed keep alive response.
2025-09-22 01:07:09.028 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 272.4232ms
2025-09-22 01:07:45.667 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 01:07:45.679 +07:00 [DBG] POST requests are not supported
2025-09-22 01:07:45.681 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 01:07:45.685 +07:00 [DBG] POST requests are not supported
2025-09-22 01:07:45.687 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:07:45.688 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:07:45.785 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:07:45.787 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:07:45.788 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:07:45.958 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:07:45.968 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:07:46.017 +07:00 [DBG] Authorization was successful.
2025-09-22 01:07:46.031 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:07:46.079 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:07:46.081 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:07:46.082 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:07:46.084 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:07:46.084 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:07:46.085 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:07:46.087 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:07:46.236 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:07:46.243 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:07:46.247 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:07:46.250 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:07:46.250 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:07:46.251 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:07:46.251 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:07:46.265 +07:00 [DBG] Connection id "0HNFP76N0S4R9", Request id "0HNFP76N0S4R9:00000004": started reading request body.
2025-09-22 01:07:46.266 +07:00 [DBG] Connection id "0HNFP76N0S4R9", Request id "0HNFP76N0S4R9:00000004": done reading request body.
2025-09-22 01:07:46.276 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:07:46.276 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:07:46.277 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:07:46.278 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:07:46.289 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:07:46.291 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:07:46.292 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:07:46.294 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:07:46.294 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:07:46.294 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:07:46.295 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:07:46.300 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:07:46.302 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:07:38.3530000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:07:46.387 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:07:46.398 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 01:07:46.418 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 01:07:46.508 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:07:46.517 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:07:46.517 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 01:07:46.518 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:46.518 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:46.518 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:07:46.519 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:46.519 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:46.520 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:07:46.531 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:07:46.544 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:07:46.545 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 12ms reading results.
2025-09-22 01:07:46.545 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:46.545 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:07:46.558 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 01:07:46.572 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 01:07:46.573 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 01:07:46.574 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 01:07:46.575 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 01:07:46.684 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 01:07:46.700 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 01:07:46.709 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:46.710 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:46.710 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:07:46.711 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:46.711 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:07:46.712 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:07:46.791 +07:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:07:46.805 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:07:46.805 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 14ms reading results.
2025-09-22 01:07:46.806 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:46.807 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:07:46.850 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:07:46.852 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:07:46.852 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:07:46.853 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:07:53.616 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:07:53.652 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:07:53.653 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:07:53.654 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:07:53.656 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:07:53.657 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:07:53.735 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7646.3104ms
2025-09-22 01:07:53.737 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:07:53.742 +07:00 [DBG] Connection id "0HNFP76N0S4R9" completed keep alive response.
2025-09-22 01:07:53.743 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:07:53.744 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:07:53.744 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-22 01:07:53.746 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 8081.0564ms
2025-09-22 01:09:20.452 +07:00 [DBG] Connection id "0HNFP76N0S4RA" disconnecting.
2025-09-22 01:09:20.455 +07:00 [DBG] Connection id "0HNFP76N0S4RA" stopped.
2025-09-22 01:09:20.457 +07:00 [DBG] Connection id "0HNFP76N0S4RA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 01:09:23.743 +07:00 [INF] Application is shutting down...
2025-09-22 01:09:23.745 +07:00 [DBG] Hosting stopping
2025-09-22 01:09:23.751 +07:00 [DBG] Connection id "0HNFP76N0S4R9" disconnecting.
2025-09-22 01:09:23.751 +07:00 [DBG] Connection id "0HNFP76N0S4R9" stopped.
2025-09-22 01:09:23.751 +07:00 [DBG] Connection id "0HNFP76N0S4R9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 01:09:23.756 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\CapBot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 01:09:23.784 +07:00 [DBG] Hosting stopped
2025-09-22 01:15:25.585 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 01:15:25.649 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 01:15:25.806 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:25.820 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:25.832 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:25.834 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:25.834 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:25.834 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:25.991 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:25.992 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:26.006 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:26.006 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:26.006 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:26.007 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:26.012 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:26.012 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:15:26.045 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 01:15:26.045 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 01:15:26.045 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 01:15:26.046 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 01:15:26.171 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:15:26.172 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:15:26.172 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:15:26.172 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:15:26.172 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:15:26.172 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:15:26.172 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:15:26.172 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:15:26.172 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:15:26.172 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:15:26.172 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:15:26.303 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:15:26.346 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 01:15:26.454 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:15:26.478 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:15:26.490 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 01:15:26.492 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.583 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.585 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:15:26.589 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 01:15:26.593 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 01:15:26.597 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:15:26.626 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:15:26.655 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:15:26.673 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.677 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 47ms reading results.
2025-09-22 01:15:26.678 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.682 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 01:15:26.684 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.684 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.685 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:15:26.685 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.685 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.685 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:15:26.687 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:15:26.687 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:15:26.687 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.687 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:15:26.687 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.687 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:15:26.688 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.688 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.688 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:15:26.688 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.688 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.688 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:15:26.689 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:15:26.690 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:15:26.690 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.690 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:15:26.690 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.690 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:15:26.691 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.691 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.691 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:15:26.691 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.691 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.691 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:15:26.692 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:15:26.692 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:15:26.692 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.692 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:15:26.692 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.692 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:15:26.695 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 01:15:26.700 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:15:26.701 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.701 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.701 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:15:26.701 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.701 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.701 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:15:26.705 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:15:26.724 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:15:26.744 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.744 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-22 01:15:26.744 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.745 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:15:26.747 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 01:15:26.748 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.749 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.749 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:15:26.749 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.749 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.749 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:15:26.750 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:15:26.750 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:15:26.750 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.750 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:15:26.750 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.750 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:15:26.750 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 01:15:26.751 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.751 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.751 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:15:26.751 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.751 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.751 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:15:26.752 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:15:26.753 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:15:26.753 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.753 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:15:26.753 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.753 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:15:26.753 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.753 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.754 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:15:26.754 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.754 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:26.754 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:15:26.754 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:15:26.755 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:15:26.755 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.755 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:15:26.755 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.755 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:15:26.755 +07:00 [INF] Data seeding completed successfully
2025-09-22 01:15:26.756 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:15:26.757 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:26.757 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:15:26.766 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 01:15:26.878 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 01:15:26.957 +07:00 [DBG] Hosting starting
2025-09-22 01:15:26.964 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 01:15:26.965 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 01:15:26.965 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 01:15:26.968 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 01:15:26.970 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 01:15:26.971 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 01:15:26.975 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 01:15:26.977 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 01:15:26.977 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 01:15:26.978 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 01:15:26.979 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 01:15:26.979 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 01:15:26.980 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 01:15:26.980 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 01:15:26.984 +07:00 [DBG] Middleware loaded
2025-09-22 01:15:26.985 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 01:15:26.985 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 01:15:27.008 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 01:15:27.017 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 01:15:27.017 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 01:15:27.017 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 01:15:27.017 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 01:15:27.017 +07:00 [INF] Hosting environment: Development
2025-09-22 01:15:27.017 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 01:15:27.018 +07:00 [DBG] Hosting started
2025-09-22 01:15:27.143 +07:00 [DBG] Connection id "0HNFP7BBK745T" accepted.
2025-09-22 01:15:27.143 +07:00 [DBG] Connection id "0HNFP7BBK745T" started.
2025-09-22 01:15:27.180 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 01:15:27.186 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 01:15:27.225 +07:00 [DBG] Connection id "0HNFP7BBK745U" accepted.
2025-09-22 01:15:27.225 +07:00 [DBG] Connection id "0HNFP7BBK745U" started.
2025-09-22 01:15:27.321 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 01:15:27.332 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 01:15:27.332 +07:00 [DBG] Connection id "0HNFP7BBK745T" completed keep alive response.
2025-09-22 01:15:27.335 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 156.9615ms
2025-09-22 01:15:27.341 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 01:15:27.344 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 01:15:27.344 +07:00 [DBG] Connection id "0HNFP7BBK745T" completed keep alive response.
2025-09-22 01:15:27.345 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 4.6263ms
2025-09-22 01:15:27.400 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 01:15:27.679 +07:00 [DBG] Connection id "0HNFP7BBK745T" completed keep alive response.
2025-09-22 01:15:27.679 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 279.1907ms
2025-09-22 01:15:43.825 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 01:15:43.827 +07:00 [DBG] POST requests are not supported
2025-09-22 01:15:43.830 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 01:15:43.830 +07:00 [DBG] POST requests are not supported
2025-09-22 01:15:43.834 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:15:43.835 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:15:43.918 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:15:43.919 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:15:43.922 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:15:44.065 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:15:44.069 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:15:44.081 +07:00 [DBG] Authorization was successful.
2025-09-22 01:15:44.096 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:15:44.127 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:15:44.130 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:15:44.131 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:15:44.133 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:15:44.133 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:15:44.135 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:15:44.142 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:15:44.403 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:15:44.412 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:15:44.418 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:15:44.424 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:15:44.426 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:15:44.427 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:15:44.430 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:15:44.462 +07:00 [DBG] Connection id "0HNFP7BBK745T", Request id "0HNFP7BBK745T:00000004": started reading request body.
2025-09-22 01:15:44.463 +07:00 [DBG] Connection id "0HNFP7BBK745T", Request id "0HNFP7BBK745T:00000004": done reading request body.
2025-09-22 01:15:44.477 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:15:44.478 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:15:44.479 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:15:44.480 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:15:44.496 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:15:44.498 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:15:44.500 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:15:44.502 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:15:44.502 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:15:44.503 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:15:44.504 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:15:44.510 +07:00 [INF] Processing AI suggestion for SubmissionId: 0
2025-09-22 01:15:44.514 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":0,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:15:39.9880000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:15:44.612 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:15:44.631 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 01:15:44.658 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 01:15:44.779 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:15:44.798 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:15:44.799 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 01:15:44.800 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:44.801 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:44.801 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:15:44.801 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:15:44.803 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 01:15:44.805 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:15:44.817 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:15:44.819 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:15:44.821 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 01:15:44.823 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:44.826 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 01:15:44.847 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:15:44.852 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:15:44.853 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:15:44.856 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:15:44.857 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:15:44.910 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 771.013ms
2025-09-22 01:15:44.912 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:15:44.916 +07:00 [DBG] Connection id "0HNFP7BBK745T" completed keep alive response.
2025-09-22 01:15:44.916 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:15:44.917 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:15:44.917 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:15:44.920 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 404 null application/json; charset=utf-8 1095.3578ms
2025-09-22 01:16:26.514 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 01:16:26.514 +07:00 [DBG] POST requests are not supported
2025-09-22 01:16:26.515 +07:00 [DBG] POST requests are not supported
2025-09-22 01:16:26.516 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:16:26.516 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:16:26.529 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:16:26.529 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:16:26.531 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:16:26.538 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:16:26.539 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:16:26.546 +07:00 [DBG] Authorization was successful.
2025-09-22 01:16:26.549 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:16:26.550 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:16:26.554 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:16:26.555 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:16:26.555 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:16:26.556 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:16:26.556 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:16:26.557 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:16:26.562 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:16:26.563 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:16:26.564 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:16:26.565 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:16:26.566 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:16:26.566 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:16:26.567 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:16:26.569 +07:00 [DBG] Connection id "0HNFP7BBK745T", Request id "0HNFP7BBK745T:00000005": started reading request body.
2025-09-22 01:16:26.569 +07:00 [DBG] Connection id "0HNFP7BBK745T", Request id "0HNFP7BBK745T:00000005": done reading request body.
2025-09-22 01:16:26.570 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:16:26.570 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:16:26.570 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:16:26.571 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:16:26.573 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:16:26.574 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:16:26.574 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:16:26.575 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:16:26.575 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:16:26.575 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:16:26.575 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:16:26.576 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:16:26.577 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:15:39.9880000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:16:26.601 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:16:26.604 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:16:26.605 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 01:16:26.605 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:16:26.605 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:16:26.606 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:16:26.606 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:16:26.608 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 01:16:26.610 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:16:26.625 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:16:26.632 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:16:26.633 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 7ms reading results.
2025-09-22 01:16:26.633 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:16:26.635 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:16:26.645 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 01:16:26.667 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 01:16:26.667 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 01:16:26.670 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 01:16:26.671 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 01:16:26.796 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 01:16:26.818 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 01:16:26.860 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:16:26.860 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:16:26.861 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:16:26.861 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:16:26.861 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:16:26.861 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:16:26.940 +07:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:16:26.951 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:16:26.951 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 9ms reading results.
2025-09-22 01:16:26.951 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:16:26.952 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:16:26.992 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:16:26.993 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:16:26.993 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:16:26.994 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:16:33.775 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:16:33.821 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:16:33.822 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:16:33.823 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:16:33.824 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:16:33.825 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:16:33.895 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7338.5084ms
2025-09-22 01:16:33.896 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:16:33.899 +07:00 [DBG] Connection id "0HNFP7BBK745T" completed keep alive response.
2025-09-22 01:16:33.899 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:16:33.899 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:16:33.900 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:16:33.900 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 7386.1208ms
2025-09-22 01:17:38.476 +07:00 [DBG] Connection id "0HNFP7BBK745U" disconnecting.
2025-09-22 01:17:38.480 +07:00 [DBG] Connection id "0HNFP7BBK745U" stopped.
2025-09-22 01:17:38.483 +07:00 [DBG] Connection id "0HNFP7BBK745U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 01:18:45.166 +07:00 [DBG] Connection id "0HNFP7BBK745T" disconnecting.
2025-09-22 01:18:45.166 +07:00 [DBG] Connection id "0HNFP7BBK745T" stopped.
2025-09-22 01:18:45.166 +07:00 [DBG] Connection id "0HNFP7BBK745T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 01:19:51.353 +07:00 [DBG] Connection id "0HNFP7BBK745V" accepted.
2025-09-22 01:19:51.353 +07:00 [DBG] Connection id "0HNFP7BBK745V" started.
2025-09-22 01:19:51.353 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:19:51.353 +07:00 [DBG] POST requests are not supported
2025-09-22 01:19:51.353 +07:00 [DBG] POST requests are not supported
2025-09-22 01:19:51.356 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:19:51.356 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:19:51.356 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:19:51.356 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:19:51.356 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:19:51.360 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:19:51.360 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:19:51.364 +07:00 [DBG] Authorization was successful.
2025-09-22 01:19:51.364 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:19:51.365 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:19:51.365 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:19:51.365 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:19:51.365 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:19:51.365 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:19:51.365 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:19:51.365 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:19:51.384 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:19:51.385 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:19:51.385 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:19:51.386 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:19:51.386 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:19:51.386 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:19:51.386 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:19:51.386 +07:00 [DBG] Connection id "0HNFP7BBK745V", Request id "0HNFP7BBK745V:00000001": started reading request body.
2025-09-22 01:19:51.386 +07:00 [DBG] Connection id "0HNFP7BBK745V", Request id "0HNFP7BBK745V:00000001": done reading request body.
2025-09-22 01:19:51.386 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:19:51.386 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:19:51.386 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:19:51.387 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:19:51.387 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:19:51.387 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:19:51.387 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:19:51.387 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:19:51.387 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:19:51.387 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:19:51.388 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:19:51.388 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:19:51.388 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:15:39.9880000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:19:51.393 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:19:51.394 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:19:51.394 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 01:19:51.394 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:51.394 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:51.395 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:51.395 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:51.395 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:51.395 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:19:51.406 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:19:51.407 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:51.407 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:51.407 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:51.408 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:51.410 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:51.411 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:51.412 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:51.412 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:51.412 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:51.412 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:19:51.508 +07:00 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:19:51.512 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:51.512 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 01:19:51.512 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:51.513 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:51.517 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:19:51.518 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:19:51.518 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:19:51.518 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:19:57.456 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:19:57.489 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 01:19:57.503 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:19:57.504 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.505 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.505 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:57.505 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:57.505 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:57.505 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:19:57.513 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:19:57.516 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.516 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:57.517 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.517 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:57.521 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 01:19:57.523 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 01:19:57.545 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:19:57.546 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.547 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.547 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:57.547 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:57.547 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:57.547 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:19:57.554 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:19:57.556 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.556 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:57.556 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.557 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:57.561 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 01:19:57.562 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 01:19:57.571 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 01:19:57.572 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.572 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.572 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:57.573 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:57.573 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:57.573 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:19:57.579 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:19:57.579 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.579 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:57.579 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.580 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:57.582 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 01:19:57.588 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:19:57.592 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.593 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.593 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:57.593 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:57.593 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:57.594 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:19:57.601 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:19:57.602 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.602 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:57.602 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.602 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:57.606 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 01:19:57.622 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 01:19:57.631 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.631 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.633 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:57.634 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 01:19:57.634 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 01:19:57.634 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:19:57.638 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:19:57.640 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.641 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 01:19:57.641 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.642 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:57.691 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:57.796 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:57.808 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 01:19:57.813 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 01:19:57.857 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 01:19:57.976 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.977 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:57.984 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:57.984 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:57.994 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-22 01:19:57.995 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:19:58.019 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:19:58.057 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 01:19:58.067 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.068 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 48ms reading results.
2025-09-22 01:19:58.070 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.070 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.093 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:58.096 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 01:19:58.098 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 01:19:58.100 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 01:19:58.102 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 01:19:58.105 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 01:19:58.106 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 01:19:58.107 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 01:19:58.148 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:19:58.151 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.151 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.151 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.151 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.152 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.152 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:19:58.182 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:19:58.185 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.185 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 01:19:58.185 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.186 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.207 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 180
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 316
2025-09-22 01:19:58.237 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.237 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.237 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.237 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.237 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.238 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:19:58.239 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:19:58.239 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.239 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.239 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.239 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.240 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.240 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.240 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.241 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.241 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.241 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:19:58.243 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:19:58.244 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.244 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.244 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.244 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.245 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.245 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.245 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.245 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.245 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.245 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:19:58.247 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:19:58.247 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.247 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.247 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.248 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.248 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.249 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.249 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.249 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.250 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 01:19:58.252 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:19:58.254 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:19:58.254 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.254 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.255 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.255 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.255 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.255 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.256 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.256 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.256 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.256 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:19:58.261 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:19:58.261 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.261 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.261 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.262 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.263 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:58.263 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:58.264 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 01:19:58.264 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 01:19:58.267 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 01:19:58.268 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.268 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.268 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.268 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.269 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.269 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:19:58.272 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:19:58.273 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 01:19:58.273 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.273 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.273 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.273 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.274 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:58.274 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 01:19:58.275 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.275 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.275 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.275 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.275 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.275 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:19:58.278 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:19:58.278 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.279 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.279 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.279 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.280 +07:00 [ERR] Error assigning reviewer 10
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 180
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 316
2025-09-22 01:19:58.298 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.298 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.300 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.300 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.300 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.300 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:19:58.301 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:19:58.302 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.302 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.302 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.302 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.302 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.303 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.303 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.303 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.303 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.303 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:19:58.305 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:19:58.305 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.305 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.305 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.306 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.308 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.309 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.310 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.310 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.310 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.310 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:19:58.312 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:19:58.313 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.313 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.313 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.313 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.314 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.314 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.314 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.315 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.315 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.315 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:19:58.317 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:19:58.317 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.317 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.317 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.317 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.318 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.318 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.318 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.318 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.318 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.318 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:19:58.321 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:19:58.321 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.321 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.321 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.321 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.322 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:58.322 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:58.322 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 01:19:58.322 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 01:19:58.322 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 01:19:58.323 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.323 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.323 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.323 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.323 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.323 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:19:58.328 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:19:58.328 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 01:19:58.328 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.328 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.328 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.328 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.329 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:58.329 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 01:19:58.329 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.329 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.330 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.330 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.330 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.330 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:19:58.334 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:19:58.335 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.335 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.335 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.335 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.336 +07:00 [ERR] Error assigning reviewer 11
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 180
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 316
2025-09-22 01:19:58.337 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.337 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.337 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.338 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.338 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.338 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:19:58.341 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:19:58.341 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.341 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.341 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.341 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.342 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.342 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.342 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.342 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.342 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.343 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:19:58.344 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:19:58.345 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.345 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.346 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.346 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.346 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.347 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.348 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.348 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.348 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.348 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:19:58.349 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:19:58.350 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.350 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.350 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.350 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.350 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.351 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.351 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.351 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.351 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.351 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:19:58.352 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:19:58.353 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.353 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.353 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.353 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.354 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.354 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.355 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.355 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.355 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.355 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:19:58.361 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:19:58.362 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.362 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.362 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.362 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.363 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:58.385 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:58.385 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 01:19:58.385 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 01:19:58.385 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 01:19:58.386 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.386 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.386 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.386 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.386 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.386 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:19:58.396 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:19:58.396 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 01:19:58.397 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.397 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.397 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.397 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.397 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:19:58.397 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 01:19:58.398 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.399 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.399 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:19:58.399 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.399 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:19:58.399 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:19:58.401 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:19:58.402 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.402 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:19:58.402 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.402 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:19:58.403 +07:00 [ERR] Error assigning reviewer 9
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 180
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 316
2025-09-22 01:19:58.405 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:19:58.406 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:19:58.406 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:19:58.406 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:19:58.406 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:19:58.407 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7041.43ms
2025-09-22 01:19:58.407 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:19:58.407 +07:00 [DBG] Connection id "0HNFP7BBK745V" completed keep alive response.
2025-09-22 01:19:58.407 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:19:58.407 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:19:58.407 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:19:58.407 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 7054.0129ms
2025-09-22 01:22:04.712 +07:00 [DBG] Connection id "0HNFP7BBK745V" received FIN.
2025-09-22 01:22:04.712 +07:00 [DBG] Connection id "0HNFP7BBK745V" disconnecting.
2025-09-22 01:22:04.712 +07:00 [DBG] Connection id "0HNFP7BBK745V" stopped.
2025-09-22 01:22:04.712 +07:00 [DBG] Connection id "0HNFP7BBK745V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 01:22:08.882 +07:00 [INF] Application is shutting down...
2025-09-22 01:22:08.886 +07:00 [DBG] Hosting stopping
2025-09-22 01:22:08.894 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 01:22:08.897 +07:00 [DBG] Hosting stopped
2025-09-22 01:27:32.507 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 01:27:32.566 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 01:27:32.718 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.733 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.742 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.744 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.745 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.745 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.913 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.914 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.927 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.928 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.928 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.928 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.932 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.932 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:27:32.962 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 01:27:32.962 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 01:27:32.962 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 01:27:32.962 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 01:27:32.963 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 01:27:33.067 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:27:33.067 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:27:33.067 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:27:33.067 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:27:33.067 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:27:33.067 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:27:33.067 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:27:33.067 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:27:33.067 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:27:33.068 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:27:33.068 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:27:33.178 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:27:33.222 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 01:27:33.331 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:27:33.355 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:27:33.366 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 01:27:33.368 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.463 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.465 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:27:33.468 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 01:27:33.473 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 01:27:33.477 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:27:33.507 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:27:33.532 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:27:33.546 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.551 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 41ms reading results.
2025-09-22 01:27:33.553 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.556 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 01:27:33.558 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.558 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.558 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:27:33.558 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.558 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.558 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:27:33.560 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:27:33.561 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:27:33.561 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.561 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:27:33.561 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.561 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:27:33.562 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.562 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.562 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:27:33.562 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.562 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.563 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:27:33.564 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:27:33.564 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:27:33.564 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.564 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:27:33.564 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.564 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:27:33.564 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.565 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.565 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:27:33.565 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.565 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.565 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:27:33.565 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:27:33.565 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:27:33.566 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.566 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:27:33.566 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.566 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:27:33.569 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 01:27:33.574 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:27:33.574 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.575 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.575 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:27:33.575 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.575 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.575 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:27:33.578 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:27:33.594 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:27:33.616 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.616 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-22 01:27:33.616 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.616 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:27:33.618 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 01:27:33.620 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.620 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.620 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:27:33.620 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.620 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.620 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:27:33.621 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:27:33.621 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:27:33.622 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.622 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:27:33.622 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.622 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:27:33.622 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 01:27:33.622 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.622 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.622 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:27:33.622 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.622 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.622 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:27:33.623 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:27:33.623 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:27:33.624 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.624 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:27:33.624 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.624 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:27:33.625 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.625 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.625 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:27:33.625 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.626 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:33.626 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:27:33.626 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:27:33.627 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:27:33.627 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.627 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:27:33.627 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.627 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:27:33.627 +07:00 [INF] Data seeding completed successfully
2025-09-22 01:27:33.628 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:27:33.629 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:33.630 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:27:33.639 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 01:27:33.760 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 01:27:33.890 +07:00 [DBG] Hosting starting
2025-09-22 01:27:33.899 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 01:27:33.900 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 01:27:33.900 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 01:27:33.903 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 01:27:33.905 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 01:27:33.905 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 01:27:33.909 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 01:27:33.912 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 01:27:33.912 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 01:27:33.914 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 01:27:33.915 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 01:27:33.916 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 01:27:33.917 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 01:27:33.918 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 01:27:33.923 +07:00 [DBG] Middleware loaded
2025-09-22 01:27:33.925 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 01:27:33.926 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 01:27:33.963 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 01:27:33.975 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 01:27:33.975 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 01:27:33.975 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 01:27:33.975 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 01:27:33.975 +07:00 [INF] Hosting environment: Development
2025-09-22 01:27:33.975 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 01:27:33.976 +07:00 [DBG] Hosting started
2025-09-22 01:27:34.093 +07:00 [DBG] Connection id "0HNFP7I48ULNG" accepted.
2025-09-22 01:27:34.093 +07:00 [DBG] Connection id "0HNFP7I48ULNG" started.
2025-09-22 01:27:34.124 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 01:27:34.134 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 01:27:34.170 +07:00 [DBG] Connection id "0HNFP7I48ULNH" accepted.
2025-09-22 01:27:34.170 +07:00 [DBG] Connection id "0HNFP7I48ULNH" started.
2025-09-22 01:27:34.266 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 01:27:34.275 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 01:27:34.275 +07:00 [DBG] Connection id "0HNFP7I48ULNG" completed keep alive response.
2025-09-22 01:27:34.278 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 155.9843ms
2025-09-22 01:27:34.286 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 01:27:34.288 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 01:27:34.289 +07:00 [DBG] Connection id "0HNFP7I48ULNG" completed keep alive response.
2025-09-22 01:27:34.289 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.1273ms
2025-09-22 01:27:34.338 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 01:27:34.584 +07:00 [DBG] Connection id "0HNFP7I48ULNG" completed keep alive response.
2025-09-22 01:27:34.584 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 246.0671ms
2025-09-22 01:27:51.204 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 01:27:51.207 +07:00 [DBG] POST requests are not supported
2025-09-22 01:27:51.210 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 01:27:51.210 +07:00 [DBG] POST requests are not supported
2025-09-22 01:27:51.211 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:27:51.212 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:27:51.295 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:27:51.297 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:27:51.301 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:27:51.440 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:27:51.443 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:27:51.457 +07:00 [DBG] Authorization was successful.
2025-09-22 01:27:51.478 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:27:51.514 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:27:51.517 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:27:51.517 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:27:51.522 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:27:51.522 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:27:51.523 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:27:51.526 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:27:51.753 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:27:51.761 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:27:51.766 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:27:51.769 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:27:51.770 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:27:51.772 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:27:51.775 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:27:51.801 +07:00 [DBG] Connection id "0HNFP7I48ULNG", Request id "0HNFP7I48ULNG:00000004": started reading request body.
2025-09-22 01:27:51.802 +07:00 [DBG] Connection id "0HNFP7I48ULNG", Request id "0HNFP7I48ULNG:00000004": done reading request body.
2025-09-22 01:27:51.817 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:27:51.818 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:27:51.819 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:27:51.820 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:27:51.836 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:27:51.838 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:27:51.840 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:27:51.842 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:27:51.843 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:27:51.844 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:27:51.845 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:27:51.849 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:27:51.852 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:27:45.7130000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:27:51.955 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:27:51.976 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 01:27:52.001 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 01:27:52.106 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:27:52.120 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:27:52.121 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 01:27:52.121 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:52.122 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:52.122 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:27:52.122 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:52.123 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:52.125 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:27:52.135 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:27:52.142 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:27:52.143 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 7ms reading results.
2025-09-22 01:27:52.143 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:52.145 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 01:27:52.154 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 01:27:52.169 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 01:27:52.170 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 01:27:52.171 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 01:27:52.172 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 01:27:52.280 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 01:27:52.298 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 01:27:52.306 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:52.307 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:52.307 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:27:52.307 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:52.307 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:27:52.307 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:27:52.402 +07:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:27:52.424 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:27:52.425 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 22ms reading results.
2025-09-22 01:27:52.428 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:52.430 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 01:27:52.489 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:27:52.491 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:27:52.493 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:27:52.493 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:27:58.236 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:27:58.302 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:27:58.307 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:27:58.310 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:27:58.316 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:27:58.317 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:27:58.415 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6887.2313ms
2025-09-22 01:27:58.417 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:27:58.421 +07:00 [DBG] Connection id "0HNFP7I48ULNG" completed keep alive response.
2025-09-22 01:27:58.422 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:27:58.424 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:27:58.425 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-22 01:27:58.428 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 7223.3142ms
2025-09-22 01:29:23.793 +07:00 [DBG] Connection id "0HNFP7I48ULNH" received FIN.
2025-09-22 01:29:23.793 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:29:23.793 +07:00 [DBG] POST requests are not supported
2025-09-22 01:29:23.793 +07:00 [DBG] POST requests are not supported
2025-09-22 01:29:23.794 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:29:23.794 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:29:23.802 +07:00 [DBG] Connection id "0HNFP7I48ULNH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 01:29:23.803 +07:00 [DBG] Connection id "0HNFP7I48ULNH" disconnecting.
2025-09-22 01:29:23.806 +07:00 [DBG] Connection id "0HNFP7I48ULNH" stopped.
2025-09-22 01:29:23.818 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:29:23.819 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:29:23.819 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:29:23.826 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:29:23.826 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:29:23.834 +07:00 [DBG] Authorization was successful.
2025-09-22 01:29:23.835 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:29:23.837 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:29:23.839 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:29:23.842 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:29:23.843 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:29:23.844 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:29:23.847 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:29:23.848 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:29:23.854 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:29:23.855 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:29:23.856 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:29:23.856 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:29:23.856 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:29:23.856 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:29:23.856 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:29:23.857 +07:00 [DBG] Connection id "0HNFP7I48ULNG", Request id "0HNFP7I48ULNG:00000005": started reading request body.
2025-09-22 01:29:23.858 +07:00 [DBG] Connection id "0HNFP7I48ULNG", Request id "0HNFP7I48ULNG:00000005": done reading request body.
2025-09-22 01:29:23.859 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:29:23.860 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:29:23.861 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:29:23.861 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:29:23.863 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:29:23.863 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:29:23.863 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:29:23.864 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:29:23.864 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:29:23.864 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:29:23.865 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:29:23.867 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:29:23.869 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:27:45.7130000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:29:23.891 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:29:23.903 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:29:23.905 +07:00 [DBG] Created DbConnection. (2ms).
2025-09-22 01:29:23.905 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:29:23.906 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:29:23.906 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:29:23.909 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (3ms).
2025-09-22 01:29:23.909 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-22 01:29:23.910 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:29:23.923 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:29:23.925 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:29:23.926 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:29:23.926 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:29:23.926 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:29:23.930 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:29:23.930 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:29:23.930 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:29:23.930 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:29:23.930 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:29:23.931 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:29:24.012 +07:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:29:24.016 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:29:24.017 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-09-22 01:29:24.018 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:29:24.018 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:29:24.023 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:29:24.025 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:29:24.027 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:29:24.030 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:29:30.795 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:29:30.841 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:29:30.842 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:29:30.847 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:29:30.849 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:29:30.849 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:29:30.853 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7005.9108ms
2025-09-22 01:29:30.854 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:29:30.860 +07:00 [DBG] Connection id "0HNFP7I48ULNG" completed keep alive response.
2025-09-22 01:29:30.860 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:29:30.860 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:29:30.860 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:29:30.860 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 7066.9721ms
2025-09-22 01:31:12.691 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:31:12.691 +07:00 [DBG] POST requests are not supported
2025-09-22 01:31:12.691 +07:00 [DBG] POST requests are not supported
2025-09-22 01:31:12.692 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:31:12.692 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:31:12.692 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:31:12.692 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:31:12.692 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:31:12.695 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:31:12.695 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:31:12.699 +07:00 [DBG] Authorization was successful.
2025-09-22 01:31:12.699 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:31:12.700 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:31:12.700 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:31:12.700 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:31:12.700 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:31:12.700 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:31:12.700 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:31:12.700 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:31:12.729 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:31:12.730 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:31:12.733 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:31:12.736 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:31:12.736 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:31:12.736 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:31:12.737 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:31:12.737 +07:00 [DBG] Connection id "0HNFP7I48ULNG", Request id "0HNFP7I48ULNG:00000006": started reading request body.
2025-09-22 01:31:12.737 +07:00 [DBG] Connection id "0HNFP7I48ULNG", Request id "0HNFP7I48ULNG:00000006": done reading request body.
2025-09-22 01:31:12.737 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:31:12.738 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:31:12.741 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:31:12.741 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:31:12.742 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:31:12.742 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:31:12.742 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:31:12.742 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:31:12.742 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:31:12.742 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:31:12.742 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:31:12.742 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:31:12.743 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:27:45.7130000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:31:12.750 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:31:12.751 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:31:12.751 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 01:31:12.751 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:12.751 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:12.751 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:31:12.751 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:31:12.751 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:31:12.752 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:31:12.762 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:31:12.763 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:31:12.763 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:31:12.763 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:12.763 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:31:12.765 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:12.765 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:12.765 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:31:12.766 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:31:12.769 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-22 01:31:12.769 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:31:12.868 +07:00 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:31:12.871 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:31:12.873 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-09-22 01:31:12.873 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:12.873 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:31:12.876 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:31:12.880 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:31:12.881 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:31:12.881 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:31:19.594 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:31:19.598 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:31:19.599 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:31:19.599 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:31:19.601 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:31:19.601 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:31:19.602 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6901.5238ms
2025-09-22 01:31:19.602 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:31:19.603 +07:00 [DBG] Connection id "0HNFP7I48ULNG" completed keep alive response.
2025-09-22 01:31:19.604 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:31:19.605 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:19.606 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:31:19.606 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 6915.0786ms
2025-09-22 01:31:56.456 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:31:56.456 +07:00 [DBG] POST requests are not supported
2025-09-22 01:31:56.456 +07:00 [DBG] POST requests are not supported
2025-09-22 01:31:56.456 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:31:56.456 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:31:56.456 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:31:56.457 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:31:56.457 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:31:56.462 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:31:56.463 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:31:56.464 +07:00 [DBG] Authorization was successful.
2025-09-22 01:31:56.464 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:31:56.464 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:31:56.464 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:31:56.464 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:31:56.464 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:31:56.464 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:31:56.465 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:31:56.466 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:31:56.469 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:31:56.469 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:31:56.469 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:31:56.469 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:31:56.469 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:31:56.469 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:31:56.469 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:31:56.469 +07:00 [DBG] Connection id "0HNFP7I48ULNG", Request id "0HNFP7I48ULNG:00000007": started reading request body.
2025-09-22 01:31:56.469 +07:00 [DBG] Connection id "0HNFP7I48ULNG", Request id "0HNFP7I48ULNG:00000007": done reading request body.
2025-09-22 01:31:56.470 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:31:56.470 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:31:56.470 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:31:56.470 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:31:56.470 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:31:56.470 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:31:56.470 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:31:56.470 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:31:56.470 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:31:56.470 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:31:56.470 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:31:56.471 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:31:56.471 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-22T18:27:45.7130000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:31:56.474 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:31:56.476 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:31:56.476 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 01:31:56.477 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:56.477 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:56.477 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:31:56.477 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:31:56.477 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:31:56.477 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:31:56.487 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:31:56.487 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:31:56.490 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 01:31:56.490 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:56.491 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:31:56.492 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:56.492 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:56.492 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:31:56.492 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:31:56.495 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:31:56.496 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:31:56.575 +07:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:31:56.577 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:31:56.577 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 01:31:56.579 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:31:56.580 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:31:56.580 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:31:56.580 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:31:56.581 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:31:56.581 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:32:02.633 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:32:02.634 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 01:32:02.648 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:32:02.648 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.649 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.649 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:02.649 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:02.649 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:02.649 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:32:02.654 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:32:02.655 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.655 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:02.656 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.656 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:02.657 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 01:32:02.658 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 01:32:02.685 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:32:02.686 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.686 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.686 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:02.686 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:02.686 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:02.687 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:32:02.694 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:32:02.698 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.698 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 01:32:02.698 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.698 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:02.705 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 01:32:02.707 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 01:32:02.721 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 01:32:02.724 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.724 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.724 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:02.724 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:02.724 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:02.724 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:32:02.729 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:32:02.730 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.730 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 01:32:02.730 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.731 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:02.733 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 01:32:02.740 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:32:02.744 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.744 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.744 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:02.744 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:02.745 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:02.745 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:32:02.749 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:32:02.751 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.751 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 01:32:02.751 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.751 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:02.753 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 01:32:02.772 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 01:32:02.780 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.780 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.780 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:02.780 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:02.781 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:02.781 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:32:02.786 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:32:02.786 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.787 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:02.787 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:02.787 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:02.831 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:02.908 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:02.916 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 01:32:02.922 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 01:32:02.980 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 01:32:03.127 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.127 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.133 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.133 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.139 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-09-22 01:32:03.139 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:32:03.154 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:32:03.178 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 01:32:03.195 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.195 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 40ms reading results.
2025-09-22 01:32:03.197 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.197 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.218 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:03.221 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 01:32:03.225 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 01:32:03.231 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 01:32:03.232 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 01:32:03.233 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 01:32:03.237 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 01:32:03.239 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 01:32:03.287 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:32:03.290 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.291 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.292 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.292 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.292 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.292 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:32:03.310 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:32:03.313 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.313 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-09-22 01:32:03.313 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.314 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.333 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 316
2025-09-22 01:32:03.357 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.357 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.357 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.357 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.357 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.357 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:32:03.359 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:32:03.359 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.359 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.359 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.359 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.361 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.361 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.362 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.362 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.362 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.362 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:32:03.363 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:32:03.364 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.364 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.364 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.364 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.365 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.365 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.365 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.365 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.365 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.365 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:32:03.368 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:32:03.369 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.369 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.369 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.369 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.370 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.370 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.372 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.372 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.372 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.372 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:32:03.373 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:32:03.374 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.374 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.375 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.375 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.375 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.375 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.377 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.377 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.377 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.377 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:32:03.382 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:32:03.382 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.382 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.383 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.383 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.384 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:03.385 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:03.385 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 01:32:03.385 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 01:32:03.389 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 01:32:03.391 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.391 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.392 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.392 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.392 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.392 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:32:03.396 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:32:03.397 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 01:32:03.397 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.397 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.397 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.398 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.398 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:03.399 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 01:32:03.400 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.400 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.400 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.400 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.400 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.400 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:32:03.404 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:32:03.405 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.405 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.405 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.405 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.406 +07:00 [ERR] Error assigning reviewer 10
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 316
2025-09-22 01:32:03.409 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.409 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.410 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.410 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.410 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.410 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:32:03.411 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:32:03.412 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.412 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.412 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.412 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.413 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.413 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.413 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.413 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.413 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.413 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:32:03.417 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:32:03.417 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.417 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.417 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.418 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.420 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.421 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.421 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.421 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.421 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.421 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:32:03.426 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:32:03.426 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.426 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.426 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.426 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.427 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.427 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.427 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.427 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.427 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.427 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:32:03.428 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:32:03.428 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.429 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.429 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.430 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.431 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.431 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.432 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.432 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.432 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.432 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:32:03.433 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:32:03.447 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.447 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.447 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.447 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.448 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:03.448 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:03.448 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 01:32:03.448 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 01:32:03.448 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 01:32:03.448 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.449 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.449 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.449 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.449 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.449 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:32:03.453 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:32:03.453 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 01:32:03.453 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.453 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.454 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.454 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.454 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:03.454 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 01:32:03.456 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.456 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.456 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.456 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.456 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.456 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:32:03.459 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:32:03.459 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.460 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.460 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.460 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.460 +07:00 [ERR] Error assigning reviewer 11
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 316
2025-09-22 01:32:03.462 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.462 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.462 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.462 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.462 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.462 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:32:03.467 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:32:03.467 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.467 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.467 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.467 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.467 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.468 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.468 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.468 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.468 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.468 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:32:03.469 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:32:03.470 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.470 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.470 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.470 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.472 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.473 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.473 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.473 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.474 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.474 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:32:03.475 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:32:03.475 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.475 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.475 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.475 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.476 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.476 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.476 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.476 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.476 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.476 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:32:03.477 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:32:03.480 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.480 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 01:32:03.480 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.480 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.481 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.481 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.481 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.482 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.482 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.482 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:32:03.483 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:32:03.483 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.483 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.483 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.484 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.484 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:03.484 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:03.484 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 01:32:03.485 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 01:32:03.485 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 01:32:03.486 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.486 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.486 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.486 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.487 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.487 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:32:03.489 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:32:03.490 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 01:32:03.490 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.490 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.490 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.490 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.490 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:32:03.490 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 01:32:03.493 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.493 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.493 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:32:03.493 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.493 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:32:03.494 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:32:03.495 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:32:03.495 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.495 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:32:03.495 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.495 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:32:03.496 +07:00 [ERR] Error assigning reviewer 9
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 316
2025-09-22 01:32:03.497 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:32:03.497 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:32:03.498 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:32:03.498 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:32:03.498 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:32:03.499 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7033.5774ms
2025-09-22 01:32:03.499 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:32:03.500 +07:00 [DBG] Connection id "0HNFP7I48ULNG" completed keep alive response.
2025-09-22 01:32:03.500 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:32:03.500 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:32:03.501 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:32:03.501 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 7045.1377ms
2025-09-22 01:33:07.704 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:33:07.704 +07:00 [DBG] POST requests are not supported
2025-09-22 01:33:07.704 +07:00 [DBG] POST requests are not supported
2025-09-22 01:33:07.704 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:33:07.705 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:33:07.705 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:33:07.705 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:33:07.705 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:33:07.707 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:33:07.708 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:33:07.708 +07:00 [DBG] Authorization was successful.
2025-09-22 01:33:07.708 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:33:07.708 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:33:07.708 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:33:07.708 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:33:07.708 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:33:07.708 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:33:07.708 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:33:07.709 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:33:07.710 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:33:07.710 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:33:07.710 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:33:07.710 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:33:07.710 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:33:07.710 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:33:07.710 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:33:07.710 +07:00 [DBG] Connection id "0HNFP7I48ULNG", Request id "0HNFP7I48ULNG:00000008": started reading request body.
2025-09-22 01:33:07.710 +07:00 [DBG] Connection id "0HNFP7I48ULNG", Request id "0HNFP7I48ULNG:00000008": done reading request body.
2025-09-22 01:33:07.710 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:33:07.710 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:33:07.710 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:33:07.710 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:33:07.711 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:33:07.711 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:33:07.711 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:33:07.711 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:33:07.711 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:33:07.711 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:33:07.711 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:33:07.711 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:33:07.711 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-22T18:27:45.7130000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:33:07.712 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:33:07.713 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:33:07.713 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 01:33:07.714 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:07.714 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:07.714 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:07.714 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:07.714 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:07.715 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:33:07.723 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:33:07.724 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:07.724 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:07.724 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:07.724 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:07.725 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:07.725 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:07.725 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:07.725 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:07.725 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:07.725 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:33:07.815 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:33:07.816 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:07.817 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:07.817 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:07.817 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:07.818 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:33:07.818 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:33:07.818 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:33:07.819 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:33:13.601 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:33:13.603 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.603 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.604 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.604 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.604 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.604 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:33:13.611 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:33:13.612 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.612 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.612 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.612 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.613 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.613 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.613 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.613 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.613 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.613 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:33:13.618 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:33:13.621 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.622 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 01:33:13.625 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.625 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.630 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.630 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.631 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.631 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.631 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.631 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:33:13.638 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:33:13.639 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.639 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.640 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.640 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.642 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.642 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.642 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.643 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.643 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.643 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:33:13.648 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:33:13.648 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.648 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.649 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.650 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.650 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.650 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.650 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.651 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.651 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.651 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:33:13.652 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:33:13.652 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.652 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.653 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.653 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.655 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.655 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.656 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.656 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.656 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.657 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:33:13.658 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:33:13.659 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.659 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.659 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.659 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.659 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.660 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.660 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.660 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.660 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.660 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:33:13.662 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:33:13.662 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.662 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.662 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.662 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.663 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.663 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.663 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.663 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.663 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.663 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:33:13.664 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:33:13.665 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.665 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.665 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.665 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.666 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.667 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.667 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.668 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.668 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 01:33:13.669 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:33:13.670 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:33:13.670 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.670 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.670 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.670 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.671 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.671 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.671 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.671 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.671 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.671 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:33:13.673 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:33:13.674 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.676 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 01:33:13.676 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.676 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.676 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.676 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.677 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.677 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.677 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.677 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:33:13.679 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:33:13.679 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.679 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.679 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.679 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.680 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.680 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.680 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.680 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.680 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.680 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:33:13.682 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:33:13.682 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.682 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.683 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.683 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.684 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.684 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.684 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.684 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.684 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.684 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:33:13.686 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:33:13.686 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.686 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.686 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.686 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.687 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.687 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.687 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.687 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.687 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.687 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:33:13.689 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:33:13.690 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.690 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.691 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.691 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.692 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.692 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.692 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.692 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.692 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.692 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:33:13.693 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:33:13.694 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.694 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.694 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.694 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.694 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.694 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.694 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:33:13.694 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.695 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:33:13.695 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:33:13.697 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:33:13.697 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.697 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:33:13.697 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.697 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:33:13.697 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:33:13.697 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:33:13.697 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:33:13.698 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:33:13.699 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:33:13.699 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5990.7879ms
2025-09-22 01:33:13.699 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:33:13.699 +07:00 [DBG] Connection id "0HNFP7I48ULNG" completed keep alive response.
2025-09-22 01:33:13.699 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:33:13.699 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:33:13.700 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:33:13.700 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 5995.5924ms
2025-09-22 01:35:06.178 +07:00 [DBG] Connection id "0HNFP7I48ULNG" received FIN.
2025-09-22 01:35:06.179 +07:00 [DBG] Connection id "0HNFP7I48ULNG" disconnecting.
2025-09-22 01:35:06.179 +07:00 [DBG] Connection id "0HNFP7I48ULNG" stopped.
2025-09-22 01:35:06.181 +07:00 [DBG] Connection id "0HNFP7I48ULNG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 01:35:17.085 +07:00 [INF] Application is shutting down...
2025-09-22 01:35:17.088 +07:00 [DBG] Hosting stopping
2025-09-22 01:35:17.092 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 01:35:17.095 +07:00 [DBG] Hosting stopped
2025-09-22 01:48:09.405 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 01:48:09.463 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 01:48:09.614 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.629 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.639 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.640 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.640 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.641 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.783 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.784 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.797 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.797 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.797 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.798 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.801 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.801 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 01:48:09.835 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 01:48:09.836 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 01:48:09.836 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 01:48:09.836 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 01:48:09.836 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 01:48:09.940 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:48:09.940 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:48:09.940 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:48:09.940 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:48:09.940 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:48:09.941 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:48:09.941 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:48:09.941 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:48:09.942 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:48:09.942 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:48:09.942 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 01:48:10.049 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:48:10.089 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 01:48:10.188 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:48:10.210 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:48:10.221 +07:00 [DBG] Created DbConnection. (10ms).
2025-09-22 01:48:10.224 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.313 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.315 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:48:10.319 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 01:48:10.323 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 01:48:10.327 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:48:10.356 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:48:10.384 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:48:10.398 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.403 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 43ms reading results.
2025-09-22 01:48:10.404 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.408 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 01:48:10.410 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.410 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.410 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:48:10.410 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.410 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.411 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:48:10.413 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:48:10.413 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:48:10.414 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.414 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 01:48:10.414 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.414 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:48:10.415 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.415 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.415 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:48:10.415 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.415 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.415 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:48:10.416 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:48:10.416 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:48:10.416 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.416 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:48:10.417 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.417 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:48:10.417 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.417 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.417 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:48:10.417 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.417 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.417 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:48:10.418 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 01:48:10.418 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:48:10.418 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.418 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:48:10.418 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.418 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:48:10.422 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 01:48:10.426 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:48:10.428 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.428 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.428 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:48:10.428 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.428 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.428 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:48:10.432 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:48:10.450 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:48:10.470 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.470 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-22 01:48:10.470 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.471 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:48:10.473 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 01:48:10.474 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.474 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.474 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:48:10.475 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.475 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.475 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:48:10.476 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:48:10.476 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:48:10.476 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.476 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:48:10.476 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.477 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:48:10.477 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 01:48:10.477 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.477 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.477 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:48:10.477 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.477 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.477 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:48:10.478 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:48:10.478 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:48:10.478 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.479 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:48:10.479 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.479 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:48:10.479 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.479 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.479 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:48:10.479 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.479 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:10.479 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:48:10.480 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 01:48:10.480 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:48:10.480 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.480 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:48:10.480 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.480 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:48:10.480 +07:00 [INF] Data seeding completed successfully
2025-09-22 01:48:10.481 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:48:10.483 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:10.484 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-22 01:48:10.494 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 01:48:10.602 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 01:48:10.678 +07:00 [DBG] Hosting starting
2025-09-22 01:48:10.685 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 01:48:10.686 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 01:48:10.686 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 01:48:10.688 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 01:48:10.690 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 01:48:10.690 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 01:48:10.694 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 01:48:10.696 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 01:48:10.696 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 01:48:10.697 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 01:48:10.698 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 01:48:10.699 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 01:48:10.699 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 01:48:10.700 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 01:48:10.703 +07:00 [DBG] Middleware loaded
2025-09-22 01:48:10.703 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 01:48:10.704 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 01:48:10.726 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 01:48:10.734 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 01:48:10.734 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 01:48:10.734 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 01:48:10.734 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 01:48:10.734 +07:00 [INF] Hosting environment: Development
2025-09-22 01:48:10.734 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 01:48:10.735 +07:00 [DBG] Hosting started
2025-09-22 01:48:10.857 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" accepted.
2025-09-22 01:48:10.858 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" started.
2025-09-22 01:48:10.891 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 01:48:10.897 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 01:48:10.936 +07:00 [DBG] Connection id "0HNFP7TKRL3JO" accepted.
2025-09-22 01:48:10.936 +07:00 [DBG] Connection id "0HNFP7TKRL3JO" started.
2025-09-22 01:48:11.009 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 01:48:11.019 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 01:48:11.020 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:48:11.021 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 134.2978ms
2025-09-22 01:48:11.026 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 01:48:11.028 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 01:48:11.028 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:48:11.028 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.643ms
2025-09-22 01:48:11.080 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 01:48:11.364 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:48:11.365 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 284.3798ms
2025-09-22 01:48:25.077 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 01:48:25.087 +07:00 [DBG] POST requests are not supported
2025-09-22 01:48:25.088 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 01:48:25.089 +07:00 [DBG] POST requests are not supported
2025-09-22 01:48:25.090 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:48:25.091 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:48:25.171 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:48:25.172 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:48:25.175 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:48:25.326 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:48:25.329 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:48:25.347 +07:00 [DBG] Authorization was successful.
2025-09-22 01:48:25.379 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:48:25.420 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:48:25.422 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:48:25.425 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:48:25.426 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:48:25.426 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:48:25.426 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:48:25.430 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:48:25.656 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:48:25.671 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:48:25.679 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:48:25.686 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:48:25.688 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:48:25.689 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:48:25.692 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:48:25.729 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000004": started reading request body.
2025-09-22 01:48:25.731 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000004": done reading request body.
2025-09-22 01:48:25.747 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:48:25.747 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:48:25.748 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:48:25.748 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:48:25.761 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:48:25.764 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:48:25.765 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:48:25.767 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:48:25.767 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:48:25.767 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:48:25.768 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:48:25.774 +07:00 [INF] Processing AI suggestion for SubmissionId: 0
2025-09-22 01:48:25.776 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":0,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:48:22.0070000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:48:25.895 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:48:25.919 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 01:48:25.949 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 01:48:26.049 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:48:26.067 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:48:26.071 +07:00 [DBG] Created DbConnection. (4ms).
2025-09-22 01:48:26.072 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:26.073 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:26.073 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:48:26.073 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:26.074 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:48:26.075 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:48:26.086 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:48:26.087 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:48:26.088 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 01:48:26.094 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:26.094 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:48:26.108 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:48:26.112 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:48:26.113 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:48:26.119 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:48:26.119 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:48:26.166 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 735.2205ms
2025-09-22 01:48:26.167 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:48:26.171 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:48:26.174 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:48:26.174 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:48:26.175 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:48:26.177 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 404 null application/json; charset=utf-8 1100.1098ms
2025-09-22 01:49:10.835 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 01:49:10.838 +07:00 [DBG] POST requests are not supported
2025-09-22 01:49:10.838 +07:00 [DBG] POST requests are not supported
2025-09-22 01:49:10.841 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:49:10.842 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:49:10.863 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:49:10.865 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:49:10.866 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:49:10.876 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:49:10.877 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:49:10.882 +07:00 [DBG] Authorization was successful.
2025-09-22 01:49:10.883 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:49:10.883 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:49:10.887 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:49:10.888 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:49:10.889 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:49:10.890 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:49:10.890 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:49:10.891 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:49:10.897 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:49:10.900 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:49:10.901 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:49:10.901 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:49:10.902 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:49:10.902 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:49:10.903 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:49:10.904 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000005": started reading request body.
2025-09-22 01:49:10.904 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000005": done reading request body.
2025-09-22 01:49:10.908 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:49:10.908 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:49:10.908 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:49:10.909 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:49:10.909 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:49:10.910 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:49:10.910 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:49:10.910 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:49:10.911 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:49:10.911 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:49:10.911 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:49:10.912 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:49:10.915 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:48:22.0070000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:49:10.939 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:49:10.946 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:49:10.950 +07:00 [DBG] Created DbConnection. (4ms).
2025-09-22 01:49:10.950 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:49:10.951 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:49:10.951 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:49:10.951 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:49:10.952 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:49:10.952 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:49:10.962 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:49:10.972 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:49:10.973 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 10ms reading results.
2025-09-22 01:49:10.973 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:49:10.973 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:49:10.989 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 01:49:11.006 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 01:49:11.006 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 01:49:11.007 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 01:49:11.008 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 01:49:11.130 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 01:49:11.146 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 01:49:11.166 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:49:11.167 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:49:11.167 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:49:11.167 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:49:11.167 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:49:11.167 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:49:11.247 +07:00 [INF] Executed DbCommand (80ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:49:11.278 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:49:11.281 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 30ms reading results.
2025-09-22 01:49:11.281 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:49:11.282 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:49:11.331 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:49:11.332 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:49:11.332 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:49:11.333 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:49:17.123 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:49:17.142 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:49:17.143 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:49:17.143 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:49:17.144 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:49:17.144 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:49:17.213 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6322.4854ms
2025-09-22 01:49:17.213 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:49:17.213 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:49:17.213 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:49:17.214 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:49:17.214 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:49:17.214 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 6379.326ms
2025-09-22 01:49:47.271 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 88
2025-09-22 01:49:47.271 +07:00 [DBG] Connection id "0HNFP7TKRL3JO" received FIN.
2025-09-22 01:49:47.271 +07:00 [DBG] POST requests are not supported
2025-09-22 01:49:47.271 +07:00 [DBG] POST requests are not supported
2025-09-22 01:49:47.272 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:49:47.272 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:49:47.273 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:49:47.273 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:49:47.273 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:49:47.274 +07:00 [DBG] Connection id "0HNFP7TKRL3JO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 01:49:47.275 +07:00 [DBG] Connection id "0HNFP7TKRL3JO" disconnecting.
2025-09-22 01:49:47.278 +07:00 [DBG] Connection id "0HNFP7TKRL3JO" stopped.
2025-09-22 01:49:47.279 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:49:47.279 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:49:47.283 +07:00 [DBG] Authorization was successful.
2025-09-22 01:49:47.284 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:49:47.284 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:49:47.284 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:49:47.285 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:49:47.285 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:49:47.285 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:49:47.285 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:49:47.285 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:49:47.317 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:49:47.317 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:49:47.318 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:49:47.318 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:49:47.318 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:49:47.318 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:49:47.318 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:49:47.319 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000006": started reading request body.
2025-09-22 01:49:47.319 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000006": done reading request body.
2025-09-22 01:49:47.333 +07:00 [DBG] JSON input formatter threw an exception: The JSON value could not be converted to System.Nullable`1[System.DateTime]. Path: $.deadline | LineNumber: 4 | BytePositionInLine: 16.
2025-09-22 01:49:47.334 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:49:47.334 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:49:47.335 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:49:47.337 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:49:47.337 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:49:47.338 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:49:47.338 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:49:47.338 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:49:47.338 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:49:47.339 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:49:47.347 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:49:47.347 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:49:47.347 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:49:47.347 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:49:47.347 +07:00 [INF] Executing UnprocessableEntityObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:49:47.353 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 68.0899ms
2025-09-22 01:49:47.353 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:49:47.353 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:49:47.354 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 422 null application/json; charset=utf-8 82.5917ms
2025-09-22 01:50:18.622 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 01:50:18.622 +07:00 [DBG] POST requests are not supported
2025-09-22 01:50:18.623 +07:00 [DBG] POST requests are not supported
2025-09-22 01:50:18.623 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:50:18.623 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:50:18.623 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:50:18.623 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:50:18.623 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:50:18.623 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:50:18.623 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:50:18.623 +07:00 [DBG] Authorization was successful.
2025-09-22 01:50:18.624 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:50:18.626 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:50:18.627 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:50:18.627 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:50:18.627 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:50:18.627 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:50:18.627 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:50:18.628 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:50:18.628 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:50:18.629 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:50:18.629 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:50:18.629 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:50:18.630 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:50:18.630 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:50:18.630 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:50:18.630 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000007": started reading request body.
2025-09-22 01:50:18.630 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000007": done reading request body.
2025-09-22 01:50:18.630 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:50:18.630 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:50:18.631 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:50:18.631 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:50:18.631 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:50:18.632 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:50:18.632 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:50:18.632 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:50:18.633 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:50:18.633 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:50:18.633 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:50:18.633 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:50:18.634 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:50:04.6890000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:50:18.641 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:50:18.649 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:50:18.649 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-22 01:50:18.650 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:50:18.650 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:50:18.650 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:50:18.651 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:50:18.651 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:50:18.651 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:50:18.670 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:50:18.671 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:50:18.671 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:50:18.671 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:50:18.671 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:50:18.673 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:50:18.676 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:50:18.676 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:50:18.676 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:50:18.676 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:50:18.676 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:50:18.751 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:50:18.754 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:50:18.754 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 01:50:18.754 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:50:18.754 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:50:18.755 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:50:18.756 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:50:18.756 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:50:18.757 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:50:24.289 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:50:24.292 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:50:24.293 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:50:24.294 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:50:24.295 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:50:24.295 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:50:24.298 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5670.0162ms
2025-09-22 01:50:24.298 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:50:24.302 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:50:24.302 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:50:24.303 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:50:24.303 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:50:24.304 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 5682.0426ms
2025-09-22 01:52:11.935 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:52:11.936 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:11.936 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:11.936 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:52:11.936 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:52:11.936 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:11.936 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:11.936 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:11.936 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:52:11.936 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:52:11.936 +07:00 [DBG] Authorization was successful.
2025-09-22 01:52:11.937 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:11.937 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:52:11.937 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:52:11.937 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:52:11.937 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:52:11.937 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:52:11.940 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:52:11.943 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:11.943 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:11.944 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:11.945 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:52:11.947 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:11.947 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:11.949 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:11.949 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:52:11.949 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000008": started reading request body.
2025-09-22 01:52:11.949 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000008": done reading request body.
2025-09-22 01:52:11.949 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:52:11.949 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:11.949 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:11.949 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:11.950 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:11.950 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:11.950 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:52:11.950 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:11.950 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:11.950 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:11.950 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:11.950 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:52:11.950 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:50:04.6890000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:52:11.951 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:52:11.951 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:52:11.951 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:52:11.951 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:52:11.951 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:52:11.955 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 14.18ms
2025-09-22 01:52:11.955 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:11.955 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:52:11.956 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 20.0703ms
2025-09-22 01:52:15.626 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:52:15.627 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:15.627 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:15.627 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:52:15.627 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:52:15.627 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:15.627 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:15.627 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:15.630 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:52:15.630 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:52:15.637 +07:00 [DBG] Authorization was successful.
2025-09-22 01:52:15.637 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:15.638 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:52:15.639 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:52:15.639 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:52:15.641 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:52:15.641 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:52:15.642 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:52:15.643 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:15.644 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:15.644 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:15.644 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:52:15.644 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:15.644 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:15.644 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:15.644 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:52:15.645 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000009": started reading request body.
2025-09-22 01:52:15.645 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000009": done reading request body.
2025-09-22 01:52:15.645 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:52:15.645 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:15.645 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:15.645 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:15.645 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:15.646 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:15.646 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:52:15.646 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:15.646 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:15.646 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:15.646 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:15.646 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:52:15.646 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:50:04.6890000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:52:15.647 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:52:15.647 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:52:15.647 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:52:15.648 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:52:15.649 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:52:15.650 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7.0672ms
2025-09-22 01:52:15.652 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:15.652 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:52:15.652 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 25.8908ms
2025-09-22 01:52:19.630 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:52:19.630 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:19.631 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:19.631 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:52:19.631 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:52:19.631 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:19.631 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:19.631 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:19.633 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:52:19.633 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:52:19.633 +07:00 [DBG] Authorization was successful.
2025-09-22 01:52:19.633 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:19.633 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:52:19.633 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:52:19.633 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:52:19.633 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:52:19.634 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:52:19.634 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:52:19.634 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:19.634 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:19.634 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:19.634 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:52:19.634 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:19.634 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:19.634 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:19.634 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:52:19.634 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000A": started reading request body.
2025-09-22 01:52:19.634 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000A": done reading request body.
2025-09-22 01:52:19.635 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:52:19.635 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:19.635 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:19.635 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:19.635 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:19.635 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:19.635 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:52:19.635 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:19.635 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:19.636 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:19.636 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:19.636 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:52:19.636 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:50:04.6890000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:52:19.636 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:52:19.636 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:52:19.636 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:52:19.637 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:52:19.639 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:52:19.639 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5.6539ms
2025-09-22 01:52:19.639 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:19.639 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:52:19.640 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 9.4381ms
2025-09-22 01:52:23.873 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:52:23.874 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:23.874 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:23.875 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:52:23.875 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:52:23.875 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:23.875 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:23.875 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:23.878 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:52:23.878 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:52:23.879 +07:00 [DBG] Authorization was successful.
2025-09-22 01:52:23.879 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:23.881 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:52:23.884 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:52:23.885 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:52:23.885 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:52:23.885 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:52:23.885 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:52:23.885 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:23.886 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:23.891 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:23.892 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:52:23.892 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:23.892 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:23.892 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:23.892 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:52:23.892 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000B": started reading request body.
2025-09-22 01:52:23.892 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000B": done reading request body.
2025-09-22 01:52:23.892 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:52:23.893 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:23.893 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:23.893 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:23.893 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:23.893 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:23.893 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:52:23.893 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:23.893 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:23.893 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:23.893 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:23.893 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:52:23.893 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:50:04.6890000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:52:23.900 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:52:23.900 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:52:23.901 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:52:23.901 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:52:23.901 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:52:23.901 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 15.9482ms
2025-09-22 01:52:23.901 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:23.902 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:52:23.902 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 28.3051ms
2025-09-22 01:52:24.510 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:52:24.510 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:24.510 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:24.510 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:52:24.510 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:52:24.510 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:24.510 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:24.510 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:24.511 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:52:24.511 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:52:24.511 +07:00 [DBG] Authorization was successful.
2025-09-22 01:52:24.516 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:24.517 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:52:24.517 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:52:24.517 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:52:24.517 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:52:24.517 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:52:24.517 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:52:24.518 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:24.518 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:24.523 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:24.524 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:52:24.524 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:24.524 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:24.524 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:24.525 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:52:24.525 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000C": started reading request body.
2025-09-22 01:52:24.525 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000C": done reading request body.
2025-09-22 01:52:24.525 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:52:24.525 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:24.525 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:24.525 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:24.525 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:24.525 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:24.526 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:52:24.526 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:24.526 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:24.526 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:24.526 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:24.526 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:52:24.526 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T18:50:04.6890000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:52:24.529 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:52:24.530 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:52:24.530 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:52:24.530 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:52:24.530 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:52:24.530 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 12.5161ms
2025-09-22 01:52:24.530 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:24.530 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:52:24.531 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 20.9548ms
2025-09-22 01:52:32.803 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:52:32.804 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:32.804 +07:00 [DBG] POST requests are not supported
2025-09-22 01:52:32.804 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:52:32.804 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:52:32.805 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:32.805 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:52:32.805 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:32.805 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:52:32.806 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:52:32.806 +07:00 [DBG] Authorization was successful.
2025-09-22 01:52:32.806 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:32.808 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:52:32.808 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:52:32.809 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:52:32.809 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:52:32.809 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:52:32.809 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:52:32.811 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:32.812 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:52:32.812 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:32.812 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:52:32.812 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:32.812 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:32.813 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:52:32.813 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:52:32.813 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000D": started reading request body.
2025-09-22 01:52:32.813 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000D": done reading request body.
2025-09-22 01:52:32.814 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:52:32.814 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:32.814 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:32.814 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:52:32.814 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:52:32.814 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:32.815 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:52:32.815 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:32.815 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:32.815 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:52:32.815 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:52:32.815 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:52:32.815 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-22T18:50:04.6890000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:52:32.819 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:52:32.820 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:52:32.822 +07:00 [DBG] Created DbConnection. (2ms).
2025-09-22 01:52:32.823 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:32.823 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:32.824 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:32.824 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:32.825 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:32.825 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:52:32.841 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:52:32.842 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:32.842 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:32.843 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:32.849 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (6ms).
2025-09-22 01:52:32.854 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:32.855 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:32.855 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:32.855 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:32.855 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:32.855 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:52:32.934 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:52:32.940 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:32.940 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-09-22 01:52:32.940 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:32.940 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:32.947 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:52:32.947 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:52:32.947 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:52:32.948 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:52:39.803 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:52:39.855 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 01:52:39.867 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:52:39.868 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.868 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.869 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:39.869 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.869 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.869 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:52:39.874 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:52:39.875 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.875 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:39.876 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.876 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:39.879 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 01:52:39.880 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 01:52:39.910 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:52:39.911 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.912 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.912 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:39.912 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.912 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.913 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:52:39.920 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:52:39.922 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.922 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 01:52:39.922 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.922 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:39.927 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 01:52:39.928 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 01:52:39.940 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 01:52:39.943 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.943 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.943 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:39.943 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.943 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.943 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:52:39.949 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:52:39.950 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.951 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:39.951 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.951 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:39.957 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 01:52:39.964 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:52:39.967 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.967 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.967 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:39.967 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.967 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.967 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:52:39.972 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:52:39.972 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.973 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:39.973 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.973 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:39.974 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.975 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.975 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:39.975 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.976 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 01:52:39.976 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:52:39.978 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:52:39.978 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.978 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:39.978 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.979 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:39.979 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.979 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.979 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:39.980 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.980 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.980 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:52:39.981 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:52:39.983 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.984 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 01:52:39.984 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.984 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:39.985 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.985 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:39.985 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:39.985 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.985 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:39.985 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:52:40.005 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:52:40.006 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.006 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:40.006 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.006 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:40.006 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.007 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.007 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:40.007 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.007 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.007 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:52:40.008 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:52:40.008 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.008 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:40.009 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.009 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:40.009 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.010 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.011 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:40.011 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.012 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.012 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:52:40.013 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:52:40.014 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.014 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:40.014 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.014 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:40.015 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.015 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.015 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:40.015 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.015 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.015 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:52:40.018 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:52:40.018 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.018 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:40.020 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.020 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:40.022 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.022 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.022 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:40.022 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.022 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.022 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:52:40.026 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:52:40.027 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.027 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:40.027 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.027 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:40.029 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.029 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.029 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:40.030 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.030 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.030 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:52:40.032 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:52:40.032 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.032 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:40.032 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.033 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:40.034 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.034 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.034 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:40.034 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.034 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.034 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:52:40.035 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:52:40.036 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.036 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:40.036 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.036 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:40.036 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.037 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.037 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:40.037 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.037 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.039 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:52:40.041 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:52:40.041 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.041 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:40.041 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.041 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:40.042 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.042 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.042 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:40.042 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.042 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.042 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:52:40.043 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:52:40.043 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.044 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:40.044 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.044 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:40.045 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.045 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.046 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:52:40.047 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:52:40.047 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 01:52:40.047 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:52:40.048 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:52:40.048 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.049 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:52:40.049 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.049 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:52:40.049 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:52:40.049 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:52:40.049 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:52:40.049 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:52:40.049 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:52:40.056 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7245.3879ms
2025-09-22 01:52:40.056 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:52:40.057 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:52:40.057 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:52:40.057 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:52:40.057 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:52:40.057 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 400 null application/json; charset=utf-8 7254.4456ms
2025-09-22 01:54:14.379 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:54:14.379 +07:00 [DBG] POST requests are not supported
2025-09-22 01:54:14.380 +07:00 [DBG] POST requests are not supported
2025-09-22 01:54:14.380 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:54:14.381 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:54:14.382 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:54:14.383 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:54:14.383 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:54:14.387 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:54:14.387 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:54:14.389 +07:00 [DBG] Authorization was successful.
2025-09-22 01:54:14.389 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:54:14.389 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:54:14.390 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:54:14.390 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:54:14.392 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:54:14.392 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:54:14.392 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:54:14.392 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:54:14.393 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:54:14.395 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:54:14.395 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:54:14.395 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:54:14.395 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:54:14.396 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:54:14.396 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:54:14.396 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000E": started reading request body.
2025-09-22 01:54:14.396 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000E": done reading request body.
2025-09-22 01:54:14.396 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:54:14.396 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:54:14.396 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:54:14.396 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:54:14.397 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:54:14.397 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:54:14.397 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:54:14.397 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:54:14.397 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:54:14.397 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:54:14.397 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:54:14.397 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:54:14.397 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-22T18:50:04.6890000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:54:14.398 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:54:14.399 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:54:14.403 +07:00 [DBG] Created DbConnection. (3ms).
2025-09-22 01:54:14.403 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:14.404 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:14.404 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:14.404 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:14.404 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:14.404 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:54:14.419 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:54:14.420 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:14.420 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:14.420 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:14.420 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:14.424 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:14.424 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:14.425 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:14.425 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:14.425 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:14.425 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:54:14.520 +07:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:54:14.520 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:14.520 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:14.521 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:14.521 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:14.521 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:54:14.521 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:54:14.522 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:54:14.522 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:54:21.063 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:54:21.066 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.066 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.066 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.068 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 01:54:21.069 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 01:54:21.069 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:54:21.079 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:54:21.085 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.085 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.086 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.086 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.087 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.088 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.088 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.088 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.088 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.088 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:54:21.112 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:54:21.112 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.113 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.113 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.113 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.114 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.119 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.120 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.120 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.120 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.120 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:54:21.132 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:54:21.134 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.134 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.134 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.134 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.137 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.138 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.138 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.138 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.138 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.138 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:54:21.148 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:54:21.151 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.151 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 01:54:21.151 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.152 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.156 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.158 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.159 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.159 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.159 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.160 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:54:21.167 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:54:21.168 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.168 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.168 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.168 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.169 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.169 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.169 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.169 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.169 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.169 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:54:21.183 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:54:21.184 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.184 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.184 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.184 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.185 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.185 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.185 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.185 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.186 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.186 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:54:21.193 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:54:21.193 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.194 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.194 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.194 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.194 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.194 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.194 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.194 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.194 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.194 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:54:21.201 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:54:21.201 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.201 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.201 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.201 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.202 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.202 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.202 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.202 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.202 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.202 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:54:21.209 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:54:21.209 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.210 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.210 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.210 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.210 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.210 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.210 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.210 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.211 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.211 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:54:21.220 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:54:21.221 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.221 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.221 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.221 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.221 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.221 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.221 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.222 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.222 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.222 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:54:21.227 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:54:21.228 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.228 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.228 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.228 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.228 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.228 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.228 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.228 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.229 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.229 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:54:21.233 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:54:21.234 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.234 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.234 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.234 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.235 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.235 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.235 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.235 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.235 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.235 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:54:21.241 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:54:21.241 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.242 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.242 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.242 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.242 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.242 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.243 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.243 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.243 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.243 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:54:21.250 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:54:21.250 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.250 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.250 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.250 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.250 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.251 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.251 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.251 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.252 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.252 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:54:21.258 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:54:21.258 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.259 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.259 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.259 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.259 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.260 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.263 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:54:21.263 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.263 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:54:21.263 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:54:21.269 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:54:21.269 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.269 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:54:21.269 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.270 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:54:21.270 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:54:21.270 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:54:21.270 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:54:21.270 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:54:21.270 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:54:21.270 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6877.9774ms
2025-09-22 01:54:21.270 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:54:21.270 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:54:21.270 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:54:21.270 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:54:21.270 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:54:21.270 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 400 null application/json; charset=utf-8 6891.4673ms
2025-09-22 01:55:50.180 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:55:50.180 +07:00 [DBG] POST requests are not supported
2025-09-22 01:55:50.180 +07:00 [DBG] POST requests are not supported
2025-09-22 01:55:50.180 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:55:50.181 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:55:50.181 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:55:50.181 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:55:50.181 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:55:50.181 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:55:50.181 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:55:50.182 +07:00 [DBG] Authorization was successful.
2025-09-22 01:55:50.182 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:55:50.182 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:55:50.182 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:55:50.182 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:55:50.182 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:55:50.183 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:55:50.183 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:55:50.183 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:55:50.183 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:55:50.183 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:55:50.184 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:55:50.184 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:55:50.184 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:55:50.184 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:55:50.187 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:55:50.187 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000F": started reading request body.
2025-09-22 01:55:50.187 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:0000000F": done reading request body.
2025-09-22 01:55:50.187 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:55:50.188 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:55:50.188 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:55:50.188 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:55:50.189 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:55:50.189 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:55:50.189 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:55:50.189 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:55:50.189 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:55:50.189 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:55:50.190 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:55:50.190 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:55:50.190 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-22T01:55:04.6890000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:55:50.194 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:55:50.195 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:55:50.195 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 01:55:50.196 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:50.196 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:50.197 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:55:50.197 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:50.197 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:50.197 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:55:50.218 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:55:50.224 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:55:50.225 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 5ms reading results.
2025-09-22 01:55:50.230 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:50.230 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:55:50.231 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:50.231 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:50.231 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:55:50.231 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:50.231 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:50.231 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:55:50.309 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:55:50.312 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:55:50.312 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 01:55:50.313 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:50.313 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:55:50.314 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:55:50.314 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:55:50.315 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:55:50.315 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:55:57.044 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:55:57.047 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.047 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.047 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:55:57.047 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.047 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.047 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:55:57.053 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:55:57.053 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.053 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:55:57.053 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.053 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:55:57.054 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.054 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.054 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:55:57.054 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.054 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.054 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:55:57.062 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:55:57.062 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.062 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:55:57.062 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.062 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:55:57.064 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.064 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.064 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:55:57.064 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.064 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.064 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:55:57.068 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:55:57.068 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.068 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:55:57.068 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.068 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:55:57.069 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.069 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.069 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:55:57.069 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.069 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.069 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:55:57.074 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:55:57.075 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.075 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:55:57.075 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.075 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:55:57.077 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 01:55:57.094 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 01:55:57.100 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.101 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.103 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:55:57.103 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.103 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.103 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:55:57.107 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:55:57.108 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.108 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:55:57.108 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.108 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:55:57.145 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:55:57.202 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:55:57.208 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 01:55:57.212 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 01:55:57.243 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 01:55:57.388 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.388 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.395 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:55:57.395 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.401 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-09-22 01:55:57.401 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:55:57.415 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:55:57.438 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 01:55:57.449 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.449 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 33ms reading results.
2025-09-22 01:55:57.451 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.451 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:55:57.474 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:55:57.479 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 01:55:57.480 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 01:55:57.482 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 01:55:57.484 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 01:55:57.486 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 01:55:57.487 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 01:55:57.488 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 01:55:57.522 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 01:55:57.528 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.528 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.528 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:55:57.528 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.528 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:55:57.528 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:55:57.545 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:55:57.547 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.547 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 01:55:57.547 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.548 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:55:57.564 +07:00 [ERR] Error while auto-assigning reviewers after suggestion
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at App.BLL.Implementations.ReviewerAssignmentService.BulkAssignReviewersAsync(BulkAssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 342
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 336
2025-09-22 01:55:57.591 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:55:57.591 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:55:57.591 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:55:57.591 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:55:57.591 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:55:57.592 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7409.1477ms
2025-09-22 01:55:57.592 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:55:57.592 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:55:57.592 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:55:57.593 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:55:57.593 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:55:57.593 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 7413.1028ms
2025-09-22 01:57:22.336 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 01:57:22.336 +07:00 [DBG] POST requests are not supported
2025-09-22 01:57:22.336 +07:00 [DBG] POST requests are not supported
2025-09-22 01:57:22.337 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 01:57:22.337 +07:00 [INF] CORS policy execution successful.
2025-09-22 01:57:22.337 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:57:22.337 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 01:57:22.337 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:57:22.337 +07:00 [DBG] Successfully validated the token.
2025-09-22 01:57:22.338 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 01:57:22.338 +07:00 [DBG] Authorization was successful.
2025-09-22 01:57:22.338 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:57:22.338 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 01:57:22.338 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 01:57:22.338 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 01:57:22.338 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 01:57:22.338 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 01:57:22.338 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 01:57:22.338 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:57:22.339 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 01:57:22.340 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:57:22.340 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 01:57:22.340 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:57:22.340 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:57:22.340 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 01:57:22.341 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 01:57:22.341 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000010": started reading request body.
2025-09-22 01:57:22.341 +07:00 [DBG] Connection id "0HNFP7TKRL3JN", Request id "0HNFP7TKRL3JN:00000010": done reading request body.
2025-09-22 01:57:22.341 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 01:57:22.341 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:57:22.341 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:57:22.345 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 01:57:22.345 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 01:57:22.345 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:57:22.345 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 01:57:22.346 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:57:22.346 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:57:22.346 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 01:57:22.346 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 01:57:22.346 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 01:57:22.346 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-23T01:55:04.6890000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 01:57:22.347 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 01:57:22.348 +07:00 [DBG] Creating DbConnection.
2025-09-22 01:57:22.348 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 01:57:22.350 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:22.350 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:22.350 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:57:22.351 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:22.351 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:22.351 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:57:22.368 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 01:57:22.369 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:57:22.369 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:57:22.369 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:22.369 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:57:22.374 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:22.375 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:22.375 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:57:22.375 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:22.376 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:22.376 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:57:22.466 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 01:57:22.472 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:57:22.472 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-09-22 01:57:22.472 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:22.473 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:57:22.474 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 01:57:22.477 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:57:22.478 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 01:57:22.478 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 01:57:28.858 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 01:57:28.861 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.861 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.861 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:57:28.862 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:28.862 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:28.862 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:57:28.866 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 01:57:28.867 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.867 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:57:28.867 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.867 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:57:28.868 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.868 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.869 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:57:28.869 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:28.870 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 01:57:28.870 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:57:28.876 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 01:57:28.876 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.877 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:57:28.877 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.878 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:57:28.881 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.882 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.882 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:57:28.882 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:28.882 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:28.882 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:57:28.889 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 01:57:28.890 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.891 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:57:28.891 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.891 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:57:28.900 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.900 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.900 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:57:28.900 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:28.900 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:28.900 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:57:28.907 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 01:57:28.907 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.907 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:57:28.907 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.907 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:57:28.908 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.908 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.908 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:57:28.908 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:28.908 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:28.908 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:57:28.913 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 01:57:28.913 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.913 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:57:28.914 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.914 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:57:28.915 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:57:28.915 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:57:28.915 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 01:57:28.916 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 01:57:28.916 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 01:57:28.917 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.917 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.917 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:57:28.917 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:28.920 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 01:57:28.920 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:57:28.927 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 01:57:28.928 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 01:57:28.928 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.929 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 01:57:28.929 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.929 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:57:28.930 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 01:57:28.930 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 01:57:28.931 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.931 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.931 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 01:57:28.931 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 01:57:28.932 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 01:57:28.934 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:57:28.949 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 01:57:28.950 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.950 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 01:57:28.950 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.950 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 01:57:28.953 +07:00 [ERR] Error while auto-assigning reviewers after suggestion
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at App.BLL.Implementations.ReviewerAssignmentService.BulkAssignReviewersAsync(BulkAssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 342
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 336
2025-09-22 01:57:28.956 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 01:57:28.956 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 01:57:28.956 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 01:57:28.956 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 01:57:28.956 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 01:57:28.957 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6618.6099ms
2025-09-22 01:57:28.957 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 01:57:28.957 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" completed keep alive response.
2025-09-22 01:57:28.957 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 01:57:28.957 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 01:57:28.957 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 01:57:28.957 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 6621.0379ms
2025-09-22 01:59:39.185 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" disconnecting.
2025-09-22 01:59:39.185 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" stopped.
2025-09-22 01:59:39.186 +07:00 [DBG] Connection id "0HNFP7TKRL3JN" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:02:40.746 +07:00 [DBG] Connection id "0HNFP7TKRL3JP" accepted.
2025-09-22 02:02:40.746 +07:00 [DBG] Connection id "0HNFP7TKRL3JP" started.
2025-09-22 02:02:40.751 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 02:02:40.755 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 02:02:40.755 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 02:02:40.756 +07:00 [DBG] Connection id "0HNFP7TKRL3JP" completed keep alive response.
2025-09-22 02:02:40.756 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 4.2736ms
2025-09-22 02:02:40.762 +07:00 [DBG] Connection id "0HNFP7TKRL3JQ" accepted.
2025-09-22 02:02:40.762 +07:00 [DBG] Connection id "0HNFP7TKRL3JQ" started.
2025-09-22 02:02:40.779 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 02:02:40.780 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 02:02:40.780 +07:00 [DBG] Connection id "0HNFP7TKRL3JP" completed keep alive response.
2025-09-22 02:02:40.780 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 0.6226ms
2025-09-22 02:02:41.172 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 02:02:41.232 +07:00 [DBG] Connection id "0HNFP7TKRL3JP" completed keep alive response.
2025-09-22 02:02:41.232 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 60.0845ms
2025-09-22 02:02:47.658 +07:00 [DBG] Connection id "0HNFP7TKRL3JQ" received FIN.
2025-09-22 02:02:47.658 +07:00 [DBG] Connection id "0HNFP7TKRL3JP" received FIN.
2025-09-22 02:02:47.658 +07:00 [DBG] Connection id "0HNFP7TKRL3JQ" disconnecting.
2025-09-22 02:02:47.658 +07:00 [DBG] Connection id "0HNFP7TKRL3JP" disconnecting.
2025-09-22 02:02:47.659 +07:00 [DBG] Connection id "0HNFP7TKRL3JQ" stopped.
2025-09-22 02:02:47.659 +07:00 [DBG] Connection id "0HNFP7TKRL3JP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:02:47.659 +07:00 [DBG] Connection id "0HNFP7TKRL3JQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:02:47.667 +07:00 [DBG] Connection id "0HNFP7TKRL3JP" stopped.
2025-09-22 02:02:50.869 +07:00 [INF] Application is shutting down...
2025-09-22 02:02:50.872 +07:00 [DBG] Hosting stopping
2025-09-22 02:02:50.881 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken)
2025-09-22 02:02:50.882 +07:00 [DBG] Hosting stopped
2025-09-22 02:03:04.427 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 02:03:04.487 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 02:03:04.641 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.655 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.664 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.665 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.665 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.666 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.811 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.812 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.825 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.825 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.825 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.826 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.832 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.832 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:03:04.865 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 02:03:04.865 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 02:03:04.866 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 02:03:04.970 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:03:04.970 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:03:04.970 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:03:04.970 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:03:04.970 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:03:04.970 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:03:04.970 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:03:04.970 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:03:04.971 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:03:04.971 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:03:04.971 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:03:05.075 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:03:05.117 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 02:03:05.214 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:03:05.237 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:03:05.248 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 02:03:05.251 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.348 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.350 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:03:05.353 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 02:03:05.358 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-22 02:03:05.362 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:03:05.393 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:03:05.421 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:03:05.434 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.439 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 42ms reading results.
2025-09-22 02:03:05.441 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.443 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 02:03:05.446 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.446 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.446 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:03:05.446 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.447 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.447 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:03:05.448 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:03:05.449 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:03:05.449 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.449 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:03:05.449 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.449 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:03:05.449 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.449 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.449 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:03:05.449 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.449 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.449 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:03:05.450 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:03:05.450 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:03:05.450 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.450 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:03:05.451 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.451 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:03:05.452 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.452 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.452 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:03:05.452 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.452 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.452 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:03:05.453 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:03:05.453 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:03:05.453 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.453 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:03:05.454 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.454 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:03:05.456 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 02:03:05.461 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:03:05.462 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.462 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.462 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:03:05.462 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.462 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.462 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:03:05.465 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:03:05.483 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:03:05.503 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.503 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-22 02:03:05.503 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.503 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:03:05.505 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 02:03:05.507 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.507 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.507 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:03:05.507 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.507 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.507 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:03:05.508 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:03:05.509 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:03:05.509 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.509 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:03:05.509 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.509 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:03:05.509 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 02:03:05.510 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.510 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.510 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:03:05.510 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.510 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.510 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:03:05.511 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:03:05.511 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:03:05.511 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.511 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:03:05.511 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.511 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:03:05.511 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.512 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.512 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:03:05.512 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.512 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:05.512 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:03:05.512 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:03:05.513 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:03:05.513 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.513 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:03:05.513 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.513 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:03:05.513 +07:00 [INF] Data seeding completed successfully
2025-09-22 02:03:05.515 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:03:05.516 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:05.517 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:03:05.526 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 02:03:05.636 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 02:03:05.710 +07:00 [DBG] Hosting starting
2025-09-22 02:03:05.718 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 02:03:05.719 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 02:03:05.719 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 02:03:05.721 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 02:03:05.724 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 02:03:05.724 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 02:03:05.728 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 02:03:05.730 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 02:03:05.731 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 02:03:05.732 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 02:03:05.732 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 02:03:05.733 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 02:03:05.733 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 02:03:05.734 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 02:03:05.737 +07:00 [DBG] Middleware loaded
2025-09-22 02:03:05.738 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 02:03:05.739 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 02:03:05.760 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 02:03:05.768 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 02:03:05.768 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 02:03:05.768 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 02:03:05.768 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 02:03:05.768 +07:00 [INF] Hosting environment: Development
2025-09-22 02:03:05.768 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 02:03:05.769 +07:00 [DBG] Hosting started
2025-09-22 02:03:05.887 +07:00 [DBG] Connection id "0HNFP85VJAQU4" accepted.
2025-09-22 02:03:05.888 +07:00 [DBG] Connection id "0HNFP85VJAQU4" started.
2025-09-22 02:03:05.915 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 02:03:05.923 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 02:03:05.962 +07:00 [DBG] Connection id "0HNFP85VJAQU5" accepted.
2025-09-22 02:03:05.963 +07:00 [DBG] Connection id "0HNFP85VJAQU5" started.
2025-09-22 02:03:06.034 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 02:03:06.047 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 02:03:06.048 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:03:06.051 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 135.7068ms
2025-09-22 02:03:06.054 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 02:03:06.056 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 02:03:06.056 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:03:06.057 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.7765ms
2025-09-22 02:03:06.219 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 02:03:06.482 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:03:06.483 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 263.7897ms
2025-09-22 02:03:20.717 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 02:03:20.722 +07:00 [DBG] POST requests are not supported
2025-09-22 02:03:20.723 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 02:03:20.723 +07:00 [DBG] POST requests are not supported
2025-09-22 02:03:20.725 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:03:20.726 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:03:20.818 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:03:20.820 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:03:20.821 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:03:20.994 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:03:20.999 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:03:21.020 +07:00 [DBG] Authorization was successful.
2025-09-22 02:03:21.042 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:03:21.078 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:03:21.083 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:03:21.084 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:03:21.087 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:03:21.088 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:03:21.089 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:03:21.092 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:03:21.357 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:03:21.372 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:03:21.380 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:03:21.384 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:03:21.385 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:03:21.386 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:03:21.388 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:03:21.417 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000004": started reading request body.
2025-09-22 02:03:21.417 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000004": done reading request body.
2025-09-22 02:03:21.431 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:03:21.432 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:03:21.434 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:03:21.435 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:03:21.449 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:03:21.450 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:03:21.451 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:03:21.453 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:03:21.453 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:03:21.454 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:03:21.455 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:03:21.460 +07:00 [INF] Processing AI suggestion for SubmissionId: 0
2025-09-22 02:03:21.464 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":0,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:03:18.2440000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:03:21.583 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:03:21.607 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 02:03:21.641 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 02:03:21.770 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:03:21.777 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:03:21.778 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-22 02:03:21.778 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:21.778 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:21.779 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:03:21.779 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:21.779 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:21.783 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:03:21.795 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:03:21.796 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:03:21.797 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 02:03:21.797 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:21.797 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:03:21.805 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:03:21.807 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:03:21.808 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:03:21.811 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:03:21.812 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:03:21.859 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 765.3078ms
2025-09-22 02:03:21.860 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:03:21.864 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:03:21.865 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:03:21.865 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:21.865 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:03:21.866 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 404 null application/json; charset=utf-8 1149.1847ms
2025-09-22 02:03:33.025 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 02:03:33.026 +07:00 [DBG] POST requests are not supported
2025-09-22 02:03:33.026 +07:00 [DBG] POST requests are not supported
2025-09-22 02:03:33.029 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:03:33.029 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:03:33.042 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:03:33.042 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:03:33.042 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:03:33.047 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:03:33.048 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:03:33.055 +07:00 [DBG] Authorization was successful.
2025-09-22 02:03:33.061 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:03:33.061 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:03:33.062 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:03:33.062 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:03:33.063 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:03:33.063 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:03:33.063 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:03:33.063 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:03:33.070 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:03:33.071 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:03:33.071 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:03:33.071 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:03:33.071 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:03:33.072 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:03:33.075 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:03:33.076 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000005": started reading request body.
2025-09-22 02:03:33.077 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000005": done reading request body.
2025-09-22 02:03:33.077 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:03:33.078 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:03:33.078 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:03:33.078 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:03:33.080 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:03:33.082 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:03:33.084 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:03:33.084 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:03:33.084 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:03:33.084 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:03:33.085 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:03:33.085 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:03:33.086 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:03:18.2440000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:03:33.109 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:03:33.111 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:03:33.111 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 02:03:33.111 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:33.111 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:33.112 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:03:33.112 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:33.112 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:33.112 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:03:33.116 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:03:33.125 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:03:33.125 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 8ms reading results.
2025-09-22 02:03:33.126 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:33.126 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:03:33.138 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 02:03:33.159 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 02:03:33.160 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 02:03:33.160 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 02:03:33.161 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 02:03:33.282 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 02:03:33.304 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 02:03:33.321 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:33.324 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:33.324 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:03:33.324 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:33.325 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:03:33.325 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:03:33.411 +07:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:03:33.429 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:03:33.431 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 18ms reading results.
2025-09-22 02:03:33.431 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:33.432 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:03:33.498 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 02:03:33.500 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:03:33.500 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:03:33.501 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 02:03:40.632 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 02:03:40.650 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:03:40.651 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:03:40.651 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:03:40.651 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:03:40.652 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:03:40.718 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7654.7521ms
2025-09-22 02:03:40.718 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:03:40.719 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:03:40.719 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:03:40.720 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:03:40.720 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:03:40.720 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 7694.9035ms
2025-09-22 02:05:17.067 +07:00 [DBG] Connection id "0HNFP85VJAQU5" disconnecting.
2025-09-22 02:05:17.072 +07:00 [DBG] Connection id "0HNFP85VJAQU5" stopped.
2025-09-22 02:05:17.080 +07:00 [DBG] Connection id "0HNFP85VJAQU5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:05:35.982 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:05:35.983 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:35.983 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:35.983 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:05:35.983 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:05:35.983 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:35.983 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:35.983 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:36.001 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:05:36.001 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:05:36.005 +07:00 [DBG] Authorization was successful.
2025-09-22 02:05:36.008 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:36.009 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:05:36.009 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:05:36.009 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:05:36.010 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:05:36.010 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:05:36.010 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:05:36.010 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:36.031 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:36.031 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:36.031 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:05:36.031 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:36.032 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:36.032 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:36.032 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:05:36.032 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000006": started reading request body.
2025-09-22 02:05:36.032 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000006": done reading request body.
2025-09-22 02:05:36.032 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:05:36.032 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:36.032 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:36.032 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:36.033 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:36.033 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:36.033 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:05:36.033 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:36.033 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:36.033 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:36.033 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:36.034 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:05:36.034 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:03:18.2440000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:05:36.038 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:05:36.039 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:05:36.039 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:05:36.039 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:05:36.039 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:05:36.043 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 33.3283ms
2025-09-22 02:05:36.044 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:36.044 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:05:36.045 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 62.489ms
2025-09-22 02:05:40.479 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:05:40.479 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:40.479 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:40.479 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:05:40.480 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:05:40.480 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:40.480 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:40.480 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:40.481 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:05:40.482 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:05:40.485 +07:00 [DBG] Authorization was successful.
2025-09-22 02:05:40.485 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:40.485 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:05:40.485 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:05:40.485 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:05:40.485 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:05:40.486 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:05:40.486 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:05:40.486 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:40.488 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:40.488 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:40.489 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:05:40.489 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:40.489 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:40.489 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:40.489 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:05:40.489 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000007": started reading request body.
2025-09-22 02:05:40.489 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000007": done reading request body.
2025-09-22 02:05:40.489 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:05:40.490 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:40.490 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:40.490 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:40.490 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:40.490 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:40.491 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:05:40.491 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:40.491 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:40.491 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:40.491 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:40.491 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:05:40.491 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:03:18.2440000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:05:40.492 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:05:40.492 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:05:40.492 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:05:40.492 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:05:40.492 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:05:40.492 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6.8393ms
2025-09-22 02:05:40.494 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:40.495 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:05:40.495 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 16.0097ms
2025-09-22 02:05:42.736 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:05:42.736 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:42.736 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:42.736 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:05:42.736 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:05:42.736 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:42.737 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:42.738 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:42.739 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:05:42.739 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:05:42.739 +07:00 [DBG] Authorization was successful.
2025-09-22 02:05:42.739 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:42.740 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:05:42.740 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:05:42.740 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:05:42.740 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:05:42.740 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:05:42.740 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:05:42.740 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:42.743 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:42.743 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:42.743 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:05:42.743 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:42.743 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:42.743 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:42.744 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:05:42.744 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000008": started reading request body.
2025-09-22 02:05:42.744 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000008": done reading request body.
2025-09-22 02:05:42.744 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:05:42.744 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:42.744 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:42.744 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:42.745 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:42.745 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:42.745 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:05:42.745 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:42.745 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:42.746 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:42.746 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:42.746 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:05:42.746 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:03:18.2440000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:05:42.747 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:05:42.747 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:05:42.747 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:05:42.747 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:05:42.752 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:05:42.752 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 12.0334ms
2025-09-22 02:05:42.753 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:42.753 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:05:42.754 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 18.0846ms
2025-09-22 02:05:46.507 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:05:46.507 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:46.507 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:46.508 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:05:46.508 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:05:46.508 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:46.508 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:46.508 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:46.509 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:05:46.509 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:05:46.509 +07:00 [DBG] Authorization was successful.
2025-09-22 02:05:46.509 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:46.509 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:05:46.509 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:05:46.509 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:05:46.510 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:05:46.510 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:05:46.510 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:05:46.510 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:46.510 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:46.510 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:46.510 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:05:46.511 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:46.511 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:46.511 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:46.511 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:05:46.511 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000009": started reading request body.
2025-09-22 02:05:46.511 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:00000009": done reading request body.
2025-09-22 02:05:46.511 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:05:46.511 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:46.511 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:46.511 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:46.511 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:46.511 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:46.512 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:05:46.512 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:46.512 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:46.512 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:46.512 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:46.512 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:05:46.512 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:03:18.2440000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:05:46.512 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:05:46.513 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:05:46.513 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:05:46.513 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:05:46.513 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:05:46.513 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3.5649ms
2025-09-22 02:05:46.513 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:46.514 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:05:46.515 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 7.1873ms
2025-09-22 02:05:46.899 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:05:46.900 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:46.900 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:46.900 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:05:46.900 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:05:46.900 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:46.900 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:46.900 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:46.901 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:05:46.901 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:05:46.901 +07:00 [DBG] Authorization was successful.
2025-09-22 02:05:46.902 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:46.902 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:05:46.912 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:05:46.912 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:05:46.912 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:05:46.912 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:05:46.913 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:05:46.914 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:46.916 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:46.919 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:46.919 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:05:46.920 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:46.920 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:46.920 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:46.920 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:05:46.920 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:0000000A": started reading request body.
2025-09-22 02:05:46.920 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:0000000A": done reading request body.
2025-09-22 02:05:46.920 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:05:46.921 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:46.921 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:46.921 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:46.921 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:46.921 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:46.922 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:05:46.922 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:46.922 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:46.922 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:46.922 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:46.922 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:05:46.922 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:03:18.2440000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:05:46.923 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:05:46.923 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:05:46.926 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:05:46.927 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:05:46.927 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:05:46.927 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 13.5369ms
2025-09-22 02:05:46.927 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:46.928 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:05:46.928 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 28.1755ms
2025-09-22 02:05:47.108 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:05:47.108 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:47.108 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:47.108 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:05:47.108 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:05:47.108 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:47.108 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:47.108 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:47.110 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:05:47.110 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:05:47.110 +07:00 [DBG] Authorization was successful.
2025-09-22 02:05:47.110 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:47.113 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:05:47.113 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:05:47.114 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:05:47.114 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:05:47.114 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:05:47.115 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:05:47.115 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:47.116 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:47.116 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:47.116 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:05:47.116 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:47.116 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:47.116 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:47.116 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:05:47.117 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:0000000B": started reading request body.
2025-09-22 02:05:47.117 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:0000000B": done reading request body.
2025-09-22 02:05:47.117 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:05:47.118 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:47.118 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:47.119 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:47.119 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:47.119 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:47.120 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:05:47.123 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:47.123 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:47.123 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:47.123 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:47.123 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:05:47.123 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:03:18.2440000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:05:47.123 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:05:47.123 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:05:47.124 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:05:47.124 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:05:47.124 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:05:47.124 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 9.0327ms
2025-09-22 02:05:47.124 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:47.124 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:05:47.125 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 16.901ms
2025-09-22 02:05:47.414 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:05:47.414 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:47.414 +07:00 [DBG] POST requests are not supported
2025-09-22 02:05:47.414 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:05:47.414 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:05:47.414 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:47.414 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:05:47.414 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:47.415 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:05:47.415 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:05:47.415 +07:00 [DBG] Authorization was successful.
2025-09-22 02:05:47.415 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:47.415 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:05:47.415 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:05:47.415 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:05:47.415 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:05:47.415 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:05:47.415 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:05:47.417 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:47.417 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:05:47.418 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:47.418 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:05:47.418 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:47.418 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:47.418 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:05:47.418 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:05:47.418 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:0000000C": started reading request body.
2025-09-22 02:05:47.418 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:0000000C": done reading request body.
2025-09-22 02:05:47.418 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:05:47.418 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:47.418 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:47.418 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:05:47.419 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:05:47.419 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:47.419 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:05:47.419 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:47.419 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:47.419 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:05:47.419 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:05:47.419 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:05:47.419 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:03:18.2440000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:05:47.420 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:05:47.420 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:05:47.420 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:05:47.420 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:05:47.420 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:05:47.421 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5.227ms
2025-09-22 02:05:47.421 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:05:47.421 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:05:47.421 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 7.2966ms
2025-09-22 02:06:04.010 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:06:04.010 +07:00 [DBG] POST requests are not supported
2025-09-22 02:06:04.010 +07:00 [DBG] POST requests are not supported
2025-09-22 02:06:04.010 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:06:04.010 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:06:04.011 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:06:04.011 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:06:04.011 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:06:04.011 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:06:04.011 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:06:04.011 +07:00 [DBG] Authorization was successful.
2025-09-22 02:06:04.011 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:06:04.011 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:06:04.012 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:06:04.012 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:06:04.012 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:06:04.012 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:06:04.012 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:06:04.012 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:06:04.013 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:06:04.013 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:06:04.013 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:06:04.013 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:06:04.013 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:06:04.013 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:06:04.013 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:06:04.014 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:0000000D": started reading request body.
2025-09-22 02:06:04.014 +07:00 [DBG] Connection id "0HNFP85VJAQU4", Request id "0HNFP85VJAQU4:0000000D": done reading request body.
2025-09-22 02:06:04.014 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:06:04.014 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:06:04.014 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:06:04.014 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:06:04.015 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:06:04.015 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:06:04.015 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:06:04.015 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:06:04.015 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:06:04.015 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:06:04.016 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:06:04.016 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:06:04.017 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-22T19:03:18.2440000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:06:04.019 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:06:04.019 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:06:04.019 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 02:06:04.019 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:04.020 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:04.020 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:04.020 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:04.020 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:04.020 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:06:04.031 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:06:04.033 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:04.033 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 02:06:04.033 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:04.034 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:04.037 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:04.038 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:04.038 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:04.038 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:04.038 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:04.038 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:06:04.137 +07:00 [INF] Executed DbCommand (99ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:06:04.140 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:04.141 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-09-22 02:06:04.141 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:04.143 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 02:06:04.146 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 02:06:04.149 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:06:04.150 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:06:04.154 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 02:06:10.673 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 02:06:10.714 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 02:06:10.732 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:06:10.733 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.733 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.733 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:10.733 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:10.733 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:10.733 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:06:10.740 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:06:10.740 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.740 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:10.740 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.740 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:10.742 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 02:06:10.745 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 02:06:10.773 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:06:10.774 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.774 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.775 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:10.775 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:10.775 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:10.775 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:06:10.781 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:06:10.782 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.782 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:10.782 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.782 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:10.785 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 02:06:10.787 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 02:06:10.798 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 02:06:10.799 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.801 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.801 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:10.802 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:10.802 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:10.802 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:06:10.807 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:06:10.809 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.809 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 02:06:10.809 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.809 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:10.812 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 02:06:10.819 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:06:10.825 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.825 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.825 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:10.825 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:10.825 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:10.825 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:06:10.829 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:06:10.829 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.829 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:10.829 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.829 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:10.831 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 02:06:10.845 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 02:06:10.852 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.852 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.852 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:10.852 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:10.852 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:10.853 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:06:10.858 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:06:10.858 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.859 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:10.859 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:10.859 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:10.920 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:10.976 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:10.982 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 02:06:10.990 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 02:06:11.033 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 02:06:11.152 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.152 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.157 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.157 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.159 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 02:06:11.161 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:06:11.170 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:06:11.189 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 02:06:11.198 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.198 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 27ms reading results.
2025-09-22 02:06:11.199 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.199 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.217 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:11.219 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 02:06:11.220 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 02:06:11.225 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 02:06:11.226 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 02:06:11.227 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 02:06:11.228 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 02:06:11.231 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 02:06:11.269 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:06:11.274 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.275 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.275 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.275 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.275 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.275 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:06:11.292 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:06:11.295 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.295 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 02:06:11.295 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.296 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.320 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 02:06:11.349 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.349 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.350 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.350 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.350 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.350 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:06:11.351 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:06:11.351 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.351 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.351 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.351 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.352 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.352 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.352 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.352 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.352 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.352 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:06:11.354 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:06:11.355 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.355 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.356 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.375 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (19ms).
2025-09-22 02:06:11.376 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.376 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.377 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.377 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.377 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.377 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:06:11.378 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:06:11.378 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.378 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.379 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.379 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.379 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.379 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.379 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.379 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.379 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.379 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:06:11.380 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:06:11.381 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.381 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.381 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.381 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.383 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.384 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.384 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.384 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.384 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.384 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:06:11.388 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:06:11.389 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.389 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.390 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.390 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.392 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:11.392 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:11.393 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 02:06:11.393 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 02:06:11.395 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 02:06:11.399 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.399 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.399 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.399 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.399 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.399 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:06:11.403 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:06:11.404 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 02:06:11.404 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.405 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.405 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.405 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.406 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:11.406 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 02:06:11.407 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.407 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.407 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.407 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.407 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.407 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:06:11.410 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:06:11.411 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.411 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.411 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.411 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.412 +07:00 [ERR] Error assigning reviewer 10
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 02:06:11.415 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.415 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.415 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.415 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.415 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.415 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:06:11.418 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:06:11.418 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.419 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.419 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.419 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.419 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.419 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.419 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.419 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.420 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.420 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:06:11.421 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:06:11.421 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.421 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.422 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.422 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.424 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.424 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.425 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.425 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.425 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.425 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:06:11.426 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:06:11.427 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.427 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.427 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.427 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.428 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.428 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.428 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.428 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.428 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.428 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:06:11.429 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:06:11.429 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.429 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.430 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.430 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.432 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.432 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.433 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.433 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.433 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.433 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:06:11.434 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:06:11.435 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.435 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.435 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.435 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.435 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:11.435 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:11.435 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 02:06:11.436 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 02:06:11.436 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 02:06:11.436 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.436 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.436 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.438 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 02:06:11.438 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 02:06:11.438 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:06:11.441 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:06:11.441 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 02:06:11.441 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.441 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.441 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.442 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.442 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:11.442 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 02:06:11.442 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.442 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.442 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.442 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.443 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.443 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:06:11.446 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:06:11.448 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.448 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.448 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.448 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.448 +07:00 [ERR] Error assigning reviewer 11
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 02:06:11.462 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.462 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.462 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.462 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.463 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.463 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:06:11.464 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:06:11.464 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.464 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.464 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.466 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.467 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.467 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.467 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.467 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.467 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.467 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:06:11.471 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:06:11.475 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.476 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.476 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.476 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.477 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.477 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.477 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.477 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.477 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.477 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:06:11.480 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:06:11.480 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.480 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.481 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.481 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.481 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.481 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.481 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.481 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.482 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.482 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:06:11.483 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:06:11.484 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.484 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.484 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.484 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.485 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.485 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.485 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.485 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.485 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.485 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:06:11.487 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:06:11.488 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.488 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.488 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.488 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.488 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:11.489 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:11.489 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 02:06:11.489 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 02:06:11.489 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 02:06:11.489 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.490 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.490 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.490 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.490 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.490 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:06:11.494 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:06:11.494 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 02:06:11.494 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.494 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.494 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.494 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.494 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:06:11.495 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 02:06:11.496 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.496 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.496 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:06:11.497 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.497 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:06:11.497 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:06:11.500 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:06:11.502 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.502 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:06:11.503 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.503 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:06:11.503 +07:00 [ERR] Error assigning reviewer 9
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 02:06:11.506 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:06:11.507 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:06:11.507 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:06:11.507 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:06:11.507 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:06:11.508 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7496.0899ms
2025-09-22 02:06:11.508 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:06:11.509 +07:00 [DBG] Connection id "0HNFP85VJAQU4" completed keep alive response.
2025-09-22 02:06:11.509 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:06:11.509 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:06:11.509 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:06:11.509 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 7499.0455ms
2025-09-22 02:08:21.705 +07:00 [DBG] Connection id "0HNFP85VJAQU4" disconnecting.
2025-09-22 02:08:21.706 +07:00 [DBG] Connection id "0HNFP85VJAQU4" stopped.
2025-09-22 02:08:21.706 +07:00 [DBG] Connection id "0HNFP85VJAQU4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:08:34.287 +07:00 [INF] Application is shutting down...
2025-09-22 02:08:34.288 +07:00 [DBG] Hosting stopping
2025-09-22 02:08:34.296 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 02:08:34.297 +07:00 [DBG] Hosting stopped
2025-09-22 02:24:29.528 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 02:24:29.590 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 02:24:29.744 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.760 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.771 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.773 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.773 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.774 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.936 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.937 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.951 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.951 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.951 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.952 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.956 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.956 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:24:29.989 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 02:24:29.989 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 02:24:29.989 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 02:24:29.989 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 02:24:29.989 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 02:24:29.989 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 02:24:29.989 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 02:24:29.989 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 02:24:29.989 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 02:24:29.990 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 02:24:29.990 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 02:24:29.990 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 02:24:29.990 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 02:24:29.990 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 02:24:29.990 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 02:24:29.991 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 02:24:29.991 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 02:24:29.991 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 02:24:29.991 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 02:24:30.101 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:24:30.102 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:24:30.102 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:24:30.102 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:24:30.102 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:24:30.102 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:24:30.102 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:24:30.102 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:24:30.102 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:24:30.102 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:24:30.103 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:24:30.207 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:24:30.249 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 02:24:30.355 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:24:30.378 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:24:30.389 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 02:24:30.392 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.488 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.491 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:24:30.494 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 02:24:30.499 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 02:24:30.503 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:24:30.530 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:24:30.558 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:24:30.571 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.576 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 42ms reading results.
2025-09-22 02:24:30.577 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.581 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 02:24:30.582 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.583 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.583 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:24:30.583 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.583 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.583 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:24:30.585 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:24:30.586 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:24:30.586 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.586 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:24:30.586 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.587 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:24:30.587 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.587 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.587 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:24:30.588 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.588 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.588 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:24:30.589 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:24:30.589 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:24:30.589 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.589 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:24:30.589 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.589 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:24:30.590 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.590 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.590 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:24:30.590 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.590 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.590 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:24:30.591 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:24:30.591 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:24:30.591 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.591 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:24:30.591 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.591 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:24:30.595 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 02:24:30.599 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:24:30.601 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.601 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.601 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:24:30.601 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.601 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.602 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:24:30.605 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:24:30.622 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:24:30.644 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.644 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 39ms reading results.
2025-09-22 02:24:30.645 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.645 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:24:30.646 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 02:24:30.648 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.648 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.648 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:24:30.648 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.648 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.648 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:24:30.650 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:24:30.650 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:24:30.650 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.650 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:24:30.650 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.650 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:24:30.651 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 02:24:30.651 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.651 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.651 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:24:30.651 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.651 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.651 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:24:30.652 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:24:30.652 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:24:30.652 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.652 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:24:30.652 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.652 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:24:30.653 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.653 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.653 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:24:30.653 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.653 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:24:30.653 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:24:30.653 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:24:30.654 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:24:30.654 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.654 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:24:30.654 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.654 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:24:30.654 +07:00 [INF] Data seeding completed successfully
2025-09-22 02:24:30.655 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:24:30.656 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:30.657 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:24:30.666 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 02:24:30.775 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 02:24:30.855 +07:00 [DBG] Hosting starting
2025-09-22 02:24:30.862 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 02:24:30.863 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 02:24:30.863 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 02:24:30.866 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 02:24:30.867 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 02:24:30.868 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 02:24:30.871 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 02:24:30.874 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 02:24:30.874 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 02:24:30.875 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 02:24:30.875 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 02:24:30.876 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 02:24:30.877 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 02:24:30.877 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 02:24:30.881 +07:00 [DBG] Middleware loaded
2025-09-22 02:24:30.881 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 02:24:30.882 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 02:24:30.903 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 02:24:30.911 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 02:24:30.911 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 02:24:30.912 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 02:24:30.912 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 02:24:30.912 +07:00 [INF] Hosting environment: Development
2025-09-22 02:24:30.912 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 02:24:30.914 +07:00 [DBG] Hosting started
2025-09-22 02:24:31.060 +07:00 [DBG] Connection id "0HNFP8HUJMC78" accepted.
2025-09-22 02:24:31.061 +07:00 [DBG] Connection id "0HNFP8HUJMC78" started.
2025-09-22 02:24:31.098 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 02:24:31.109 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 02:24:31.150 +07:00 [DBG] Connection id "0HNFP8HUJMC79" accepted.
2025-09-22 02:24:31.151 +07:00 [DBG] Connection id "0HNFP8HUJMC79" started.
2025-09-22 02:24:31.252 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 02:24:31.262 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 02:24:31.263 +07:00 [DBG] Connection id "0HNFP8HUJMC78" completed keep alive response.
2025-09-22 02:24:31.265 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 167.8609ms
2025-09-22 02:24:31.271 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 02:24:31.274 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 02:24:31.274 +07:00 [DBG] Connection id "0HNFP8HUJMC78" completed keep alive response.
2025-09-22 02:24:31.275 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.4863ms
2025-09-22 02:24:31.357 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 02:24:31.730 +07:00 [DBG] Connection id "0HNFP8HUJMC78" completed keep alive response.
2025-09-22 02:24:31.731 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 373.7571ms
2025-09-22 02:24:53.244 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 02:24:53.249 +07:00 [DBG] POST requests are not supported
2025-09-22 02:24:53.250 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 02:24:53.251 +07:00 [DBG] POST requests are not supported
2025-09-22 02:24:53.252 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:24:53.253 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:24:53.330 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:24:53.334 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:24:53.336 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:24:53.464 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:24:53.465 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:24:53.474 +07:00 [DBG] Authorization was successful.
2025-09-22 02:24:53.488 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:24:53.528 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:24:53.530 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:24:53.531 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:24:53.535 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:24:53.535 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:24:53.535 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:24:53.540 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:24:53.756 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:24:53.767 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:24:53.774 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:24:53.780 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:24:53.780 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:24:53.781 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:24:53.782 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:24:53.814 +07:00 [DBG] Connection id "0HNFP8HUJMC78", Request id "0HNFP8HUJMC78:00000004": started reading request body.
2025-09-22 02:24:53.814 +07:00 [DBG] Connection id "0HNFP8HUJMC78", Request id "0HNFP8HUJMC78:00000004": done reading request body.
2025-09-22 02:24:53.826 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:24:53.827 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:24:53.827 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:24:53.828 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:24:53.856 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:24:53.862 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:24:53.864 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:24:53.868 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:24:53.869 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:24:53.870 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:24:53.871 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:24:53.878 +07:00 [INF] Processing AI suggestion for SubmissionId: 0
2025-09-22 02:24:53.886 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":0,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:24:48.9160000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:24:53.999 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:24:54.020 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 02:24:54.044 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 02:24:54.199 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:24:54.219 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:24:54.222 +07:00 [DBG] Created DbConnection. (3ms).
2025-09-22 02:24:54.224 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:54.225 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:54.225 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:24:54.227 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 02:24:54.229 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-22 02:24:54.231 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:24:54.243 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:24:54.245 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:24:54.245 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 02:24:54.245 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:54.246 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:24:54.264 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:24:54.266 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:24:54.267 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:24:54.271 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:24:54.272 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:24:54.314 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 774.4745ms
2025-09-22 02:24:54.316 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:24:54.324 +07:00 [DBG] Connection id "0HNFP8HUJMC78" completed keep alive response.
2025-09-22 02:24:54.325 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:24:54.326 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:24:54.327 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:24:54.329 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 404 null application/json; charset=utf-8 1085.3917ms
2025-09-22 02:25:09.247 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 02:25:09.248 +07:00 [DBG] POST requests are not supported
2025-09-22 02:25:09.248 +07:00 [DBG] POST requests are not supported
2025-09-22 02:25:09.252 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:25:09.252 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:25:09.266 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:25:09.267 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:25:09.270 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:25:09.277 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:25:09.279 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:25:09.285 +07:00 [DBG] Authorization was successful.
2025-09-22 02:25:09.289 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:25:09.291 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:25:09.291 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:25:09.294 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:25:09.294 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:25:09.295 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:25:09.296 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:25:09.296 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:25:09.301 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:25:09.301 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:25:09.302 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:25:09.302 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:25:09.302 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:25:09.303 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:25:09.303 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:25:09.303 +07:00 [DBG] Connection id "0HNFP8HUJMC78", Request id "0HNFP8HUJMC78:00000005": started reading request body.
2025-09-22 02:25:09.304 +07:00 [DBG] Connection id "0HNFP8HUJMC78", Request id "0HNFP8HUJMC78:00000005": done reading request body.
2025-09-22 02:25:09.304 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:25:09.304 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:25:09.305 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:25:09.308 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:25:09.309 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:25:09.309 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:25:09.310 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:25:09.310 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:25:09.310 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:25:09.311 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:25:09.311 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:25:09.311 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:25:09.313 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:24:48.9160000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:25:09.336 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:25:09.339 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:25:09.339 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 02:25:09.339 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:25:09.339 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:25:09.340 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:25:09.340 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:25:09.340 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:25:09.343 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:25:09.345 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:25:09.351 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:25:09.352 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-09-22 02:25:09.352 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:25:09.352 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:25:09.363 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 02:25:09.377 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 02:25:09.377 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 02:25:09.378 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 02:25:09.379 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 02:25:09.511 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 02:25:09.538 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 02:25:09.582 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:25:09.585 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:25:09.585 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:25:09.585 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:25:09.586 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:25:09.586 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:25:09.686 +07:00 [INF] Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:25:09.713 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:25:09.713 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 26ms reading results.
2025-09-22 02:25:09.713 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:25:09.714 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:25:09.779 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 02:25:09.781 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:25:09.782 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:25:09.783 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 02:25:15.757 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 02:25:15.802 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:25:15.803 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:25:15.803 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:25:15.804 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:25:15.805 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:25:15.871 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6575.2965ms
2025-09-22 02:25:15.871 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:25:15.872 +07:00 [DBG] Connection id "0HNFP8HUJMC78" completed keep alive response.
2025-09-22 02:25:15.872 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:25:15.872 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:25:15.872 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:25:15.872 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 6625.5284ms
2025-09-22 02:26:43.034 +07:00 [DBG] Connection id "0HNFP8HUJMC79" disconnecting.
2025-09-22 02:26:43.037 +07:00 [DBG] Connection id "0HNFP8HUJMC79" stopped.
2025-09-22 02:26:43.042 +07:00 [DBG] Connection id "0HNFP8HUJMC79" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:27:26.508 +07:00 [DBG] Connection id "0HNFP8HUJMC78" disconnecting.
2025-09-22 02:27:26.508 +07:00 [DBG] Connection id "0HNFP8HUJMC78" stopped.
2025-09-22 02:27:26.509 +07:00 [DBG] Connection id "0HNFP8HUJMC78" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:28:01.050 +07:00 [DBG] Connection id "0HNFP8HUJMC7A" accepted.
2025-09-22 02:28:01.050 +07:00 [DBG] Connection id "0HNFP8HUJMC7A" started.
2025-09-22 02:28:01.051 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:28:01.052 +07:00 [DBG] POST requests are not supported
2025-09-22 02:28:01.052 +07:00 [DBG] POST requests are not supported
2025-09-22 02:28:01.055 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:28:01.056 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:28:01.056 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:28:01.056 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:28:01.056 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:28:01.061 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:28:01.062 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:28:01.064 +07:00 [DBG] Authorization was successful.
2025-09-22 02:28:01.066 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:28:01.066 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:28:01.066 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:28:01.067 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:28:01.067 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:28:01.067 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:28:01.067 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:28:01.067 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:28:01.090 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:28:01.090 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:28:01.090 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:28:01.090 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:28:01.090 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:28:01.091 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:28:01.091 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:28:01.091 +07:00 [DBG] Connection id "0HNFP8HUJMC7A", Request id "0HNFP8HUJMC7A:00000001": started reading request body.
2025-09-22 02:28:01.091 +07:00 [DBG] Connection id "0HNFP8HUJMC7A", Request id "0HNFP8HUJMC7A:00000001": done reading request body.
2025-09-22 02:28:01.091 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:28:01.091 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:28:01.091 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:28:01.091 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:28:01.091 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:28:01.091 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:28:01.092 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:28:01.092 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:28:01.092 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:28:01.095 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:28:01.096 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:28:01.096 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:28:01.096 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:24:48.9160000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:28:01.097 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:28:01.097 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:28:01.097 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:28:01.097 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:28:01.097 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:28:01.097 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 30.5801ms
2025-09-22 02:28:01.097 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:28:01.098 +07:00 [DBG] Connection id "0HNFP8HUJMC7A" completed keep alive response.
2025-09-22 02:28:01.098 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 46.8262ms
2025-09-22 02:28:09.422 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:28:09.422 +07:00 [DBG] POST requests are not supported
2025-09-22 02:28:09.423 +07:00 [DBG] POST requests are not supported
2025-09-22 02:28:09.423 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:28:09.423 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:28:09.423 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:28:09.425 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:28:09.425 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:28:09.426 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:28:09.426 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:28:09.426 +07:00 [DBG] Authorization was successful.
2025-09-22 02:28:09.426 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:28:09.426 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:28:09.427 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:28:09.427 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:28:09.427 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:28:09.427 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:28:09.427 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:28:09.427 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:28:09.428 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:28:09.429 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:28:09.429 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:28:09.429 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:28:09.429 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:28:09.429 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:28:09.430 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:28:09.431 +07:00 [DBG] Connection id "0HNFP8HUJMC7A", Request id "0HNFP8HUJMC7A:00000002": started reading request body.
2025-09-22 02:28:09.431 +07:00 [DBG] Connection id "0HNFP8HUJMC7A", Request id "0HNFP8HUJMC7A:00000002": done reading request body.
2025-09-22 02:28:09.433 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:28:09.433 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:28:09.434 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:28:09.434 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:28:09.434 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:28:09.434 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:28:09.434 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:28:09.434 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:28:09.434 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:28:09.434 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:28:09.434 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:28:09.434 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:28:09.434 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:24:48.9160000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:28:09.435 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:28:09.435 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:28:09.436 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:28:09.436 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:28:09.436 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:28:09.436 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 9.5645ms
2025-09-22 02:28:09.439 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:28:09.440 +07:00 [DBG] Connection id "0HNFP8HUJMC7A" completed keep alive response.
2025-09-22 02:28:09.440 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 17.6717ms
2025-09-22 02:28:18.543 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:28:18.543 +07:00 [DBG] POST requests are not supported
2025-09-22 02:28:18.543 +07:00 [DBG] POST requests are not supported
2025-09-22 02:28:18.543 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:28:18.543 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:28:18.544 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:28:18.544 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:28:18.544 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:28:18.545 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:28:18.545 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:28:18.549 +07:00 [DBG] Authorization was successful.
2025-09-22 02:28:18.549 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:28:18.550 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:28:18.550 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:28:18.550 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:28:18.553 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:28:18.553 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:28:18.554 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:28:18.554 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:28:18.555 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:28:18.555 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:28:18.557 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:28:18.557 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:28:18.557 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:28:18.557 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:28:18.557 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:28:18.557 +07:00 [DBG] Connection id "0HNFP8HUJMC7A", Request id "0HNFP8HUJMC7A:00000003": started reading request body.
2025-09-22 02:28:18.557 +07:00 [DBG] Connection id "0HNFP8HUJMC7A", Request id "0HNFP8HUJMC7A:00000003": done reading request body.
2025-09-22 02:28:18.558 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:28:18.558 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:28:18.559 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:28:18.559 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:28:18.559 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:28:18.559 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:28:18.559 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:28:18.560 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:28:18.560 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:28:18.560 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:28:18.560 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:28:18.560 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:28:18.560 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-22T19:24:48.9160000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:28:18.563 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:28:18.563 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:28:18.563 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 02:28:18.564 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:18.564 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:18.564 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:18.564 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:18.564 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:18.564 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:28:18.582 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:28:18.583 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:18.583 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 02:28:18.584 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:18.585 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 02:28:18.592 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:18.592 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:18.594 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:18.595 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 02:28:18.596 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 02:28:18.596 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:28:18.674 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:28:18.675 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:18.675 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:18.675 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:18.675 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:18.676 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 02:28:18.678 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:28:18.679 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:28:18.679 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 02:28:24.408 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 02:28:24.448 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 02:28:24.467 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:28:24.471 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.472 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.472 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.472 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.472 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.472 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:28:24.478 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:28:24.479 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.480 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 02:28:24.480 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.481 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.486 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 02:28:24.488 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 02:28:24.516 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:28:24.521 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.522 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.522 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.522 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.522 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.522 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:28:24.530 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:28:24.530 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.532 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 02:28:24.532 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.533 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.536 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 02:28:24.538 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 02:28:24.550 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 02:28:24.554 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.554 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.554 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.554 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.555 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 02:28:24.555 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:28:24.561 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:28:24.561 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.562 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.562 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.562 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.567 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 02:28:24.574 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:28:24.576 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.577 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.577 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.577 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.577 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.578 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:28:24.581 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:28:24.582 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.582 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.582 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.582 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.583 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.584 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.584 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.584 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.584 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.584 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:28:24.586 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:28:24.588 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.588 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.589 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.589 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.589 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.589 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.589 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.589 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.590 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.590 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:28:24.591 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:28:24.591 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.591 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.592 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.592 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.592 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.592 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.592 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.594 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 02:28:24.594 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 02:28:24.594 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:28:24.595 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:28:24.596 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.596 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.596 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.596 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.596 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.597 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.597 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.597 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.597 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.597 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:28:24.598 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:28:24.601 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.601 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.602 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.602 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.602 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.602 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.603 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.603 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.603 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.603 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:28:24.604 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:28:24.605 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.605 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.605 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.605 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.605 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.605 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.606 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.606 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.606 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.606 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:28:24.610 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:28:24.610 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.610 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.610 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.610 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.613 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.613 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.613 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.613 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.613 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.614 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:28:24.615 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:28:24.616 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.616 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.616 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.616 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.617 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.618 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.618 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.618 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.618 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.618 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:28:24.619 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:28:24.620 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.622 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-09-22 02:28:24.623 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.623 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.623 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.624 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.624 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.624 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.624 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.624 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:28:24.625 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:28:24.625 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.626 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.626 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.626 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.626 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.626 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.626 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.627 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.627 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.627 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:28:24.630 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:28:24.630 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.630 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.631 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.631 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.631 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.631 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.631 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.632 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.632 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.632 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:28:24.633 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:28:24.633 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.633 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.634 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.634 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.634 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.634 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.635 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:28:24.635 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:28:24.637 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 02:28:24.638 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:28:24.639 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:28:24.640 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.640 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:28:24.640 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.640 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:28:24.641 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:28:24.641 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:28:24.641 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:28:24.643 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:28:24.643 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:28:24.644 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6089.8003ms
2025-09-22 02:28:24.644 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:28:24.644 +07:00 [DBG] Connection id "0HNFP8HUJMC7A" completed keep alive response.
2025-09-22 02:28:24.644 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:28:24.645 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:28:24.645 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:28:24.645 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 6101.9153ms
2025-09-22 02:30:07.601 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 109
2025-09-22 02:30:07.601 +07:00 [DBG] POST requests are not supported
2025-09-22 02:30:07.601 +07:00 [DBG] POST requests are not supported
2025-09-22 02:30:07.601 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:30:07.601 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:30:07.601 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:30:07.601 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:30:07.601 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:30:07.602 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:30:07.602 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:30:07.602 +07:00 [DBG] Authorization was successful.
2025-09-22 02:30:07.602 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:30:07.602 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:30:07.610 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:30:07.610 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:30:07.610 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:30:07.610 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:30:07.610 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:30:07.611 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:30:07.612 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:30:07.615 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:30:07.615 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:30:07.616 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:30:07.616 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:30:07.616 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:30:07.616 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:30:07.616 +07:00 [DBG] Connection id "0HNFP8HUJMC7A", Request id "0HNFP8HUJMC7A:00000004": started reading request body.
2025-09-22 02:30:07.616 +07:00 [DBG] Connection id "0HNFP8HUJMC7A", Request id "0HNFP8HUJMC7A:00000004": done reading request body.
2025-09-22 02:30:07.617 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:30:07.617 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:30:07.617 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:30:07.617 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:30:07.618 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:30:07.618 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:30:07.619 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:30:07.619 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:30:07.620 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:30:07.620 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:30:07.620 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:30:07.621 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:30:07.622 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":3,"UsePrompt":true,"Deadline":"2025-09-22T19:24:48.9160000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:30:07.624 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:30:07.625 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:30:07.625 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 02:30:07.625 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:07.626 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:07.626 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:07.627 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:07.627 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:07.629 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:30:07.643 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:30:07.644 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:07.644 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:07.644 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:07.644 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:07.645 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:07.646 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:07.646 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:07.646 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:07.646 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:07.647 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:30:07.734 +07:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:30:07.735 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:07.736 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 02:30:07.736 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:07.736 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:07.739 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 02:30:07.739 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:30:07.740 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:30:07.740 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 02:30:14.517 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 02:30:14.520 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.520 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.521 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:14.523 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 02:30:14.523 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 02:30:14.524 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:30:14.527 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:30:14.528 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.529 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 02:30:14.529 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.529 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:14.530 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.530 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.530 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:14.530 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:14.530 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:14.530 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:30:14.540 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:30:14.541 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.541 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:14.541 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.541 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:14.544 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.546 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.546 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:14.546 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:14.547 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:14.547 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:30:14.553 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:30:14.553 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.553 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:14.553 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.553 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:14.554 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.554 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.554 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:14.554 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:14.555 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:14.555 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:30:14.560 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:30:14.560 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.560 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:14.561 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.561 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:14.564 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 02:30:14.582 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 02:30:14.593 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.594 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.594 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:14.594 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:14.594 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:14.594 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:30:14.601 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:30:14.602 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.602 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:14.602 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.602 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:14.664 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:30:14.734 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:30:14.740 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 02:30:14.746 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 02:30:14.787 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 02:30:14.898 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.899 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.902 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:14.902 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:14.908 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-09-22 02:30:14.908 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:30:14.919 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:30:14.935 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 02:30:14.947 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.947 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 27ms reading results.
2025-09-22 02:30:14.948 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:14.948 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:14.969 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:30:14.972 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 02:30:14.974 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 02:30:14.976 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 02:30:14.977 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 02:30:14.978 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 02:30:14.981 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 02:30:14.982 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 02:30:15.023 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:30:15.027 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.027 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.027 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.027 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.027 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.028 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:30:15.046 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:30:15.051 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.051 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-09-22 02:30:15.051 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.051 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.071 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 02:30:15.093 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.093 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.094 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.094 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.094 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.094 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:30:15.095 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:30:15.095 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.095 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.095 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.095 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.096 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.096 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.096 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.096 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.096 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.096 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:30:15.099 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:30:15.099 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.099 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.099 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.099 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.100 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.100 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.100 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.100 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.100 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.100 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:30:15.101 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:30:15.101 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.101 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.102 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.102 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.102 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.102 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.102 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.102 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.102 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.102 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:30:15.104 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:30:15.104 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.104 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.104 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.104 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.104 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.105 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.105 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.105 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.105 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.105 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:30:15.109 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:30:15.109 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.109 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.109 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.109 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.111 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:30:15.112 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:30:15.112 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 02:30:15.113 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 02:30:15.115 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 02:30:15.117 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.117 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.117 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.117 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.118 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.118 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:30:15.122 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:30:15.122 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 02:30:15.122 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.122 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.122 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.123 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.123 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:30:15.123 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 02:30:15.124 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.125 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.125 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.125 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.125 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.125 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:30:15.127 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:30:15.128 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.128 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.128 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.128 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.129 +07:00 [ERR] Error assigning reviewer 10
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 02:30:15.136 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.136 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.136 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.136 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.136 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:30:15.140 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:30:15.140 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.140 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.140 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.140 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.140 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.141 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.141 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.141 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.141 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.141 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:30:15.142 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:30:15.149 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.149 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.150 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.150 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.150 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.150 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.150 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.150 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.150 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.151 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:30:15.152 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:30:15.154 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.154 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 02:30:15.154 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.154 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.155 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.155 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.155 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.155 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.155 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.155 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:30:15.156 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:30:15.156 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.156 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.156 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.156 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.157 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.157 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.157 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.157 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.157 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.157 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:30:15.158 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:30:15.158 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.159 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.159 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.160 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 02:30:15.160 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:30:15.161 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:30:15.161 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 02:30:15.161 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 02:30:15.162 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 02:30:15.162 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.162 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.162 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.162 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.163 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.163 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:30:15.167 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:30:15.168 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 02:30:15.168 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.168 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.168 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.168 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.168 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:30:15.168 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 02:30:15.169 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.169 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.169 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:30:15.169 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.169 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:30:15.169 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:30:15.172 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:30:15.183 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.183 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:30:15.183 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.183 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:30:15.184 +07:00 [ERR] Error assigning reviewer 11
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 02:30:15.186 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:30:15.186 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:30:15.187 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:30:15.187 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:30:15.187 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:30:15.188 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7577.1817ms
2025-09-22 02:30:15.189 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:30:15.189 +07:00 [DBG] Connection id "0HNFP8HUJMC7A" completed keep alive response.
2025-09-22 02:30:15.189 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:30:15.189 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:30:15.189 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:30:15.189 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 7588.5396ms
2025-09-22 02:32:25.990 +07:00 [DBG] Connection id "0HNFP8HUJMC7A" disconnecting.
2025-09-22 02:32:25.991 +07:00 [DBG] Connection id "0HNFP8HUJMC7A" stopped.
2025-09-22 02:32:25.991 +07:00 [DBG] Connection id "0HNFP8HUJMC7A" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:32:36.523 +07:00 [INF] Application is shutting down...
2025-09-22 02:32:36.524 +07:00 [DBG] Hosting stopping
2025-09-22 02:32:36.529 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 02:32:36.531 +07:00 [DBG] Hosting stopped
2025-09-22 02:49:07.954 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 02:49:08.035 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 02:49:08.230 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.250 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.262 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.264 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.264 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.266 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.425 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.426 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.440 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.440 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.440 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.441 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.446 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.446 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:08.480 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 02:49:08.481 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 02:49:08.482 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 02:49:08.482 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 02:49:08.482 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 02:49:08.482 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 02:49:08.482 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 02:49:08.482 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 02:49:08.604 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:08.605 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:08.605 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:08.605 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:08.605 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:08.605 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:08.605 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:08.605 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:08.606 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:08.606 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:08.606 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:08.723 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:49:08.768 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 02:49:08.892 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:49:08.919 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:49:08.934 +07:00 [DBG] Created DbConnection. (13ms).
2025-09-22 02:49:08.938 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.058 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.060 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:09.065 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 02:49:09.070 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-22 02:49:09.075 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:09.106 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:09.138 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:09.153 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.157 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 48ms reading results.
2025-09-22 02:49:09.159 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.162 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 02:49:09.165 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.165 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.166 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:09.166 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.166 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.166 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:09.168 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:09.168 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:09.168 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.168 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:09.168 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.168 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:09.168 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.169 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.169 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:09.169 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.169 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.169 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:09.169 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:09.170 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:09.170 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.170 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:09.170 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.170 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:09.171 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.171 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.171 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:09.171 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.172 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.172 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:09.173 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:09.173 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:09.173 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.174 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:09.174 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.174 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:09.176 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 02:49:09.182 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:49:09.183 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.183 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.183 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:09.183 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.183 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.183 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:09.186 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:09.203 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:09.224 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.224 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-22 02:49:09.224 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.224 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:09.226 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 02:49:09.228 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.229 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.229 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:09.229 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.229 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.229 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:09.230 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:09.230 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:09.230 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.230 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:09.230 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.230 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:09.230 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 02:49:09.231 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.231 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.231 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:09.231 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.231 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.231 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:09.231 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:09.232 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:09.232 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.232 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:09.232 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.232 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:09.232 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.232 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.232 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:09.232 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.233 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:09.233 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:09.234 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:09.235 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:09.235 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.235 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:09.235 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.235 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:09.235 +07:00 [INF] Data seeding completed successfully
2025-09-22 02:49:09.236 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:49:09.237 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:09.238 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:49:09.246 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 02:49:09.378 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 02:49:09.459 +07:00 [DBG] Hosting starting
2025-09-22 02:49:09.466 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 02:49:09.467 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 02:49:09.468 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 02:49:09.471 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 02:49:09.473 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 02:49:09.473 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 02:49:09.476 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 02:49:09.479 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 02:49:09.479 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 02:49:09.480 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 02:49:09.480 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 02:49:09.481 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 02:49:09.482 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 02:49:09.482 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 02:49:09.486 +07:00 [DBG] Middleware loaded
2025-09-22 02:49:09.487 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 02:49:09.487 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 02:49:09.510 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 02:49:09.519 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 02:49:09.519 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 02:49:09.520 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 02:49:09.520 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 02:49:09.520 +07:00 [INF] Hosting environment: Development
2025-09-22 02:49:09.520 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 02:49:09.521 +07:00 [DBG] Hosting started
2025-09-22 02:49:09.645 +07:00 [DBG] Connection id "0HNFP8VN8IM8F" accepted.
2025-09-22 02:49:09.646 +07:00 [DBG] Connection id "0HNFP8VN8IM8F" started.
2025-09-22 02:49:09.678 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 02:49:09.684 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 02:49:09.724 +07:00 [DBG] Connection id "0HNFP8VN8IM8G" accepted.
2025-09-22 02:49:09.725 +07:00 [DBG] Connection id "0HNFP8VN8IM8G" started.
2025-09-22 02:49:09.820 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 02:49:09.829 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 02:49:09.830 +07:00 [DBG] Connection id "0HNFP8VN8IM8F" completed keep alive response.
2025-09-22 02:49:09.833 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 157.5447ms
2025-09-22 02:49:09.840 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 02:49:09.842 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 02:49:09.843 +07:00 [DBG] Connection id "0HNFP8VN8IM8F" completed keep alive response.
2025-09-22 02:49:09.843 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.9437ms
2025-09-22 02:49:09.918 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 02:49:10.225 +07:00 [DBG] Connection id "0HNFP8VN8IM8F" completed keep alive response.
2025-09-22 02:49:10.225 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 306.6186ms
2025-09-22 02:49:19.915 +07:00 [DBG] Connection id "0HNFP8VN8IM8F" received FIN.
2025-09-22 02:49:19.915 +07:00 [DBG] Connection id "0HNFP8VN8IM8G" received FIN.
2025-09-22 02:49:19.917 +07:00 [DBG] Connection id "0HNFP8VN8IM8F" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:49:19.917 +07:00 [DBG] Connection id "0HNFP8VN8IM8G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:49:19.918 +07:00 [DBG] Connection id "0HNFP8VN8IM8G" disconnecting.
2025-09-22 02:49:19.918 +07:00 [DBG] Connection id "0HNFP8VN8IM8F" disconnecting.
2025-09-22 02:49:19.920 +07:00 [DBG] Connection id "0HNFP8VN8IM8F" stopped.
2025-09-22 02:49:19.920 +07:00 [DBG] Connection id "0HNFP8VN8IM8G" stopped.
2025-09-22 02:49:21.670 +07:00 [INF] Application is shutting down...
2025-09-22 02:49:21.673 +07:00 [DBG] Hosting stopping
2025-09-22 02:49:21.681 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 02:49:21.703 +07:00 [DBG] Hosting stopped
2025-09-22 02:49:31.562 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 02:49:31.622 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 02:49:31.780 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.795 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.806 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.807 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.807 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.808 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.957 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.958 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.970 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.971 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.971 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.972 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.975 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:31.975 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:49:32.005 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 02:49:32.006 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 02:49:32.006 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 02:49:32.006 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 02:49:32.006 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 02:49:32.007 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 02:49:32.008 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 02:49:32.115 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:32.115 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:32.115 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:32.115 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:32.115 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:32.115 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:32.115 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:32.115 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:32.115 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:32.115 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:32.116 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:49:32.229 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:49:32.273 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 02:49:32.383 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:49:32.408 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:49:32.420 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 02:49:32.424 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.513 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.516 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:32.520 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 02:49:32.524 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 02:49:32.529 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:32.558 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:32.585 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:32.599 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.603 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 42ms reading results.
2025-09-22 02:49:32.605 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.607 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 02:49:32.610 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.611 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.611 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:32.611 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.611 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.612 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:32.614 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:32.614 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:32.614 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.614 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:32.614 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.614 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:32.615 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.615 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.615 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:32.615 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.615 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.615 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:32.616 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:32.616 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:32.616 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.617 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:32.617 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.617 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:32.618 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.618 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.618 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:32.618 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.618 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.618 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:32.619 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:49:32.619 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:32.619 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.619 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:32.619 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.619 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:32.622 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 02:49:32.627 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:49:32.628 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.628 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.628 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:32.628 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.629 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.629 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:32.632 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:32.649 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:32.669 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.670 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-22 02:49:32.670 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.670 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:32.673 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 02:49:32.676 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.676 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.676 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:32.676 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.676 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.676 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:32.677 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:32.677 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:32.678 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.678 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:32.678 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.678 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:32.678 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 02:49:32.679 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.679 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.679 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:32.680 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.680 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.680 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:32.681 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:32.681 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:32.681 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.681 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:32.681 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.681 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:32.682 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.682 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.682 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:49:32.682 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.682 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:49:32.682 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:32.683 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:49:32.683 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:49:32.683 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.683 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:49:32.683 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.683 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:49:32.683 +07:00 [INF] Data seeding completed successfully
2025-09-22 02:49:32.684 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:49:32.685 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:49:32.686 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-22 02:49:32.696 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 02:49:32.809 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 02:49:32.884 +07:00 [DBG] Hosting starting
2025-09-22 02:49:32.892 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 02:49:32.893 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 02:49:32.894 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 02:49:32.896 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 02:49:32.898 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 02:49:32.898 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 02:49:32.902 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 02:49:32.904 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 02:49:32.904 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 02:49:32.905 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 02:49:32.906 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 02:49:32.906 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 02:49:32.907 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 02:49:32.908 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 02:49:32.911 +07:00 [DBG] Middleware loaded
2025-09-22 02:49:32.912 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 02:49:32.913 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 02:49:32.935 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 02:49:32.944 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 02:49:32.944 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 02:49:32.945 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 02:49:32.945 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 02:49:32.945 +07:00 [INF] Hosting environment: Development
2025-09-22 02:49:32.945 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 02:49:32.946 +07:00 [DBG] Hosting started
2025-09-22 02:49:33.065 +07:00 [DBG] Connection id "0HNFP8VU7U392" accepted.
2025-09-22 02:49:33.066 +07:00 [DBG] Connection id "0HNFP8VU7U392" started.
2025-09-22 02:49:33.100 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 02:49:33.108 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 02:49:33.140 +07:00 [DBG] Connection id "0HNFP8VU7U393" accepted.
2025-09-22 02:49:33.141 +07:00 [DBG] Connection id "0HNFP8VU7U393" started.
2025-09-22 02:49:33.230 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 02:49:33.239 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 02:49:33.240 +07:00 [DBG] Connection id "0HNFP8VU7U392" completed keep alive response.
2025-09-22 02:49:33.242 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 143.8372ms
2025-09-22 02:49:33.247 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 02:49:33.250 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 02:49:33.251 +07:00 [DBG] Connection id "0HNFP8VU7U392" completed keep alive response.
2025-09-22 02:49:33.251 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 4.1738ms
2025-09-22 02:49:33.332 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 02:49:33.675 +07:00 [DBG] Connection id "0HNFP8VU7U392" completed keep alive response.
2025-09-22 02:49:33.676 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 343.4419ms
2025-09-22 02:49:51.925 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:49:51.933 +07:00 [DBG] POST requests are not supported
2025-09-22 02:49:51.937 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 02:49:51.938 +07:00 [DBG] POST requests are not supported
2025-09-22 02:49:51.939 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:49:51.940 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:49:52.026 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:49:52.028 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:49:52.030 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:49:52.201 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:49:52.204 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:49:52.223 +07:00 [DBG] Authorization was successful.
2025-09-22 02:49:52.243 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:49:52.273 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:49:52.276 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:49:52.277 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:49:52.279 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:49:52.279 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:49:52.280 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:49:52.285 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:49:52.520 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:49:52.536 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:49:52.543 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:49:52.548 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:49:52.549 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:49:52.549 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:49:52.550 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:49:52.570 +07:00 [DBG] Connection id "0HNFP8VU7U392", Request id "0HNFP8VU7U392:00000004": started reading request body.
2025-09-22 02:49:52.571 +07:00 [DBG] Connection id "0HNFP8VU7U392", Request id "0HNFP8VU7U392:00000004": done reading request body.
2025-09-22 02:49:52.585 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:49:52.585 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:49:52.586 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:49:52.587 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:49:52.604 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:49:52.606 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:49:52.608 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:49:52.610 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:49:52.611 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:49:52.611 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:49:52.612 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:49:52.618 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:49:52.620 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:49:45.1420000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:49:52.628 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:49:52.632 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:49:52.633 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:49:52.636 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:49:52.637 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:49:52.685 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 399.9947ms
2025-09-22 02:49:52.685 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:49:52.686 +07:00 [DBG] Connection id "0HNFP8VU7U392" completed keep alive response.
2025-09-22 02:49:52.688 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 762.0168ms
2025-09-22 02:49:56.183 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:49:56.184 +07:00 [DBG] POST requests are not supported
2025-09-22 02:49:56.184 +07:00 [DBG] POST requests are not supported
2025-09-22 02:49:56.188 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:49:56.188 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:49:56.212 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:49:56.213 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:49:56.213 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:49:56.220 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:49:56.220 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:49:56.226 +07:00 [DBG] Authorization was successful.
2025-09-22 02:49:56.227 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:49:56.230 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:49:56.231 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:49:56.233 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:49:56.233 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:49:56.233 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:49:56.233 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:49:56.234 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:49:56.240 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:49:56.241 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:49:56.242 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:49:56.243 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:49:56.244 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:49:56.245 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:49:56.246 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:49:56.246 +07:00 [DBG] Connection id "0HNFP8VU7U392", Request id "0HNFP8VU7U392:00000005": started reading request body.
2025-09-22 02:49:56.246 +07:00 [DBG] Connection id "0HNFP8VU7U392", Request id "0HNFP8VU7U392:00000005": done reading request body.
2025-09-22 02:49:56.246 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:49:56.247 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:49:56.247 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:49:56.247 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:49:56.248 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:49:56.248 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:49:56.250 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:49:56.251 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:49:56.252 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:49:56.252 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:49:56.253 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:49:56.253 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:49:56.255 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:49:45.1420000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:49:56.257 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:49:56.257 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:49:56.258 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:49:56.259 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:49:56.259 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:49:56.260 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 25.9605ms
2025-09-22 02:49:56.260 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:49:56.260 +07:00 [DBG] Connection id "0HNFP8VU7U392" completed keep alive response.
2025-09-22 02:49:56.261 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 77.1ms
2025-09-22 02:50:11.749 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 02:50:11.750 +07:00 [DBG] POST requests are not supported
2025-09-22 02:50:11.750 +07:00 [DBG] POST requests are not supported
2025-09-22 02:50:11.750 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:50:11.750 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:50:11.750 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:50:11.750 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:50:11.751 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:50:11.755 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:50:11.755 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:50:11.757 +07:00 [DBG] Authorization was successful.
2025-09-22 02:50:11.759 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:50:11.759 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:50:11.759 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:50:11.759 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:50:11.759 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:50:11.760 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:50:11.760 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:50:11.760 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:50:11.776 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:50:11.776 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:50:11.777 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:50:11.777 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:50:11.777 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:50:11.777 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:50:11.777 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:50:11.778 +07:00 [DBG] Connection id "0HNFP8VU7U392", Request id "0HNFP8VU7U392:00000006": started reading request body.
2025-09-22 02:50:11.778 +07:00 [DBG] Connection id "0HNFP8VU7U392", Request id "0HNFP8VU7U392:00000006": done reading request body.
2025-09-22 02:50:11.780 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:50:11.781 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:50:11.782 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:50:11.782 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:50:11.782 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:50:11.782 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:50:11.783 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:50:11.783 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:50:11.784 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:50:11.784 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:50:11.785 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:50:11.785 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:50:11.788 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T19:49:45.1420000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:50:11.916 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:50:11.938 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 02:50:11.982 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 02:50:12.076 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:50:12.083 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:50:12.086 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-22 02:50:12.087 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:12.087 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:12.088 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:12.088 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:12.088 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:12.089 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:50:12.100 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:50:12.112 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:12.112 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 11ms reading results.
2025-09-22 02:50:12.112 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:12.112 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:12.125 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 02:50:12.138 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 02:50:12.139 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 02:50:12.140 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 02:50:12.142 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 02:50:12.241 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 02:50:12.263 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 02:50:12.277 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:12.277 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:12.278 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:12.278 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:12.278 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:12.279 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:50:12.376 +07:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:50:12.389 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:12.389 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 12ms reading results.
2025-09-22 02:50:12.390 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:12.390 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:12.462 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 02:50:12.464 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:50:12.464 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:50:12.465 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 02:50:18.276 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 02:50:18.367 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 02:50:18.381 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:50:18.382 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.382 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.384 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:18.384 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:18.384 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 02:50:18.385 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:50:18.394 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:50:18.395 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.395 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:18.396 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.396 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:18.398 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 02:50:18.399 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 02:50:18.423 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:50:18.426 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.426 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.426 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:18.426 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:18.427 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:18.427 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:50:18.434 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:50:18.435 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.435 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:18.435 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.435 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:18.439 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 02:50:18.440 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 02:50:18.448 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 02:50:18.450 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.450 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.450 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:18.450 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:18.450 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:18.451 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:50:18.455 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:50:18.456 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.456 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:18.457 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.457 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:18.460 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 02:50:18.467 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:50:18.469 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.470 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.470 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:18.470 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:18.470 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:18.470 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:50:18.474 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:50:18.474 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.475 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:18.475 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.475 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:18.476 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 02:50:18.495 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 02:50:18.502 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.503 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.503 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:18.503 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:18.503 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:18.504 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:50:18.508 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 02:50:18.509 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.509 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:18.510 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.510 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:18.551 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:50:18.636 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:50:18.646 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 02:50:18.655 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 02:50:18.707 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 02:50:18.858 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.859 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.865 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:18.865 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:18.872 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-22 02:50:18.873 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:50:18.893 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 02:50:18.910 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 02:50:18.921 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.922 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 28ms reading results.
2025-09-22 02:50:18.923 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:18.923 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:18.944 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:50:18.949 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 02:50:18.951 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 02:50:18.955 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 02:50:18.956 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 02:50:18.957 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 02:50:18.960 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 02:50:18.963 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 02:50:19.005 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:50:19.010 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.010 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.010 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.010 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.010 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.010 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:50:19.031 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 02:50:19.034 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.036 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-09-22 02:50:19.036 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.036 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.061 +07:00 [ERR] Error assigning reviewer 9
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 02:50:19.087 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.088 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.088 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.088 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.088 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.088 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:50:19.090 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:50:19.091 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.091 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:19.091 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.091 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.093 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.093 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.093 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.093 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.094 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.094 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:50:19.096 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:50:19.096 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.096 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:19.097 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.098 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.099 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.100 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.100 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.100 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.100 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.101 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:50:19.102 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:50:19.102 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.103 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:19.103 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.103 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.103 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.104 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.104 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.105 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.105 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 02:50:19.105 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:50:19.108 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:50:19.108 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.109 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:19.109 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.109 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.110 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.110 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.110 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.111 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.111 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.112 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:50:19.115 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:50:19.115 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.115 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:19.115 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.115 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.116 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.116 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.116 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.116 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.117 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.117 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:50:19.119 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:50:19.120 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.121 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 02:50:19.121 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.121 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.123 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.123 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.123 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.123 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.123 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.123 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:50:19.125 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:50:19.126 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.127 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 02:50:19.128 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.128 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.129 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.129 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.129 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.129 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.129 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.129 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:50:19.131 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:50:19.131 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.132 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:19.132 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.133 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.135 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.135 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.135 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.135 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.135 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.135 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:50:19.137 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 02:50:19.137 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.137 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:19.137 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.137 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.138 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.138 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.139 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.139 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.140 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.140 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:50:19.142 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 02:50:19.142 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.142 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:19.142 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.142 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.143 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.143 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.143 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.143 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.143 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.144 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:50:19.145 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 02:50:19.146 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.146 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:19.146 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.146 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.147 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.147 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.148 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:50:19.148 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.148 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:50:19.148 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:50:19.150 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 02:50:19.150 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.150 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:50:19.151 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.151 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:50:19.155 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:50:19.155 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:50:19.155 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:50:19.155 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:50:19.156 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:50:19.203 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7443.4459ms
2025-09-22 02:50:19.204 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:50:19.206 +07:00 [DBG] Connection id "0HNFP8VU7U392" completed keep alive response.
2025-09-22 02:50:19.207 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:50:19.207 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:50:19.207 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:50:19.207 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 7457.9136ms
2025-09-22 02:51:44.168 +07:00 [DBG] Connection id "0HNFP8VU7U393" disconnecting.
2025-09-22 02:51:44.171 +07:00 [DBG] Connection id "0HNFP8VU7U393" stopped.
2025-09-22 02:51:44.176 +07:00 [DBG] Connection id "0HNFP8VU7U393" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:52:29.649 +07:00 [DBG] Connection id "0HNFP8VU7U392" disconnecting.
2025-09-22 02:52:29.649 +07:00 [DBG] Connection id "0HNFP8VU7U392" stopped.
2025-09-22 02:52:29.650 +07:00 [DBG] Connection id "0HNFP8VU7U392" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:53:27.031 +07:00 [INF] Application is shutting down...
2025-09-22 02:53:27.034 +07:00 [DBG] Hosting stopping
2025-09-22 02:53:27.042 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 02:53:27.043 +07:00 [DBG] Hosting stopped
2025-09-22 02:55:35.242 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 02:55:35.302 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 02:55:35.473 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.486 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.496 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.497 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.497 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.498 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.648 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.649 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.662 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.662 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.662 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.663 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.666 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.666 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 02:55:35.700 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 02:55:35.701 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 02:55:35.701 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 02:55:35.701 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 02:55:35.701 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 02:55:35.806 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:55:35.806 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:55:35.807 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:55:35.807 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:55:35.807 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:55:35.807 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:55:35.807 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:55:35.807 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:55:35.807 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:55:35.808 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:55:35.808 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 02:55:35.915 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:55:35.957 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 02:55:36.062 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:55:36.085 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:55:36.096 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 02:55:36.098 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.193 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.195 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:55:36.199 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 02:55:36.203 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 02:55:36.208 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:55:36.237 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:55:36.264 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:55:36.277 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.281 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 41ms reading results.
2025-09-22 02:55:36.283 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.286 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 02:55:36.288 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.289 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.289 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:55:36.289 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.289 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.289 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:55:36.291 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:55:36.292 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:55:36.292 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.292 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:55:36.292 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.292 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:55:36.293 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.293 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.293 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:55:36.293 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.293 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.294 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:55:36.294 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:55:36.294 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:55:36.295 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.295 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:55:36.295 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.295 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:55:36.295 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.295 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.295 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:55:36.295 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.295 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.295 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:55:36.296 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 02:55:36.296 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:55:36.296 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.296 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:55:36.296 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.297 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:55:36.300 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 02:55:36.304 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:55:36.305 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.306 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.306 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:55:36.306 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.306 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.306 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:55:36.310 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:55:36.328 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:55:36.349 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.349 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-22 02:55:36.349 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.349 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:55:36.351 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 02:55:36.352 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.353 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.353 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:55:36.353 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.353 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.353 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:55:36.354 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:55:36.354 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:55:36.355 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.355 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 02:55:36.355 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.356 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:55:36.356 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 02:55:36.356 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.356 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.356 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:55:36.356 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.356 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.356 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:55:36.357 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:55:36.358 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:55:36.358 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.358 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:55:36.358 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.358 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:55:36.358 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.358 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.358 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:55:36.358 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.358 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:36.358 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:55:36.359 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 02:55:36.359 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 02:55:36.359 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.359 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 02:55:36.359 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.359 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:55:36.359 +07:00 [INF] Data seeding completed successfully
2025-09-22 02:55:36.360 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:55:36.362 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:36.363 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:55:36.373 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 02:55:36.483 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 02:55:36.559 +07:00 [DBG] Hosting starting
2025-09-22 02:55:36.567 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 02:55:36.568 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 02:55:36.568 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 02:55:36.571 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 02:55:36.573 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 02:55:36.574 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 02:55:36.578 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 02:55:36.580 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 02:55:36.580 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 02:55:36.581 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 02:55:36.582 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 02:55:36.582 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 02:55:36.584 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 02:55:36.584 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 02:55:36.587 +07:00 [DBG] Middleware loaded
2025-09-22 02:55:36.588 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 02:55:36.589 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 02:55:36.612 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 02:55:36.621 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 02:55:36.621 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 02:55:36.621 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 02:55:36.621 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 02:55:36.621 +07:00 [INF] Hosting environment: Development
2025-09-22 02:55:36.621 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 02:55:36.622 +07:00 [DBG] Hosting started
2025-09-22 02:55:36.738 +07:00 [DBG] Connection id "0HNFP93AK656S" accepted.
2025-09-22 02:55:36.739 +07:00 [DBG] Connection id "0HNFP93AK656S" started.
2025-09-22 02:55:36.769 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 02:55:36.775 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 02:55:36.811 +07:00 [DBG] Connection id "0HNFP93AK656T" accepted.
2025-09-22 02:55:36.812 +07:00 [DBG] Connection id "0HNFP93AK656T" started.
2025-09-22 02:55:36.903 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 02:55:36.913 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 02:55:36.914 +07:00 [DBG] Connection id "0HNFP93AK656S" completed keep alive response.
2025-09-22 02:55:36.916 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 149.4609ms
2025-09-22 02:55:36.922 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 02:55:36.926 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 02:55:36.926 +07:00 [DBG] Connection id "0HNFP93AK656S" completed keep alive response.
2025-09-22 02:55:36.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 4.3128ms
2025-09-22 02:55:36.997 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 02:55:37.314 +07:00 [DBG] Connection id "0HNFP93AK656S" completed keep alive response.
2025-09-22 02:55:37.314 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 316.9928ms
2025-09-22 02:55:56.406 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 02:55:56.427 +07:00 [DBG] POST requests are not supported
2025-09-22 02:55:56.431 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 02:55:56.431 +07:00 [DBG] POST requests are not supported
2025-09-22 02:55:56.434 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 02:55:56.434 +07:00 [INF] CORS policy execution successful.
2025-09-22 02:55:56.519 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:55:56.521 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 02:55:56.522 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:55:56.669 +07:00 [DBG] Successfully validated the token.
2025-09-22 02:55:56.674 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 02:55:56.697 +07:00 [DBG] Authorization was successful.
2025-09-22 02:55:56.725 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:55:56.770 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 02:55:56.772 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 02:55:56.773 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 02:55:56.777 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 02:55:56.777 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 02:55:56.778 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 02:55:56.781 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:55:57.057 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 02:55:57.077 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:55:57.085 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 02:55:57.090 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:55:57.090 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:55:57.090 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 02:55:57.091 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 02:55:57.114 +07:00 [DBG] Connection id "0HNFP93AK656S", Request id "0HNFP93AK656S:00000004": started reading request body.
2025-09-22 02:55:57.116 +07:00 [DBG] Connection id "0HNFP93AK656S", Request id "0HNFP93AK656S:00000004": done reading request body.
2025-09-22 02:55:57.131 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 02:55:57.132 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:55:57.133 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:55:57.133 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 02:55:57.146 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 02:55:57.148 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:55:57.149 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 02:55:57.151 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:55:57.151 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:55:57.152 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 02:55:57.152 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 02:55:57.156 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 02:55:57.161 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T19:55:47.8060000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 02:55:57.274 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 02:55:57.299 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 02:55:57.325 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 02:55:57.427 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 02:55:57.451 +07:00 [DBG] Creating DbConnection.
2025-09-22 02:55:57.453 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-22 02:55:57.456 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:57.458 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:57.458 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:55:57.458 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:57.459 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:57.463 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:55:57.474 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 02:55:57.484 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:55:57.485 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 9ms reading results.
2025-09-22 02:55:57.485 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:57.485 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:55:57.495 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 02:55:57.510 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 02:55:57.512 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 02:55:57.514 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 02:55:57.515 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 02:55:57.637 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 02:55:57.661 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 02:55:57.679 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:57.681 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:57.682 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 02:55:57.682 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:57.682 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 02:55:57.682 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:55:57.772 +07:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 02:55:57.804 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 02:55:57.806 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 33ms reading results.
2025-09-22 02:55:57.806 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:55:57.807 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 02:55:57.856 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 02:55:57.858 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:55:57.858 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 02:55:57.859 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 02:56:04.361 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 02:56:04.429 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 02:56:04.431 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 02:56:04.432 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 02:56:04.436 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 02:56:04.437 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 02:56:04.549 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7766.8034ms
2025-09-22 02:56:04.550 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 02:56:04.568 +07:00 [DBG] Connection id "0HNFP93AK656S" completed keep alive response.
2025-09-22 02:56:04.569 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 02:56:04.570 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 02:56:04.570 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 02:56:04.573 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 8167.4702ms
2025-09-22 02:57:48.651 +07:00 [DBG] Connection id "0HNFP93AK656T" disconnecting.
2025-09-22 02:57:48.655 +07:00 [DBG] Connection id "0HNFP93AK656T" stopped.
2025-09-22 02:57:48.657 +07:00 [DBG] Connection id "0HNFP93AK656T" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 02:58:02.376 +07:00 [DBG] Connection id "0HNFP93AK656U" accepted.
2025-09-22 02:58:02.377 +07:00 [DBG] Connection id "0HNFP93AK656U" started.
2025-09-22 02:58:02.377 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 02:58:02.380 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 02:58:02.382 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 02:58:02.382 +07:00 [DBG] Connection id "0HNFP93AK656S" completed keep alive response.
2025-09-22 02:58:02.383 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 5.8993ms
2025-09-22 02:58:02.411 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 02:58:02.412 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 02:58:02.412 +07:00 [DBG] Connection id "0HNFP93AK656S" completed keep alive response.
2025-09-22 02:58:02.412 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 0.9778ms
2025-09-22 02:58:02.673 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 02:58:02.724 +07:00 [DBG] Connection id "0HNFP93AK656S" completed keep alive response.
2025-09-22 02:58:02.724 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 51.2053ms
2025-09-22 02:58:26.229 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 02:58:26.230 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 02:58:26.230 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 02:58:26.230 +07:00 [DBG] Connection id "0HNFP93AK656S" completed keep alive response.
2025-09-22 02:58:26.231 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 1.2725ms
2025-09-22 02:58:26.268 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 02:58:26.268 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 02:58:26.269 +07:00 [DBG] Connection id "0HNFP93AK656S" completed keep alive response.
2025-09-22 02:58:26.269 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 0.7985ms
2025-09-22 02:58:26.362 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 02:58:26.407 +07:00 [DBG] Connection id "0HNFP93AK656S" completed keep alive response.
2025-09-22 02:58:26.407 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 45.1131ms
2025-09-22 03:00:13.859 +07:00 [DBG] Connection id "0HNFP93AK656U" disconnecting.
2025-09-22 03:00:13.861 +07:00 [DBG] Connection id "0HNFP93AK656U" stopped.
2025-09-22 03:00:13.861 +07:00 [DBG] Connection id "0HNFP93AK656U" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:00:37.042 +07:00 [DBG] Connection id "0HNFP93AK656S" disconnecting.
2025-09-22 03:00:37.043 +07:00 [DBG] Connection id "0HNFP93AK656S" stopped.
2025-09-22 03:00:37.043 +07:00 [DBG] Connection id "0HNFP93AK656S" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:05:04.733 +07:00 [DBG] Connection id "0HNFP93AK656V" accepted.
2025-09-22 03:05:04.733 +07:00 [DBG] Connection id "0HNFP93AK656V" started.
2025-09-22 03:05:04.739 +07:00 [DBG] Connection id "0HNFP93AK6570" accepted.
2025-09-22 03:05:04.739 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 03:05:04.739 +07:00 [DBG] Connection id "0HNFP93AK6570" started.
2025-09-22 03:05:04.743 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 03:05:04.744 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 03:05:04.744 +07:00 [DBG] Connection id "0HNFP93AK656V" completed keep alive response.
2025-09-22 03:05:04.744 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 4.473ms
2025-09-22 03:05:04.759 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 03:05:04.760 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 03:05:04.760 +07:00 [DBG] Connection id "0HNFP93AK656V" completed keep alive response.
2025-09-22 03:05:04.761 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 1.4271ms
2025-09-22 03:05:05.140 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 03:05:05.193 +07:00 [DBG] Connection id "0HNFP93AK656V" completed keep alive response.
2025-09-22 03:05:05.194 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 53.8809ms
2025-09-22 03:07:16.417 +07:00 [DBG] Connection id "0HNFP93AK6570" disconnecting.
2025-09-22 03:07:16.417 +07:00 [DBG] Connection id "0HNFP93AK656V" disconnecting.
2025-09-22 03:07:16.418 +07:00 [DBG] Connection id "0HNFP93AK6570" stopped.
2025-09-22 03:07:16.418 +07:00 [DBG] Connection id "0HNFP93AK6570" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:07:16.418 +07:00 [DBG] Connection id "0HNFP93AK656V" stopped.
2025-09-22 03:07:16.418 +07:00 [DBG] Connection id "0HNFP93AK656V" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:07:59.940 +07:00 [INF] Application is shutting down...
2025-09-22 03:07:59.941 +07:00 [DBG] Hosting stopping
2025-09-22 03:07:59.946 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 03:07:59.948 +07:00 [DBG] Hosting stopped
2025-09-22 03:08:13.479 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 03:08:13.538 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 03:08:13.692 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.706 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.718 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.720 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.720 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.721 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.874 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.875 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.889 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.889 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.890 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.890 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.894 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.895 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:08:13.929 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 03:08:13.929 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 03:08:13.929 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 03:08:13.929 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 03:08:13.930 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 03:08:14.038 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:08:14.038 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:08:14.039 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:08:14.039 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:08:14.039 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:08:14.039 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:08:14.039 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:08:14.039 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:08:14.040 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:08:14.040 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:08:14.040 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:08:14.151 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:08:14.192 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 03:08:14.297 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:08:14.319 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:08:14.331 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 03:08:14.334 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.432 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.434 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:14.437 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 03:08:14.442 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 03:08:14.446 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:08:14.479 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:08:14.508 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:08:14.525 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.529 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 46ms reading results.
2025-09-22 03:08:14.530 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.534 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 03:08:14.536 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.537 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.537 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:14.537 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.538 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.538 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:08:14.542 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:08:14.542 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:08:14.543 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.543 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:14.543 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.543 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:14.543 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.543 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.543 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:14.544 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.544 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.544 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:08:14.547 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:08:14.548 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:08:14.548 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.548 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:14.548 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.548 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:14.548 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.548 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.548 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:14.548 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.548 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.548 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:08:14.551 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:08:14.552 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:08:14.552 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.552 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:14.552 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.552 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:14.556 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 03:08:14.561 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:08:14.562 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.562 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.562 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:14.562 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.562 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.562 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:08:14.566 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:08:14.585 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:08:14.606 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.606 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 39ms reading results.
2025-09-22 03:08:14.606 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.606 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:14.609 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 03:08:14.610 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.611 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.611 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:14.611 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.611 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.611 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:08:14.615 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:08:14.615 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:08:14.615 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.616 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:14.616 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.616 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:14.616 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 03:08:14.616 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.616 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.616 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:14.616 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.616 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.616 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:08:14.621 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:08:14.622 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:08:14.622 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.622 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:14.622 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.622 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:14.623 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.623 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.623 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:14.623 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.623 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:14.623 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:08:14.628 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:08:14.628 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:08:14.628 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.628 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:14.629 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.629 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:14.629 +07:00 [INF] Data seeding completed successfully
2025-09-22 03:08:14.630 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:08:14.632 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:14.633 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:08:14.644 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 03:08:14.755 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 03:08:14.836 +07:00 [DBG] Hosting starting
2025-09-22 03:08:14.844 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 03:08:14.845 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 03:08:14.846 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 03:08:14.848 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 03:08:14.850 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 03:08:14.850 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 03:08:14.854 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 03:08:14.856 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:08:14.856 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 03:08:14.858 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:08:14.859 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 03:08:14.860 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 03:08:14.860 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 03:08:14.861 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 03:08:14.864 +07:00 [DBG] Middleware loaded
2025-09-22 03:08:14.866 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 03:08:14.866 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 03:08:14.889 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 03:08:14.897 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 03:08:14.897 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 03:08:14.897 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 03:08:14.897 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 03:08:14.898 +07:00 [INF] Hosting environment: Development
2025-09-22 03:08:14.898 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 03:08:14.899 +07:00 [DBG] Hosting started
2025-09-22 03:08:14.965 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE" accepted.
2025-09-22 03:08:14.966 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE" started.
2025-09-22 03:08:14.993 +07:00 [DBG] Connection id "0HNFP9ACJ6HFF" accepted.
2025-09-22 03:08:14.993 +07:00 [DBG] Connection id "0HNFP9ACJ6HFF" started.
2025-09-22 03:08:14.993 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 03:08:15.000 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 03:08:15.075 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 03:08:15.082 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 03:08:15.083 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE" completed keep alive response.
2025-09-22 03:08:15.084 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 92.7445ms
2025-09-22 03:08:15.088 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 03:08:15.091 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 03:08:15.091 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE" completed keep alive response.
2025-09-22 03:08:15.091 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.8083ms
2025-09-22 03:08:15.200 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 03:08:15.492 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE" completed keep alive response.
2025-09-22 03:08:15.493 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 292.3534ms
2025-09-22 03:08:37.785 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 03:08:37.800 +07:00 [DBG] POST requests are not supported
2025-09-22 03:08:37.802 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 03:08:37.803 +07:00 [DBG] POST requests are not supported
2025-09-22 03:08:37.806 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 03:08:37.807 +07:00 [INF] CORS policy execution successful.
2025-09-22 03:08:37.902 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:08:37.904 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:08:37.905 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:08:38.093 +07:00 [DBG] Successfully validated the token.
2025-09-22 03:08:38.098 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 03:08:38.115 +07:00 [DBG] Authorization was successful.
2025-09-22 03:08:38.134 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:08:38.171 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 03:08:38.173 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 03:08:38.174 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 03:08:38.176 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 03:08:38.176 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 03:08:38.178 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 03:08:38.181 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:08:38.399 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:08:38.414 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:08:38.421 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 03:08:38.425 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:08:38.426 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:08:38.428 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:08:38.430 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 03:08:38.458 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE", Request id "0HNFP9ACJ6HFE:00000004": started reading request body.
2025-09-22 03:08:38.459 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE", Request id "0HNFP9ACJ6HFE:00000004": done reading request body.
2025-09-22 03:08:38.473 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 03:08:38.474 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:08:38.475 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:08:38.477 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:08:38.495 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:08:38.500 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:08:38.501 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 03:08:38.503 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:08:38.503 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:08:38.504 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:08:38.505 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:08:38.510 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 03:08:38.514 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T20:08:27.2200000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 03:08:38.619 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:08:38.632 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 03:08:38.655 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 03:08:38.776 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:08:38.791 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:08:38.793 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-22 03:08:38.793 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:38.793 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:38.794 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:38.795 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:08:38.796 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 03:08:38.800 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:08:38.812 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:08:38.826 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:38.827 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 13ms reading results.
2025-09-22 03:08:38.827 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:38.827 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:38.851 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 03:08:38.866 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 03:08:38.867 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 03:08:38.868 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 03:08:38.868 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 03:08:38.996 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 03:08:39.023 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:08:39.056 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:39.057 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:39.060 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:39.061 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:39.064 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-22 03:08:39.065 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:08:39.147 +07:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:08:39.173 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:39.174 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 25ms reading results.
2025-09-22 03:08:39.176 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:39.178 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 03:08:39.229 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 03:08:39.231 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:08:39.232 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:08:39.234 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 03:08:46.222 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 03:08:46.337 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 03:08:46.350 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:08:46.352 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.352 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.352 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.353 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.353 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.353 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:08:46.357 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:08:46.358 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.359 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:46.359 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.359 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.361 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 03:08:46.363 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 03:08:46.387 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:08:46.389 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.390 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.391 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.391 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.391 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.392 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:08:46.405 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:08:46.406 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.406 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:46.407 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.407 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.410 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 03:08:46.413 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 03:08:46.424 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:08:46.428 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.428 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.429 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.429 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.429 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.430 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:08:46.435 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:08:46.436 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.437 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:08:46.437 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.437 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.441 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 03:08:46.448 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:08:46.451 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.451 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.451 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.452 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.452 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.454 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:08:46.458 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:08:46.458 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.461 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 03:08:46.461 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.461 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.464 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.464 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.465 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.465 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.465 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.465 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:08:46.468 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:08:46.468 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.469 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:46.469 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.469 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.471 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.471 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.471 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.472 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.472 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.472 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:08:46.475 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:08:46.476 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.476 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:46.476 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.476 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.477 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.478 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.478 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.478 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.478 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.478 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:08:46.480 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:08:46.481 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.481 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:46.481 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.482 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.484 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.486 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.487 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.488 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:08:46.488 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 03:08:46.488 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:08:46.490 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:08:46.491 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.491 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:46.492 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.492 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.495 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.497 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.497 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.498 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.498 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.499 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:08:46.501 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:08:46.503 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.504 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:08:46.504 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.504 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.505 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.505 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.505 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.506 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.506 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.506 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:08:46.509 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:08:46.509 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.510 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:08:46.510 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.511 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.513 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.513 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.513 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.513 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.514 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.514 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:08:46.516 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:08:46.517 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.517 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:46.517 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.518 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.519 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.520 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.520 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.520 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.520 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.521 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:08:46.524 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:08:46.525 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.526 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:08:46.526 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.526 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.527 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.528 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.528 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.528 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.529 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:08:46.529 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:08:46.533 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:08:46.535 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.536 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 03:08:46.537 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.537 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.538 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.539 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.539 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.539 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.540 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.540 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:08:46.541 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:08:46.542 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.543 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:08:46.544 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.544 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.545 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.546 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.546 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.547 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.547 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.547 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:08:46.550 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:08:46.551 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.551 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:46.551 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.552 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.552 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.553 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.553 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:08:46.553 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.553 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:08:46.553 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:08:46.555 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:08:46.555 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.555 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:08:46.556 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.556 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:08:46.567 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 03:08:46.569 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 03:08:46.570 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 03:08:46.573 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 03:08:46.574 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 03:08:46.658 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 8471.4547ms
2025-09-22 03:08:46.659 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:08:46.668 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE" completed keep alive response.
2025-09-22 03:08:46.670 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:08:46.671 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:08:46.671 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:08:46.674 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 8889.2498ms
2025-09-22 03:09:29.478 +07:00 [DBG] Connection id "0HNFP9ACJ6HFF" received FIN.
2025-09-22 03:09:29.482 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 03:09:29.483 +07:00 [DBG] POST requests are not supported
2025-09-22 03:09:29.484 +07:00 [DBG] POST requests are not supported
2025-09-22 03:09:29.488 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 03:09:29.488 +07:00 [DBG] Connection id "0HNFP9ACJ6HFF" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:09:29.489 +07:00 [INF] CORS policy execution successful.
2025-09-22 03:09:29.490 +07:00 [DBG] Connection id "0HNFP9ACJ6HFF" disconnecting.
2025-09-22 03:09:29.495 +07:00 [DBG] Connection id "0HNFP9ACJ6HFF" stopped.
2025-09-22 03:09:29.502 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:09:29.502 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:09:29.502 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:09:29.506 +07:00 [DBG] Successfully validated the token.
2025-09-22 03:09:29.507 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 03:09:29.519 +07:00 [DBG] Authorization was successful.
2025-09-22 03:09:29.522 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:09:29.523 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 03:09:29.525 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 03:09:29.525 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 03:09:29.526 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 03:09:29.526 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 03:09:29.526 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 03:09:29.526 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:09:29.531 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:09:29.532 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:09:29.533 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 03:09:29.534 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:09:29.534 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:09:29.534 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:09:29.536 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 03:09:29.536 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE", Request id "0HNFP9ACJ6HFE:00000005": started reading request body.
2025-09-22 03:09:29.536 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE", Request id "0HNFP9ACJ6HFE:00000005": done reading request body.
2025-09-22 03:09:29.537 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 03:09:29.537 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:09:29.537 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:09:29.537 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:09:29.537 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:09:29.538 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:09:29.538 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 03:09:29.538 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:09:29.538 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:09:29.538 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:09:29.539 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:09:29.539 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 03:09:29.540 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T20:08:27.2200000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 03:09:29.579 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:09:29.581 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:09:29.581 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 03:09:29.581 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:29.581 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:29.582 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:29.582 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:29.582 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:29.582 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:09:29.591 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:09:29.592 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:29.592 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:29.592 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:29.592 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:29.592 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:29.593 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:29.593 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:29.593 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:29.593 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:29.593 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:09:29.668 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:09:29.669 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:29.670 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:29.670 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:29.670 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:29.672 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 03:09:29.672 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:09:29.674 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:09:29.675 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 03:09:35.034 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 03:09:35.039 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.040 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.040 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.040 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.040 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.040 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:09:35.046 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:09:35.046 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.046 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.046 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.047 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.048 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.048 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.048 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.048 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.050 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 03:09:35.050 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:09:35.056 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:09:35.057 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.058 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.058 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.058 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.058 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.058 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.058 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.058 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.059 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.059 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:09:35.065 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:09:35.065 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.066 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.066 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.066 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.067 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.067 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.067 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.068 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.068 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:09:35.068 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:09:35.073 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:09:35.074 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.074 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.075 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.076 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.080 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 03:09:35.100 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:09:35.108 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.108 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.108 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.109 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.109 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.109 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:09:35.113 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:09:35.114 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.114 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.114 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.114 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.158 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.214 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.219 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:09:35.223 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:09:35.255 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:09:35.357 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.357 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.362 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.362 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.366 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-22 03:09:35.366 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:09:35.381 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:09:35.405 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:09:35.415 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.415 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 33ms reading results.
2025-09-22 03:09:35.419 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.420 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.445 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.448 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:09:35.449 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 03:09:35.454 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 03:09:35.456 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 03:09:35.457 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 03:09:35.459 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 03:09:35.460 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 03:09:35.502 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:09:35.506 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.506 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.506 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.506 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.507 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.507 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:09:35.526 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:09:35.529 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.529 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 03:09:35.529 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.529 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.553 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:09:35.579 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.580 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.580 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.580 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.580 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.580 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:09:35.582 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:09:35.582 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.582 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.582 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.582 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.584 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.584 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.584 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.585 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.585 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.585 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:09:35.586 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:09:35.587 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.587 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.587 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.587 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.587 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.588 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.588 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.588 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.588 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.588 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:09:35.590 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:09:35.590 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.590 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.590 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.591 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.591 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.591 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.591 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.591 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.591 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.591 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:09:35.615 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:09:35.616 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.616 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.616 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.616 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.617 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.617 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.617 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.617 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.617 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.618 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:09:35.622 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:09:35.622 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.622 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.623 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.623 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.626 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.626 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.626 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:09:35.627 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:09:35.630 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:09:35.632 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.632 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.633 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.633 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.634 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:09:35.634 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:09:35.638 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:09:35.639 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:09:35.639 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.639 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.639 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.639 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.640 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.641 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:09:35.642 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.642 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.642 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.642 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.642 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.642 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:09:35.644 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:09:35.644 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.644 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.644 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.644 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.649 +07:00 [ERR] Error assigning reviewer 10
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:09:35.651 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.651 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.651 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.652 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.652 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.652 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:09:35.654 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:09:35.654 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.654 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.655 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.655 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.656 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.657 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.657 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.657 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.657 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.657 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:09:35.658 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:09:35.659 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.659 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.659 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.659 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.660 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.660 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.660 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.660 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.661 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.661 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:09:35.662 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:09:35.662 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.663 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.663 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.663 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.664 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.664 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.664 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.664 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.664 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.664 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:09:35.665 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:09:35.665 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.666 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.666 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.666 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.667 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.668 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.668 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.668 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.668 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.668 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:09:35.670 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:09:35.670 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.670 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.670 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.670 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.670 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.671 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.671 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:09:35.671 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:09:35.671 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:09:35.672 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.672 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.672 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.672 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.672 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.672 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:09:35.676 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:09:35.676 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:09:35.676 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.677 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.677 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.677 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.677 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.677 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:09:35.678 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.678 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.678 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.678 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.678 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.678 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:09:35.681 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:09:35.683 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.683 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.683 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.684 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.684 +07:00 [ERR] Error assigning reviewer 11
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:09:35.686 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.686 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.686 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.686 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.686 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.686 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:09:35.688 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:09:35.688 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.688 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.688 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.689 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.689 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.689 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.689 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.689 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.690 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.690 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:09:35.693 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:09:35.693 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.693 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.693 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.694 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.695 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.695 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.695 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.695 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.696 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.696 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:09:35.697 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:09:35.698 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.698 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.698 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.698 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.698 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.698 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.699 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.699 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.699 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.699 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:09:35.700 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:09:35.700 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.701 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.701 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.701 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.702 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.702 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.702 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.703 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.703 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.703 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:09:35.704 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:09:35.705 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.705 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.705 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.705 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.705 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.706 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.706 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:09:35.706 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:09:35.706 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:09:35.706 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.706 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.707 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.707 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.707 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.707 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:09:35.710 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:09:35.711 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:09:35.711 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.711 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.711 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.711 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.711 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:09:35.712 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:09:35.713 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.713 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.713 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:09:35.713 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.713 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:09:35.713 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:09:35.716 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:09:35.719 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.719 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:09:35.719 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.719 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:09:35.720 +07:00 [ERR] Error assigning reviewer 9
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:09:35.722 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 03:09:35.723 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 03:09:35.723 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 03:09:35.723 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 03:09:35.723 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 03:09:35.724 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6198.3201ms
2025-09-22 03:09:35.724 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:09:35.726 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE" completed keep alive response.
2025-09-22 03:09:35.726 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:09:35.727 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:09:35.727 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:09:35.727 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 6244.4814ms
2025-09-22 03:11:46.511 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE" disconnecting.
2025-09-22 03:11:46.511 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE" stopped.
2025-09-22 03:11:46.511 +07:00 [DBG] Connection id "0HNFP9ACJ6HFE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:12:12.389 +07:00 [DBG] Connection id "0HNFP9ACJ6HFG" accepted.
2025-09-22 03:12:12.389 +07:00 [DBG] Connection id "0HNFP9ACJ6HFG" started.
2025-09-22 03:12:12.390 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 109
2025-09-22 03:12:12.390 +07:00 [DBG] POST requests are not supported
2025-09-22 03:12:12.390 +07:00 [DBG] POST requests are not supported
2025-09-22 03:12:12.390 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 03:12:12.390 +07:00 [INF] CORS policy execution successful.
2025-09-22 03:12:12.391 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:12:12.391 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:12:12.391 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:12:12.394 +07:00 [DBG] Successfully validated the token.
2025-09-22 03:12:12.395 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 03:12:12.397 +07:00 [DBG] Authorization was successful.
2025-09-22 03:12:12.398 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:12:12.398 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 03:12:12.398 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 03:12:12.398 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 03:12:12.398 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 03:12:12.398 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 03:12:12.398 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 03:12:12.398 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:12:12.416 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:12:12.418 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:12:12.418 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 03:12:12.419 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:12:12.419 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:12:12.419 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:12:12.420 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 03:12:12.420 +07:00 [DBG] Connection id "0HNFP9ACJ6HFG", Request id "0HNFP9ACJ6HFG:00000001": started reading request body.
2025-09-22 03:12:12.420 +07:00 [DBG] Connection id "0HNFP9ACJ6HFG", Request id "0HNFP9ACJ6HFG:00000001": done reading request body.
2025-09-22 03:12:12.420 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 03:12:12.420 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:12:12.421 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:12:12.421 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:12:12.422 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:12:12.422 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:12:12.422 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 03:12:12.422 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:12:12.424 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:12:12.424 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:12:12.425 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:12:12.425 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 03:12:12.427 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1,"UsePrompt":true,"Deadline":"2025-09-25T20:08:27.2200000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 03:12:12.432 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:12:12.433 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:12:12.433 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 03:12:12.434 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:12.434 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:12.434 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:12:12.434 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:12.434 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:12.434 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:12:12.444 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:12:12.445 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:12:12.445 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:12:12.445 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:12.445 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:12:12.445 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:12.446 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:12.446 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:12:12.446 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:12.446 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:12.447 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:12:12.528 +07:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:12:12.529 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:12:12.529 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:12:12.529 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:12.529 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:12:12.530 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 03:12:12.531 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:12:12.531 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:12:12.531 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 03:12:18.134 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 03:12:18.136 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.137 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.137 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:12:18.138 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.138 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.138 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:12:18.148 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:12:18.148 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.148 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:12:18.148 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.149 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:12:18.149 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.149 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.150 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:12:18.150 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.150 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.150 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:12:18.159 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:12:18.160 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.161 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:12:18.161 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.161 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:12:18.164 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.166 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.170 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:12:18.170 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.171 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.171 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:12:18.183 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:12:18.183 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.184 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:12:18.188 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.188 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:12:18.190 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.191 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.192 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:12:18.192 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.192 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.194 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:12:18.199 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:12:18.199 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.199 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:12:18.199 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.200 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:12:18.202 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.203 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.203 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:12:18.203 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.203 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.203 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:12:18.209 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:12:18.209 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.209 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:12:18.209 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.209 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:12:18.210 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:12:18.211 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:12:18.211 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:12:18.211 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:12:18.212 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:12:18.213 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.215 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.215 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:12:18.215 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.215 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.215 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:12:18.225 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:12:18.225 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:12:18.225 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.225 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:12:18.225 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.225 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:12:18.225 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:12:18.226 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:12:18.226 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.226 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.226 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:12:18.226 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.227 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:12:18.227 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:12:18.249 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:12:18.250 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.250 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:12:18.250 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.250 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:12:18.251 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:12:18.253 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 03:12:18.253 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 03:12:18.253 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 03:12:18.254 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 03:12:18.254 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 03:12:18.254 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5856.0178ms
2025-09-22 03:12:18.254 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:12:18.258 +07:00 [DBG] Connection id "0HNFP9ACJ6HFG" completed keep alive response.
2025-09-22 03:12:18.258 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:12:18.258 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:12:18.258 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:12:18.258 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 5868.4805ms
2025-09-22 03:13:05.889 +07:00 [DBG] Connection id "0HNFP9ACJ6HFG" received FIN.
2025-09-22 03:13:05.889 +07:00 [DBG] Connection id "0HNFP9ACJ6HFG" disconnecting.
2025-09-22 03:13:05.889 +07:00 [DBG] Connection id "0HNFP9ACJ6HFG" stopped.
2025-09-22 03:13:05.890 +07:00 [DBG] Connection id "0HNFP9ACJ6HFG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:19:46.982 +07:00 [INF] Application is shutting down...
2025-09-22 03:19:46.983 +07:00 [DBG] Hosting stopping
2025-09-22 03:19:46.991 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 03:19:46.993 +07:00 [DBG] Hosting stopped
2025-09-22 03:20:07.563 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 03:20:07.626 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 03:20:07.782 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.796 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.806 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.808 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.808 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.810 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.957 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.958 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.972 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.972 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.972 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.973 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.977 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:07.977 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 03:20:08.011 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 03:20:08.012 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 03:20:08.012 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 03:20:08.012 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 03:20:08.012 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 03:20:08.012 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 03:20:08.120 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:20:08.121 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:20:08.121 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:20:08.122 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:20:08.122 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:20:08.122 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:20:08.122 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:20:08.122 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:20:08.122 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:20:08.123 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:20:08.123 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:20:08.233 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:20:08.272 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 03:20:08.381 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:20:08.404 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:20:08.416 +07:00 [DBG] Created DbConnection. (10ms).
2025-09-22 03:20:08.418 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.512 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.513 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:20:08.518 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:20:08.522 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 03:20:08.527 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:20:08.559 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:20:08.586 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:20:08.600 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.604 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 42ms reading results.
2025-09-22 03:20:08.606 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.609 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 03:20:08.611 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.612 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.612 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:20:08.612 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.612 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.612 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:20:08.615 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:20:08.615 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:20:08.615 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.615 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:20:08.615 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.615 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:20:08.616 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.616 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.616 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:20:08.616 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.616 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.616 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:20:08.617 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:20:08.617 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:20:08.617 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.617 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:20:08.617 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.617 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:20:08.618 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.618 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.618 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:20:08.618 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.618 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.618 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:20:08.618 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:20:08.619 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:20:08.619 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.619 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:20:08.619 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.619 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:20:08.623 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 03:20:08.627 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:20:08.629 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.629 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.629 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:20:08.629 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.629 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.629 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:20:08.632 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:20:08.651 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:20:08.672 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.672 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 39ms reading results.
2025-09-22 03:20:08.673 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.673 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:20:08.674 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 03:20:08.676 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.677 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.677 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:20:08.677 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.677 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.677 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:20:08.677 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:20:08.678 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:20:08.678 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.678 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:20:08.678 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.678 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:20:08.678 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 03:20:08.678 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.679 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.679 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:20:08.679 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.679 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.679 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:20:08.679 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:20:08.680 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:20:08.680 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.680 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:20:08.680 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.680 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:20:08.680 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.680 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.680 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:20:08.680 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.680 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:20:08.680 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:20:08.681 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:20:08.681 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:20:08.681 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.681 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:20:08.681 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.681 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:20:08.682 +07:00 [INF] Data seeding completed successfully
2025-09-22 03:20:08.684 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:20:08.685 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:20:08.685 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:20:08.697 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 03:20:08.805 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 03:20:08.882 +07:00 [DBG] Hosting starting
2025-09-22 03:20:08.889 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 03:20:08.891 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 03:20:08.891 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 03:20:08.893 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 03:20:08.895 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 03:20:08.895 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 03:20:08.899 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 03:20:08.901 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:20:08.901 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 03:20:08.902 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:20:08.902 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 03:20:08.903 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 03:20:08.904 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 03:20:08.904 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 03:20:08.908 +07:00 [DBG] Middleware loaded
2025-09-22 03:20:08.909 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 03:20:08.909 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 03:20:08.931 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 03:20:08.941 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 03:20:08.941 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 03:20:08.941 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 03:20:08.941 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 03:20:08.941 +07:00 [INF] Hosting environment: Development
2025-09-22 03:20:08.941 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 03:20:08.942 +07:00 [DBG] Hosting started
2025-09-22 03:20:09.070 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" accepted.
2025-09-22 03:20:09.072 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" started.
2025-09-22 03:20:09.102 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 03:20:09.109 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 03:20:09.149 +07:00 [DBG] Connection id "0HNFP9H1DEAS3" accepted.
2025-09-22 03:20:09.149 +07:00 [DBG] Connection id "0HNFP9H1DEAS3" started.
2025-09-22 03:20:09.218 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 03:20:09.226 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 03:20:09.227 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" completed keep alive response.
2025-09-22 03:20:09.229 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 130.2319ms
2025-09-22 03:20:09.234 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 03:20:09.236 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 03:20:09.238 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" completed keep alive response.
2025-09-22 03:20:09.238 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.465ms
2025-09-22 03:20:09.295 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 03:20:09.601 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" completed keep alive response.
2025-09-22 03:20:09.601 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 306.045ms
2025-09-22 03:20:50.285 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 03:20:50.292 +07:00 [DBG] POST requests are not supported
2025-09-22 03:20:50.297 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 03:20:50.298 +07:00 [DBG] POST requests are not supported
2025-09-22 03:20:50.302 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 03:20:50.303 +07:00 [INF] CORS policy execution successful.
2025-09-22 03:20:50.403 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:20:50.408 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:20:50.409 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:20:50.582 +07:00 [DBG] Successfully validated the token.
2025-09-22 03:20:50.583 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 03:20:50.600 +07:00 [DBG] Authorization was successful.
2025-09-22 03:20:50.624 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:20:50.661 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 03:20:50.664 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 03:20:50.665 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 03:20:50.667 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 03:20:50.667 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 03:20:50.667 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 03:20:50.671 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:20:50.851 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:20:50.859 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:20:50.864 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 03:20:50.867 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:20:50.867 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:20:50.868 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:20:50.868 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 03:20:50.889 +07:00 [DBG] Connection id "0HNFP9H1DEAS2", Request id "0HNFP9H1DEAS2:00000004": started reading request body.
2025-09-22 03:20:50.891 +07:00 [DBG] Connection id "0HNFP9H1DEAS2", Request id "0HNFP9H1DEAS2:00000004": done reading request body.
2025-09-22 03:20:50.907 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 03:20:50.908 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:20:50.908 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:20:50.909 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:20:50.923 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:20:50.925 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:20:50.927 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 03:20:50.929 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:20:50.929 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:20:50.929 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:20:50.930 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:20:50.936 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 03:20:50.938 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T20:20:40.1660000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 03:20:50.945 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 03:20:50.949 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 03:20:50.950 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 03:20:50.953 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 03:20:50.955 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 03:20:51.005 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 333.0891ms
2025-09-22 03:20:51.005 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:20:51.006 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" completed keep alive response.
2025-09-22 03:20:51.009 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 723.7932ms
2025-09-22 03:20:54.762 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 03:20:54.762 +07:00 [DBG] POST requests are not supported
2025-09-22 03:20:54.764 +07:00 [DBG] POST requests are not supported
2025-09-22 03:20:54.765 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 03:20:54.766 +07:00 [INF] CORS policy execution successful.
2025-09-22 03:20:54.774 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:20:54.774 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:20:54.775 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:20:54.780 +07:00 [DBG] Successfully validated the token.
2025-09-22 03:20:54.781 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 03:20:54.786 +07:00 [DBG] Authorization was successful.
2025-09-22 03:20:54.787 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:20:54.787 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 03:20:54.789 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 03:20:54.790 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 03:20:54.791 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 03:20:54.791 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 03:20:54.792 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 03:20:54.792 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:20:54.800 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:20:54.801 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:20:54.802 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 03:20:54.804 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:20:54.805 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:20:54.805 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:20:54.806 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 03:20:54.806 +07:00 [DBG] Connection id "0HNFP9H1DEAS2", Request id "0HNFP9H1DEAS2:00000005": started reading request body.
2025-09-22 03:20:54.806 +07:00 [DBG] Connection id "0HNFP9H1DEAS2", Request id "0HNFP9H1DEAS2:00000005": done reading request body.
2025-09-22 03:20:54.807 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 03:20:54.807 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:20:54.807 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:20:54.808 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:20:54.808 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:20:54.809 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:20:54.809 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 03:20:54.812 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:20:54.812 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:20:54.813 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:20:54.813 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:20:54.814 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 03:20:54.815 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-21T20:20:40.1660000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 03:20:54.816 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 03:20:54.816 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 03:20:54.816 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 03:20:54.820 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 03:20:54.821 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 03:20:54.821 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 29.2455ms
2025-09-22 03:20:54.822 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:20:54.822 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" completed keep alive response.
2025-09-22 03:20:54.822 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 500 null application/json; charset=utf-8 60.7012ms
2025-09-22 03:21:07.267 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 03:21:07.268 +07:00 [DBG] POST requests are not supported
2025-09-22 03:21:07.268 +07:00 [DBG] POST requests are not supported
2025-09-22 03:21:07.271 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 03:21:07.271 +07:00 [INF] CORS policy execution successful.
2025-09-22 03:21:07.271 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:21:07.271 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:21:07.271 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:21:07.279 +07:00 [DBG] Successfully validated the token.
2025-09-22 03:21:07.279 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 03:21:07.280 +07:00 [DBG] Authorization was successful.
2025-09-22 03:21:07.282 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:21:07.283 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 03:21:07.283 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 03:21:07.283 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 03:21:07.284 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 03:21:07.284 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 03:21:07.284 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 03:21:07.284 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:21:07.302 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:21:07.303 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:21:07.303 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 03:21:07.304 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:21:07.304 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:21:07.304 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:21:07.305 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 03:21:07.305 +07:00 [DBG] Connection id "0HNFP9H1DEAS2", Request id "0HNFP9H1DEAS2:00000006": started reading request body.
2025-09-22 03:21:07.305 +07:00 [DBG] Connection id "0HNFP9H1DEAS2", Request id "0HNFP9H1DEAS2:00000006": done reading request body.
2025-09-22 03:21:07.305 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 03:21:07.306 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:21:07.306 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:21:07.306 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:21:07.306 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:21:07.306 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:21:07.307 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 03:21:07.307 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:21:07.307 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:21:07.307 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:21:07.307 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:21:07.307 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 03:21:07.308 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-22T20:20:40.1660000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 03:21:07.444 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:21:07.477 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 03:21:07.502 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 03:21:07.713 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:21:07.717 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:21:07.721 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-22 03:21:07.722 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:07.723 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:07.723 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:07.723 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:07.724 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:07.725 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:21:07.740 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:21:07.750 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:07.751 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 9ms reading results.
2025-09-22 03:21:07.751 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:07.751 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:07.763 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 03:21:07.777 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 03:21:07.777 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 03:21:07.778 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 03:21:07.778 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 03:21:07.968 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 03:21:08.022 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:21:08.043 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:08.043 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:08.043 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:08.044 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:08.044 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:08.044 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:21:08.131 +07:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:21:08.159 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:08.160 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 27ms reading results.
2025-09-22 03:21:08.160 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:08.161 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:08.210 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 03:21:08.212 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:21:08.213 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:21:08.214 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 03:21:14.842 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 03:21:14.887 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 03:21:14.906 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:21:14.908 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.909 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.909 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:14.909 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:14.909 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:14.909 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:21:14.915 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:21:14.915 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.915 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:14.915 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.916 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:14.917 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 03:21:14.919 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 03:21:14.947 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:21:14.949 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.949 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.949 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:14.949 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:14.950 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:14.950 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:21:14.956 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:21:14.956 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.956 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:14.956 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.956 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:14.959 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 03:21:14.961 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 03:21:14.970 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:21:14.972 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.972 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.972 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:14.972 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:14.972 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:14.973 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:21:14.978 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:21:14.979 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.979 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:14.979 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.979 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:14.983 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 03:21:14.989 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:21:14.991 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.991 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.992 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:14.992 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:14.992 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:14.992 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:21:14.995 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:21:14.997 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.997 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:14.997 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:14.997 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:14.999 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 03:21:15.014 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:21:15.022 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.022 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.022 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.023 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.023 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.023 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:21:15.027 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:21:15.028 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.028 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.028 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.029 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.070 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.146 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.155 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:21:15.161 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:21:15.212 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:21:15.343 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.343 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.348 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.348 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.357 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-09-22 03:21:15.357 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:21:15.382 +07:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:21:15.403 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:21:15.416 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.417 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 34ms reading results.
2025-09-22 03:21:15.420 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.420 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.442 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.444 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:21:15.447 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 03:21:15.450 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 03:21:15.451 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 03:21:15.453 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 03:21:15.456 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 03:21:15.457 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 03:21:15.506 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:21:15.511 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.511 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.511 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.511 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.512 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.512 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:21:15.530 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:21:15.533 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.533 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 03:21:15.533 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.536 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 03:21:15.585 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:21:15.592 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.592 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.592 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.592 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.592 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.593 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:21:15.594 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:21:15.594 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.595 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.595 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.595 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.595 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.596 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.596 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.596 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.596 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.596 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:21:15.598 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:21:15.599 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.599 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.599 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.599 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.601 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.601 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.601 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.601 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.601 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.602 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:21:15.603 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:21:15.603 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.603 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.603 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.603 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.604 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.604 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.604 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.605 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:21:15.606 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:21:15.606 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:21:15.607 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:21:15.608 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.608 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.608 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.608 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.609 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.609 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.609 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.609 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.609 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.609 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:21:15.614 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:21:15.614 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.614 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.614 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.615 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.616 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.616 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.617 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:21:15.617 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:21:15.619 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:21:15.622 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.622 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.622 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.622 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.623 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.623 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:21:15.627 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:21:15.628 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:21:15.628 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.628 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.628 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.629 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.629 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.629 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:21:15.630 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.630 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.631 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.631 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.631 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.631 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:21:15.635 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:21:15.635 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.636 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.636 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.636 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.637 +07:00 [ERR] Error assigning reviewer 10
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:21:15.653 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.653 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.654 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.654 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.654 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.654 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:21:15.656 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:21:15.656 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.656 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.656 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.657 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.657 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.657 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.657 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.658 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.658 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.658 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:21:15.660 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:21:15.661 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.661 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.661 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.662 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.663 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.663 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.663 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.663 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.663 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.663 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:21:15.664 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:21:15.665 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.665 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.665 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.665 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.666 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.666 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.666 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.666 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.666 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.666 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:21:15.668 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:21:15.668 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.668 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.668 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.668 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.670 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.670 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.670 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.670 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.670 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.671 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:21:15.672 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:21:15.672 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.672 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.672 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.672 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.673 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.673 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.673 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:21:15.673 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:21:15.674 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:21:15.675 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.675 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.675 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.675 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.675 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.676 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:21:15.680 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:21:15.680 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:21:15.680 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.681 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.681 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.681 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.682 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.682 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:21:15.683 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.683 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.684 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.684 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.684 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.684 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:21:15.686 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:21:15.687 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.687 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.687 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.687 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.688 +07:00 [ERR] Error assigning reviewer 11
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:21:15.693 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.693 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.693 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.693 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.693 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.693 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:21:15.696 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:21:15.697 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.697 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.697 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.697 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.698 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.698 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.699 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.699 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.699 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.699 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:21:15.700 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:21:15.701 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.701 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.703 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.703 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.704 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.704 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.704 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.704 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.704 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.704 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:21:15.705 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:21:15.706 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.706 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.706 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.706 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.707 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.707 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.707 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.707 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.707 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.707 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:21:15.708 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:21:15.709 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.709 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.709 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.709 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.710 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.710 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.711 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.711 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.711 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.711 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:21:15.713 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:21:15.713 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.713 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.713 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.713 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.713 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.714 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.714 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:21:15.714 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:21:15.714 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:21:15.715 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.715 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.715 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.715 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.715 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.715 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:21:15.719 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:21:15.720 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:21:15.720 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.720 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.720 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.720 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.721 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:21:15.721 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:21:15.721 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.721 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.722 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:21:15.722 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.722 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:21:15.722 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:21:15.726 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:21:15.728 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.728 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:21:15.728 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.728 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:21:15.729 +07:00 [ERR] Error assigning reviewer 9
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:21:15.737 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 03:21:15.737 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 03:21:15.737 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 03:21:15.737 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 03:21:15.738 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 03:21:15.787 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 8502.4834ms
2025-09-22 03:21:15.787 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:21:15.790 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" completed keep alive response.
2025-09-22 03:21:15.790 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:21:15.791 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:21:15.791 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:21:15.791 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 8524.1621ms
2025-09-22 03:22:20.900 +07:00 [DBG] Connection id "0HNFP9H1DEAS3" disconnecting.
2025-09-22 03:22:20.901 +07:00 [DBG] Connection id "0HNFP9H1DEAS3" stopped.
2025-09-22 03:22:20.902 +07:00 [DBG] Connection id "0HNFP9H1DEAS3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:22:39.818 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 03:22:39.818 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 03:22:39.819 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 03:22:39.819 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" completed keep alive response.
2025-09-22 03:22:39.819 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 1.1546ms
2025-09-22 03:22:39.825 +07:00 [DBG] Connection id "0HNFP9H1DEAS4" accepted.
2025-09-22 03:22:39.825 +07:00 [DBG] Connection id "0HNFP9H1DEAS4" started.
2025-09-22 03:22:39.841 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 03:22:39.842 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 03:22:39.842 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" completed keep alive response.
2025-09-22 03:22:39.842 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 0.7545ms
2025-09-22 03:22:40.071 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 03:22:40.124 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" completed keep alive response.
2025-09-22 03:22:40.125 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 53.8538ms
2025-09-22 03:22:50.845 +07:00 [INF] Application is shutting down...
2025-09-22 03:22:50.847 +07:00 [DBG] Hosting stopping
2025-09-22 03:22:50.850 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" disconnecting.
2025-09-22 03:22:50.850 +07:00 [DBG] Connection id "0HNFP9H1DEAS4" disconnecting.
2025-09-22 03:22:50.850 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" stopped.
2025-09-22 03:22:50.850 +07:00 [DBG] Connection id "0HNFP9H1DEAS4" stopped.
2025-09-22 03:22:50.850 +07:00 [DBG] Connection id "0HNFP9H1DEAS4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:22:50.850 +07:00 [DBG] Connection id "0HNFP9H1DEAS2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:22:50.853 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 03:22:50.856 +07:00 [DBG] Hosting stopped
2025-09-22 03:27:16.869 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 03:27:16.930 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 03:27:17.097 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.111 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.121 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.122 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.122 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.123 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.281 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.282 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.296 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.296 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.297 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.298 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.301 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.301 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:27:17.336 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 03:27:17.337 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 03:27:17.337 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 03:27:17.337 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 03:27:17.337 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 03:27:17.337 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 03:27:17.337 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 03:27:17.337 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 03:27:17.337 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 03:27:17.338 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 03:27:17.338 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 03:27:17.338 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 03:27:17.338 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 03:27:17.338 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 03:27:17.338 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 03:27:17.338 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 03:27:17.338 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 03:27:17.338 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 03:27:17.339 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 03:27:17.448 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:27:17.449 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:27:17.449 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:27:17.449 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:27:17.450 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:27:17.450 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:27:17.450 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:27:17.450 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:27:17.450 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:27:17.450 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:27:17.450 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:27:17.558 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:27:17.607 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 03:27:17.716 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:27:17.739 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:27:17.753 +07:00 [DBG] Created DbConnection. (11ms).
2025-09-22 03:27:17.756 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.854 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.856 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:27:17.860 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:27:17.864 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 03:27:17.869 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:27:17.898 +07:00 [INF] Executed DbCommand (29ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:27:17.926 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:27:17.940 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.945 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 43ms reading results.
2025-09-22 03:27:17.946 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.949 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 03:27:17.952 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.952 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.952 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:27:17.952 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:17.952 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:17.952 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:27:17.954 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:27:17.954 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:27:17.955 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.955 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:27:17.955 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.955 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:27:17.956 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.956 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.956 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:27:17.956 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:17.957 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:17.957 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:27:17.958 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:27:17.958 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:27:17.958 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.958 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:27:17.958 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.958 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:27:17.959 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.959 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.959 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:27:17.959 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:17.959 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:17.959 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:27:17.960 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:27:17.960 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:27:17.960 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.960 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:27:17.960 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.960 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:27:17.964 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 03:27:17.969 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:27:17.970 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.971 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:17.971 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:27:17.971 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:17.971 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:17.971 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:27:17.975 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:27:17.994 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:27:18.015 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.016 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 40ms reading results.
2025-09-22 03:27:18.016 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.016 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:27:18.018 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 03:27:18.020 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.020 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.020 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:27:18.020 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:18.020 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:18.020 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:27:18.021 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:27:18.022 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:27:18.022 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.022 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:27:18.022 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.022 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:27:18.022 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 03:27:18.022 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.022 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.022 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:27:18.022 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:18.022 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:18.022 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:27:18.023 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:27:18.023 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:27:18.023 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.023 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:27:18.023 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.023 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:27:18.024 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.024 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.024 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:27:18.024 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:18.024 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:27:18.024 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:27:18.025 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:27:18.026 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:27:18.026 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.026 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:27:18.026 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.027 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:27:18.027 +07:00 [INF] Data seeding completed successfully
2025-09-22 03:27:18.028 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:27:18.029 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:27:18.029 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:27:18.039 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 03:27:18.153 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 03:27:18.233 +07:00 [DBG] Hosting starting
2025-09-22 03:27:18.240 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 03:27:18.241 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 03:27:18.242 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 03:27:18.244 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 03:27:18.246 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 03:27:18.246 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 03:27:18.250 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 03:27:18.252 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:27:18.252 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 03:27:18.254 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:27:18.255 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 03:27:18.256 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 03:27:18.256 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 03:27:18.257 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 03:27:18.260 +07:00 [DBG] Middleware loaded
2025-09-22 03:27:18.261 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 03:27:18.262 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 03:27:18.285 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 03:27:18.293 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 03:27:18.294 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 03:27:18.294 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 03:27:18.294 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 03:27:18.294 +07:00 [INF] Hosting environment: Development
2025-09-22 03:27:18.294 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 03:27:18.295 +07:00 [DBG] Hosting started
2025-09-22 03:27:18.420 +07:00 [DBG] Connection id "0HNFP9L1C1D4I" accepted.
2025-09-22 03:27:18.421 +07:00 [DBG] Connection id "0HNFP9L1C1D4I" started.
2025-09-22 03:27:18.458 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 03:27:18.463 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 03:27:18.497 +07:00 [DBG] Connection id "0HNFP9L1C1D4J" accepted.
2025-09-22 03:27:18.497 +07:00 [DBG] Connection id "0HNFP9L1C1D4J" started.
2025-09-22 03:27:18.596 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 03:27:18.608 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 03:27:18.609 +07:00 [DBG] Connection id "0HNFP9L1C1D4I" completed keep alive response.
2025-09-22 03:27:18.611 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 155.0253ms
2025-09-22 03:27:18.618 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 03:27:18.620 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 03:27:18.620 +07:00 [DBG] Connection id "0HNFP9L1C1D4I" completed keep alive response.
2025-09-22 03:27:18.621 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.7014ms
2025-09-22 03:27:18.685 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 03:27:19.033 +07:00 [DBG] Connection id "0HNFP9L1C1D4I" completed keep alive response.
2025-09-22 03:27:19.033 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 348.4888ms
2025-09-22 03:28:10.899 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 03:28:10.911 +07:00 [DBG] POST requests are not supported
2025-09-22 03:28:10.912 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 03:28:10.913 +07:00 [DBG] POST requests are not supported
2025-09-22 03:28:10.914 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 03:28:10.915 +07:00 [INF] CORS policy execution successful.
2025-09-22 03:28:11.003 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:28:11.008 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:28:11.010 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:28:11.188 +07:00 [DBG] Successfully validated the token.
2025-09-22 03:28:11.191 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 03:28:11.206 +07:00 [DBG] Authorization was successful.
2025-09-22 03:28:11.228 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:28:11.272 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 03:28:11.274 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 03:28:11.274 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 03:28:11.277 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 03:28:11.277 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 03:28:11.278 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 03:28:11.280 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:28:11.563 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:28:11.578 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:28:11.588 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 03:28:11.597 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:28:11.599 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:28:11.600 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:28:11.600 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 03:28:11.621 +07:00 [DBG] Connection id "0HNFP9L1C1D4I", Request id "0HNFP9L1C1D4I:00000004": started reading request body.
2025-09-22 03:28:11.623 +07:00 [DBG] Connection id "0HNFP9L1C1D4I", Request id "0HNFP9L1C1D4I:00000004": done reading request body.
2025-09-22 03:28:11.634 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 03:28:11.634 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:28:11.635 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:28:11.635 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:28:11.648 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:28:11.652 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:28:11.653 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 03:28:11.656 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:28:11.656 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:28:11.656 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:28:11.659 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:28:11.664 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 03:28:11.668 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-22T20:27:55.8950000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 03:28:11.768 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:28:11.787 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 03:28:11.817 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 03:28:11.947 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:28:11.958 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:28:11.959 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 03:28:11.959 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:11.960 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:11.960 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:11.960 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:11.960 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:11.961 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:28:11.972 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:28:11.979 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:11.980 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 7ms reading results.
2025-09-22 03:28:11.980 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:11.981 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:11.992 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 03:28:12.006 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 03:28:12.007 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 03:28:12.008 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 03:28:12.009 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 03:28:12.154 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 03:28:12.185 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:28:12.204 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:12.204 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:12.204 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:12.205 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:12.207 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 03:28:12.207 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:28:12.297 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:28:12.311 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:12.312 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 13ms reading results.
2025-09-22 03:28:12.312 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:12.313 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:12.378 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 03:28:12.382 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:28:12.383 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:28:12.383 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 03:28:19.283 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 03:28:19.380 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 03:28:19.396 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:28:19.400 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.401 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.401 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:19.402 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:19.402 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:19.403 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:28:19.408 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:28:19.409 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.409 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:19.409 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.409 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:19.411 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 03:28:19.415 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 03:28:19.449 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:28:19.450 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.450 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.450 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:19.451 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:19.451 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:19.451 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:28:19.462 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:28:19.463 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.464 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:28:19.464 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.464 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:19.466 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 03:28:19.470 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 03:28:19.481 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:28:19.484 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.484 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.484 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:19.485 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:19.485 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:19.486 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:28:19.490 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:28:19.491 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.492 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:28:19.492 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.492 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:19.496 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 03:28:19.505 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:28:19.507 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.508 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.508 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:19.508 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:19.508 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:19.509 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:28:19.513 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:28:19.514 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.514 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:19.514 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.515 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:19.517 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 03:28:19.536 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:28:19.546 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.546 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.547 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:19.547 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:19.548 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:19.548 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:28:19.552 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:28:19.554 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.554 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:28:19.554 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.555 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:19.597 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:19.696 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:19.706 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:28:19.713 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:28:19.774 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:28:19.952 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.954 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:19.959 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:19.960 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:19.966 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-09-22 03:28:19.967 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:28:19.981 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:28:20.007 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:28:20.019 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.019 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 36ms reading results.
2025-09-22 03:28:20.021 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.021 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.041 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:20.044 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:28:20.046 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 03:28:20.048 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 03:28:20.049 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 03:28:20.054 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 03:28:20.055 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 03:28:20.058 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 03:28:20.107 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:28:20.112 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.112 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.113 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.114 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.115 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 03:28:20.115 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:28:20.131 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:28:20.139 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.139 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 7ms reading results.
2025-09-22 03:28:20.140 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.142 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 03:28:20.160 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 196
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:28:20.187 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.188 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.188 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.189 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:28:20.190 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 03:28:20.191 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:28:20.192 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:28:20.193 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.193 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.193 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.193 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.196 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.196 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.197 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.197 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.197 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.197 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:28:20.199 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:28:20.200 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.200 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.200 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.201 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.201 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.202 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.202 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.202 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.203 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.203 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:28:20.206 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:28:20.206 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.207 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:28:20.208 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.208 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.209 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.212 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.212 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.212 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.212 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.212 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:28:20.214 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:28:20.214 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.214 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.216 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.217 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 03:28:20.220 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.221 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.222 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.222 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.222 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.226 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:28:20.232 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:28:20.233 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.234 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.235 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.237 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 03:28:20.240 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:20.242 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:20.242 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:28:20.243 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:28:20.250 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:28:20.257 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.257 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.257 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.259 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:28:20.260 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 03:28:20.260 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:28:20.266 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:28:20.266 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:28:20.267 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.267 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.267 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.268 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.268 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:20.269 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:28:20.270 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.270 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.270 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.270 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.271 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.271 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:28:20.275 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:28:20.275 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.276 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.276 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.276 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.278 +07:00 [ERR] Error assigning reviewer 10
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 196
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:28:20.281 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.282 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.282 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.282 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.282 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.282 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:28:20.283 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:28:20.284 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.284 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.284 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.285 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.289 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.289 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.289 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.289 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.290 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.290 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:28:20.291 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:28:20.292 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.292 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.293 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.294 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 03:28:20.297 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.298 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.298 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.298 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.299 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.299 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:28:20.301 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:28:20.302 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.302 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.302 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.303 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.304 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.304 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.305 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.305 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.305 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.305 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:28:20.307 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:28:20.307 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.307 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.308 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.308 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.309 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.311 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.311 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.312 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.312 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.315 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:28:20.318 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:28:20.318 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.318 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.318 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.319 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.319 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:20.319 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:20.320 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:28:20.323 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:28:20.324 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:28:20.325 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.325 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.325 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.326 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.326 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.326 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:28:20.331 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:28:20.332 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:28:20.332 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.333 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.333 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.333 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.333 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:20.334 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:28:20.336 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.336 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.337 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.337 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.337 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.337 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:28:20.346 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:28:20.347 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.347 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.347 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.347 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.348 +07:00 [ERR] Error assigning reviewer 11
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 196
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:28:20.353 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.353 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.353 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.353 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.353 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.354 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:28:20.355 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:28:20.356 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.356 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.357 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.358 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 03:28:20.359 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.359 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.360 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.360 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.360 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.360 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:28:20.361 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:28:20.363 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.364 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 03:28:20.365 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.365 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.366 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.366 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.366 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.366 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.366 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.367 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:28:20.368 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:28:20.368 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.369 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.369 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.371 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 03:28:20.373 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.373 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.373 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.374 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.374 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.374 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:28:20.376 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:28:20.376 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.377 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.377 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.377 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.378 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.379 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.379 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.380 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.380 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.380 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:28:20.382 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:28:20.382 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.382 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.383 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.383 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.384 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:20.384 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:20.385 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:28:20.385 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:28:20.385 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:28:20.386 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.386 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.386 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.387 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.387 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.387 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:28:20.391 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:28:20.392 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:28:20.393 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.393 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.394 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.394 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.394 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:28:20.394 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:28:20.395 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.396 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.396 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:28:20.396 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.396 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:28:20.398 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:28:20.400 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:28:20.401 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.401 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:28:20.402 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.402 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:28:20.403 +07:00 [ERR] Error assigning reviewer 9
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 196
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:28:20.415 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 03:28:20.418 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 03:28:20.419 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 03:28:20.424 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 03:28:20.425 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 03:28:20.506 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 9221.6697ms
2025-09-22 03:28:20.509 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:28:20.515 +07:00 [DBG] Connection id "0HNFP9L1C1D4I" completed keep alive response.
2025-09-22 03:28:20.517 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:28:20.518 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:28:20.518 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:28:20.522 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 9623.0009ms
2025-09-22 03:29:30.238 +07:00 [DBG] Connection id "0HNFP9L1C1D4J" disconnecting.
2025-09-22 03:29:30.242 +07:00 [DBG] Connection id "0HNFP9L1C1D4J" stopped.
2025-09-22 03:29:30.247 +07:00 [DBG] Connection id "0HNFP9L1C1D4J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:30:31.710 +07:00 [DBG] Connection id "0HNFP9L1C1D4I" disconnecting.
2025-09-22 03:30:31.711 +07:00 [DBG] Connection id "0HNFP9L1C1D4I" stopped.
2025-09-22 03:30:31.712 +07:00 [DBG] Connection id "0HNFP9L1C1D4I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:33:23.549 +07:00 [DBG] Connection id "0HNFP9L1C1D4K" accepted.
2025-09-22 03:33:23.549 +07:00 [DBG] Connection id "0HNFP9L1C1D4K" started.
2025-09-22 03:33:23.555 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 03:33:23.556 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 03:33:23.556 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 03:33:23.556 +07:00 [DBG] Connection id "0HNFP9L1C1D4K" completed keep alive response.
2025-09-22 03:33:23.556 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 1.316ms
2025-09-22 03:33:23.561 +07:00 [DBG] Connection id "0HNFP9L1C1D4L" accepted.
2025-09-22 03:33:23.561 +07:00 [DBG] Connection id "0HNFP9L1C1D4L" started.
2025-09-22 03:33:23.599 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 03:33:23.599 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 03:33:23.599 +07:00 [DBG] Connection id "0HNFP9L1C1D4K" completed keep alive response.
2025-09-22 03:33:23.599 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 0.3874ms
2025-09-22 03:33:24.042 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 03:33:24.125 +07:00 [DBG] Connection id "0HNFP9L1C1D4K" completed keep alive response.
2025-09-22 03:33:24.125 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 83.2289ms
2025-09-22 03:33:32.335 +07:00 [DBG] Connection id "0HNFP9L1C1D4L" received FIN.
2025-09-22 03:33:32.335 +07:00 [DBG] Connection id "0HNFP9L1C1D4K" received FIN.
2025-09-22 03:33:32.336 +07:00 [DBG] Connection id "0HNFP9L1C1D4K" disconnecting.
2025-09-22 03:33:32.336 +07:00 [DBG] Connection id "0HNFP9L1C1D4L" disconnecting.
2025-09-22 03:33:32.336 +07:00 [DBG] Connection id "0HNFP9L1C1D4K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:33:32.336 +07:00 [DBG] Connection id "0HNFP9L1C1D4L" stopped.
2025-09-22 03:33:32.336 +07:00 [DBG] Connection id "0HNFP9L1C1D4L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:33:32.340 +07:00 [DBG] Connection id "0HNFP9L1C1D4K" stopped.
2025-09-22 03:35:14.333 +07:00 [INF] Application is shutting down...
2025-09-22 03:35:14.335 +07:00 [DBG] Hosting stopping
2025-09-22 03:35:14.341 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 03:35:14.344 +07:00 [DBG] Hosting stopped
2025-09-22 03:35:24.778 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 03:35:24.839 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 03:35:25.023 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.040 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.053 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.054 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.055 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.055 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.217 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.218 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.233 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.233 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.233 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.234 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.238 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.238 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 03:35:25.275 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 03:35:25.276 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 03:35:25.276 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 03:35:25.401 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:35:25.401 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:35:25.401 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:35:25.401 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:35:25.401 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:35:25.401 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:35:25.401 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:35:25.401 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:35:25.401 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:35:25.401 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:35:25.402 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:35:25.526 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:35:25.566 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 03:35:25.678 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:35:25.701 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:35:25.714 +07:00 [DBG] Created DbConnection. (10ms).
2025-09-22 03:35:25.716 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.815 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.817 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:35:25.822 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:35:25.825 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 03:35:25.831 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:35:25.861 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:35:25.890 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:35:25.909 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.914 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 49ms reading results.
2025-09-22 03:35:25.916 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.920 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 03:35:25.922 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.922 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.922 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:35:25.922 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:25.922 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:25.923 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:35:25.927 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:35:25.928 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:35:25.928 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.928 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:35:25.928 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.928 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:35:25.929 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.929 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.929 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:35:25.929 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:25.929 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:25.929 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:35:25.932 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:35:25.933 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:35:25.933 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.933 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:35:25.933 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.933 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:35:25.934 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.934 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.934 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:35:25.934 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:25.934 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:25.934 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:35:25.936 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:35:25.936 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:35:25.937 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.937 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:35:25.937 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.937 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:35:25.941 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 03:35:25.947 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:35:25.948 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.949 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:25.949 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:35:25.949 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:25.949 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:25.949 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:35:25.954 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:35:25.976 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:35:26.005 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.005 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 50ms reading results.
2025-09-22 03:35:26.005 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.005 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:35:26.007 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 03:35:26.010 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.010 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.010 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:35:26.010 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:26.010 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:26.010 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:35:26.013 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:35:26.013 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:35:26.014 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.014 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:35:26.014 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.014 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:35:26.014 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 03:35:26.015 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.015 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.015 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:35:26.015 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:26.015 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:26.015 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:35:26.021 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:35:26.021 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:35:26.022 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.022 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:35:26.022 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.022 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:35:26.023 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.023 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.023 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:35:26.023 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:26.023 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:35:26.024 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:35:26.029 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:35:26.029 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:35:26.029 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.030 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:35:26.030 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.030 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:35:26.030 +07:00 [INF] Data seeding completed successfully
2025-09-22 03:35:26.031 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:35:26.033 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:35:26.034 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:35:26.048 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 03:35:26.168 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 03:35:26.257 +07:00 [DBG] Hosting starting
2025-09-22 03:35:26.265 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 03:35:26.267 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 03:35:26.267 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 03:35:26.270 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 03:35:26.273 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 03:35:26.273 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 03:35:26.276 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 03:35:26.279 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:35:26.280 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 03:35:26.281 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:35:26.282 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 03:35:26.283 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 03:35:26.284 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 03:35:26.284 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 03:35:26.289 +07:00 [DBG] Middleware loaded
2025-09-22 03:35:26.290 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 03:35:26.290 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 03:35:26.316 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 03:35:26.326 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 03:35:26.326 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 03:35:26.326 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 03:35:26.326 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 03:35:26.326 +07:00 [INF] Hosting environment: Development
2025-09-22 03:35:26.326 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 03:35:26.327 +07:00 [DBG] Hosting started
2025-09-22 03:35:26.449 +07:00 [DBG] Connection id "0HNFP9PIQ84MB" accepted.
2025-09-22 03:35:26.450 +07:00 [DBG] Connection id "0HNFP9PIQ84MB" started.
2025-09-22 03:35:26.484 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 03:35:26.492 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 03:35:26.536 +07:00 [DBG] Connection id "0HNFP9PIQ84MC" accepted.
2025-09-22 03:35:26.537 +07:00 [DBG] Connection id "0HNFP9PIQ84MC" started.
2025-09-22 03:35:26.637 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 03:35:26.650 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 03:35:26.650 +07:00 [DBG] Connection id "0HNFP9PIQ84MB" completed keep alive response.
2025-09-22 03:35:26.652 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 170.1388ms
2025-09-22 03:35:26.657 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 03:35:26.665 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 03:35:26.666 +07:00 [DBG] Connection id "0HNFP9PIQ84MB" completed keep alive response.
2025-09-22 03:35:26.666 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 9.3817ms
2025-09-22 03:35:26.847 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 03:35:27.124 +07:00 [DBG] Connection id "0HNFP9PIQ84MB" completed keep alive response.
2025-09-22 03:35:27.124 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 277.7675ms
2025-09-22 03:35:56.754 +07:00 [DBG] Connection id "0HNFP9PIQ84MB" received FIN.
2025-09-22 03:35:56.751 +07:00 [DBG] Connection id "0HNFP9PIQ84MC" received FIN.
2025-09-22 03:35:56.762 +07:00 [DBG] Connection id "0HNFP9PIQ84MB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:35:56.768 +07:00 [DBG] Connection id "0HNFP9PIQ84MB" disconnecting.
2025-09-22 03:35:56.768 +07:00 [DBG] Connection id "0HNFP9PIQ84MC" disconnecting.
2025-09-22 03:35:56.772 +07:00 [DBG] Connection id "0HNFP9PIQ84MB" stopped.
2025-09-22 03:35:56.775 +07:00 [DBG] Connection id "0HNFP9PIQ84MC" stopped.
2025-09-22 03:35:56.783 +07:00 [DBG] Connection id "0HNFP9PIQ84MC" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:35:59.928 +07:00 [INF] Application is shutting down...
2025-09-22 03:35:59.932 +07:00 [DBG] Hosting stopping
2025-09-22 03:35:59.940 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 03:35:59.973 +07:00 [DBG] Hosting stopped
2025-09-22 03:36:07.755 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 03:36:07.818 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 03:36:07.990 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.003 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.012 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.013 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.013 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.014 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.159 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.160 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.173 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.174 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.174 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.175 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.178 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.179 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:36:08.214 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 03:36:08.214 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 03:36:08.214 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 03:36:08.214 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 03:36:08.214 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 03:36:08.214 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 03:36:08.214 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 03:36:08.214 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 03:36:08.215 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 03:36:08.215 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 03:36:08.215 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 03:36:08.215 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 03:36:08.215 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 03:36:08.215 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 03:36:08.215 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 03:36:08.215 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 03:36:08.215 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 03:36:08.215 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 03:36:08.215 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 03:36:08.325 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:36:08.325 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:36:08.325 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:36:08.326 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:36:08.326 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:36:08.326 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:36:08.326 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:36:08.326 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:36:08.326 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:36:08.326 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:36:08.327 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:36:08.440 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:36:08.480 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 03:36:08.581 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:36:08.604 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:36:08.615 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 03:36:08.617 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.716 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.718 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:08.721 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:36:08.725 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-22 03:36:08.730 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:36:08.758 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:36:08.785 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:08.799 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.803 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 42ms reading results.
2025-09-22 03:36:08.805 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.808 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 03:36:08.810 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.810 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.811 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:08.811 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.811 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.811 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:36:08.814 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:36:08.814 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:08.815 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.815 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:08.815 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.815 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:08.815 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.815 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.815 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:08.815 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.815 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.815 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:36:08.816 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:36:08.816 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:08.816 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.817 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:08.817 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.817 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:08.817 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.817 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.817 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:08.817 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.817 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.817 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:36:08.818 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:36:08.818 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:08.818 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.818 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:08.818 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.818 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:08.822 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 03:36:08.826 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:36:08.828 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.828 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.828 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:08.828 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.828 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.828 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:36:08.832 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:36:08.850 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:08.872 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.872 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 40ms reading results.
2025-09-22 03:36:08.872 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.872 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:08.874 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 03:36:08.876 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.877 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.877 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:08.877 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.877 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.877 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:36:08.878 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:36:08.878 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:08.878 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.878 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:08.878 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.878 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:08.878 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 03:36:08.879 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.879 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.879 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:08.879 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.879 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.879 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:36:08.880 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:36:08.880 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:08.880 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.880 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:08.880 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.880 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:08.880 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.880 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.880 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:08.881 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.881 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:08.881 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:36:08.882 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:36:08.882 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:08.882 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.882 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:08.883 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.883 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:08.883 +07:00 [INF] Data seeding completed successfully
2025-09-22 03:36:08.884 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:36:08.885 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:08.886 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:36:08.895 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 03:36:09.004 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 03:36:09.078 +07:00 [DBG] Hosting starting
2025-09-22 03:36:09.086 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 03:36:09.087 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 03:36:09.087 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 03:36:09.090 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 03:36:09.092 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 03:36:09.092 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 03:36:09.096 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 03:36:09.098 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:36:09.099 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 03:36:09.100 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:36:09.100 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 03:36:09.101 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 03:36:09.101 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 03:36:09.102 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 03:36:09.105 +07:00 [DBG] Middleware loaded
2025-09-22 03:36:09.106 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 03:36:09.107 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 03:36:09.129 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 03:36:09.137 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 03:36:09.138 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 03:36:09.138 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 03:36:09.138 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 03:36:09.138 +07:00 [INF] Hosting environment: Development
2025-09-22 03:36:09.138 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 03:36:09.140 +07:00 [DBG] Hosting started
2025-09-22 03:36:09.258 +07:00 [DBG] Connection id "0HNFP9PVIG8D0" accepted.
2025-09-22 03:36:09.259 +07:00 [DBG] Connection id "0HNFP9PVIG8D0" started.
2025-09-22 03:36:09.287 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 03:36:09.294 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 03:36:09.327 +07:00 [DBG] Connection id "0HNFP9PVIG8D1" accepted.
2025-09-22 03:36:09.327 +07:00 [DBG] Connection id "0HNFP9PVIG8D1" started.
2025-09-22 03:36:09.406 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 03:36:09.415 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 03:36:09.416 +07:00 [DBG] Connection id "0HNFP9PVIG8D0" completed keep alive response.
2025-09-22 03:36:09.420 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 135.9768ms
2025-09-22 03:36:09.425 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 03:36:09.426 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 03:36:09.427 +07:00 [DBG] Connection id "0HNFP9PVIG8D0" completed keep alive response.
2025-09-22 03:36:09.427 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.4678ms
2025-09-22 03:36:09.501 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 03:36:09.858 +07:00 [DBG] Connection id "0HNFP9PVIG8D0" completed keep alive response.
2025-09-22 03:36:09.859 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 357.5167ms
2025-09-22 03:36:32.038 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 03:36:32.042 +07:00 [DBG] POST requests are not supported
2025-09-22 03:36:32.044 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 03:36:32.045 +07:00 [DBG] POST requests are not supported
2025-09-22 03:36:32.047 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 03:36:32.047 +07:00 [INF] CORS policy execution successful.
2025-09-22 03:36:32.151 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:36:32.152 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 03:36:32.156 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:36:32.308 +07:00 [DBG] Successfully validated the token.
2025-09-22 03:36:32.314 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 03:36:32.329 +07:00 [DBG] Authorization was successful.
2025-09-22 03:36:32.345 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:36:32.373 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 03:36:32.375 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 03:36:32.376 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 03:36:32.377 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 03:36:32.378 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 03:36:32.378 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 03:36:32.381 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:36:32.637 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 03:36:32.652 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:36:32.660 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 03:36:32.666 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:36:32.670 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:36:32.670 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 03:36:32.671 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 03:36:32.704 +07:00 [DBG] Connection id "0HNFP9PVIG8D0", Request id "0HNFP9PVIG8D0:00000004": started reading request body.
2025-09-22 03:36:32.705 +07:00 [DBG] Connection id "0HNFP9PVIG8D0", Request id "0HNFP9PVIG8D0:00000004": done reading request body.
2025-09-22 03:36:32.719 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 03:36:32.720 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:36:32.720 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:36:32.721 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 03:36:32.734 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 03:36:32.739 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:36:32.740 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 03:36:32.741 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:36:32.742 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:36:32.742 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 03:36:32.743 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 03:36:32.750 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 03:36:32.754 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T20:36:21.6190000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 03:36:32.873 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:36:32.897 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 03:36:32.936 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 03:36:33.037 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:36:33.057 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:36:33.058 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-22 03:36:33.059 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:33.063 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:33.063 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:33.063 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:33.063 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:33.064 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:36:33.075 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 03:36:33.085 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:33.086 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 10ms reading results.
2025-09-22 03:36:33.086 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:33.087 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:33.102 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 03:36:33.121 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 03:36:33.122 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 03:36:33.123 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 03:36:33.124 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 03:36:33.231 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 03:36:33.258 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:36:33.282 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:33.282 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:33.282 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:33.283 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:33.283 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:33.284 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:36:33.368 +07:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 03:36:33.387 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:33.389 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 19ms reading results.
2025-09-22 03:36:33.391 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:33.392 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:33.447 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 03:36:33.449 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:36:33.449 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 03:36:33.450 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 03:36:40.045 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 03:36:40.139 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 03:36:40.160 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:36:40.163 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.164 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.165 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.167 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:36:40.167 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:36:40.169 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:36:40.175 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:36:40.176 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.176 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:40.176 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.177 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.179 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 03:36:40.181 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 03:36:40.210 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:36:40.212 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.212 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.213 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.213 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.215 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.216 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:36:40.229 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:36:40.231 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.231 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:36:40.232 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.232 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.239 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 03:36:40.241 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 03:36:40.253 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:36:40.259 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.260 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.260 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.260 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.261 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.262 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:36:40.266 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:36:40.268 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.268 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:36:40.269 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.270 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.273 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 03:36:40.281 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:36:40.285 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.285 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.286 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.286 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.286 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.287 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:36:40.291 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:36:40.292 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.292 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:40.293 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.293 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.295 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 03:36:40.312 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 03:36:40.319 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.320 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.320 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.320 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.321 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.321 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:36:40.325 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:36:40.327 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.327 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:40.327 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.327 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.371 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:40.442 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:40.451 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:36:40.457 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:36:40.517 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:36:40.688 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.688 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.695 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.696 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.703 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-22 03:36:40.704 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:36:40.722 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:36:40.744 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:36:40.753 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.753 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 30ms reading results.
2025-09-22 03:36:40.757 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.757 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.777 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:40.780 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:36:40.783 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 03:36:40.786 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 03:36:40.787 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 03:36:40.789 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 03:36:40.792 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 03:36:40.793 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 03:36:40.849 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:36:40.852 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.853 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.854 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.854 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.854 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.854 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:36:40.874 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:36:40.885 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.886 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 8ms reading results.
2025-09-22 03:36:40.887 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.887 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.911 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 196
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:36:40.921 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.922 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.922 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.922 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.923 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.923 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:36:40.925 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:36:40.925 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.925 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:40.925 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.926 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.927 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.928 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.928 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.929 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.929 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:36:40.929 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:36:40.931 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:36:40.932 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.932 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:40.933 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.933 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.934 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.934 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.934 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.936 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.936 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 03:36:40.937 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:36:40.939 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:36:40.939 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.939 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:40.940 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.940 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.941 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.941 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.943 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.943 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.943 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.944 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:36:40.946 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:36:40.947 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.947 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:40.947 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.947 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.949 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.950 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.950 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.950 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.950 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.951 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:36:40.956 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:36:40.957 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.957 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:40.957 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.957 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.959 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:40.960 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:40.960 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:36:40.960 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:36:40.964 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:36:40.966 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.966 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.966 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.966 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.967 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.967 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:36:40.972 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:36:40.972 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:36:40.973 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.973 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:36:40.973 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.974 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.974 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:40.974 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:36:40.976 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.976 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.977 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.978 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:36:40.978 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:36:40.978 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:36:40.980 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:36:40.981 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.981 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:40.982 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.982 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:40.987 +07:00 [ERR] Error assigning reviewer 10
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 196
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:36:40.990 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.991 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.991 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:40.991 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.991 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:40.993 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:36:40.999 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:36:40.999 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:40.999 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:41.000 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.000 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.002 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.002 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.002 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.003 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.003 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.003 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:36:41.006 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:36:41.006 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.007 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:41.007 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.007 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.009 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.009 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.009 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.010 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.010 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.010 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:36:41.014 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:36:41.015 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.016 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:36:41.016 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.016 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.017 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.017 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.020 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.020 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.020 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.020 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:36:41.022 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:36:41.022 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.022 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:41.023 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.023 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.024 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.024 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.024 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.024 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.025 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.027 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:36:41.029 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:36:41.030 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.030 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:41.030 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.030 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.031 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:41.031 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:41.032 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:36:41.033 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:36:41.033 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:36:41.034 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.035 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.035 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.035 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.036 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.036 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:36:41.041 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:36:41.041 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:36:41.042 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.042 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:41.042 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.043 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.043 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:41.043 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:36:41.044 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.044 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.045 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.045 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.045 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.046 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:36:41.049 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:36:41.050 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.050 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:41.051 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.051 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.051 +07:00 [ERR] Error assigning reviewer 11
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 196
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:36:41.056 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.057 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.057 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.057 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.057 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.057 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:36:41.059 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 03:36:41.060 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.061 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:36:41.061 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.062 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.063 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.063 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.064 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.064 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.064 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.064 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:36:41.066 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 03:36:41.067 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.068 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 03:36:41.068 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.068 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.070 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.070 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.070 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.070 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.071 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.071 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:36:41.073 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 03:36:41.074 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.075 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:41.075 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.075 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.077 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.077 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.077 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.077 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.078 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.078 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:36:41.079 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 03:36:41.080 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.080 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:41.081 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.081 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.083 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.083 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.083 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.084 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.084 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.084 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:36:41.086 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 03:36:41.086 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.086 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:41.087 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.088 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.088 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:41.089 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:41.090 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 03:36:41.090 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 03:36:41.090 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 03:36:41.091 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.091 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.091 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.092 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.092 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.092 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:36:41.096 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 03:36:41.096 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 03:36:41.097 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.097 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:41.097 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.098 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.098 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:36:41.098 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 03:36:41.099 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.100 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.100 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:36:41.100 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.100 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:36:41.100 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:36:41.104 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 03:36:41.105 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.106 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:36:41.106 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.107 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:36:41.107 +07:00 [ERR] Error assigning reviewer 9
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 196
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 03:36:41.121 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 03:36:41.124 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 03:36:41.125 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 03:36:41.128 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 03:36:41.128 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 03:36:41.216 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 8830.2829ms
2025-09-22 03:36:41.217 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 03:36:41.225 +07:00 [DBG] Connection id "0HNFP9PVIG8D0" completed keep alive response.
2025-09-22 03:36:41.228 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:36:41.229 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:36:41.230 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:36:41.233 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 9194.6959ms
2025-09-22 03:37:09.322 +07:00 [DBG] Connection id "0HNFP9PVIG8D1" received FIN.
2025-09-22 03:37:09.323 +07:00 [DBG] Connection id "0HNFP9PVIG8D0" received FIN.
2025-09-22 03:37:09.324 +07:00 [DBG] Connection id "0HNFP9PVIG8D1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:37:09.329 +07:00 [DBG] Connection id "0HNFP9PVIG8D1" disconnecting.
2025-09-22 03:37:09.330 +07:00 [DBG] Connection id "0HNFP9PVIG8D0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:37:09.332 +07:00 [DBG] Connection id "0HNFP9PVIG8D0" disconnecting.
2025-09-22 03:37:09.335 +07:00 [DBG] Connection id "0HNFP9PVIG8D1" stopped.
2025-09-22 03:37:09.335 +07:00 [DBG] Connection id "0HNFP9PVIG8D0" stopped.
2025-09-22 03:39:56.693 +07:00 [INF] Application is shutting down...
2025-09-22 03:39:56.694 +07:00 [DBG] Hosting stopping
2025-09-22 03:39:56.699 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 03:39:56.701 +07:00 [DBG] Hosting stopped
2025-09-22 03:40:05.906 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 03:40:05.966 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 03:40:06.121 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.135 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.145 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.146 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.146 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.147 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.303 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.303 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.318 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.318 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.318 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.319 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.323 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.324 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 03:40:06.360 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 03:40:06.470 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:40:06.470 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:40:06.470 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:40:06.470 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:40:06.470 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:40:06.470 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:40:06.470 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:40:06.470 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:40:06.470 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:40:06.471 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:40:06.471 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 03:40:06.581 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 03:40:06.623 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 03:40:06.728 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:40:06.753 +07:00 [DBG] Creating DbConnection.
2025-09-22 03:40:06.764 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 03:40:06.767 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.858 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.860 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:40:06.864 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 03:40:06.868 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 03:40:06.873 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:40:06.904 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:40:06.932 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:40:06.946 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.950 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 43ms reading results.
2025-09-22 03:40:06.952 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.955 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 03:40:06.957 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.957 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.958 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:40:06.958 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:06.958 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:06.958 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:40:06.960 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:40:06.961 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:40:06.961 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.962 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:40:06.962 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.962 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:40:06.962 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.962 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.962 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:40:06.962 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:06.962 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:06.962 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:40:06.963 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:40:06.963 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:40:06.963 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.963 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:40:06.964 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.964 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:40:06.964 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.964 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.964 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:40:06.964 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:06.964 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:06.964 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:40:06.965 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 03:40:06.965 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:40:06.965 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.965 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:40:06.965 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.965 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:40:06.969 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 03:40:06.973 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 03:40:06.974 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.975 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:06.975 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:40:06.975 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:06.975 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:06.975 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:40:06.978 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:40:06.997 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:40:07.017 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.017 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-22 03:40:07.017 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.017 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:40:07.019 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 03:40:07.020 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.020 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.021 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:40:07.021 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:07.021 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:07.021 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:40:07.021 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:40:07.022 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:40:07.022 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.022 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:40:07.022 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.023 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:40:07.023 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 03:40:07.023 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.023 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.023 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:40:07.023 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:07.024 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:07.024 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:40:07.024 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:40:07.025 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:40:07.025 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.025 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:40:07.025 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.025 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:40:07.025 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.025 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.025 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 03:40:07.025 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:07.025 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 03:40:07.025 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:40:07.026 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 03:40:07.026 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 03:40:07.026 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.026 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 03:40:07.026 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.026 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 03:40:07.026 +07:00 [INF] Data seeding completed successfully
2025-09-22 03:40:07.027 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 03:40:07.028 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 03:40:07.029 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 03:40:07.038 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 03:40:07.150 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 03:40:07.226 +07:00 [DBG] Hosting starting
2025-09-22 03:40:07.233 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 03:40:07.235 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 03:40:07.235 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 03:40:07.238 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 03:40:07.240 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 03:40:07.240 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 03:40:07.244 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 03:40:07.247 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:40:07.247 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 03:40:07.248 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 03:40:07.249 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 03:40:07.249 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 03:40:07.250 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 03:40:07.250 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 03:40:07.254 +07:00 [DBG] Middleware loaded
2025-09-22 03:40:07.255 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 03:40:07.255 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 03:40:07.278 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 03:40:07.286 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 03:40:07.287 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 03:40:07.287 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 03:40:07.287 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 03:40:07.287 +07:00 [INF] Hosting environment: Development
2025-09-22 03:40:07.287 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 03:40:07.288 +07:00 [DBG] Hosting started
2025-09-22 03:40:07.406 +07:00 [DBG] Connection id "0HNFP9S6HL8FD" accepted.
2025-09-22 03:40:07.406 +07:00 [DBG] Connection id "0HNFP9S6HL8FD" started.
2025-09-22 03:40:07.430 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 03:40:07.438 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 03:40:07.480 +07:00 [DBG] Connection id "0HNFP9S6HL8FE" accepted.
2025-09-22 03:40:07.481 +07:00 [DBG] Connection id "0HNFP9S6HL8FE" started.
2025-09-22 03:40:07.566 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 03:40:07.574 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 03:40:07.574 +07:00 [DBG] Connection id "0HNFP9S6HL8FD" completed keep alive response.
2025-09-22 03:40:07.577 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 146.3983ms
2025-09-22 03:40:07.581 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 03:40:07.583 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 03:40:07.584 +07:00 [DBG] Connection id "0HNFP9S6HL8FD" completed keep alive response.
2025-09-22 03:40:07.585 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.8299ms
2025-09-22 03:40:07.660 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 03:40:07.994 +07:00 [DBG] Connection id "0HNFP9S6HL8FD" completed keep alive response.
2025-09-22 03:40:07.994 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 334.1584ms
2025-09-22 03:40:17.138 +07:00 [DBG] Connection id "0HNFP9S6HL8FE" received FIN.
2025-09-22 03:40:17.140 +07:00 [DBG] Connection id "0HNFP9S6HL8FD" received FIN.
2025-09-22 03:40:17.146 +07:00 [DBG] Connection id "0HNFP9S6HL8FD" disconnecting.
2025-09-22 03:40:17.146 +07:00 [DBG] Connection id "0HNFP9S6HL8FE" disconnecting.
2025-09-22 03:40:17.148 +07:00 [DBG] Connection id "0HNFP9S6HL8FD" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:40:17.150 +07:00 [DBG] Connection id "0HNFP9S6HL8FE" stopped.
2025-09-22 03:40:17.151 +07:00 [DBG] Connection id "0HNFP9S6HL8FD" stopped.
2025-09-22 03:40:17.153 +07:00 [DBG] Connection id "0HNFP9S6HL8FE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 03:40:18.766 +07:00 [INF] Application is shutting down...
2025-09-22 03:40:18.771 +07:00 [DBG] Hosting stopping
2025-09-22 03:40:18.782 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 03:40:18.813 +07:00 [DBG] Hosting stopped
2025-09-22 04:07:54.535 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 04:07:54.589 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 04:07:54.732 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.748 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.760 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.762 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.762 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.762 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.905 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.906 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.919 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.920 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.920 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.921 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.924 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.925 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:07:54.963 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 04:07:54.964 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 04:07:55.064 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:07:55.064 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:07:55.064 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:07:55.064 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:07:55.064 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:07:55.064 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:07:55.065 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:07:55.065 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:07:55.065 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:07:55.065 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:07:55.065 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:07:55.169 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:07:55.206 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 04:07:55.306 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:07:55.329 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:07:55.338 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-22 04:07:55.341 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.433 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.435 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:07:55.439 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:07:55.443 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 04:07:55.449 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:07:55.480 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:07:55.506 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:07:55.521 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.527 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 42ms reading results.
2025-09-22 04:07:55.529 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.532 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 04:07:55.534 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.535 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.536 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:07:55.536 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.536 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.536 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:07:55.538 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:07:55.539 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:07:55.539 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.539 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:07:55.539 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.540 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:07:55.540 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.540 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.540 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:07:55.540 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.540 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.540 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:07:55.541 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:07:55.542 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:07:55.542 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.542 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:07:55.542 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.542 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:07:55.543 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.543 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.543 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:07:55.543 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.543 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.543 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:07:55.544 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:07:55.544 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:07:55.545 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.545 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:07:55.545 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.545 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:07:55.547 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 04:07:55.552 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:07:55.553 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.553 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.553 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:07:55.553 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.553 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.553 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:07:55.559 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:07:55.577 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:07:55.598 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.599 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 39ms reading results.
2025-09-22 04:07:55.599 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.599 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:07:55.601 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 04:07:55.602 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.602 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.602 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:07:55.602 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.602 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.602 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:07:55.603 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:07:55.604 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:07:55.604 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.604 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:07:55.604 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.605 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:07:55.605 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 04:07:55.605 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.605 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.605 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:07:55.606 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.606 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.606 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:07:55.606 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:07:55.607 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:07:55.607 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.607 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:07:55.607 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.607 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:07:55.607 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.607 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.607 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:07:55.607 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.607 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:07:55.607 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:07:55.608 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:07:55.608 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:07:55.608 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.608 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:07:55.608 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.608 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:07:55.609 +07:00 [INF] Data seeding completed successfully
2025-09-22 04:07:55.609 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:07:55.611 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:07:55.611 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:07:55.620 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 04:07:55.723 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 04:07:55.794 +07:00 [DBG] Hosting starting
2025-09-22 04:07:55.801 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 04:07:55.802 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 04:07:55.803 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 04:07:55.806 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 04:07:55.808 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 04:07:55.808 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 04:07:55.811 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 04:07:55.814 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:07:55.814 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 04:07:55.822 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:07:55.823 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 04:07:55.824 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 04:07:55.824 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 04:07:55.825 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 04:07:55.828 +07:00 [DBG] Middleware loaded
2025-09-22 04:07:55.829 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 04:07:55.830 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 04:07:55.852 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 04:07:55.860 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 04:07:55.860 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 04:07:55.860 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 04:07:55.860 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 04:07:55.860 +07:00 [INF] Hosting environment: Development
2025-09-22 04:07:55.861 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 04:07:55.862 +07:00 [DBG] Hosting started
2025-09-22 04:07:55.975 +07:00 [DBG] Connection id "0HNFPABNQC86L" accepted.
2025-09-22 04:07:55.976 +07:00 [DBG] Connection id "0HNFPABNQC86L" started.
2025-09-22 04:07:56.011 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:07:56.020 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 04:07:56.058 +07:00 [DBG] Connection id "0HNFPABNQC86M" accepted.
2025-09-22 04:07:56.064 +07:00 [DBG] Connection id "0HNFPABNQC86M" started.
2025-09-22 04:07:56.150 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:07:56.160 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:07:56.160 +07:00 [DBG] Connection id "0HNFPABNQC86L" completed keep alive response.
2025-09-22 04:07:56.162 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 156.9695ms
2025-09-22 04:07:56.168 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:07:56.171 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:07:56.172 +07:00 [DBG] Connection id "0HNFPABNQC86L" completed keep alive response.
2025-09-22 04:07:56.172 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 4.8973ms
2025-09-22 04:07:56.241 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:07:56.471 +07:00 [DBG] Connection id "0HNFPABNQC86L" completed keep alive response.
2025-09-22 04:07:56.472 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 230.1649ms
2025-09-22 04:09:04.522 +07:00 [DBG] Connection id "0HNFPABNQC86M" received FIN.
2025-09-22 04:09:04.523 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-assignments/auto-assign - application/json;odata.metadata=minimal;odata.streaming=true 298
2025-09-22 04:09:04.525 +07:00 [DBG] Connection id "0HNFPABNQC86M" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:09:04.526 +07:00 [DBG] POST requests are not supported
2025-09-22 04:09:04.526 +07:00 [DBG] Connection id "0HNFPABNQC86M" disconnecting.
2025-09-22 04:09:04.527 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 04:09:04.528 +07:00 [DBG] POST requests are not supported
2025-09-22 04:09:04.528 +07:00 [DBG] Connection id "0HNFPABNQC86M" stopped.
2025-09-22 04:09:04.530 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 04:09:04.531 +07:00 [INF] CORS policy execution successful.
2025-09-22 04:09:04.614 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-assignments/auto-assign'
2025-09-22 04:09:04.616 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerAssignmentController.AutoAssignReviewers (CapBot.api)' with route pattern 'api/reviewer-assignments/auto-assign' is valid for the request path '/api/reviewer-assignments/auto-assign'
2025-09-22 04:09:04.617 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerAssignmentController.AutoAssignReviewers (CapBot.api)'
2025-09-22 04:09:04.758 +07:00 [DBG] Successfully validated the token.
2025-09-22 04:09:04.761 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 04:09:04.774 +07:00 [DBG] Authorization was successful.
2025-09-22 04:09:04.811 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerAssignmentController.AutoAssignReviewers (CapBot.api)'
2025-09-22 04:09:04.902 +07:00 [INF] Route matched with {action = "AutoAssignReviewers", controller = "ReviewerAssignment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AutoAssignReviewers(App.Entities.DTOs.ReviewerAssignment.AutoAssignReviewerDTO) on controller CapBot.api.Controllers.ReviewerAssignmentController (CapBot.api).
2025-09-22 04:09:04.905 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 04:09:04.905 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-22 04:09:04.910 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 04:09:04.911 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 04:09:04.914 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-22 04:09:04.915 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerAssignmentController (CapBot.api)
2025-09-22 04:09:05.067 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerAssignmentController (CapBot.api)
2025-09-22 04:09:05.072 +07:00 [DBG] Attempting to bind parameter 'dto' of type 'App.Entities.DTOs.ReviewerAssignment.AutoAssignReviewerDTO' ...
2025-09-22 04:09:05.075 +07:00 [DBG] Attempting to bind parameter 'dto' of type 'App.Entities.DTOs.ReviewerAssignment.AutoAssignReviewerDTO' using the name '' in request data ...
2025-09-22 04:09:05.077 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json;odata.metadata=minimal;odata.streaming=true'.
2025-09-22 04:09:05.078 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json;odata.metadata=minimal;odata.streaming=true'.
2025-09-22 04:09:05.078 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json;odata.metadata=minimal;odata.streaming=true'.
2025-09-22 04:09:05.078 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json;odata.metadata=minimal;odata.streaming=true'.
2025-09-22 04:09:05.103 +07:00 [DBG] Connection id "0HNFPABNQC86L", Request id "0HNFPABNQC86L:00000004": started reading request body.
2025-09-22 04:09:05.103 +07:00 [DBG] Connection id "0HNFPABNQC86L", Request id "0HNFPABNQC86L:00000004": done reading request body.
2025-09-22 04:09:05.124 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerAssignment.AutoAssignReviewerDTO'
2025-09-22 04:09:05.125 +07:00 [DBG] Done attempting to bind parameter 'dto' of type 'App.Entities.DTOs.ReviewerAssignment.AutoAssignReviewerDTO'.
2025-09-22 04:09:05.125 +07:00 [DBG] Done attempting to bind parameter 'dto' of type 'App.Entities.DTOs.ReviewerAssignment.AutoAssignReviewerDTO'.
2025-09-22 04:09:05.125 +07:00 [DBG] Attempting to validate the bound parameter 'dto' of type 'App.Entities.DTOs.ReviewerAssignment.AutoAssignReviewerDTO' ...
2025-09-22 04:09:05.136 +07:00 [DBG] Done attempting to validate the bound parameter 'dto' of type 'App.Entities.DTOs.ReviewerAssignment.AutoAssignReviewerDTO'.
2025-09-22 04:09:05.218 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:09:05.231 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.TopicVersion)
    .Include(s => s.TopicVersion.Topic)
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 04:09:05.254 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 04:09:05.255 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 04:09:05.366 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: TopicVersion.Content (string), 20], [Property: TopicVersion.Context (string), 21], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 22], [Property: TopicVersion.CreatedBy (string), 23], [Property: TopicVersion.DeletedAt (DateTime?), 24], [Property: TopicVersion.Description (string), 25], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 26], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 27], [Property: TopicVersion.ExpectedOutcomes (string), 28], [Property: TopicVersion.IsActive (bool) Required, 29], [Property: TopicVersion.LastModifiedAt (DateTime?), 30], [Property: TopicVersion.LastModifiedBy (string), 31], [Property: TopicVersion.Methodology (string), 32], [Property: TopicVersion.Objectives (string), 33], [Property: TopicVersion.Problem (string), 34], [Property: TopicVersion.Requirements (string), 35], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 36], [Property: TopicVersion.SubmittedAt (DateTime?), 37], [Property: TopicVersion.SubmittedBy (int?) FK Index, 38], [Property: TopicVersion.TopicId (int) Required FK Index, 39], [Property: TopicVersion.VN_title (string), 40], [Property: TopicVersion.VersionNumber (int) Required Index, 41] }
                2 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: Topic.Abbreviation (string), 43], [Property: Topic.CategoryId (int?) FK Index, 44], [Property: Topic.Content (string), 45], [Property: Topic.Context (string), 46], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 47], [Property: Topic.CreatedBy (string), 48], [Property: Topic.DeletedAt (DateTime?), 49], [Property: Topic.Description (string), 50], [Property: Topic.EN_Title (string) Required MaxLength(500), 51], [Property: Topic.IsActive (bool) Required, 52], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 53], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 54], [Property: Topic.LastModifiedAt (DateTime?), 55], [Property: Topic.LastModifiedBy (string), 56], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 57], [Property: Topic.Objectives (string), 58], [Property: Topic.Problem (string), 59], [Property: Topic.SemesterId (int) Required FK Index, 60], [Property: Topic.SupervisorId (int) Required FK Index, 61], [Property: Topic.VN_title (string), 62] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM submissions AS s
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:09:05.380 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:09:05.382 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-22 04:09:05.389 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.392 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.395 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.395 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.396 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:09:05.403 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:09:05.430 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:09:05.443 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.444 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 12ms reading results.
2025-09-22 04:09:05.444 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.444 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.458 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.User)
    .Include(ur => ur.User.ReviewerPerformances)
    .Include(ur => ur.Role)
    .Where(ur => ur.Role.Name == "Reviewer")'
2025-09-22 04:09:05.463 +07:00 [DBG] Including navigation: 'UserRole.User'.
2025-09-22 04:09:05.464 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 04:09:05.466 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 04:09:05.535 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: User.AccessFailedCount (int) Required, 3], [Property: User.ConcurrencyStamp (string), 4], [Property: User.CreatedAt (DateTime) Required, 5], [Property: User.DeletedAt (DateTime?), 6], [Property: User.Email (string), 7], [Property: User.EmailConfirmed (bool) Required, 8], [Property: User.LastModifiedAt (DateTime) Required, 9], [Property: User.LastModifiedBy (string), 10], [Property: User.LockoutEnabled (bool) Required, 11], [Property: User.LockoutEnd (DateTimeOffset?), 12], [Property: User.NormalizedEmail (string), 13], [Property: User.NormalizedUserName (string), 14], [Property: User.PasswordHash (string), 15], [Property: User.PhoneNumber (string), 16], [Property: User.PhoneNumberConfirmed (bool) Required, 17], [Property: User.SecurityStamp (string), 18], [Property: User.TwoFactorEnabled (bool) Required, 19], [Property: User.UserName (string), 20] }
            2 -> 0
            3 -> 1
            4 -> 21
            5 -> 2
            6 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 22], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 23], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 24], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 25], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 26], [Property: ReviewerPerformance.OnTimeRate (decimal?), 27], [Property: ReviewerPerformance.QualityRating (decimal?), 28], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 29], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 30], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 31] }
            7 -> 22
            8 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 21], [Property: Role.ConcurrencyStamp (string), 32], [Property: Role.IsAdmin (bool) Required, 33], [Property: Role.Name (string), 34], [Property: Role.NormalizedName (string), 35] }
        SELECT u.UserId, u.RoleId, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, r.Id, r0.Id, r0.AverageScoreGiven, r0.AverageTimeMinutes, r0.CompletedAssignments, r0.LastUpdated, r0.OnTimeRate, r0.QualityRating, r0.ReviewerId, r0.SemesterId, r0.TotalAssignments, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        INNER JOIN users AS u0 ON u.UserId == u0.Id
        LEFT JOIN reviewer_performance AS r0 ON u0.Id == r0.ReviewerId
        WHERE r.Name == N'Reviewer'
        ORDER BY u.UserId ASC, u.RoleId ASC, r.Id ASC, u0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:09:05.540 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.542 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.543 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.544 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.545 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:09:05.546 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [r].[Id], [r0].[Id], [r0].[AverageScoreGiven], [r0].[AverageTimeMinutes], [r0].[CompletedAssignments], [r0].[LastUpdated], [r0].[OnTimeRate], [r0].[QualityRating], [r0].[ReviewerId], [r0].[SemesterId], [r0].[TotalAssignments], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
INNER JOIN [users] AS [u0] ON [u].[UserId] = [u0].[Id]
LEFT JOIN [reviewer_performance] AS [r0] ON [u0].[Id] = [r0].[ReviewerId]
WHERE [r].[Name] = N'Reviewer'
ORDER BY [u].[UserId], [u].[RoleId], [r].[Id], [u0].[Id]
2025-09-22 04:09:05.569 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [r].[Id], [r0].[Id], [r0].[AverageScoreGiven], [r0].[AverageTimeMinutes], [r0].[CompletedAssignments], [r0].[LastUpdated], [r0].[OnTimeRate], [r0].[QualityRating], [r0].[ReviewerId], [r0].[SemesterId], [r0].[TotalAssignments], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
INNER JOIN [users] AS [u0] ON [u].[UserId] = [u0].[Id]
LEFT JOIN [reviewer_performance] AS [r0] ON [u0].[Id] = [r0].[ReviewerId]
WHERE [r].[Name] = N'Reviewer'
ORDER BY [u].[UserId], [u].[RoleId], [r].[Id], [u0].[Id]
2025-09-22 04:09:05.577 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.578 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 8ms reading results.
2025-09-22 04:09:05.578 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.578 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.583 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __submissionId_0)'
2025-09-22 04:09:05.590 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE r.SubmissionId == @__submissionId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:09:05.591 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.592 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.592 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.592 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.593 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.595 +07:00 [DBG] Executing DbCommand [Parameters=[@__submissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__submissionId_0
2025-09-22 04:09:05.599 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__submissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__submissionId_0
2025-09-22 04:09:05.599 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.600 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 04:09:05.602 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.602 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.617 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerPerformance>()
    .AsNoTracking()
    .Where(rp => rp.ReviewerId == __reviewerId_0 && True)'
2025-09-22 04:09:05.625 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerPerformance>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 1], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 2], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 3], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 4], [Property: ReviewerPerformance.OnTimeRate (decimal?), 5], [Property: ReviewerPerformance.QualityRating (decimal?), 6], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 7], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 8], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 9] }
        SELECT r.Id, r.AverageScoreGiven, r.AverageTimeMinutes, r.CompletedAssignments, r.LastUpdated, r.OnTimeRate, r.QualityRating, r.ReviewerId, r.SemesterId, r.TotalAssignments
        FROM reviewer_performance AS r
        WHERE (r.ReviewerId == @__reviewerId_0) && CAST(1 AS bit)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerPerformance>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:09:05.627 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.627 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.629 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.630 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:09:05.630 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 04:09:05.631 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.635 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.636 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.636 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.637 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.637 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.640 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __reviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 04:09:05.660 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__reviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:09:05.669 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.671 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.671 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.671 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.672 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.672 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.678 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.678 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.678 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.679 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.679 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.682 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __reviewer_Id_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 04:09:05.691 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__reviewer_Id_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:09:05.693 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.693 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.693 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.693 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.694 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.694 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.698 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.699 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.699 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.700 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.700 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.705 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.706 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.706 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.706 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.707 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.707 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.709 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.709 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.709 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.709 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.710 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.711 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.713 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.713 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.713 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.714 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.714 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.716 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.716 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.716 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.717 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.717 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.720 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.720 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.721 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.721 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.721 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.721 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.723 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.723 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.724 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.725 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.726 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 04:09:05.729 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.729 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.729 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.729 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.730 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.730 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.732 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.734 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 04:09:05.734 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.734 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.735 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.736 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.736 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.736 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.736 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.737 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.741 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.741 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.741 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.741 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.741 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.742 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.743 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.743 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.743 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.743 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.744 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.746 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.747 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.747 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.747 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.747 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.748 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.749 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.749 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.749 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.750 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.750 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.751 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.751 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.752 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.752 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.752 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.754 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.755 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.755 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.755 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.755 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.756 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.757 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.757 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.758 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.758 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.758 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.760 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.761 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.761 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.761 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.762 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.762 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.763 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.764 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.764 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.764 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.765 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.766 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.767 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.768 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.768 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.768 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.769 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.770 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.770 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.771 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.771 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.771 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.772 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.772 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.773 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.775 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:09:05.775 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 04:09:05.775 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.776 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.777 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.777 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.777 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.777 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.778 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.778 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.779 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.779 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.779 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.779 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.781 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.782 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.782 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.782 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.783 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.784 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.784 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.784 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.784 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.785 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.785 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.787 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AverageScoreGiven], [r].[AverageTimeMinutes], [r].[CompletedAssignments], [r].[LastUpdated], [r].[OnTimeRate], [r].[QualityRating], [r].[ReviewerId], [r].[SemesterId], [r].[TotalAssignments]
FROM [reviewer_performance] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0
2025-09-22 04:09:05.787 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.788 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 04:09:05.788 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.789 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.789 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.790 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.790 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.790 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.790 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.790 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.792 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.792 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.792 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.792 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.793 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.794 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.794 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.795 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:09:05.796 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.796 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:09:05.796 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.798 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__reviewer_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__reviewer_Id_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:09:05.798 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.798 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:09:05.798 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.799 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:09:05.809 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 04:09:05.811 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 04:09:05.811 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-22 04:09:05.812 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-22 04:09:05.814 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 04:09:05.814 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 04:09:05.895 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerAssignmentController.AutoAssignReviewers (CapBot.api) in 976.2993ms
2025-09-22 04:09:05.895 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerAssignmentController.AutoAssignReviewers (CapBot.api)'
2025-09-22 04:09:05.899 +07:00 [DBG] Connection id "0HNFPABNQC86L" completed keep alive response.
2025-09-22 04:09:05.899 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:09:05.899 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:09:05.900 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:09:05.902 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-assignments/auto-assign - 400 null application/json; charset=utf-8 1379.1098ms
2025-09-22 04:10:44.461 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 04:10:44.461 +07:00 [DBG] POST requests are not supported
2025-09-22 04:10:44.462 +07:00 [DBG] POST requests are not supported
2025-09-22 04:10:44.463 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 04:10:44.463 +07:00 [INF] CORS policy execution successful.
2025-09-22 04:10:44.468 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:10:44.469 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:10:44.469 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:10:44.474 +07:00 [DBG] Successfully validated the token.
2025-09-22 04:10:44.475 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 04:10:44.487 +07:00 [DBG] Authorization was successful.
2025-09-22 04:10:44.491 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:10:44.511 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 04:10:44.515 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 04:10:44.516 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 04:10:44.517 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 04:10:44.518 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 04:10:44.519 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 04:10:44.520 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:10:44.526 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:10:44.538 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:10:44.539 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 04:10:44.540 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:10:44.541 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:10:44.541 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:10:44.542 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 04:10:44.546 +07:00 [DBG] Connection id "0HNFPABNQC86L", Request id "0HNFPABNQC86L:00000005": started reading request body.
2025-09-22 04:10:44.546 +07:00 [DBG] Connection id "0HNFPABNQC86L", Request id "0HNFPABNQC86L:00000005": done reading request body.
2025-09-22 04:10:44.549 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 04:10:44.549 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:10:44.549 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:10:44.549 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:10:44.552 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:10:44.552 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:10:44.553 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 04:10:44.557 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:10:44.557 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:10:44.557 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:10:44.558 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:10:44.561 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 04:10:44.563 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T21:10:31.7040000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 04:10:44.590 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:10:44.594 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 04:10:44.599 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 04:10:44.620 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:10:44.622 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:10:44.622 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 04:10:44.622 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:44.623 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:44.623 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:44.624 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:44.624 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:10:44.626 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:10:44.648 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:10:44.650 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:44.650 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:44.650 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:44.650 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:44.656 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 04:10:44.669 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 04:10:44.670 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 04:10:44.670 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 04:10:44.670 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 04:10:44.741 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 04:10:44.756 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:10:44.783 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:44.785 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:44.785 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:44.785 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:44.786 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:44.786 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:10:44.889 +07:00 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:10:44.897 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:44.898 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 7ms reading results.
2025-09-22 04:10:44.898 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:44.899 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:44.981 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 04:10:44.983 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 04:10:44.984 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 04:10:44.985 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 04:10:50.589 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 04:10:50.632 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 04:10:50.647 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:10:50.648 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.649 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.649 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:50.649 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:50.649 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:50.650 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:10:50.656 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:10:50.657 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.660 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-09-22 04:10:50.660 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.661 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:50.664 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 04:10:50.667 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 04:10:50.710 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:10:50.710 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.710 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.710 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:50.711 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:50.711 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:50.711 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:10:50.718 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:10:50.745 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.745 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:50.746 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.746 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:50.748 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 04:10:50.752 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 04:10:50.759 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:10:50.759 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.759 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.759 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:50.759 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:50.760 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:50.760 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:10:50.766 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:10:50.767 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.767 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:50.767 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.767 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:50.770 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 04:10:50.775 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:10:50.780 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.780 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.780 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:50.780 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:50.781 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:50.781 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:10:50.787 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:10:50.787 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.787 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:50.788 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.788 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:50.789 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 04:10:50.793 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:10:50.794 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.794 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.794 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:50.794 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:50.794 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:50.794 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:10:50.801 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:10:50.801 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.801 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:50.801 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:50.801 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:50.842 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:50.890 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:50.893 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 04:10:50.896 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 04:10:50.938 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 04:10:51.060 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.061 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.069 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.069 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.083 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (14ms).
2025-09-22 04:10:51.084 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:10:51.098 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:10:51.122 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 04:10:51.131 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.131 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 32ms reading results.
2025-09-22 04:10:51.133 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.134 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.152 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:51.154 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 04:10:51.155 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 04:10:51.156 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 04:10:51.157 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 04:10:51.161 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 04:10:51.162 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 04:10:51.163 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 04:10:51.199 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:10:51.201 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.201 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.201 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.201 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.201 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.201 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:10:51.221 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:10:51.227 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.227 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 5ms reading results.
2025-09-22 04:10:51.227 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.228 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.257 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method508(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method507(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method507(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 04:10:51.282 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.283 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.283 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.283 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.283 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.283 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:10:51.285 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:10:51.285 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.285 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.285 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.285 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.287 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.287 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.287 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.287 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.287 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.287 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:10:51.289 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:10:51.290 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.290 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 04:10:51.291 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.291 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.294 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.295 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.295 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.295 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.295 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.295 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:10:51.298 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:10:51.298 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.299 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 04:10:51.299 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.299 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.300 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.300 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.300 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.300 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.300 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.300 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:10:51.302 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:10:51.302 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.302 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.302 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.302 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.303 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.303 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.303 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.303 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.303 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.304 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:10:51.309 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:10:51.309 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.309 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.309 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.309 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.313 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:51.314 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:51.314 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 04:10:51.314 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 04:10:51.316 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 04:10:51.318 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.318 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.319 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.319 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.319 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.320 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:10:51.325 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:10:51.325 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 04:10:51.326 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.326 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 04:10:51.327 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.327 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.327 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:51.327 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 04:10:51.328 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.328 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.328 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.328 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.328 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.328 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:10:51.330 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:10:51.330 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.330 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.330 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.331 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.332 +07:00 [ERR] Error assigning reviewer 10
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method508(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method507(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method507(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 04:10:51.334 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.334 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.334 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.334 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.334 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.334 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:10:51.336 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:10:51.336 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.336 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.336 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.337 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.337 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.337 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.337 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.337 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.337 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.341 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:10:51.344 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:10:51.344 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.344 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.345 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.346 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 04:10:51.347 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.347 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.347 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.347 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.347 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.347 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:10:51.349 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:10:51.349 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.349 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.349 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.349 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.350 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.350 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.350 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.350 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.350 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.350 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:10:51.352 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:10:51.352 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.352 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.353 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.353 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.354 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.354 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.354 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.354 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.354 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.354 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:10:51.355 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:10:51.355 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.356 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.356 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.356 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.356 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:51.356 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:51.356 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 04:10:51.356 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 04:10:51.357 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 04:10:51.357 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.357 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.357 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.357 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.358 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.358 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:10:51.365 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:10:51.366 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 04:10:51.366 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.366 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.366 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.366 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.366 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:51.367 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 04:10:51.367 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.368 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.368 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.368 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.368 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.368 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:10:51.370 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:10:51.370 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.370 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.370 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.370 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.371 +07:00 [ERR] Error assigning reviewer 11
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method508(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method507(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method507(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 04:10:51.375 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.375 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.375 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.376 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.376 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.376 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:10:51.377 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:10:51.377 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.378 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.378 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.378 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.378 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.378 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.378 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.379 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.379 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.379 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:10:51.381 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:10:51.382 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.382 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.382 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.382 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.383 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.383 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.383 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.384 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.384 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.384 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:10:51.385 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:10:51.386 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.386 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.386 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.386 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.387 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.388 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.388 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.388 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.388 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.388 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:10:51.389 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:10:51.390 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.390 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.390 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.390 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.391 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.391 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.391 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.391 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.391 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.391 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:10:51.393 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:10:51.393 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.393 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.393 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.393 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.393 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:51.393 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:51.394 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 04:10:51.394 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 04:10:51.394 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 04:10:51.395 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.395 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.395 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.395 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.396 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.396 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:10:51.399 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:10:51.399 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 04:10:51.399 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.399 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.399 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.399 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.400 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:10:51.400 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 04:10:51.401 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.401 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.402 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:10:51.402 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.402 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:10:51.402 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:10:51.403 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:10:51.403 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.404 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:10:51.404 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.404 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:10:51.404 +07:00 [ERR] Error assigning reviewer 9
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method508(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method507(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method507(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 04:10:51.409 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 04:10:51.409 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 04:10:51.410 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 04:10:51.410 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 04:10:51.410 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 04:10:51.423 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6904.3602ms
2025-09-22 04:10:51.424 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:10:51.424 +07:00 [DBG] Connection id "0HNFPABNQC86L" completed keep alive response.
2025-09-22 04:10:51.424 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:10:51.424 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:10:51.424 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:10:51.425 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 6963.6252ms
2025-09-22 04:11:17.789 +07:00 [INF] Application is shutting down...
2025-09-22 04:11:17.790 +07:00 [DBG] Hosting stopping
2025-09-22 04:11:17.795 +07:00 [DBG] Connection id "0HNFPABNQC86L" disconnecting.
2025-09-22 04:11:17.795 +07:00 [DBG] Connection id "0HNFPABNQC86L" stopped.
2025-09-22 04:11:17.796 +07:00 [DBG] Connection id "0HNFPABNQC86L" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:11:17.800 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 04:11:17.802 +07:00 [DBG] Hosting stopped
2025-09-22 04:17:11.658 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 04:17:11.714 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 04:17:11.880 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:11.896 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:11.906 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:11.907 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:11.907 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:11.908 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:12.053 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:12.054 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:12.069 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:12.069 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:12.069 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:12.071 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:12.074 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:12.075 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:17:12.109 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 04:17:12.110 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 04:17:12.227 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:17:12.227 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:17:12.227 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:17:12.227 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:17:12.227 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:17:12.227 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:17:12.228 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:17:12.228 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:17:12.228 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:17:12.228 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:17:12.228 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:17:12.330 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:17:12.374 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 04:17:12.470 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:17:12.491 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:17:12.502 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-22 04:17:12.505 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.604 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.607 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:17:12.611 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 04:17:12.615 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-09-22 04:17:12.621 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:17:12.659 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:17:12.686 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:17:12.702 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.707 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 44ms reading results.
2025-09-22 04:17:12.709 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.712 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 04:17:12.714 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.715 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.715 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:17:12.715 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.716 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.716 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:17:12.727 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:17:12.728 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:17:12.728 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.728 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:17:12.728 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.729 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:17:12.729 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.729 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.729 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:17:12.729 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.730 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.730 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:17:12.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:17:12.731 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:17:12.731 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.731 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:17:12.731 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.732 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:17:12.732 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.732 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.732 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:17:12.732 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.732 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.732 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:17:12.733 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:17:12.733 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:17:12.733 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.733 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:17:12.733 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.733 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:17:12.736 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 04:17:12.742 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:17:12.743 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.743 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.743 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:17:12.743 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.743 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.744 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:17:12.751 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:17:12.768 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:17:12.790 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.790 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-22 04:17:12.790 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.790 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:17:12.792 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 04:17:12.794 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.794 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.795 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:17:12.795 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.795 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.795 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:17:12.796 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:17:12.796 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:17:12.796 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.796 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:17:12.796 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.796 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:17:12.796 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 04:17:12.796 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.797 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.797 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:17:12.797 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.797 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.797 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:17:12.798 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:17:12.798 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:17:12.798 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.798 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:17:12.798 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.799 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:17:12.799 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.799 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.799 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:17:12.799 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.799 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:17:12.800 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:17:12.801 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:17:12.801 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:17:12.801 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.801 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:17:12.801 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.802 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:17:12.802 +07:00 [INF] Data seeding completed successfully
2025-09-22 04:17:12.803 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:17:12.804 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:17:12.804 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:17:12.816 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 04:17:12.940 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 04:17:13.019 +07:00 [DBG] Hosting starting
2025-09-22 04:17:13.026 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 04:17:13.027 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 04:17:13.027 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 04:17:13.029 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 04:17:13.031 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 04:17:13.031 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 04:17:13.034 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 04:17:13.037 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:17:13.037 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 04:17:13.038 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:17:13.038 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 04:17:13.039 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 04:17:13.040 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 04:17:13.040 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 04:17:13.043 +07:00 [DBG] Middleware loaded
2025-09-22 04:17:13.044 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 04:17:13.045 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 04:17:13.065 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 04:17:13.074 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 04:17:13.074 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 04:17:13.074 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 04:17:13.074 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 04:17:13.074 +07:00 [INF] Hosting environment: Development
2025-09-22 04:17:13.074 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 04:17:13.075 +07:00 [DBG] Hosting started
2025-09-22 04:17:13.139 +07:00 [DBG] Connection id "0HNFPAGTRT2ND" accepted.
2025-09-22 04:17:13.140 +07:00 [DBG] Connection id "0HNFPAGTRT2ND" started.
2025-09-22 04:17:13.171 +07:00 [DBG] Connection id "0HNFPAGTRT2NE" accepted.
2025-09-22 04:17:13.171 +07:00 [DBG] Connection id "0HNFPAGTRT2NE" started.
2025-09-22 04:17:13.173 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:17:13.181 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 04:17:13.278 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:17:13.287 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:17:13.287 +07:00 [DBG] Connection id "0HNFPAGTRT2ND" completed keep alive response.
2025-09-22 04:17:13.289 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 122.5859ms
2025-09-22 04:17:13.295 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:17:13.297 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:17:13.297 +07:00 [DBG] Connection id "0HNFPAGTRT2ND" completed keep alive response.
2025-09-22 04:17:13.299 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.7226ms
2025-09-22 04:17:13.353 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:17:13.560 +07:00 [DBG] Connection id "0HNFPAGTRT2ND" completed keep alive response.
2025-09-22 04:17:13.560 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 207.2208ms
2025-09-22 04:17:56.244 +07:00 [DBG] Connection id "0HNFPAGTRT2ND" received FIN.
2025-09-22 04:17:56.244 +07:00 [DBG] Connection id "0HNFPAGTRT2NE" received FIN.
2025-09-22 04:17:56.246 +07:00 [DBG] Connection id "0HNFPAGTRT2ND" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:17:56.247 +07:00 [DBG] Connection id "0HNFPAGTRT2ND" disconnecting.
2025-09-22 04:17:56.249 +07:00 [DBG] Connection id "0HNFPAGTRT2ND" stopped.
2025-09-22 04:17:56.249 +07:00 [DBG] Connection id "0HNFPAGTRT2NE" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:17:56.250 +07:00 [DBG] Connection id "0HNFPAGTRT2NE" disconnecting.
2025-09-22 04:17:56.250 +07:00 [DBG] Connection id "0HNFPAGTRT2NE" stopped.
2025-09-22 04:18:46.393 +07:00 [INF] Application is shutting down...
2025-09-22 04:18:46.395 +07:00 [DBG] Hosting stopping
2025-09-22 04:18:46.402 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 04:18:46.411 +07:00 [DBG] Hosting stopped
2025-09-22 04:18:53.172 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 04:18:53.233 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 04:18:53.384 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.397 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.407 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.408 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.408 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.409 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.540 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.540 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.552 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.552 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.553 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.553 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.558 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.558 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 04:18:53.607 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 04:18:53.608 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 04:18:53.608 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 04:18:53.608 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 04:18:53.608 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 04:18:53.711 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:18:53.711 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:18:53.711 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:18:53.711 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:18:53.711 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:18:53.711 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:18:53.711 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:18:53.711 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:18:53.712 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:18:53.712 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:18:53.712 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:18:53.807 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:18:53.849 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 04:18:53.942 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:18:53.965 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:18:53.978 +07:00 [DBG] Created DbConnection. (11ms).
2025-09-22 04:18:53.983 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.088 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.090 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:18:54.095 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 04:18:54.100 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-22 04:18:54.104 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:18:54.131 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:18:54.157 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:18:54.168 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.172 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-22 04:18:54.174 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.177 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 04:18:54.179 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.179 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.179 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:18:54.179 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.179 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.179 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:18:54.182 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:18:54.182 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:18:54.183 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.183 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:18:54.183 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.183 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:18:54.183 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.183 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.183 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:18:54.183 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.183 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.183 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:18:54.184 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:18:54.184 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:18:54.184 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.184 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:18:54.184 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.184 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:18:54.185 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.185 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.185 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:18:54.185 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.185 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.185 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:18:54.186 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:18:54.186 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:18:54.186 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.186 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:18:54.186 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.186 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:18:54.189 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 04:18:54.194 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:18:54.195 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.196 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.196 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:18:54.196 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.196 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.196 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:18:54.204 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:18:54.220 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:18:54.242 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.242 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-22 04:18:54.242 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.242 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:18:54.245 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 04:18:54.247 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.247 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.248 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:18:54.248 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.248 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.248 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:18:54.249 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:18:54.249 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:18:54.249 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.249 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:18:54.249 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.249 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:18:54.249 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 04:18:54.249 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.249 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.250 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:18:54.250 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.250 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.250 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:18:54.251 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:18:54.252 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:18:54.252 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.252 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:18:54.252 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.252 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:18:54.253 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.253 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.253 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:18:54.253 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.253 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:18:54.253 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:18:54.254 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:18:54.254 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:18:54.254 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.254 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:18:54.254 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.254 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:18:54.254 +07:00 [INF] Data seeding completed successfully
2025-09-22 04:18:54.255 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:18:54.257 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:18:54.258 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:18:54.267 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 04:18:54.373 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 04:18:54.448 +07:00 [DBG] Hosting starting
2025-09-22 04:18:54.455 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 04:18:54.456 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 04:18:54.457 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 04:18:54.459 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 04:18:54.461 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 04:18:54.461 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 04:18:54.465 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 04:18:54.467 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:18:54.467 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 04:18:54.468 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:18:54.469 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 04:18:54.469 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 04:18:54.470 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 04:18:54.470 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 04:18:54.474 +07:00 [DBG] Middleware loaded
2025-09-22 04:18:54.475 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 04:18:54.475 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 04:18:54.497 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 04:18:54.505 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 04:18:54.505 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 04:18:54.505 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 04:18:54.505 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 04:18:54.506 +07:00 [INF] Hosting environment: Development
2025-09-22 04:18:54.506 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 04:18:54.507 +07:00 [DBG] Hosting started
2025-09-22 04:18:54.619 +07:00 [DBG] Connection id "0HNFPAHS3MBTT" accepted.
2025-09-22 04:18:54.620 +07:00 [DBG] Connection id "0HNFPAHS3MBTT" started.
2025-09-22 04:18:54.648 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:18:54.655 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 04:18:54.695 +07:00 [DBG] Connection id "0HNFPAHS3MBTU" accepted.
2025-09-22 04:18:54.696 +07:00 [DBG] Connection id "0HNFPAHS3MBTU" started.
2025-09-22 04:18:54.821 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:18:54.834 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:18:54.835 +07:00 [DBG] Connection id "0HNFPAHS3MBTT" completed keep alive response.
2025-09-22 04:18:54.838 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 192.0539ms
2025-09-22 04:18:54.843 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:18:54.846 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:18:54.847 +07:00 [DBG] Connection id "0HNFPAHS3MBTU" completed keep alive response.
2025-09-22 04:18:54.847 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.4975ms
2025-09-22 04:18:54.911 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:18:55.085 +07:00 [DBG] Connection id "0HNFPAHS3MBTU" completed keep alive response.
2025-09-22 04:18:55.085 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 174.0562ms
2025-09-22 04:19:21.116 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 04:19:21.118 +07:00 [DBG] POST requests are not supported
2025-09-22 04:19:21.119 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 04:19:21.119 +07:00 [DBG] POST requests are not supported
2025-09-22 04:19:21.120 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 04:19:21.121 +07:00 [INF] CORS policy execution successful.
2025-09-22 04:19:21.211 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:19:21.213 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:19:21.214 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:19:21.373 +07:00 [DBG] Successfully validated the token.
2025-09-22 04:19:21.379 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 04:19:21.404 +07:00 [DBG] Authorization was successful.
2025-09-22 04:19:21.434 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:19:21.492 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 04:19:21.495 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 04:19:21.496 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 04:19:21.500 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 04:19:21.501 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 04:19:21.502 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 04:19:21.513 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:19:21.683 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:19:21.692 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:19:21.696 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 04:19:21.700 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:19:21.701 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:19:21.701 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:19:21.702 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 04:19:21.721 +07:00 [DBG] Connection id "0HNFPAHS3MBTU", Request id "0HNFPAHS3MBTU:00000003": started reading request body.
2025-09-22 04:19:21.722 +07:00 [DBG] Connection id "0HNFPAHS3MBTU", Request id "0HNFPAHS3MBTU:00000003": done reading request body.
2025-09-22 04:19:21.734 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 04:19:21.735 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:19:21.735 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:19:21.735 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:19:21.749 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:19:21.751 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:19:21.753 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 04:19:21.758 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:19:21.758 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:19:21.758 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:19:21.759 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:19:21.766 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 04:19:21.771 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T21:19:09.1360000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 04:19:21.856 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:19:21.867 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 04:19:21.886 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 04:19:21.977 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:19:21.984 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:19:21.985 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-22 04:19:21.986 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:21.986 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:21.986 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:21.986 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:21.987 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:21.989 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:19:22.005 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:19:22.012 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:22.012 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-09-22 04:19:22.012 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:22.013 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:22.023 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 04:19:22.040 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 04:19:22.041 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 04:19:22.042 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 04:19:22.043 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 04:19:22.149 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 04:19:22.166 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:19:22.176 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:22.176 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:22.177 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:22.177 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:22.177 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:22.178 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:19:22.268 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:19:22.293 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:22.294 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 24ms reading results.
2025-09-22 04:19:22.294 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:22.297 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 04:19:22.349 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 04:19:22.351 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 04:19:22.352 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 04:19:22.352 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 04:19:31.295 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 04:19:31.356 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 04:19:31.372 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:19:31.373 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.373 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.374 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:31.376 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:19:31.376 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 04:19:31.377 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:19:31.397 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:19:31.398 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.398 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:31.399 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.399 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:31.400 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 04:19:31.404 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 04:19:31.437 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:19:31.440 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.440 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.440 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:31.440 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:31.441 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:31.441 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:19:31.462 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:19:31.463 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.463 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:31.463 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.464 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:31.468 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 04:19:31.470 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 04:19:31.480 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:19:31.482 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.482 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.483 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:31.483 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:31.483 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:31.484 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:19:31.491 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:19:31.494 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.494 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-09-22 04:19:31.495 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.495 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:31.498 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 04:19:31.507 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:19:31.510 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.511 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.511 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:31.511 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:31.511 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:31.512 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:19:31.516 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:19:31.517 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.517 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:31.517 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.518 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:31.519 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 04:19:31.537 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:19:31.545 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.545 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.545 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:31.545 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:31.546 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:31.547 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:19:31.552 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:19:31.553 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.553 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:31.553 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.554 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:31.592 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:31.673 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:31.678 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 04:19:31.685 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 04:19:31.720 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 04:19:31.815 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.815 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.817 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:31.818 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:31.820 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-22 04:19:31.820 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:19:31.833 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:19:31.857 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 04:19:31.871 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.872 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-22 04:19:31.873 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.874 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:31.893 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:31.897 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 04:19:31.899 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Include(ra => ra.Submission.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 04:19:31.903 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 04:19:31.905 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 04:19:31.906 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 04:19:31.909 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 04:19:31.911 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 04:19:31.912 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 04:19:31.976 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
                6 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 112], [Property: Topic.Abbreviation (string), 113], [Property: Topic.CategoryId (int?) FK Index, 114], [Property: Topic.Content (string), 115], [Property: Topic.Context (string), 116], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 117], [Property: Topic.CreatedBy (string), 118], [Property: Topic.DeletedAt (DateTime?), 119], [Property: Topic.Description (string), 120], [Property: Topic.EN_Title (string) Required MaxLength(500), 121], [Property: Topic.IsActive (bool) Required, 122], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 123], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 124], [Property: Topic.LastModifiedAt (DateTime?), 125], [Property: Topic.LastModifiedBy (string), 126], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 127], [Property: Topic.Objectives (string), 128], [Property: Topic.Problem (string), 129], [Property: Topic.SemesterId (int) Required FK Index, 130], [Property: Topic.SupervisorId (int) Required FK Index, 131], [Property: Topic.VN_title (string), 132] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title, t1.Id, t1.Abbreviation, t1.CategoryId, t1.Content, t1.Context, t1.CreatedAt, t1.CreatedBy, t1.DeletedAt, t1.Description, t1.EN_Title, t1.IsActive, t1.IsApproved, t1.IsLegacy, t1.LastModifiedAt, t1.LastModifiedBy, t1.MaxStudents, t1.Objectives, t1.Problem, t1.SemesterId, t1.SupervisorId, t1.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            LEFT JOIN topics AS t1 ON s.TopicId == t1.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:19:31.984 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.986 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:31.987 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:31.987 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:31.988 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:19:31.988 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title], [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
LEFT JOIN [topics] AS [t1] ON [s].[TopicId] = [t1].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:19:32.025 +07:00 [INF] Executed DbCommand (36ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title], [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
LEFT JOIN [topics] AS [t1] ON [s].[TopicId] = [t1].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:19:32.031 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.032 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-09-22 04:19:32.032 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.032 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.050 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method478(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method477(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method477(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 04:19:32.061 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.062 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.062 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.062 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.062 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.062 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:19:32.064 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:19:32.065 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.065 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.066 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.066 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.068 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.068 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.069 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.069 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:19:32.070 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:19:32.070 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:19:32.071 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:19:32.072 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.072 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.072 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.073 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.073 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.074 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.074 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.074 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.074 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.075 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:19:32.078 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:19:32.079 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.080 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 04:19:32.080 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.080 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.081 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.082 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.082 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.082 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.082 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.082 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:19:32.084 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:19:32.084 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.085 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.085 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.085 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.086 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.086 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.087 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.087 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.087 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.087 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:19:32.092 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:19:32.092 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.092 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.093 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.093 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.104 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:32.105 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:32.105 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 04:19:32.105 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 04:19:32.125 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 04:19:32.126 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.132 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.132 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.133 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.133 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.133 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:19:32.140 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:19:32.141 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 04:19:32.142 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.142 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.142 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.147 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (4ms).
2025-09-22 04:19:32.148 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:32.148 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 04:19:32.156 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.156 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.156 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.157 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.157 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.157 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title], [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
LEFT JOIN [topics] AS [t1] ON [s].[TopicId] = [t1].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:19:32.216 +07:00 [INF] Executed DbCommand (59ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title], [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
LEFT JOIN [topics] AS [t1] ON [s].[TopicId] = [t1].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:19:32.251 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.251 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.251 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.252 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.253 +07:00 [ERR] Error assigning reviewer 10
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method478(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method477(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method477(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 04:19:32.257 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.258 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.258 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.259 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.259 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.259 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:19:32.261 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:19:32.262 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.262 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.263 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.263 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.264 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.264 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.264 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.264 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.264 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.265 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:19:32.298 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:19:32.301 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.302 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.302 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.302 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.304 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.304 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.305 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.305 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.305 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.305 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:19:32.307 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:19:32.307 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.308 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.308 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.308 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.309 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.309 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.310 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.310 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.310 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.310 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:19:32.313 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:19:32.313 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.313 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.313 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.313 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.314 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.314 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.315 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.315 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.315 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.315 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:19:32.317 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:19:32.317 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.317 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.318 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.318 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.319 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:32.319 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:32.320 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 04:19:32.320 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 04:19:32.320 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 04:19:32.321 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.321 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.322 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.322 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.322 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.322 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:19:32.327 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:19:32.327 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 04:19:32.328 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.328 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.328 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.328 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.329 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:32.329 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 04:19:32.330 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.331 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.331 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.331 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.331 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.332 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title], [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
LEFT JOIN [topics] AS [t1] ON [s].[TopicId] = [t1].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:19:32.335 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title], [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
LEFT JOIN [topics] AS [t1] ON [s].[TopicId] = [t1].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:19:32.335 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.335 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.336 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.336 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.337 +07:00 [ERR] Error assigning reviewer 11
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method478(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method477(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method477(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 04:19:32.344 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.344 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.345 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.345 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.345 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.346 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:19:32.349 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:19:32.349 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.349 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.350 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.350 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.351 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.351 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.352 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.352 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.353 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:19:32.354 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:19:32.356 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:19:32.358 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.358 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.358 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.359 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.360 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.360 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.362 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.362 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.362 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.362 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:19:32.364 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:19:32.364 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.365 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.365 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.365 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.366 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.368 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.369 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.369 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.369 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.369 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:19:32.371 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:19:32.371 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.371 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.372 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.372 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.373 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.374 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.374 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.374 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.374 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.374 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:19:32.376 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 04:19:32.376 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.376 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.377 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.377 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.377 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:32.378 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:32.378 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 04:19:32.378 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 04:19:32.379 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 04:19:32.381 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.381 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.382 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.382 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.382 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.382 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:19:32.385 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 04:19:32.385 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 04:19:32.386 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.386 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.389 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.389 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.389 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:19:32.389 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 04:19:32.390 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.390 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.391 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:19:32.391 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.391 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:19:32.391 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title], [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
LEFT JOIN [topics] AS [t1] ON [s].[TopicId] = [t1].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:19:32.394 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title], [t1].[Id], [t1].[Abbreviation], [t1].[CategoryId], [t1].[Content], [t1].[Context], [t1].[CreatedAt], [t1].[CreatedBy], [t1].[DeletedAt], [t1].[Description], [t1].[EN_Title], [t1].[IsActive], [t1].[IsApproved], [t1].[IsLegacy], [t1].[LastModifiedAt], [t1].[LastModifiedBy], [t1].[MaxStudents], [t1].[Objectives], [t1].[Problem], [t1].[SemesterId], [t1].[SupervisorId], [t1].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
LEFT JOIN [topics] AS [t1] ON [s].[TopicId] = [t1].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 04:19:32.395 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.395 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:19:32.396 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.396 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:19:32.396 +07:00 [ERR] Error assigning reviewer 9
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method478(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method477(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method477(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 195
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 339
2025-09-22 04:19:32.404 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 04:19:32.406 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 04:19:32.408 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 04:19:32.410 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 04:19:32.411 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 04:19:32.476 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 10968.1835ms
2025-09-22 04:19:32.477 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:19:32.481 +07:00 [DBG] Connection id "0HNFPAHS3MBTU" completed keep alive response.
2025-09-22 04:19:32.482 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:19:32.483 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:19:32.483 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:19:32.485 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 11368.9688ms
2025-09-22 04:21:06.542 +07:00 [DBG] Connection id "0HNFPAHS3MBTT" disconnecting.
2025-09-22 04:21:06.544 +07:00 [DBG] Connection id "0HNFPAHS3MBTT" stopped.
2025-09-22 04:21:06.546 +07:00 [DBG] Connection id "0HNFPAHS3MBTT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:21:17.494 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:21:17.494 +07:00 [DBG] Connection id "0HNFPAHS3MBTV" accepted.
2025-09-22 04:21:17.495 +07:00 [DBG] Connection id "0HNFPAHS3MBTV" started.
2025-09-22 04:21:17.495 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:21:17.495 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:21:17.495 +07:00 [DBG] Connection id "0HNFPAHS3MBTU" completed keep alive response.
2025-09-22 04:21:17.495 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 1.3586ms
2025-09-22 04:21:17.523 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:21:17.524 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:21:17.524 +07:00 [DBG] Connection id "0HNFPAHS3MBTU" completed keep alive response.
2025-09-22 04:21:17.524 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 0.3342ms
2025-09-22 04:21:17.726 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:21:17.789 +07:00 [DBG] Connection id "0HNFPAHS3MBTU" completed keep alive response.
2025-09-22 04:21:17.789 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 63.388ms
2025-09-22 04:21:50.200 +07:00 [INF] Application is shutting down...
2025-09-22 04:21:50.201 +07:00 [DBG] Hosting stopping
2025-09-22 04:21:50.205 +07:00 [DBG] Connection id "0HNFPAHS3MBTV" disconnecting.
2025-09-22 04:21:50.205 +07:00 [DBG] Connection id "0HNFPAHS3MBTU" disconnecting.
2025-09-22 04:21:50.206 +07:00 [DBG] Connection id "0HNFPAHS3MBTV" stopped.
2025-09-22 04:21:50.206 +07:00 [DBG] Connection id "0HNFPAHS3MBTU" stopped.
2025-09-22 04:21:50.206 +07:00 [DBG] Connection id "0HNFPAHS3MBTU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:21:50.207 +07:00 [DBG] Connection id "0HNFPAHS3MBTV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:21:50.210 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 04:21:50.211 +07:00 [DBG] Hosting stopped
2025-09-22 04:24:37.728 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 04:24:37.783 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 04:24:37.930 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:37.945 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:37.958 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:37.959 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:37.960 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:37.960 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:38.093 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:38.094 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:38.106 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:38.107 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:38.107 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:38.107 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:38.111 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:38.112 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:24:38.141 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 04:24:38.142 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 04:24:38.142 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 04:24:38.142 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 04:24:38.142 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 04:24:38.142 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 04:24:38.142 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 04:24:38.142 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 04:24:38.142 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 04:24:38.142 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 04:24:38.142 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 04:24:38.143 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 04:24:38.143 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 04:24:38.143 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 04:24:38.143 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 04:24:38.143 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 04:24:38.144 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 04:24:38.144 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 04:24:38.144 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 04:24:38.244 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:24:38.244 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:24:38.244 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:24:38.245 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:24:38.245 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:24:38.245 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:24:38.245 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:24:38.245 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:24:38.245 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:24:38.246 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:24:38.246 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:24:38.344 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:24:38.382 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 04:24:38.476 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:24:38.498 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:24:38.508 +07:00 [DBG] Created DbConnection. (7ms).
2025-09-22 04:24:38.510 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.628 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.630 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:24:38.633 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 04:24:38.639 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 04:24:38.643 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:24:38.681 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:24:38.706 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:24:38.717 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.721 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-22 04:24:38.723 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.725 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 04:24:38.728 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.728 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.728 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:24:38.728 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.729 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.729 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:24:38.731 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:24:38.731 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:24:38.731 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.731 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:24:38.731 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.732 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:24:38.732 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.732 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.732 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:24:38.732 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.732 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.732 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:24:38.734 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:24:38.734 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:24:38.734 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.734 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:24:38.734 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.734 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:24:38.735 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.735 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.735 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:24:38.735 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.735 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.735 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:24:38.736 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:24:38.736 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:24:38.736 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.736 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:24:38.736 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.736 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:24:38.739 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 04:24:38.744 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:24:38.745 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.745 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.745 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:24:38.745 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.745 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.745 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:24:38.752 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:24:38.769 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:24:38.788 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.788 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 35ms reading results.
2025-09-22 04:24:38.788 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.788 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:24:38.791 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 04:24:38.792 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.792 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.793 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:24:38.793 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.793 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.793 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:24:38.794 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:24:38.794 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:24:38.794 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.794 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:24:38.794 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.794 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:24:38.795 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 04:24:38.795 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.795 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.795 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:24:38.795 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.796 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.796 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:24:38.797 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:24:38.797 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:24:38.797 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.797 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:24:38.797 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.798 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:24:38.798 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.798 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.798 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:24:38.798 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.798 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:24:38.798 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:24:38.799 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:24:38.799 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:24:38.799 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.799 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:24:38.800 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.800 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:24:38.800 +07:00 [INF] Data seeding completed successfully
2025-09-22 04:24:38.800 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:24:38.802 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:24:38.802 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:24:38.811 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 04:24:38.911 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 04:24:38.982 +07:00 [DBG] Hosting starting
2025-09-22 04:24:38.989 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 04:24:38.991 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 04:24:38.991 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 04:24:38.993 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 04:24:38.996 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 04:24:38.996 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 04:24:39.000 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 04:24:39.002 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:24:39.003 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 04:24:39.004 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:24:39.005 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 04:24:39.006 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 04:24:39.006 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 04:24:39.007 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 04:24:39.010 +07:00 [DBG] Middleware loaded
2025-09-22 04:24:39.012 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 04:24:39.012 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 04:24:39.034 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 04:24:39.043 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 04:24:39.043 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 04:24:39.043 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 04:24:39.043 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 04:24:39.044 +07:00 [INF] Hosting environment: Development
2025-09-22 04:24:39.044 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 04:24:39.045 +07:00 [DBG] Hosting started
2025-09-22 04:24:39.159 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" accepted.
2025-09-22 04:24:39.159 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" started.
2025-09-22 04:24:39.184 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:24:39.191 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 04:24:39.229 +07:00 [DBG] Connection id "0HNFPAL2PFGV0" accepted.
2025-09-22 04:24:39.229 +07:00 [DBG] Connection id "0HNFPAL2PFGV0" started.
2025-09-22 04:24:39.307 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:24:39.316 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:24:39.317 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" completed keep alive response.
2025-09-22 04:24:39.319 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 136.6468ms
2025-09-22 04:24:39.325 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:24:39.327 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:24:39.327 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" completed keep alive response.
2025-09-22 04:24:39.327 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.6967ms
2025-09-22 04:24:39.383 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:24:39.561 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" completed keep alive response.
2025-09-22 04:24:39.561 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 177.9473ms
2025-09-22 04:25:42.818 +07:00 [DBG] Connection id "0HNFPAL2PFGV0" received FIN.
2025-09-22 04:25:42.821 +07:00 [DBG] Connection id "0HNFPAL2PFGV0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:25:42.822 +07:00 [DBG] Connection id "0HNFPAL2PFGV0" disconnecting.
2025-09-22 04:25:42.825 +07:00 [DBG] Connection id "0HNFPAL2PFGV0" stopped.
2025-09-22 04:25:51.496 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/auto-assign-from-suggestions?submissionId=5 - application/json;odata.metadata=minimal;odata.streaming=true 2136
2025-09-22 04:25:51.501 +07:00 [DBG] POST requests are not supported
2025-09-22 04:25:51.503 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 04:25:51.503 +07:00 [DBG] POST requests are not supported
2025-09-22 04:25:51.507 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 04:25:51.508 +07:00 [INF] CORS policy execution successful.
2025-09-22 04:25:51.592 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/auto-assign-from-suggestions'
2025-09-22 04:25:51.593 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.AutoAssignFromSuggestions (CapBot.api)' with route pattern 'api/reviewer-suggestion/auto-assign-from-suggestions' is valid for the request path '/api/reviewer-suggestion/auto-assign-from-suggestions'
2025-09-22 04:25:51.595 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.AutoAssignFromSuggestions (CapBot.api)'
2025-09-22 04:25:51.650 +07:00 [DBG] AuthenticationScheme: Bearer was not authenticated.
2025-09-22 04:25:51.656 +07:00 [DBG] Policy authentication schemes  did not succeed
2025-09-22 04:25:51.664 +07:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Supervisor|Administrator|Moderator)
2025-09-22 04:25:51.676 +07:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-09-22 04:25:51.679 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" completed keep alive response.
2025-09-22 04:25:51.680 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/auto-assign-from-suggestions?submissionId=5 - 401 0 null 183.0761ms
2025-09-22 04:25:51.684 +07:00 [DBG] Connection id "0HNFPAL2PFGUV", Request id "0HNFPAL2PFGUV:00000004": started reading request body.
2025-09-22 04:25:51.688 +07:00 [DBG] Connection id "0HNFPAL2PFGUV", Request id "0HNFPAL2PFGUV:00000004": done reading request body.
2025-09-22 04:26:22.112 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:26:22.114 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:26:22.114 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:26:22.114 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" completed keep alive response.
2025-09-22 04:26:22.115 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 2.3573ms
2025-09-22 04:26:22.117 +07:00 [DBG] Connection id "0HNFPAL2PFGV1" accepted.
2025-09-22 04:26:22.118 +07:00 [DBG] Connection id "0HNFPAL2PFGV1" started.
2025-09-22 04:26:22.123 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:26:22.124 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:26:22.124 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" completed keep alive response.
2025-09-22 04:26:22.125 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 1.3708ms
2025-09-22 04:26:22.198 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:26:22.519 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" completed keep alive response.
2025-09-22 04:26:22.519 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 321.2055ms
2025-09-22 04:28:33.735 +07:00 [DBG] Connection id "0HNFPAL2PFGV1" disconnecting.
2025-09-22 04:28:33.735 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" disconnecting.
2025-09-22 04:28:33.736 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" stopped.
2025-09-22 04:28:33.736 +07:00 [DBG] Connection id "0HNFPAL2PFGV1" stopped.
2025-09-22 04:28:33.736 +07:00 [DBG] Connection id "0HNFPAL2PFGUV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:28:33.736 +07:00 [DBG] Connection id "0HNFPAL2PFGV1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:30:09.725 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 04:30:09.782 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 04:30:09.923 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:09.935 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:09.945 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:09.947 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:09.947 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:09.948 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:10.085 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:10.086 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:10.098 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:10.098 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:10.099 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:10.100 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:10.103 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:10.103 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:30:10.132 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 04:30:10.132 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 04:30:10.132 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 04:30:10.133 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 04:30:10.133 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 04:30:10.133 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 04:30:10.133 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 04:30:10.133 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 04:30:10.133 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 04:30:10.133 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 04:30:10.134 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 04:30:10.134 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 04:30:10.134 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 04:30:10.134 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 04:30:10.135 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 04:30:10.135 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 04:30:10.135 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 04:30:10.135 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 04:30:10.135 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 04:30:10.234 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:30:10.234 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:30:10.235 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:30:10.235 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:30:10.235 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:30:10.235 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:30:10.235 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:30:10.235 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:30:10.235 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:30:10.235 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:30:10.236 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:30:10.335 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:30:10.373 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 04:30:10.466 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:30:10.489 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:30:10.499 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 04:30:10.502 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.597 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.599 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:30:10.603 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:30:10.607 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-22 04:30:10.610 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:30:10.644 +07:00 [INF] Executed DbCommand (33ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:30:10.667 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:30:10.680 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.684 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-22 04:30:10.686 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.689 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 04:30:10.691 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.692 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.692 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:30:10.692 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.692 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.692 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:30:10.694 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:30:10.694 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:30:10.694 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.694 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:30:10.694 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.694 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:30:10.695 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.695 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.695 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:30:10.696 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.696 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.696 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:30:10.697 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:30:10.697 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:30:10.697 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.697 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:30:10.698 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.698 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:30:10.698 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.698 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.698 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:30:10.698 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.698 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.698 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:30:10.699 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:30:10.699 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:30:10.699 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.699 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:30:10.699 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.699 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:30:10.702 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 04:30:10.707 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:30:10.708 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.708 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.708 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:30:10.708 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.708 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.708 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:30:10.715 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:30:10.735 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:30:10.755 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.755 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-22 04:30:10.755 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.755 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:30:10.757 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 04:30:10.758 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.759 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.759 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:30:10.759 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.759 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.759 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:30:10.760 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:30:10.760 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:30:10.760 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.760 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:30:10.760 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.760 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:30:10.760 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 04:30:10.760 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.761 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.761 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:30:10.761 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.761 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.761 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:30:10.761 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:30:10.762 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:30:10.762 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.762 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:30:10.762 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.762 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:30:10.762 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.762 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.762 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:30:10.762 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.762 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:30:10.762 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:30:10.763 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:30:10.763 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:30:10.763 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.763 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:30:10.763 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.763 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:30:10.763 +07:00 [INF] Data seeding completed successfully
2025-09-22 04:30:10.764 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:30:10.765 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:30:10.766 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:30:10.775 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 04:30:10.878 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 04:30:10.948 +07:00 [DBG] Hosting starting
2025-09-22 04:30:10.954 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 04:30:10.955 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 04:30:10.956 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 04:30:10.958 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 04:30:10.961 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 04:30:10.961 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 04:30:10.964 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 04:30:10.967 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:30:10.967 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 04:30:10.968 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:30:10.969 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 04:30:10.969 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 04:30:10.970 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 04:30:10.970 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 04:30:10.974 +07:00 [DBG] Middleware loaded
2025-09-22 04:30:10.975 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 04:30:10.976 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 04:30:10.996 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 04:30:11.004 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 04:30:11.004 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 04:30:11.004 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 04:30:11.004 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 04:30:11.004 +07:00 [INF] Hosting environment: Development
2025-09-22 04:30:11.004 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 04:30:11.005 +07:00 [DBG] Hosting started
2025-09-22 04:30:11.116 +07:00 [DBG] Connection id "0HNFPAO5N8SCT" accepted.
2025-09-22 04:30:11.117 +07:00 [DBG] Connection id "0HNFPAO5N8SCT" started.
2025-09-22 04:30:11.148 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:30:11.153 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 04:30:11.186 +07:00 [DBG] Connection id "0HNFPAO5N8SCU" accepted.
2025-09-22 04:30:11.186 +07:00 [DBG] Connection id "0HNFPAO5N8SCU" started.
2025-09-22 04:30:11.265 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:30:11.272 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:30:11.273 +07:00 [DBG] Connection id "0HNFPAO5N8SCT" completed keep alive response.
2025-09-22 04:30:11.275 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 128.0978ms
2025-09-22 04:30:11.281 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:30:11.284 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:30:11.284 +07:00 [DBG] Connection id "0HNFPAO5N8SCT" completed keep alive response.
2025-09-22 04:30:11.285 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.6707ms
2025-09-22 04:30:11.343 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:30:11.517 +07:00 [DBG] Connection id "0HNFPAO5N8SCT" completed keep alive response.
2025-09-22 04:30:11.517 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 173.6503ms
2025-09-22 04:31:12.764 +07:00 [DBG] Connection id "0HNFPAO5N8SCU" received FIN.
2025-09-22 04:31:12.766 +07:00 [DBG] Connection id "0HNFPAO5N8SCT" received FIN.
2025-09-22 04:31:12.774 +07:00 [DBG] Connection id "0HNFPAO5N8SCU" disconnecting.
2025-09-22 04:31:12.774 +07:00 [DBG] Connection id "0HNFPAO5N8SCT" disconnecting.
2025-09-22 04:31:12.784 +07:00 [DBG] Connection id "0HNFPAO5N8SCU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:31:12.789 +07:00 [DBG] Connection id "0HNFPAO5N8SCT" stopped.
2025-09-22 04:31:12.790 +07:00 [DBG] Connection id "0HNFPAO5N8SCU" stopped.
2025-09-22 04:31:12.793 +07:00 [DBG] Connection id "0HNFPAO5N8SCT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:31:14.136 +07:00 [INF] Application is shutting down...
2025-09-22 04:31:14.139 +07:00 [DBG] Hosting stopping
2025-09-22 04:31:14.150 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 04:31:14.195 +07:00 [DBG] Hosting stopped
2025-09-22 04:41:08.531 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 04:41:08.587 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 04:41:08.727 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.739 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.753 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.755 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.755 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.756 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.900 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.901 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.912 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.912 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.913 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.913 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.917 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.918 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:41:08.950 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 04:41:08.950 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 04:41:08.950 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 04:41:08.950 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 04:41:08.950 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 04:41:08.950 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 04:41:08.950 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 04:41:08.950 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 04:41:08.950 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 04:41:08.950 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 04:41:08.950 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 04:41:08.951 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 04:41:08.951 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 04:41:08.951 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 04:41:08.951 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 04:41:08.951 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 04:41:08.951 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 04:41:08.951 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 04:41:08.951 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 04:41:09.049 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:41:09.049 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:41:09.049 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:41:09.049 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:41:09.049 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:41:09.049 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:41:09.049 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:41:09.049 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:41:09.050 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:41:09.050 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:41:09.050 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:41:09.146 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:41:09.184 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 04:41:09.277 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:41:09.299 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:41:09.309 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-22 04:41:09.312 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.433 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.435 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:41:09.439 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:41:09.444 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 04:41:09.449 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:41:09.479 +07:00 [INF] Executed DbCommand (30ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:41:09.510 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:41:09.526 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.532 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 49ms reading results.
2025-09-22 04:41:09.533 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.537 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 04:41:09.540 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.540 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.540 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:41:09.541 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.541 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.541 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:41:09.543 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:41:09.544 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:41:09.544 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.544 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:41:09.544 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.544 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:41:09.544 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.545 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.545 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:41:09.545 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.545 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.545 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:41:09.546 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:41:09.546 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:41:09.546 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.546 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:41:09.546 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.546 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:41:09.547 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.547 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.547 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:41:09.547 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.547 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.547 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:41:09.548 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:41:09.548 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:41:09.548 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.548 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:41:09.548 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.548 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:41:09.551 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 04:41:09.556 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:41:09.558 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.559 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.559 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:41:09.559 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.559 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.559 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:41:09.565 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:41:09.585 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:41:09.609 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.609 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 43ms reading results.
2025-09-22 04:41:09.609 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.609 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:41:09.611 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 04:41:09.613 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.613 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.613 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:41:09.613 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.613 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.614 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:41:09.614 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:41:09.615 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:41:09.615 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.615 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:41:09.615 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.615 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:41:09.615 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 04:41:09.616 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.616 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.616 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:41:09.616 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.616 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.616 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:41:09.617 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:41:09.617 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:41:09.617 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.617 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:41:09.617 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.617 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:41:09.618 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.618 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.618 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:41:09.618 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.618 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:41:09.618 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:41:09.619 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:41:09.619 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:41:09.620 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.620 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:41:09.620 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.620 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:41:09.620 +07:00 [INF] Data seeding completed successfully
2025-09-22 04:41:09.621 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:41:09.622 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:41:09.623 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:41:09.632 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 04:41:09.735 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 04:41:09.811 +07:00 [DBG] Hosting starting
2025-09-22 04:41:09.818 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 04:41:09.819 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 04:41:09.820 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 04:41:09.822 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 04:41:09.824 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 04:41:09.825 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 04:41:09.829 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 04:41:09.830 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:41:09.831 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 04:41:09.832 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:41:09.833 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 04:41:09.833 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 04:41:09.834 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 04:41:09.835 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 04:41:09.838 +07:00 [DBG] Middleware loaded
2025-09-22 04:41:09.839 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 04:41:09.840 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 04:41:09.863 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 04:41:09.871 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 04:41:09.871 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 04:41:09.871 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 04:41:09.871 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 04:41:09.871 +07:00 [INF] Hosting environment: Development
2025-09-22 04:41:09.871 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 04:41:09.872 +07:00 [DBG] Hosting started
2025-09-22 04:41:09.984 +07:00 [DBG] Connection id "0HNFPAUA2NEEG" accepted.
2025-09-22 04:41:09.985 +07:00 [DBG] Connection id "0HNFPAUA2NEEG" started.
2025-09-22 04:41:10.019 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:41:10.025 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 04:41:10.059 +07:00 [DBG] Connection id "0HNFPAUA2NEEH" accepted.
2025-09-22 04:41:10.060 +07:00 [DBG] Connection id "0HNFPAUA2NEEH" started.
2025-09-22 04:41:10.155 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:41:10.164 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:41:10.164 +07:00 [DBG] Connection id "0HNFPAUA2NEEG" completed keep alive response.
2025-09-22 04:41:10.168 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 148.3559ms
2025-09-22 04:41:10.172 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:41:10.175 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:41:10.175 +07:00 [DBG] Connection id "0HNFPAUA2NEEG" completed keep alive response.
2025-09-22 04:41:10.176 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.0753ms
2025-09-22 04:41:10.241 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:41:10.441 +07:00 [DBG] Connection id "0HNFPAUA2NEEG" completed keep alive response.
2025-09-22 04:41:10.441 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 199.7575ms
2025-09-22 04:43:21.681 +07:00 [DBG] Connection id "0HNFPAUA2NEEH" disconnecting.
2025-09-22 04:43:21.681 +07:00 [DBG] Connection id "0HNFPAUA2NEEG" disconnecting.
2025-09-22 04:43:21.684 +07:00 [DBG] Connection id "0HNFPAUA2NEEG" stopped.
2025-09-22 04:43:21.684 +07:00 [DBG] Connection id "0HNFPAUA2NEEH" stopped.
2025-09-22 04:43:21.686 +07:00 [DBG] Connection id "0HNFPAUA2NEEG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:43:21.687 +07:00 [DBG] Connection id "0HNFPAUA2NEEH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:45:17.151 +07:00 [INF] Application is shutting down...
2025-09-22 04:45:17.154 +07:00 [DBG] Hosting stopping
2025-09-22 04:45:17.158 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 04:45:17.178 +07:00 [DBG] Hosting stopped
2025-09-22 04:45:37.889 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 04:45:37.950 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 04:45:38.104 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.117 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.128 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.130 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.130 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.131 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.263 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.263 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.280 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.281 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.281 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.282 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.285 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.285 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:45:38.320 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 04:45:38.320 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 04:45:38.320 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 04:45:38.320 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 04:45:38.320 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 04:45:38.320 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 04:45:38.321 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 04:45:38.424 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:45:38.425 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:45:38.425 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:45:38.425 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:45:38.426 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:45:38.426 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:45:38.426 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:45:38.426 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:45:38.426 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:45:38.426 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:45:38.426 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:45:38.528 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:45:38.573 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 04:45:38.666 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:45:38.690 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:45:38.702 +07:00 [DBG] Created DbConnection. (10ms).
2025-09-22 04:45:38.705 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.793 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.795 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:45:38.798 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:45:38.802 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-22 04:45:38.806 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:45:38.833 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:45:38.860 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:45:38.874 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.878 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 41ms reading results.
2025-09-22 04:45:38.879 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.882 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 04:45:38.884 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.885 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.885 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:45:38.885 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.885 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.885 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:45:38.887 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:45:38.887 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:45:38.888 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.888 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:45:38.888 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.888 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:45:38.888 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.888 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.888 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:45:38.888 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.888 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.888 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:45:38.889 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:45:38.889 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:45:38.889 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.889 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:45:38.889 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.889 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:45:38.889 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.890 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.890 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:45:38.890 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.890 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.890 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:45:38.891 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:45:38.892 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:45:38.892 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.892 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:45:38.892 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.892 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:45:38.895 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 04:45:38.900 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:45:38.900 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.901 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.901 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:45:38.901 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.901 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.901 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:45:38.904 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:45:38.921 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:45:38.940 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.940 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 35ms reading results.
2025-09-22 04:45:38.940 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.940 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:45:38.942 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 04:45:38.944 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.944 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.945 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:45:38.945 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.945 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.945 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:45:38.946 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:45:38.946 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:45:38.947 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.947 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:45:38.947 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.947 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:45:38.947 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 04:45:38.947 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.947 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.948 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:45:38.948 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.948 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.948 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:45:38.949 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:45:38.949 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:45:38.949 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.949 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:45:38.949 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.949 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:45:38.949 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.949 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.949 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:45:38.950 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.950 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:45:38.950 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:45:38.950 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:45:38.951 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:45:38.951 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.951 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:45:38.951 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.951 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:45:38.951 +07:00 [INF] Data seeding completed successfully
2025-09-22 04:45:38.952 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:45:38.953 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:45:38.954 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:45:38.962 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 04:45:39.067 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 04:45:39.142 +07:00 [DBG] Hosting starting
2025-09-22 04:45:39.149 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 04:45:39.150 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 04:45:39.150 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 04:45:39.153 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 04:45:39.156 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 04:45:39.156 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 04:45:39.159 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 04:45:39.162 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:45:39.163 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 04:45:39.164 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:45:39.164 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 04:45:39.165 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 04:45:39.165 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 04:45:39.166 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 04:45:39.169 +07:00 [DBG] Middleware loaded
2025-09-22 04:45:39.170 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 04:45:39.171 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 04:45:39.190 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 04:45:39.200 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 04:45:39.200 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 04:45:39.200 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 04:45:39.200 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 04:45:39.200 +07:00 [INF] Hosting environment: Development
2025-09-22 04:45:39.200 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 04:45:39.201 +07:00 [DBG] Hosting started
2025-09-22 04:45:39.314 +07:00 [DBG] Connection id "0HNFPB0QB8GI2" accepted.
2025-09-22 04:45:39.315 +07:00 [DBG] Connection id "0HNFPB0QB8GI2" started.
2025-09-22 04:45:39.349 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:45:39.355 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 04:45:39.394 +07:00 [DBG] Connection id "0HNFPB0QB8GI3" accepted.
2025-09-22 04:45:39.394 +07:00 [DBG] Connection id "0HNFPB0QB8GI3" started.
2025-09-22 04:45:39.558 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:45:39.571 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:45:39.572 +07:00 [DBG] Connection id "0HNFPB0QB8GI2" completed keep alive response.
2025-09-22 04:45:39.578 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 228.9147ms
2025-09-22 04:45:39.582 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:45:39.583 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:45:39.584 +07:00 [DBG] Connection id "0HNFPB0QB8GI2" completed keep alive response.
2025-09-22 04:45:39.585 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.8183ms
2025-09-22 04:45:39.642 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:45:39.824 +07:00 [DBG] Connection id "0HNFPB0QB8GI2" completed keep alive response.
2025-09-22 04:45:39.824 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 181.9972ms
2025-09-22 04:46:07.009 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 04:46:07.012 +07:00 [DBG] POST requests are not supported
2025-09-22 04:46:07.013 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 04:46:07.013 +07:00 [DBG] POST requests are not supported
2025-09-22 04:46:07.014 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 04:46:07.015 +07:00 [INF] CORS policy execution successful.
2025-09-22 04:46:07.091 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:46:07.092 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:46:07.094 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:46:07.193 +07:00 [DBG] Successfully validated the token.
2025-09-22 04:46:07.195 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 04:46:07.202 +07:00 [DBG] Authorization was successful.
2025-09-22 04:46:07.214 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:46:07.243 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 04:46:07.245 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 04:46:07.246 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 04:46:07.247 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 04:46:07.248 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 04:46:07.248 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 04:46:07.251 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:46:07.413 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:46:07.421 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:46:07.426 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 04:46:07.430 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:46:07.430 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:46:07.431 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:46:07.431 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 04:46:07.448 +07:00 [DBG] Connection id "0HNFPB0QB8GI2", Request id "0HNFPB0QB8GI2:00000004": started reading request body.
2025-09-22 04:46:07.449 +07:00 [DBG] Connection id "0HNFPB0QB8GI2", Request id "0HNFPB0QB8GI2:00000004": done reading request body.
2025-09-22 04:46:07.460 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 04:46:07.462 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:46:07.463 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:46:07.464 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:46:07.475 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:46:07.477 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:46:07.478 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 04:46:07.480 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:46:07.480 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:46:07.480 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:46:07.481 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:46:07.485 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 04:46:07.488 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T21:45:56.3310000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 04:46:07.576 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:46:07.592 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 04:46:07.613 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 04:46:07.710 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:46:07.719 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:46:07.720 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 04:46:07.720 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:07.721 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:07.721 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:07.722 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:07.722 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:46:07.725 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:46:07.742 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:46:07.749 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:07.749 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-09-22 04:46:07.750 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:07.750 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:07.765 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 04:46:07.782 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 04:46:07.782 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 04:46:07.783 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 04:46:07.784 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 04:46:07.877 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 04:46:07.891 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:46:07.900 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:07.901 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:07.901 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:07.901 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:07.901 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:07.902 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:46:07.986 +07:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:46:08.001 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:08.002 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 15ms reading results.
2025-09-22 04:46:08.002 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:08.004 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 04:46:08.049 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 04:46:08.051 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 04:46:08.051 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 04:46:08.052 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 04:46:14.093 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 606
2025-09-22 04:46:14.130 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 04:46:14.137 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:46:14.138 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.138 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.139 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.139 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.139 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.139 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:46:14.142 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:46:14.142 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.143 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.143 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.143 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.144 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 04:46:14.144 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 04:46:14.155 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:46:14.157 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.157 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.157 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.157 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.157 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.157 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:46:14.164 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:46:14.165 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.165 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.165 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.165 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.167 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 04:46:14.167 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 04:46:14.172 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:46:14.173 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.173 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.173 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.173 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.174 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.174 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:46:14.177 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:46:14.178 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.178 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.179 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.179 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.180 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 04:46:14.184 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:46:14.185 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.186 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.186 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.186 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.186 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.186 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:46:14.191 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:46:14.192 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.192 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.192 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.192 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.193 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.193 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.193 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.194 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.194 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.194 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:46:14.194 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:46:14.195 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.195 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.195 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.195 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.196 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.196 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.196 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.196 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.196 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.197 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:46:14.199 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:46:14.199 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.199 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.200 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.200 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.200 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.200 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.200 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.200 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.200 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.200 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:46:14.201 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:46:14.201 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.201 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.201 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.201 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.202 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.202 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.202 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.202 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.202 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.202 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:46:14.203 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:46:14.203 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.204 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.204 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.204 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.205 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.205 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.205 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.205 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.205 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.206 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:46:14.206 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:46:14.207 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.207 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.207 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.207 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.207 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.207 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.207 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.207 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.208 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.208 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:46:14.208 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:46:14.209 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.209 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.209 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.209 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.210 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.210 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.210 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.210 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.211 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.211 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:46:14.212 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:46:14.213 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.213 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.213 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.213 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.214 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.214 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.214 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.214 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.214 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.214 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:46:14.215 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:46:14.215 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.215 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.215 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.215 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.216 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.216 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.216 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.216 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.216 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.216 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:46:14.216 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 04:46:14.217 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.217 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.218 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.218 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.218 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.219 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.219 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.219 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.219 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.219 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:46:14.220 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 04:46:14.220 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.220 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.221 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.221 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.221 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.221 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.221 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.221 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.221 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.221 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:46:14.222 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 04:46:14.222 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.222 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.222 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.222 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.222 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.223 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.223 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:46:14.223 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.223 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:46:14.223 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:46:14.225 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 04:46:14.225 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.225 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:46:14.225 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.225 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:46:14.228 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 04:46:14.229 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 04:46:14.229 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 04:46:14.230 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 04:46:14.230 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 04:46:14.262 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7011.9407ms
2025-09-22 04:46:14.262 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:46:14.264 +07:00 [DBG] Connection id "0HNFPB0QB8GI2" completed keep alive response.
2025-09-22 04:46:14.264 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:46:14.264 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:46:14.264 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:46:14.265 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 7255.9269ms
2025-09-22 04:47:51.054 +07:00 [DBG] Connection id "0HNFPB0QB8GI3" disconnecting.
2025-09-22 04:47:51.055 +07:00 [DBG] Connection id "0HNFPB0QB8GI3" stopped.
2025-09-22 04:47:51.058 +07:00 [DBG] Connection id "0HNFPB0QB8GI3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:48:25.333 +07:00 [DBG] Connection id "0HNFPB0QB8GI2" disconnecting.
2025-09-22 04:48:25.333 +07:00 [DBG] Connection id "0HNFPB0QB8GI2" stopped.
2025-09-22 04:48:25.334 +07:00 [DBG] Connection id "0HNFPB0QB8GI2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:48:27.362 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" accepted.
2025-09-22 04:48:27.362 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" started.
2025-09-22 04:48:27.373 +07:00 [DBG] Connection id "0HNFPB0QB8GI5" accepted.
2025-09-22 04:48:27.373 +07:00 [DBG] Connection id "0HNFPB0QB8GI5" started.
2025-09-22 04:48:27.374 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:48:27.375 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:48:27.375 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:48:27.375 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:48:27.375 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 1.0546ms
2025-09-22 04:48:27.418 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:48:27.418 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:48:27.418 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:48:27.418 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 0.5052ms
2025-09-22 04:48:27.641 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:48:27.686 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:48:27.686 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 44.7652ms
2025-09-22 04:48:52.450 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 04:48:52.450 +07:00 [DBG] POST requests are not supported
2025-09-22 04:48:52.450 +07:00 [DBG] POST requests are not supported
2025-09-22 04:48:52.451 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 04:48:52.451 +07:00 [INF] CORS policy execution successful.
2025-09-22 04:48:52.452 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:48:52.452 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:48:52.452 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:48:52.456 +07:00 [DBG] Successfully validated the token.
2025-09-22 04:48:52.456 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 04:48:52.462 +07:00 [DBG] Authorization was successful.
2025-09-22 04:48:52.465 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:48:52.483 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 04:48:52.483 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 04:48:52.483 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 04:48:52.484 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 04:48:52.484 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 04:48:52.484 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 04:48:52.486 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:48:52.491 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:48:52.493 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:48:52.495 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 04:48:52.495 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:48:52.496 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:48:52.496 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:48:52.497 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 04:48:52.498 +07:00 [DBG] Connection id "0HNFPB0QB8GI4", Request id "0HNFPB0QB8GI4:00000004": started reading request body.
2025-09-22 04:48:52.498 +07:00 [DBG] Connection id "0HNFPB0QB8GI4", Request id "0HNFPB0QB8GI4:00000004": done reading request body.
2025-09-22 04:48:52.502 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 04:48:52.502 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:48:52.503 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:48:52.503 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:48:52.505 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:48:52.505 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:48:52.506 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 04:48:52.506 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:48:52.507 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:48:52.507 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:48:52.508 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:48:52.509 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 04:48:52.509 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T21:48:43.4080000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 04:48:52.530 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:48:52.533 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:48:52.533 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 04:48:52.533 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:48:52.534 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:48:52.534 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:48:52.535 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:48:52.535 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:48:52.535 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:48:52.545 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:48:52.546 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:48:52.546 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:48:52.546 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:48:52.546 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:48:52.548 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:48:52.549 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:48:52.549 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:48:52.549 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:48:52.549 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:48:52.550 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:48:52.632 +07:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:48:52.633 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:48:52.633 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:48:52.633 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:48:52.633 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:48:52.662 +07:00 [DBG] Reviewer 7 skipped because current active assignments (1) >= 5
2025-09-22 04:48:52.662 +07:00 [DBG] Reviewer 9 skipped because current active assignments (1) >= 5
2025-09-22 04:48:52.662 +07:00 [DBG] Reviewer 10 skipped because current active assignments (1) >= 5
2025-09-22 04:48:52.662 +07:00 [DBG] Reviewer 11 skipped because current active assignments (1) >= 5
2025-09-22 04:48:58.307 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt)
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions)
2025-09-22 04:48:58.310 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 04:48:58.310 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 04:48:58.310 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 04:48:58.311 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 04:48:58.311 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 04:48:58.339 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5854.4723ms
2025-09-22 04:48:58.340 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:48:58.341 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:48:58.344 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:48:58.345 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:48:58.345 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:48:58.345 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 5895.6062ms
2025-09-22 04:50:39.328 +07:00 [DBG] Connection id "0HNFPB0QB8GI5" disconnecting.
2025-09-22 04:50:39.328 +07:00 [DBG] Connection id "0HNFPB0QB8GI5" stopped.
2025-09-22 04:50:39.329 +07:00 [DBG] Connection id "0HNFPB0QB8GI5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:50:59.329 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-22 04:50:59.329 +07:00 [DBG] POST requests are not supported
2025-09-22 04:50:59.329 +07:00 [DBG] POST requests are not supported
2025-09-22 04:50:59.330 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 04:50:59.330 +07:00 [INF] CORS policy execution successful.
2025-09-22 04:50:59.337 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:50:59.337 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:50:59.337 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:50:59.342 +07:00 [DBG] Successfully validated the token.
2025-09-22 04:50:59.343 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 04:50:59.347 +07:00 [DBG] Authorization was successful.
2025-09-22 04:50:59.348 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:50:59.348 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 04:50:59.348 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 04:50:59.348 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 04:50:59.348 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 04:50:59.348 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 04:50:59.348 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 04:50:59.348 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:50:59.363 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:50:59.364 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:50:59.364 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 04:50:59.365 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:50:59.365 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:50:59.365 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:50:59.365 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 04:50:59.365 +07:00 [DBG] Connection id "0HNFPB0QB8GI4", Request id "0HNFPB0QB8GI4:00000005": started reading request body.
2025-09-22 04:50:59.365 +07:00 [DBG] Connection id "0HNFPB0QB8GI4", Request id "0HNFPB0QB8GI4:00000005": done reading request body.
2025-09-22 04:50:59.366 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 04:50:59.368 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:50:59.368 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:50:59.368 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:50:59.368 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:50:59.368 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:50:59.369 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 04:50:59.369 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:50:59.369 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:50:59.369 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:50:59.369 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:50:59.369 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 04:50:59.370 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T21:48:43.4080000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 04:50:59.371 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:50:59.372 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:50:59.372 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 04:50:59.372 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:50:59.373 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:50:59.373 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:50:59.373 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:50:59.374 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:50:59.374 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:50:59.385 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:50:59.386 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:50:59.386 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:50:59.386 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:50:59.386 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:50:59.388 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:50:59.388 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:50:59.388 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:50:59.389 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:50:59.389 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:50:59.389 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:50:59.464 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:50:59.464 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:50:59.465 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:50:59.465 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:50:59.465 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:50:59.465 +07:00 [DBG] Reviewer 7 skipped because current active assignments (1) >= 5
2025-09-22 04:50:59.465 +07:00 [DBG] Reviewer 9 skipped because current active assignments (1) >= 5
2025-09-22 04:50:59.465 +07:00 [DBG] Reviewer 10 skipped because current active assignments (1) >= 5
2025-09-22 04:50:59.465 +07:00 [DBG] Reviewer 11 skipped because current active assignments (1) >= 5
2025-09-22 04:51:05.214 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt)
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions)
2025-09-22 04:51:05.216 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 04:51:05.216 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 04:51:05.216 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 04:51:05.217 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 04:51:05.218 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 04:51:05.218 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5869.6861ms
2025-09-22 04:51:05.218 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:51:05.218 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:51:05.218 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:51:05.218 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:51:05.219 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:51:05.219 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 5889.599ms
2025-09-22 04:52:37.952 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:52:37.953 +07:00 [DBG] Connection id "0HNFPB0QB8GI6" accepted.
2025-09-22 04:52:37.953 +07:00 [DBG] Connection id "0HNFPB0QB8GI6" started.
2025-09-22 04:52:37.955 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:52:37.955 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:52:37.956 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:52:37.956 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 3.6315ms
2025-09-22 04:52:37.985 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:52:37.985 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:52:37.985 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:52:37.985 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 0.245ms
2025-09-22 04:52:38.346 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:52:38.393 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:52:38.393 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 47.3851ms
2025-09-22 04:54:43.072 +07:00 [DBG] Connection id "0HNFPB0QB8GI6" received FIN.
2025-09-22 04:54:43.072 +07:00 [DBG] Connection id "0HNFPB0QB8GI6" disconnecting.
2025-09-22 04:54:43.072 +07:00 [DBG] Connection id "0HNFPB0QB8GI6" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:54:43.077 +07:00 [DBG] Connection id "0HNFPB0QB8GI6" stopped.
2025-09-22 04:54:43.077 +07:00 [DBG] Connection id "0HNFPB0QB8GI7" accepted.
2025-09-22 04:54:43.077 +07:00 [DBG] Connection id "0HNFPB0QB8GI7" started.
2025-09-22 04:54:43.078 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:54:43.082 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:54:43.083 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:54:43.083 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:54:43.083 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 5.2034ms
2025-09-22 04:54:43.116 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:54:43.116 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:54:43.116 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:54:43.116 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 0.2341ms
2025-09-22 04:54:43.483 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:54:43.514 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:54:43.514 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 31.6609ms
2025-09-22 04:55:04.327 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:55:04.327 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:55:04.327 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:55:04.327 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:55:04.327 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 0.766ms
2025-09-22 04:55:04.348 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:55:04.349 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:55:04.349 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:55:04.349 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 0.4476ms
2025-09-22 04:55:04.529 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:55:04.555 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:55:04.555 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 25.8843ms
2025-09-22 04:55:14.942 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:55:14.944 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:55:14.945 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:55:14.945 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:55:14.945 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 3.235ms
2025-09-22 04:55:14.955 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:55:14.956 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:55:14.956 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:55:14.956 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 0.3658ms
2025-09-22 04:55:15.082 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:55:15.123 +07:00 [DBG] Connection id "0HNFPB0QB8GI4" completed keep alive response.
2025-09-22 04:55:15.123 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 40.7704ms
2025-09-22 04:57:48.000 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 04:57:48.056 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 04:57:48.198 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.211 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.220 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.222 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.222 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.222 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.358 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.359 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.370 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.371 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.371 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.372 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.376 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.376 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 04:57:48.414 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 04:57:48.415 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 04:57:48.416 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 04:57:48.514 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:57:48.514 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:57:48.514 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:57:48.514 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:57:48.514 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:57:48.515 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:57:48.515 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:57:48.515 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:57:48.515 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:57:48.515 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:57:48.515 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 04:57:48.614 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:57:48.652 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 04:57:48.747 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:57:48.770 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:57:48.780 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-22 04:57:48.783 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:48.878 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:48.880 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:57:48.883 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:57:48.888 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 04:57:48.894 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:57:48.929 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:57:48.963 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:57:48.978 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:57:48.982 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 49ms reading results.
2025-09-22 04:57:48.983 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:48.987 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 04:57:48.989 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:48.990 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:48.991 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:57:48.991 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:48.991 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:48.991 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:57:48.996 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:57:48.996 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:57:48.997 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:57:48.997 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 04:57:48.997 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:48.997 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:57:48.998 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:48.998 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:48.998 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:57:48.998 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:48.998 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:48.998 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:57:49.001 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:57:49.001 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:57:49.001 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.002 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:57:49.002 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.002 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:57:49.002 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.003 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.003 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:57:49.003 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:49.003 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:49.003 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:57:49.006 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 04:57:49.007 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:57:49.007 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.007 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:57:49.007 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.007 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:57:49.010 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 04:57:49.016 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:57:49.017 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.018 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.018 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:57:49.018 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:49.018 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:49.018 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:57:49.023 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:57:49.046 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:57:49.067 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.068 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 44ms reading results.
2025-09-22 04:57:49.068 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.068 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:57:49.071 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 04:57:49.073 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.073 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.073 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:57:49.073 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:49.073 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:49.073 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:57:49.079 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:57:49.079 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:57:49.080 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.080 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:57:49.080 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.080 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:57:49.080 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 04:57:49.080 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.081 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.081 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:57:49.081 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:49.081 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:49.081 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:57:49.085 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:57:49.086 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:57:49.086 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.086 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:57:49.086 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.086 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:57:49.087 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.087 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.087 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:57:49.087 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:49.087 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:57:49.087 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:57:49.092 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 04:57:49.093 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 04:57:49.093 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.093 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 04:57:49.094 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.094 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:57:49.094 +07:00 [INF] Data seeding completed successfully
2025-09-22 04:57:49.095 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:57:49.096 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:57:49.097 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:57:49.109 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 04:57:49.207 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 04:57:49.277 +07:00 [DBG] Hosting starting
2025-09-22 04:57:49.283 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 04:57:49.284 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 04:57:49.284 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 04:57:49.287 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 04:57:49.289 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 04:57:49.289 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 04:57:49.293 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 04:57:49.295 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:57:49.295 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 04:57:49.297 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 04:57:49.297 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 04:57:49.298 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 04:57:49.298 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 04:57:49.299 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 04:57:49.302 +07:00 [DBG] Middleware loaded
2025-09-22 04:57:49.303 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 04:57:49.303 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 04:57:49.325 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 04:57:49.335 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 04:57:49.335 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 04:57:49.335 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 04:57:49.335 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 04:57:49.335 +07:00 [INF] Hosting environment: Development
2025-09-22 04:57:49.335 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 04:57:49.337 +07:00 [DBG] Hosting started
2025-09-22 04:57:49.448 +07:00 [DBG] Connection id "0HNFPB7JUBK54" accepted.
2025-09-22 04:57:49.449 +07:00 [DBG] Connection id "0HNFPB7JUBK54" started.
2025-09-22 04:57:49.472 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 04:57:49.480 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 04:57:49.519 +07:00 [DBG] Connection id "0HNFPB7JUBK55" accepted.
2025-09-22 04:57:49.521 +07:00 [DBG] Connection id "0HNFPB7JUBK55" started.
2025-09-22 04:57:49.594 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 04:57:49.602 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 04:57:49.603 +07:00 [DBG] Connection id "0HNFPB7JUBK54" completed keep alive response.
2025-09-22 04:57:49.604 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 132.6808ms
2025-09-22 04:57:49.609 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 04:57:49.611 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 04:57:49.612 +07:00 [DBG] Connection id "0HNFPB7JUBK54" completed keep alive response.
2025-09-22 04:57:49.612 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.6059ms
2025-09-22 04:57:49.661 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 04:57:49.857 +07:00 [DBG] Connection id "0HNFPB7JUBK54" completed keep alive response.
2025-09-22 04:57:49.858 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 196.7447ms
2025-09-22 04:58:24.610 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 04:58:24.614 +07:00 [DBG] POST requests are not supported
2025-09-22 04:58:24.615 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 04:58:24.616 +07:00 [DBG] POST requests are not supported
2025-09-22 04:58:24.619 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 04:58:24.620 +07:00 [INF] CORS policy execution successful.
2025-09-22 04:58:24.687 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:58:24.688 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:58:24.690 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:58:24.795 +07:00 [DBG] Successfully validated the token.
2025-09-22 04:58:24.797 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 04:58:24.804 +07:00 [DBG] Authorization was successful.
2025-09-22 04:58:24.816 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:58:24.843 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 04:58:24.847 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 04:58:24.848 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 04:58:24.851 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 04:58:24.853 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 04:58:24.853 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 04:58:24.856 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:58:25.002 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:58:25.010 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:58:25.015 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 04:58:25.022 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:58:25.022 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:58:25.022 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:58:25.023 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 04:58:25.048 +07:00 [DBG] Connection id "0HNFPB7JUBK54", Request id "0HNFPB7JUBK54:00000004": started reading request body.
2025-09-22 04:58:25.049 +07:00 [DBG] Connection id "0HNFPB7JUBK54", Request id "0HNFPB7JUBK54:00000004": done reading request body.
2025-09-22 04:58:25.059 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 04:58:25.060 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:58:25.060 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:58:25.061 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:58:25.073 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:58:25.074 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:58:25.075 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 04:58:25.077 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:58:25.077 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:58:25.078 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:58:25.078 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:58:25.084 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 04:58:25.088 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T21:58:03.6930000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 04:58:25.196 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:58:25.226 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 04:58:25.265 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 04:58:25.420 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 04:58:25.434 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:58:25.435 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 04:58:25.435 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:58:25.436 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:58:25.437 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:58:25.438 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-22 04:58:25.442 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-09-22 04:58:25.445 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:58:25.456 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:58:25.465 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:58:25.465 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 8ms reading results.
2025-09-22 04:58:25.466 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:58:25.466 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:58:25.479 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 04:58:25.495 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 04:58:25.497 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 04:58:25.498 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 04:58:25.499 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 04:58:25.615 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 04:58:25.628 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 04:58:25.638 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:58:25.639 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:58:25.640 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:58:25.640 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:58:25.640 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:58:25.641 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:58:25.719 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:58:25.734 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:58:25.735 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 15ms reading results.
2025-09-22 04:58:25.735 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:58:25.736 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:58:25.762 +07:00 [DBG] Reviewer 7 skipped because current active assignments (1) >= 5
2025-09-22 04:58:25.763 +07:00 [DBG] Reviewer 9 skipped because current active assignments (1) >= 5
2025-09-22 04:58:25.763 +07:00 [DBG] Reviewer 10 skipped because current active assignments (1) >= 5
2025-09-22 04:58:25.763 +07:00 [DBG] Reviewer 11 skipped because current active assignments (1) >= 5
2025-09-22 04:58:31.570 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 610
2025-09-22 04:58:31.605 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 04:58:31.608 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 04:58:31.609 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 04:58:31.613 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 04:58:31.614 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 04:58:31.746 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6888.152ms
2025-09-22 04:58:31.747 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:58:31.751 +07:00 [DBG] Connection id "0HNFPB7JUBK54" completed keep alive response.
2025-09-22 04:58:31.751 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:58:31.752 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:58:31.752 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:58:31.755 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 7145.1005ms
2025-09-22 04:59:26.534 +07:00 [DBG] Connection id "0HNFPB7JUBK55" received FIN.
2025-09-22 04:59:26.534 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 04:59:26.535 +07:00 [DBG] POST requests are not supported
2025-09-22 04:59:26.535 +07:00 [DBG] POST requests are not supported
2025-09-22 04:59:26.540 +07:00 [DBG] Connection id "0HNFPB7JUBK55" disconnecting.
2025-09-22 04:59:26.536 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 04:59:26.541 +07:00 [INF] CORS policy execution successful.
2025-09-22 04:59:26.541 +07:00 [DBG] Connection id "0HNFPB7JUBK55" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 04:59:26.545 +07:00 [DBG] Connection id "0HNFPB7JUBK55" stopped.
2025-09-22 04:59:26.550 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:59:26.550 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 04:59:26.550 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:59:26.556 +07:00 [DBG] Successfully validated the token.
2025-09-22 04:59:26.556 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 04:59:26.561 +07:00 [DBG] Authorization was successful.
2025-09-22 04:59:26.563 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:59:26.564 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 04:59:26.566 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 04:59:26.567 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 04:59:26.568 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 04:59:26.568 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 04:59:26.568 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 04:59:26.570 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:59:26.575 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 04:59:26.577 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:59:26.578 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 04:59:26.579 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:59:26.579 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:59:26.580 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 04:59:26.580 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 04:59:26.581 +07:00 [DBG] Connection id "0HNFPB7JUBK54", Request id "0HNFPB7JUBK54:00000005": started reading request body.
2025-09-22 04:59:26.581 +07:00 [DBG] Connection id "0HNFPB7JUBK54", Request id "0HNFPB7JUBK54:00000005": done reading request body.
2025-09-22 04:59:26.582 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 04:59:26.582 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:59:26.582 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:59:26.583 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 04:59:26.584 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 04:59:26.584 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:59:26.585 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 04:59:26.585 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:59:26.586 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:59:26.586 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 04:59:26.586 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 04:59:26.587 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 04:59:26.588 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T21:58:03.6930000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 04:59:26.608 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 04:59:26.611 +07:00 [DBG] Creating DbConnection.
2025-09-22 04:59:26.611 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 04:59:26.612 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:59:26.612 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:59:26.612 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:59:26.613 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:59:26.613 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:59:26.613 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:59:26.622 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 04:59:26.623 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:59:26.623 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 04:59:26.623 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:59:26.624 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:59:26.625 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:59:26.626 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:59:26.626 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 04:59:26.627 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:59:26.627 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 04:59:26.627 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:59:26.702 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 04:59:26.704 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 04:59:26.704 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 04:59:26.704 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:59:26.704 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 04:59:26.705 +07:00 [DBG] Reviewer 7 skipped because current active assignments (1) >= 5
2025-09-22 04:59:26.706 +07:00 [DBG] Reviewer 9 skipped because current active assignments (1) >= 5
2025-09-22 04:59:26.706 +07:00 [DBG] Reviewer 10 skipped because current active assignments (1) >= 5
2025-09-22 04:59:26.706 +07:00 [DBG] Reviewer 11 skipped because current active assignments (1) >= 5
2025-09-22 04:59:32.301 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 610
2025-09-22 04:59:32.305 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 04:59:32.305 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 04:59:32.305 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 04:59:32.306 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 04:59:32.307 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 04:59:32.307 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5738.8179ms
2025-09-22 04:59:32.308 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 04:59:32.308 +07:00 [DBG] Connection id "0HNFPB7JUBK54" completed keep alive response.
2025-09-22 04:59:32.308 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 04:59:32.308 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 04:59:32.308 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 04:59:32.308 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 5773.9846ms
2025-09-22 05:00:33.599 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 05:00:33.599 +07:00 [DBG] POST requests are not supported
2025-09-22 05:00:33.599 +07:00 [DBG] POST requests are not supported
2025-09-22 05:00:33.599 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 05:00:33.599 +07:00 [INF] CORS policy execution successful.
2025-09-22 05:00:33.600 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 05:00:33.600 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 05:00:33.600 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:00:33.607 +07:00 [DBG] Successfully validated the token.
2025-09-22 05:00:33.608 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 05:00:33.611 +07:00 [DBG] Authorization was successful.
2025-09-22 05:00:33.612 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:00:33.612 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 05:00:33.612 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 05:00:33.612 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 05:00:33.612 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 05:00:33.613 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 05:00:33.613 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 05:00:33.613 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 05:00:33.625 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 05:00:33.626 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 05:00:33.626 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 05:00:33.627 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:00:33.627 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:00:33.627 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:00:33.627 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 05:00:33.627 +07:00 [DBG] Connection id "0HNFPB7JUBK54", Request id "0HNFPB7JUBK54:00000006": started reading request body.
2025-09-22 05:00:33.627 +07:00 [DBG] Connection id "0HNFPB7JUBK54", Request id "0HNFPB7JUBK54:00000006": done reading request body.
2025-09-22 05:00:33.627 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 05:00:33.627 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:00:33.627 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:00:33.628 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 05:00:33.628 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:00:33.628 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 05:00:33.628 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 05:00:33.628 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:00:33.628 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:00:33.628 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 05:00:33.629 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:00:33.629 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 05:00:33.629 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T21:58:03.6930000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 05:00:33.636 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 05:00:33.636 +07:00 [DBG] Creating DbConnection.
2025-09-22 05:00:33.636 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 05:00:33.637 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:33.637 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:33.637 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:00:33.637 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:00:33.638 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:00:33.638 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 05:00:33.648 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 05:00:33.648 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:00:33.649 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:00:33.649 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:33.649 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:00:33.651 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:33.652 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:33.652 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:00:33.653 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:00:33.653 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 05:00:33.654 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 05:00:33.730 +07:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 05:00:33.732 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:00:33.732 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 05:00:33.732 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:33.732 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:00:33.733 +07:00 [DBG] Reviewer 7 skipped because current active assignments (1) >= 5
2025-09-22 05:00:33.733 +07:00 [DBG] Reviewer 9 skipped because current active assignments (1) >= 5
2025-09-22 05:00:33.733 +07:00 [DBG] Reviewer 10 skipped because current active assignments (1) >= 5
2025-09-22 05:00:33.733 +07:00 [DBG] Reviewer 11 skipped because current active assignments (1) >= 5
2025-09-22 05:00:39.608 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 610
2025-09-22 05:00:39.609 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 05:00:39.609 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 05:00:39.609 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 05:00:39.609 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 05:00:39.609 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 05:00:39.610 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5997.0556ms
2025-09-22 05:00:39.610 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:00:39.610 +07:00 [DBG] Connection id "0HNFPB7JUBK54" completed keep alive response.
2025-09-22 05:00:39.610 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 05:00:39.610 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:39.610 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 05:00:39.610 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 6011.5912ms
2025-09-22 05:00:42.048 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 05:00:42.048 +07:00 [DBG] POST requests are not supported
2025-09-22 05:00:42.048 +07:00 [DBG] POST requests are not supported
2025-09-22 05:00:42.048 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 05:00:42.048 +07:00 [INF] CORS policy execution successful.
2025-09-22 05:00:42.048 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 05:00:42.048 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 05:00:42.048 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:00:42.049 +07:00 [DBG] Successfully validated the token.
2025-09-22 05:00:42.049 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 05:00:42.049 +07:00 [DBG] Authorization was successful.
2025-09-22 05:00:42.049 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:00:42.049 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 05:00:42.049 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 05:00:42.049 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 05:00:42.049 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 05:00:42.049 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 05:00:42.050 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 05:00:42.050 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 05:00:42.050 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 05:00:42.050 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 05:00:42.051 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 05:00:42.051 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:00:42.051 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:00:42.051 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:00:42.051 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 05:00:42.051 +07:00 [DBG] Connection id "0HNFPB7JUBK54", Request id "0HNFPB7JUBK54:00000007": started reading request body.
2025-09-22 05:00:42.052 +07:00 [DBG] Connection id "0HNFPB7JUBK54", Request id "0HNFPB7JUBK54:00000007": done reading request body.
2025-09-22 05:00:42.052 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 05:00:42.052 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:00:42.052 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:00:42.053 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 05:00:42.053 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:00:42.053 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 05:00:42.053 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 05:00:42.053 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:00:42.053 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:00:42.054 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 05:00:42.054 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:00:42.054 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 05:00:42.054 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T21:58:03.6930000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 05:00:42.055 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 05:00:42.056 +07:00 [DBG] Creating DbConnection.
2025-09-22 05:00:42.056 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 05:00:42.056 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:42.057 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:42.057 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:00:42.057 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:00:42.057 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:00:42.058 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 05:00:42.062 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 05:00:42.062 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:00:42.062 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:00:42.062 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:42.062 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:00:42.063 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:42.063 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:42.063 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:00:42.063 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:00:42.063 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:00:42.064 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 05:00:42.068 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 05:00:42.069 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:00:42.069 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:00:42.069 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:42.069 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:00:42.070 +07:00 [DBG] Reviewer 7 skipped because current active assignments (1) >= 5
2025-09-22 05:00:42.070 +07:00 [DBG] Reviewer 9 skipped because current active assignments (1) >= 5
2025-09-22 05:00:42.070 +07:00 [DBG] Reviewer 10 skipped because current active assignments (1) >= 5
2025-09-22 05:00:42.070 +07:00 [DBG] Reviewer 11 skipped because current active assignments (1) >= 5
2025-09-22 05:00:47.676 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 610
2025-09-22 05:00:47.679 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 05:00:47.679 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 05:00:47.679 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 05:00:47.680 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 05:00:47.680 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 05:00:47.680 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 5630.8785ms
2025-09-22 05:00:47.681 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:00:47.681 +07:00 [DBG] Connection id "0HNFPB7JUBK54" completed keep alive response.
2025-09-22 05:00:47.681 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 05:00:47.681 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:00:47.681 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 05:00:47.682 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 5634.2015ms
2025-09-22 05:01:04.944 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 05:01:04.944 +07:00 [DBG] POST requests are not supported
2025-09-22 05:01:04.944 +07:00 [DBG] POST requests are not supported
2025-09-22 05:01:04.944 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 05:01:04.944 +07:00 [INF] CORS policy execution successful.
2025-09-22 05:01:04.944 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 05:01:04.945 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 05:01:04.945 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:01:04.945 +07:00 [DBG] Successfully validated the token.
2025-09-22 05:01:04.945 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 05:01:04.945 +07:00 [DBG] Authorization was successful.
2025-09-22 05:01:04.946 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:01:04.946 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 05:01:04.946 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 05:01:04.946 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 05:01:04.946 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 05:01:04.947 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 05:01:04.947 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 05:01:04.947 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 05:01:04.947 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 05:01:04.948 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 05:01:04.948 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 05:01:04.948 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:01:04.948 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:01:04.948 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:01:04.949 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 05:01:04.949 +07:00 [DBG] Connection id "0HNFPB7JUBK54", Request id "0HNFPB7JUBK54:00000008": started reading request body.
2025-09-22 05:01:04.950 +07:00 [DBG] Connection id "0HNFPB7JUBK54", Request id "0HNFPB7JUBK54:00000008": done reading request body.
2025-09-22 05:01:04.950 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 05:01:04.950 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:01:04.950 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:01:04.950 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 05:01:04.951 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:01:04.951 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 05:01:04.951 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 05:01:04.951 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:01:04.951 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:01:04.951 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 05:01:04.951 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:01:04.951 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 05:01:04.951 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T21:58:03.6930000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 05:01:04.953 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 05:01:04.954 +07:00 [DBG] Creating DbConnection.
2025-09-22 05:01:04.954 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-22 05:01:04.954 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:04.955 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:04.956 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:01:04.956 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:04.956 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:04.956 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 05:01:04.967 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 05:01:04.967 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:01:04.967 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:01:04.967 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:04.967 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:01:04.968 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:04.969 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:04.969 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:01:04.969 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:04.970 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:04.970 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 05:01:05.066 +07:00 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 05:01:05.067 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:01:05.067 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 05:01:05.067 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:05.067 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:01:05.120 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 05:01:05.121 +07:00 [DBG] Reviewer 9 skipped because current active assignments (1) >= 5
2025-09-22 05:01:05.121 +07:00 [DBG] Reviewer 10 skipped because current active assignments (1) >= 5
2025-09-22 05:01:05.121 +07:00 [DBG] Reviewer 11 skipped because current active assignments (1) >= 5
2025-09-22 05:01:10.950 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 610
2025-09-22 05:01:10.994 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 05:01:11.020 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:01:11.023 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.024 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.024 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:01:11.024 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.024 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.025 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 05:01:11.034 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 05:01:11.035 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.035 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:01:11.035 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.035 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:01:11.037 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 05:01:11.038 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 05:01:11.065 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:01:11.067 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.067 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.067 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:01:11.068 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.068 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.068 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 05:01:11.076 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 05:01:11.076 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.076 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:01:11.076 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.076 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:01:11.079 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 05:01:11.080 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 05:01:11.091 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 05:01:11.093 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.093 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.093 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:01:11.093 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.093 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.093 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 05:01:11.099 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 05:01:11.100 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.100 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:01:11.100 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.100 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:01:11.105 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 05:01:11.113 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:01:11.120 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.120 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.120 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:01:11.120 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.120 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.120 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 05:01:11.124 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 05:01:11.124 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.125 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:01:11.125 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.125 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:01:11.126 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.ReviewerId == __dto_ReviewerId_0 && (int)ra.Status == 1 || (int)ra.Status == 2)'
2025-09-22 05:01:11.146 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<ReviewerAssignment>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
        SELECT r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
        FROM reviewer_assignments AS r
        WHERE (r.ReviewerId == @__dto_ReviewerId_0) && r.Status IN (1, 2)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 05:01:11.153 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.154 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.154 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:01:11.154 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.154 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.154 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 05:01:11.159 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[ReviewerId] = @__dto_ReviewerId_0 AND [r].[Status] IN (1, 2)
2025-09-22 05:01:11.160 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.160 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:01:11.160 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.160 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:01:11.201 +07:00 [DBG] 'MyDbContext' generated a temporary value for the property 'ReviewerAssignment.Id'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:01:11.278 +07:00 [DBG] Context 'MyDbContext' started tracking 'ReviewerAssignment' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:01:11.287 +07:00 [DBG] SaveChanges starting for 'MyDbContext'.
2025-09-22 05:01:11.299 +07:00 [DBG] DetectChanges starting for 'MyDbContext'.
2025-09-22 05:01:11.381 +07:00 [DBG] DetectChanges completed for 'MyDbContext'.
2025-09-22 05:01:11.499 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.500 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.503 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:01:11.504 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.509 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (5ms).
2025-09-22 05:01:11.509 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 05:01:11.521 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = DateTime2), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = DateTime2), @p4='?' (DbType = DateTime2), @p5='?' (DbType = Int32), @p6='?' (Precision = 3) (Scale = 2) (DbType = Decimal), @p7='?' (DbType = DateTime2), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [reviewer_assignments] ([AssignedAt], [AssignedBy], [AssignmentType], [CompletedAt], [Deadline], [ReviewerId], [SkillMatchScore], [StartedAt], [Status], [SubmissionId])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9);
2025-09-22 05:01:11.545 +07:00 [DBG] The foreign key property 'ReviewerAssignment.Id' was detected as changed. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see property values.
2025-09-22 05:01:11.555 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.555 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 33ms reading results.
2025-09-22 05:01:11.557 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.557 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:01:11.575 +07:00 [DBG] An entity of type 'ReviewerAssignment' tracked by 'MyDbContext' changed state from '"Added"' to '"Unchanged"'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:01:11.578 +07:00 [DBG] SaveChanges completed for 'MyDbContext' with 1 entities written to the database.
2025-09-22 05:01:11.579 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Include(ra => ra.Reviewer)
    .Include(ra => ra.AssignedByUser)
    .Include(ra => ra.Submission)
    .Include(ra => ra.Submission.TopicVersion)
    .Include(ra => ra.Submission.TopicVersion.Topic)
    .Where(ra => ra.Id == __assignment_Id_0)
    .FirstOrDefault()'
2025-09-22 05:01:11.584 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Reviewer'.
2025-09-22 05:01:11.585 +07:00 [DBG] Including navigation: 'ReviewerAssignment.AssignedByUser'.
2025-09-22 05:01:11.586 +07:00 [DBG] Including navigation: 'ReviewerAssignment.Submission'.
2025-09-22 05:01:11.587 +07:00 [DBG] Including navigation: 'Submission.TopicVersion'.
2025-09-22 05:01:11.590 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-22 05:01:11.641 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
                1 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 11], [Property: User.AccessFailedCount (int) Required, 12], [Property: User.ConcurrencyStamp (string), 13], [Property: User.CreatedAt (DateTime) Required, 14], [Property: User.DeletedAt (DateTime?), 15], [Property: User.Email (string), 16], [Property: User.EmailConfirmed (bool) Required, 17], [Property: User.LastModifiedAt (DateTime) Required, 18], [Property: User.LastModifiedBy (string), 19], [Property: User.LockoutEnabled (bool) Required, 20], [Property: User.LockoutEnd (DateTimeOffset?), 21], [Property: User.NormalizedEmail (string), 22], [Property: User.NormalizedUserName (string), 23], [Property: User.PasswordHash (string), 24], [Property: User.PhoneNumber (string), 25], [Property: User.PhoneNumberConfirmed (bool) Required, 26], [Property: User.SecurityStamp (string), 27], [Property: User.TwoFactorEnabled (bool) Required, 28], [Property: User.UserName (string), 29] }
                2 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 30], [Property: User.AccessFailedCount (int) Required, 31], [Property: User.ConcurrencyStamp (string), 32], [Property: User.CreatedAt (DateTime) Required, 33], [Property: User.DeletedAt (DateTime?), 34], [Property: User.Email (string), 35], [Property: User.EmailConfirmed (bool) Required, 36], [Property: User.LastModifiedAt (DateTime) Required, 37], [Property: User.LastModifiedBy (string), 38], [Property: User.LockoutEnabled (bool) Required, 39], [Property: User.LockoutEnd (DateTimeOffset?), 40], [Property: User.NormalizedEmail (string), 41], [Property: User.NormalizedUserName (string), 42], [Property: User.PasswordHash (string), 43], [Property: User.PhoneNumber (string), 44], [Property: User.PhoneNumberConfirmed (bool) Required, 45], [Property: User.SecurityStamp (string), 46], [Property: User.TwoFactorEnabled (bool) Required, 47], [Property: User.UserName (string), 48] }
                3 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 49], [Property: Submission.AdditionalNotes (string), 50], [Property: Submission.AiCheckDetails (string), 51], [Property: Submission.AiCheckScore (decimal?), 52], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 53], [Property: Submission.CreatedAt (DateTime) Required, 54], [Property: Submission.CreatedBy (string), 55], [Property: Submission.DeletedAt (DateTime?), 56], [Property: Submission.DocumentUrl (string) MaxLength(500), 57], [Property: Submission.IsActive (bool) Required, 58], [Property: Submission.LastModifiedAt (DateTime?), 59], [Property: Submission.LastModifiedBy (string), 60], [Property: Submission.PhaseId (int) Required FK Index, 61], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 62], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 63], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 64], [Property: Submission.SubmittedBy (int) Required FK Index, 65], [Property: Submission.TopicId (int) Required FK Index, 66], [Property: Submission.TopicVersionId (int?) FK Index, 67] }
                4 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 68], [Property: TopicVersion.Content (string), 69], [Property: TopicVersion.Context (string), 70], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 71], [Property: TopicVersion.CreatedBy (string), 72], [Property: TopicVersion.DeletedAt (DateTime?), 73], [Property: TopicVersion.Description (string), 74], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 75], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 76], [Property: TopicVersion.ExpectedOutcomes (string), 77], [Property: TopicVersion.IsActive (bool) Required, 78], [Property: TopicVersion.LastModifiedAt (DateTime?), 79], [Property: TopicVersion.LastModifiedBy (string), 80], [Property: TopicVersion.Methodology (string), 81], [Property: TopicVersion.Objectives (string), 82], [Property: TopicVersion.Problem (string), 83], [Property: TopicVersion.Requirements (string), 84], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 85], [Property: TopicVersion.SubmittedAt (DateTime?), 86], [Property: TopicVersion.SubmittedBy (int?) FK Index, 87], [Property: TopicVersion.TopicId (int) Required FK Index, 88], [Property: TopicVersion.VN_title (string), 89], [Property: TopicVersion.VersionNumber (int) Required Index, 90] }
                5 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 91], [Property: Topic.Abbreviation (string), 92], [Property: Topic.CategoryId (int?) FK Index, 93], [Property: Topic.Content (string), 94], [Property: Topic.Context (string), 95], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 96], [Property: Topic.CreatedBy (string), 97], [Property: Topic.DeletedAt (DateTime?), 98], [Property: Topic.Description (string), 99], [Property: Topic.EN_Title (string) Required MaxLength(500), 100], [Property: Topic.IsActive (bool) Required, 101], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 102], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 103], [Property: Topic.LastModifiedAt (DateTime?), 104], [Property: Topic.LastModifiedBy (string), 105], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 106], [Property: Topic.Objectives (string), 107], [Property: Topic.Problem (string), 108], [Property: Topic.SemesterId (int) Required FK Index, 109], [Property: Topic.SupervisorId (int) Required FK Index, 110], [Property: Topic.VN_title (string), 111] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, u0.Id, u0.AccessFailedCount, u0.ConcurrencyStamp, u0.CreatedAt, u0.DeletedAt, u0.Email, u0.EmailConfirmed, u0.LastModifiedAt, u0.LastModifiedBy, u0.LockoutEnabled, u0.LockoutEnd, u0.NormalizedEmail, u0.NormalizedUserName, u0.PasswordHash, u0.PhoneNumber, u0.PhoneNumberConfirmed, u0.SecurityStamp, u0.TwoFactorEnabled, u0.UserName, s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM reviewer_assignments AS r
            INNER JOIN users AS u ON r.ReviewerId == u.Id
            INNER JOIN users AS u0 ON r.AssignedBy == u0.Id
            INNER JOIN submissions AS s ON r.SubmissionId == s.Id
            LEFT JOIN topic_versions AS t ON s.TopicVersionId == t.Id
            LEFT JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE r.Id == @__assignment_Id_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:01:11.645 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.645 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.645 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:01:11.645 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.645 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:01:11.645 +07:00 [DBG] Executing DbCommand [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 05:01:11.668 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__assignment_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [u0].[Id], [u0].[AccessFailedCount], [u0].[ConcurrencyStamp], [u0].[CreatedAt], [u0].[DeletedAt], [u0].[Email], [u0].[EmailConfirmed], [u0].[LastModifiedAt], [u0].[LastModifiedBy], [u0].[LockoutEnabled], [u0].[LockoutEnd], [u0].[NormalizedEmail], [u0].[NormalizedUserName], [u0].[PasswordHash], [u0].[PhoneNumber], [u0].[PhoneNumberConfirmed], [u0].[SecurityStamp], [u0].[TwoFactorEnabled], [u0].[UserName], [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [reviewer_assignments] AS [r]
INNER JOIN [users] AS [u] ON [r].[ReviewerId] = [u].[Id]
INNER JOIN [users] AS [u0] ON [r].[AssignedBy] = [u0].[Id]
INNER JOIN [submissions] AS [s] ON [r].[SubmissionId] = [s].[Id]
LEFT JOIN [topic_versions] AS [t] ON [s].[TopicVersionId] = [t].[Id]
LEFT JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [r].[Id] = @__assignment_Id_0
2025-09-22 05:01:11.669 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.669 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 05:01:11.669 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.672 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-22 05:01:11.688 +07:00 [ERR] Error assigning reviewer 7
AutoMapper.AutoMapperMappingException: Error mapping types.

Mapping types:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Type Map configuration:
ReviewerAssignment -> ReviewerAssignmentResponseDTO
App.Entities.Entities.App.ReviewerAssignment -> App.Entities.DTOs.ReviewerAssignment.ReviewerAssignmentResponseDTO

Destination Member:
Reviewer

 ---> AutoMapper.AutoMapperMappingException: Missing type map configuration or unsupported mapping.

Mapping types:
User -> UserOverviewDTO
App.Entities.Entities.Core.User -> App.Entities.DTOs.Accounts.UserOverviewDTO

Destination Member:
Reviewer

   at lambda_method477(Closure, User, UserOverviewDTO, ResolutionContext)
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   --- End of inner exception stack trace ---
   at lambda_method476(Closure, Object, ReviewerAssignmentResponseDTO, ResolutionContext)
   at App.BLL.Implementations.ReviewerAssignmentService.AssignReviewerAsync(AssignReviewerDTO dto, Int32 assignedById) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerAssignmentService.cs:line 193
   at CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId(ReviewerSuggestionBySubmissionInputDTO input, Boolean assign) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Controllers\ReviewerSuggestionController.cs:line 228
2025-09-22 05:01:11.711 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 05:01:11.711 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 05:01:11.712 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 05:01:11.712 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 05:01:11.713 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 05:01:11.725 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6778.3607ms
2025-09-22 05:01:11.725 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:01:11.725 +07:00 [DBG] Connection id "0HNFPB7JUBK54" completed keep alive response.
2025-09-22 05:01:11.726 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 05:01:11.726 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:01:11.726 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 05:01:11.728 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 6781.9951ms
2025-09-22 05:03:22.816 +07:00 [DBG] Connection id "0HNFPB7JUBK54" disconnecting.
2025-09-22 05:03:22.817 +07:00 [DBG] Connection id "0HNFPB7JUBK54" stopped.
2025-09-22 05:03:22.817 +07:00 [DBG] Connection id "0HNFPB7JUBK54" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 05:18:17.400 +07:00 [INF] Application is shutting down...
2025-09-22 05:18:17.402 +07:00 [DBG] Hosting stopping
2025-09-22 05:18:17.422 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 05:18:17.423 +07:00 [DBG] Hosting stopped
2025-09-22 05:18:29.959 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 05:18:30.015 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 05:18:30.155 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.172 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.184 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.185 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.185 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.186 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.322 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.322 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.335 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.335 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.335 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.336 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.339 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.340 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:18:30.374 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 05:18:30.375 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 05:18:30.376 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 05:18:30.376 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 05:18:30.376 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 05:18:30.376 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 05:18:30.376 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 05:18:30.376 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 05:18:30.473 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:18:30.473 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:18:30.473 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:18:30.474 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:18:30.474 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:18:30.474 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:18:30.474 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:18:30.475 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:18:30.475 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:18:30.475 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:18:30.475 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:18:30.573 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 05:18:30.613 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 05:18:30.740 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:18:30.772 +07:00 [DBG] Creating DbConnection.
2025-09-22 05:18:30.783 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 05:18:30.785 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.883 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.885 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:18:30.889 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 05:18:30.893 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-22 05:18:30.897 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:18:30.932 +07:00 [INF] Executed DbCommand (35ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:18:30.957 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:18:30.972 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.976 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 41ms reading results.
2025-09-22 05:18:30.978 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.981 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-22 05:18:30.983 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.984 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.984 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:18:30.984 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:30.984 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:30.984 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:18:30.987 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:18:30.987 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:18:30.988 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.988 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:18:30.988 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.988 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:18:30.988 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.988 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.988 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:18:30.988 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:30.988 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:30.988 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:18:30.989 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:18:30.989 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:18:30.990 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.990 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:18:30.990 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.990 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:18:30.990 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.990 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.990 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:18:30.990 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:30.990 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:30.991 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:18:30.991 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:18:30.991 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:18:30.991 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.991 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:18:30.991 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:30.992 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:18:30.995 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 05:18:31.000 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:18:31.002 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.002 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.002 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:18:31.002 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:31.002 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:31.002 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:18:31.009 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:18:31.029 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:18:31.050 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.050 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 40ms reading results.
2025-09-22 05:18:31.050 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.050 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:18:31.052 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 05:18:31.054 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.054 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.054 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:18:31.054 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:31.054 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:31.054 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:18:31.055 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:18:31.056 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:18:31.056 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.056 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:18:31.056 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.056 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:18:31.057 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 05:18:31.057 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.057 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.058 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:18:31.058 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:31.058 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:31.058 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:18:31.059 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:18:31.059 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:18:31.059 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.059 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:18:31.059 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.059 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:18:31.060 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.060 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.060 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:18:31.060 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:31.060 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:18:31.060 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:18:31.061 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:18:31.061 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:18:31.061 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.062 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:18:31.062 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.062 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:18:31.062 +07:00 [INF] Data seeding completed successfully
2025-09-22 05:18:31.063 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 05:18:31.065 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:18:31.066 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 05:18:31.075 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 05:18:31.196 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 05:18:31.267 +07:00 [DBG] Hosting starting
2025-09-22 05:18:31.274 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 05:18:31.275 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 05:18:31.275 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 05:18:31.279 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 05:18:31.281 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 05:18:31.281 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 05:18:31.285 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 05:18:31.287 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 05:18:31.287 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 05:18:31.288 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 05:18:31.289 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 05:18:31.289 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 05:18:31.290 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 05:18:31.290 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 05:18:31.294 +07:00 [DBG] Middleware loaded
2025-09-22 05:18:31.295 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 05:18:31.295 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 05:18:31.317 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 05:18:31.325 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 05:18:31.325 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 05:18:31.325 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 05:18:31.325 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 05:18:31.325 +07:00 [INF] Hosting environment: Development
2025-09-22 05:18:31.325 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 05:18:31.327 +07:00 [DBG] Hosting started
2025-09-22 05:18:31.440 +07:00 [DBG] Connection id "0HNFPBJ62TICP" accepted.
2025-09-22 05:18:31.441 +07:00 [DBG] Connection id "0HNFPBJ62TICP" started.
2025-09-22 05:18:31.474 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 05:18:31.481 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 05:18:31.512 +07:00 [DBG] Connection id "0HNFPBJ62TICQ" accepted.
2025-09-22 05:18:31.513 +07:00 [DBG] Connection id "0HNFPBJ62TICQ" started.
2025-09-22 05:18:31.601 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 05:18:31.608 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 05:18:31.609 +07:00 [DBG] Connection id "0HNFPBJ62TICP" completed keep alive response.
2025-09-22 05:18:31.611 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 139.0285ms
2025-09-22 05:18:31.618 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 05:18:31.621 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 05:18:31.621 +07:00 [DBG] Connection id "0HNFPBJ62TICP" completed keep alive response.
2025-09-22 05:18:31.622 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.6197ms
2025-09-22 05:18:31.686 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 05:18:31.892 +07:00 [DBG] Connection id "0HNFPBJ62TICP" completed keep alive response.
2025-09-22 05:18:31.893 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 206.2952ms
2025-09-22 05:20:43.097 +07:00 [DBG] Connection id "0HNFPBJ62TICP" disconnecting.
2025-09-22 05:20:43.097 +07:00 [DBG] Connection id "0HNFPBJ62TICQ" disconnecting.
2025-09-22 05:20:43.099 +07:00 [DBG] Connection id "0HNFPBJ62TICQ" stopped.
2025-09-22 05:20:43.099 +07:00 [DBG] Connection id "0HNFPBJ62TICP" stopped.
2025-09-22 05:20:43.103 +07:00 [DBG] Connection id "0HNFPBJ62TICP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 05:20:43.103 +07:00 [DBG] Connection id "0HNFPBJ62TICQ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 05:29:21.174 +07:00 [INF] Application is shutting down...
2025-09-22 05:29:21.175 +07:00 [DBG] Hosting stopping
2025-09-22 05:29:21.179 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 05:29:21.185 +07:00 [DBG] Hosting stopped
2025-09-22 05:29:33.648 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-22 05:29:33.710 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-22 05:29:33.867 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:33.881 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:33.894 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:33.896 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:33.896 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:33.897 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:34.025 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:34.026 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:34.040 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:34.040 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:34.041 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:34.043 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:34.048 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:34.049 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-22 05:29:34.083 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-22 05:29:34.083 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-22 05:29:34.083 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-22 05:29:34.083 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-22 05:29:34.083 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-22 05:29:34.083 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-22 05:29:34.083 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-22 05:29:34.083 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-22 05:29:34.084 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-22 05:29:34.084 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-22 05:29:34.084 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-22 05:29:34.084 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-22 05:29:34.084 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-22 05:29:34.084 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-22 05:29:34.084 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-22 05:29:34.084 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-22 05:29:34.084 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-22 05:29:34.084 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-22 05:29:34.084 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-22 05:29:34.183 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:29:34.183 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:29:34.183 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:29:34.183 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:29:34.183 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:29:34.183 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:29:34.183 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:29:34.183 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:29:34.184 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:29:34.184 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:29:34.184 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-22 05:29:34.281 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 05:29:34.320 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-22 05:29:34.421 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:29:34.444 +07:00 [DBG] Creating DbConnection.
2025-09-22 05:29:34.456 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-22 05:29:34.458 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.548 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.550 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:29:34.554 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-22 05:29:34.557 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-22 05:29:34.562 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:29:34.596 +07:00 [INF] Executed DbCommand (34ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:29:34.626 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:29:34.641 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.645 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 46ms reading results.
2025-09-22 05:29:34.647 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.652 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (4ms).
2025-09-22 05:29:34.654 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.655 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.656 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:29:34.656 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.656 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.656 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:29:34.658 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:29:34.659 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:29:34.659 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.659 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:29:34.659 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.659 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:29:34.660 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.660 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.660 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:29:34.660 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.660 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.660 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:29:34.661 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:29:34.661 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:29:34.661 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.662 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:29:34.662 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.662 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:29:34.662 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.663 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.663 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:29:34.663 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.663 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.663 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:29:34.664 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-22 05:29:34.664 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:29:34.665 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.665 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:29:34.665 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.665 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:29:34.667 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-22 05:29:34.674 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:29:34.676 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.676 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.676 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:29:34.677 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.677 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.677 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:29:34.685 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:29:34.701 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:29:34.723 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.723 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-22 05:29:34.724 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.724 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:29:34.726 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-22 05:29:34.728 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.728 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.728 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:29:34.728 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.728 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.728 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:29:34.729 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:29:34.729 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:29:34.729 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.729 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:29:34.729 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.729 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:29:34.729 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-22 05:29:34.729 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.730 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.730 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:29:34.730 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.730 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.730 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:29:34.731 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:29:34.731 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:29:34.731 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.731 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:29:34.731 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.731 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:29:34.731 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.732 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.732 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:29:34.732 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.732 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:29:34.732 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:29:34.733 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-22 05:29:34.733 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-22 05:29:34.733 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.733 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:29:34.733 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.733 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:29:34.733 +07:00 [INF] Data seeding completed successfully
2025-09-22 05:29:34.734 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 05:29:34.735 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:29:34.736 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 05:29:34.745 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-22 05:29:34.842 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-22 05:29:34.911 +07:00 [DBG] Hosting starting
2025-09-22 05:29:34.919 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-22 05:29:34.920 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-22 05:29:34.921 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-22 05:29:34.923 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-22 05:29:34.925 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-22 05:29:34.926 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-22 05:29:34.929 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-22 05:29:34.931 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 05:29:34.931 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-22 05:29:34.937 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-22 05:29:34.938 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-22 05:29:34.939 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-22 05:29:34.940 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-22 05:29:34.941 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-22 05:29:34.943 +07:00 [DBG] Middleware loaded
2025-09-22 05:29:34.944 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-22 05:29:34.945 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-22 05:29:34.966 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-22 05:29:34.974 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-22 05:29:34.974 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-22 05:29:34.974 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-22 05:29:34.974 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-22 05:29:34.975 +07:00 [INF] Hosting environment: Development
2025-09-22 05:29:34.975 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-22 05:29:34.976 +07:00 [DBG] Hosting started
2025-09-22 05:29:35.096 +07:00 [DBG] Connection id "0HNFPBPBS1DBO" accepted.
2025-09-22 05:29:35.097 +07:00 [DBG] Connection id "0HNFPBPBS1DBO" started.
2025-09-22 05:29:35.123 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-22 05:29:35.129 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-22 05:29:35.168 +07:00 [DBG] Connection id "0HNFPBPBS1DBP" accepted.
2025-09-22 05:29:35.169 +07:00 [DBG] Connection id "0HNFPBPBS1DBP" started.
2025-09-22 05:29:35.296 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-22 05:29:35.303 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-22 05:29:35.303 +07:00 [DBG] Connection id "0HNFPBPBS1DBO" completed keep alive response.
2025-09-22 05:29:35.305 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 182.4643ms
2025-09-22 05:29:35.310 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-22 05:29:35.311 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-22 05:29:35.311 +07:00 [DBG] Connection id "0HNFPBPBS1DBO" completed keep alive response.
2025-09-22 05:29:35.312 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 1.9772ms
2025-09-22 05:29:35.364 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-22 05:29:35.545 +07:00 [DBG] Connection id "0HNFPBPBS1DBO" completed keep alive response.
2025-09-22 05:29:35.545 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 180.5862ms
2025-09-22 05:30:08.128 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - application/json 112
2025-09-22 05:30:08.131 +07:00 [DBG] POST requests are not supported
2025-09-22 05:30:08.132 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-22 05:30:08.132 +07:00 [DBG] POST requests are not supported
2025-09-22 05:30:08.133 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-22 05:30:08.133 +07:00 [INF] CORS policy execution successful.
2025-09-22 05:30:08.203 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 05:30:08.205 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-22 05:30:08.206 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:30:08.329 +07:00 [DBG] Successfully validated the token.
2025-09-22 05:30:08.331 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-22 05:30:08.340 +07:00 [DBG] Authorization was successful.
2025-09-22 05:30:08.358 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:30:08.403 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-22 05:30:08.406 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-22 05:30:08.407 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-22 05:30:08.409 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-22 05:30:08.410 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-22 05:30:08.410 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-22 05:30:08.419 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 05:30:08.607 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-22 05:30:08.617 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 05:30:08.625 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-22 05:30:08.627 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:30:08.627 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:30:08.628 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-22 05:30:08.629 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-22 05:30:08.652 +07:00 [DBG] Connection id "0HNFPBPBS1DBO", Request id "0HNFPBPBS1DBO:00000004": started reading request body.
2025-09-22 05:30:08.653 +07:00 [DBG] Connection id "0HNFPBPBS1DBO", Request id "0HNFPBPBS1DBO:00000004": done reading request body.
2025-09-22 05:30:08.682 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-22 05:30:08.683 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:30:08.684 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:30:08.685 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-22 05:30:08.700 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-22 05:30:08.702 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-22 05:30:08.704 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-22 05:30:08.712 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:30:08.712 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:30:08.713 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-22 05:30:08.714 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-22 05:30:08.723 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-22 05:30:08.727 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T22:29:51.0190000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-22 05:30:08.833 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-22 05:30:08.847 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 05:30:08.878 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-22 05:30:08.978 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:30:08.994 +07:00 [DBG] Creating DbConnection.
2025-09-22 05:30:08.995 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-22 05:30:08.996 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:08.997 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:08.997 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:08.998 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:08.998 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 05:30:09.000 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 05:30:09.020 +07:00 [INF] Executed DbCommand (21ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-22 05:30:09.032 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:09.034 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 14ms reading results.
2025-09-22 05:30:09.035 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:09.035 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:09.046 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-22 05:30:09.063 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-22 05:30:09.063 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 05:30:09.064 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-22 05:30:09.064 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-22 05:30:09.201 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-22 05:30:09.218 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 05:30:09.232 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:09.233 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:09.233 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:09.234 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:09.234 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:09.234 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 05:30:09.324 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-22 05:30:09.342 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:09.343 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 17ms reading results.
2025-09-22 05:30:09.343 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:09.345 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-22 05:30:09.411 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-22 05:30:09.413 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 05:30:09.414 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-22 05:30:09.414 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-22 05:30:16.220 +07:00 [WRN] Prompt completion failed for submission context
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 610
2025-09-22 05:30:16.275 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Where(s => s.Id == __dto_SubmissionId_0)
    .FirstOrDefault()'
2025-09-22 05:30:16.287 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId
            FROM submissions AS s
            WHERE s.Id == @__dto_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:30:16.289 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.289 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.289 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.289 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.289 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.290 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 05:30:16.304 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 05:30:16.305 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.305 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:30:16.305 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.305 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.311 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.UserRoles)
    .Where(u => u.Id == __dto_ReviewerId_0)
    .FirstOrDefault()'
2025-09-22 05:30:16.312 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-22 05:30:16.341 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 19], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 20] }
                3 -> 19
                4 -> 20
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, u0.UserId, u0.RoleId
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__dto_ReviewerId_0
            ) AS t
            LEFT JOIN user_roles AS u0 ON t.Id == u0.UserId
            ORDER BY t.Id ASC, u0.UserId ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:30:16.344 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.344 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.344 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.345 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.345 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.345 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 05:30:16.361 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 05:30:16.362 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.363 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 05:30:16.363 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.364 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.366 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .AsNoTracking()
    .Include(ur => ur.Role)
    .Where(ur => ur.UserId == __dto_ReviewerId_0)'
2025-09-22 05:30:16.368 +07:00 [DBG] Including navigation: 'UserRole.Role'.
2025-09-22 05:30:16.381 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<UserRole>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 0], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 1] }
            1 -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 2], [Property: Role.ConcurrencyStamp (string), 3], [Property: Role.IsAdmin (bool) Required, 4], [Property: Role.Name (string), 5], [Property: Role.NormalizedName (string), 6] }
        SELECT u.UserId, u.RoleId, r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__dto_ReviewerId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, UserRole>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-22 05:30:16.385 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.386 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.386 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.386 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.386 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.387 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 05:30:16.400 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 05:30:16.401 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.402 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 05:30:16.402 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.402 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.405 +07:00 [DBG] Compiling query expression: 
'DbSet<ReviewerAssignment>()
    .AsNoTracking()
    .Where(ra => ra.SubmissionId == __dto_SubmissionId_0 && ra.ReviewerId == __dto_ReviewerId_1)
    .FirstOrDefault()'
2025-09-22 05:30:16.413 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<ReviewerAssignment>(
    asyncEnumerable: new SingleQueryingEnumerable<ReviewerAssignment>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 2], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 3], [Property: ReviewerAssignment.CompletedAt (DateTime?), 4], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 5], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 6], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 7], [Property: ReviewerAssignment.StartedAt (DateTime?), 8], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 9], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 10] }
            SELECT TOP(1) r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId
            FROM reviewer_assignments AS r
            WHERE (r.SubmissionId == @__dto_SubmissionId_0) && (r.ReviewerId == @__dto_ReviewerId_1)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, ReviewerAssignment>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-22 05:30:16.415 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.415 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.415 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.416 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.416 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.416 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 05:30:16.425 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 05:30:16.427 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.428 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-22 05:30:16.428 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.428 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.431 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.431 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.431 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.432 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.432 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.434 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 05:30:16.442 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 05:30:16.442 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.442 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:30:16.442 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.443 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.445 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.445 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.445 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.445 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.446 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.447 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 05:30:16.456 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 05:30:16.458 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.459 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 05:30:16.459 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.460 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.462 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.462 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.463 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.463 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.463 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.464 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 05:30:16.469 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 05:30:16.470 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.470 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:30:16.470 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.470 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.471 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.472 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.472 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.472 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.472 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.473 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 05:30:16.475 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 05:30:16.475 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.476 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:30:16.476 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.477 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.478 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.479 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.479 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.480 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.480 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.480 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 05:30:16.485 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 05:30:16.485 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.486 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:30:16.486 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.486 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.487 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.489 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.490 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.491 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.491 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 05:30:16.491 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 05:30:16.494 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 05:30:16.495 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.495 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:30:16.495 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.496 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.498 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.498 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.499 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.499 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.499 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.500 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 05:30:16.501 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 05:30:16.502 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.503 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-22 05:30:16.503 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.504 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.505 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.506 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.506 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.506 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.506 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.506 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 05:30:16.507 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 05:30:16.507 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.508 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:30:16.508 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.508 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.510 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.510 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.511 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.511 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.511 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.511 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 05:30:16.512 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId]
FROM [submissions] AS [s]
WHERE [s].[Id] = @__dto_SubmissionId_0
2025-09-22 05:30:16.513 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.513 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:30:16.514 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.514 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.515 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.515 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.515 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.516 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.517 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-22 05:30:16.517 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 05:30:16.519 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [u0].[UserId], [u0].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__dto_ReviewerId_0
) AS [t]
LEFT JOIN [user_roles] AS [u0] ON [t].[Id] = [u0].[UserId]
ORDER BY [t].[Id], [u0].[UserId]
2025-09-22 05:30:16.519 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.519 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:30:16.520 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.520 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.521 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.521 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.521 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.521 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.522 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.522 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 05:30:16.525 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__dto_ReviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[UserId], [u].[RoleId], [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__dto_ReviewerId_0
2025-09-22 05:30:16.525 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.526 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:30:16.526 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.526 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.527 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.527 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.527 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-22 05:30:16.527 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.528 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-22 05:30:16.528 +07:00 [DBG] Executing DbCommand [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 05:30:16.531 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__dto_SubmissionId_0='?' (DbType = Int32), @__dto_ReviewerId_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId]
FROM [reviewer_assignments] AS [r]
WHERE [r].[SubmissionId] = @__dto_SubmissionId_0 AND [r].[ReviewerId] = @__dto_ReviewerId_1
2025-09-22 05:30:16.531 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.532 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-22 05:30:16.532 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.532 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-22 05:30:16.539 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-22 05:30:16.542 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-22 05:30:16.543 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-22 05:30:16.546 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-22 05:30:16.546 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-22 05:30:16.620 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 8205.9483ms
2025-09-22 05:30:16.621 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-22 05:30:16.624 +07:00 [DBG] Connection id "0HNFPBPBS1DBO" completed keep alive response.
2025-09-22 05:30:16.625 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-22 05:30:16.625 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-22 05:30:16.625 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-22 05:30:16.626 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=true - 200 null application/json; charset=utf-8 8497.6947ms
2025-09-22 05:31:46.963 +07:00 [DBG] Connection id "0HNFPBPBS1DBP" disconnecting.
2025-09-22 05:31:46.965 +07:00 [DBG] Connection id "0HNFPBPBS1DBP" stopped.
2025-09-22 05:31:46.968 +07:00 [DBG] Connection id "0HNFPBPBS1DBP" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 05:32:27.409 +07:00 [DBG] Connection id "0HNFPBPBS1DBO" disconnecting.
2025-09-22 05:32:27.409 +07:00 [DBG] Connection id "0HNFPBPBS1DBO" stopped.
2025-09-22 05:32:27.410 +07:00 [DBG] Connection id "0HNFPBPBS1DBO" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-22 05:32:50.161 +07:00 [INF] Application is shutting down...
2025-09-22 05:32:50.165 +07:00 [DBG] Hosting stopping
2025-09-22 05:32:50.179 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-22 05:32:50.183 +07:00 [DBG] Hosting stopped
