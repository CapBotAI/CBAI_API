2025-09-25 01:27:53.147 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 01:27:53.204 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 01:27:53.343 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.357 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.369 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.370 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.371 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.372 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.514 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.515 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.530 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.530 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.530 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.531 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.535 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.535 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 01:27:53.567 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 01:27:53.567 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 01:27:53.567 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 01:27:53.567 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 01:27:53.568 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 01:27:53.667 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 01:27:53.668 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 01:27:53.668 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 01:27:53.668 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 01:27:53.668 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 01:27:53.668 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 01:27:53.668 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 01:27:53.669 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 01:27:53.669 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 01:27:53.669 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 01:27:53.670 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 01:27:53.795 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 01:27:53.849 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 01:27:53.961 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 01:27:53.982 +07:00 [DBG] Creating DbConnection.
2025-09-25 01:27:53.993 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-25 01:27:53.996 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.160 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.162 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:27:54.165 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-25 01:27:54.170 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-25 01:27:54.174 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 01:27:54.218 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 01:27:54.252 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 01:27:54.266 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.271 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 49ms reading results.
2025-09-25 01:27:54.274 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.278 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (4ms).
2025-09-25 01:27:54.280 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.281 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.281 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:27:54.281 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.282 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.282 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 01:27:54.284 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 01:27:54.285 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 01:27:54.285 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.285 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 01:27:54.285 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.285 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 01:27:54.285 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.285 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.285 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:27:54.285 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.285 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.285 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 01:27:54.287 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 01:27:54.287 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 01:27:54.287 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.287 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 01:27:54.288 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.288 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 01:27:54.288 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.288 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.288 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:27:54.288 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.288 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.288 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 01:27:54.289 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 01:27:54.289 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 01:27:54.289 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.290 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 01:27:54.290 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.290 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 01:27:54.293 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 01:27:54.300 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 01:27:54.301 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.302 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.302 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:27:54.302 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.302 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.302 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 01:27:54.310 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 01:27:54.329 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 01:27:54.350 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.350 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 39ms reading results.
2025-09-25 01:27:54.350 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.351 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 01:27:54.353 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 01:27:54.356 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.356 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.356 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:27:54.357 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.357 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.357 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 01:27:54.358 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 01:27:54.358 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 01:27:54.359 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.359 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 01:27:54.359 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.359 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 01:27:54.359 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 01:27:54.359 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.359 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.359 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:27:54.359 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.359 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.359 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 01:27:54.360 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 01:27:54.361 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 01:27:54.361 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.361 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 01:27:54.361 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.361 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 01:27:54.361 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.361 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.361 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:27:54.361 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.361 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:54.361 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 01:27:54.363 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 01:27:54.363 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 01:27:54.363 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.363 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 01:27:54.363 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.363 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 01:27:54.364 +07:00 [INF] Data seeding completed successfully
2025-09-25 01:27:54.365 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 01:27:54.367 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:54.368 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-25 01:27:54.379 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 01:27:54.485 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 01:27:54.568 +07:00 [DBG] Hosting starting
2025-09-25 01:27:54.575 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 01:27:54.575 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 01:27:54.576 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 01:27:54.579 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 01:27:54.581 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 01:27:54.581 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 01:27:54.585 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 01:27:54.587 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 01:27:54.587 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 01:27:54.588 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 01:27:54.589 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 01:27:54.589 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 01:27:54.590 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 01:27:54.590 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 01:27:54.594 +07:00 [DBG] Middleware loaded
2025-09-25 01:27:54.596 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 01:27:54.596 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 01:27:54.621 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 01:27:54.630 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 01:27:54.630 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 01:27:54.630 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 01:27:54.631 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 01:27:54.631 +07:00 [INF] Hosting environment: Development
2025-09-25 01:27:54.631 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 01:27:54.632 +07:00 [DBG] Hosting started
2025-09-25 01:27:54.700 +07:00 [DBG] Connection id "0HNFRJ0A1A746" accepted.
2025-09-25 01:27:54.701 +07:00 [DBG] Connection id "0HNFRJ0A1A746" started.
2025-09-25 01:27:54.728 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 01:27:54.733 +07:00 [DBG] Connection id "0HNFRJ0A1A747" accepted.
2025-09-25 01:27:54.733 +07:00 [DBG] Connection id "0HNFRJ0A1A747" started.
2025-09-25 01:27:54.739 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 01:27:54.839 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 01:27:54.846 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 01:27:54.847 +07:00 [DBG] Connection id "0HNFRJ0A1A746" completed keep alive response.
2025-09-25 01:27:54.848 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 120.813ms
2025-09-25 01:27:54.866 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 01:27:54.868 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 01:27:54.868 +07:00 [DBG] Connection id "0HNFRJ0A1A746" completed keep alive response.
2025-09-25 01:27:54.869 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.3038ms
2025-09-25 01:27:54.916 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 01:27:55.093 +07:00 [DBG] Connection id "0HNFRJ0A1A746" completed keep alive response.
2025-09-25 01:27:55.093 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 176.8237ms
2025-09-25 01:27:59.030 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 01:27:59.033 +07:00 [DBG] POST requests are not supported
2025-09-25 01:27:59.035 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 01:27:59.038 +07:00 [DBG] POST requests are not supported
2025-09-25 01:27:59.039 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 01:27:59.040 +07:00 [INF] CORS policy execution successful.
2025-09-25 01:27:59.062 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 01:27:59.063 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 01:27:59.063 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 01:27:59.108 +07:00 [DBG] Successfully validated the token.
2025-09-25 01:27:59.109 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 01:27:59.112 +07:00 [DBG] Authorization was successful.
2025-09-25 01:27:59.116 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 01:27:59.126 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 01:27:59.127 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 01:27:59.127 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 01:27:59.128 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 01:27:59.128 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 01:27:59.128 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 01:27:59.129 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 01:27:59.198 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 01:27:59.202 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 01:27:59.205 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 01:27:59.207 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 01:27:59.208 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 01:27:59.208 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 01:27:59.208 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 01:27:59.218 +07:00 [DBG] Connection id "0HNFRJ0A1A746", Request id "0HNFRJ0A1A746:00000004": started reading request body.
2025-09-25 01:27:59.218 +07:00 [DBG] Connection id "0HNFRJ0A1A746", Request id "0HNFRJ0A1A746:00000004": done reading request body.
2025-09-25 01:27:59.224 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 01:27:59.224 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 01:27:59.224 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 01:27:59.225 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 01:27:59.230 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 01:27:59.231 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 01:27:59.232 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 01:27:59.234 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 01:27:59.234 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 01:27:59.234 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 01:27:59.234 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 01:27:59.236 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 01:27:59.237 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T18:16:01.9660000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 01:27:59.280 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 01:27:59.285 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-25 01:27:59.293 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-25 01:27:59.327 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 01:27:59.331 +07:00 [DBG] Creating DbConnection.
2025-09-25 01:27:59.331 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 01:27:59.331 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:59.331 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:59.331 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:27:59.331 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:59.332 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:59.332 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 01:27:59.345 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 01:27:59.348 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:27:59.348 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-25 01:27:59.348 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:59.348 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 01:27:59.352 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-25 01:27:59.357 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-25 01:27:59.358 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-25 01:27:59.359 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-25 01:27:59.360 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-25 01:27:59.405 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-25 01:27:59.412 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 01:27:59.422 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:59.422 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:59.422 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:27:59.422 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:59.423 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:27:59.423 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 01:27:59.517 +07:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 01:27:59.537 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:27:59.537 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 19ms reading results.
2025-09-25 01:27:59.539 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:27:59.540 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 01:27:59.559 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 01:27:59.560 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 01:27:59.561 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 01:27:59.562 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 01:28:02.472 +07:00 [DBG] AI explanation generated (preview): Recommendation: rv2@.com (Id: 10)

Rationale:
* Highest OverallScore (0.5073) among candidates.
* Possesses relevant expertise in "AI" as indicated by MatchedSkills.
*  A higher SkillMatchScore (0.534...
2025-09-25 01:28:02.483 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 01:28:02.486 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 01:28:02.487 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 01:28:02.489 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 01:28:02.490 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 01:28:02.572 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3440.588ms
2025-09-25 01:28:02.573 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 01:28:02.576 +07:00 [DBG] Connection id "0HNFRJ0A1A746" completed keep alive response.
2025-09-25 01:28:02.576 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 01:28:02.576 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:28:02.576 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 01:28:02.578 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3547.5362ms
2025-09-25 01:28:11.999 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 01:28:11.999 +07:00 [DBG] POST requests are not supported
2025-09-25 01:28:11.999 +07:00 [DBG] POST requests are not supported
2025-09-25 01:28:12.000 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 01:28:12.001 +07:00 [INF] CORS policy execution successful.
2025-09-25 01:28:12.012 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 01:28:12.012 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 01:28:12.014 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 01:28:12.021 +07:00 [DBG] Successfully validated the token.
2025-09-25 01:28:12.022 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 01:28:12.028 +07:00 [DBG] Authorization was successful.
2025-09-25 01:28:12.030 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 01:28:12.031 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 01:28:12.032 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 01:28:12.032 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 01:28:12.033 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 01:28:12.033 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 01:28:12.034 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 01:28:12.034 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 01:28:12.041 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 01:28:12.042 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 01:28:12.045 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 01:28:12.046 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 01:28:12.046 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 01:28:12.046 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 01:28:12.047 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 01:28:12.048 +07:00 [DBG] Connection id "0HNFRJ0A1A746", Request id "0HNFRJ0A1A746:00000005": started reading request body.
2025-09-25 01:28:12.048 +07:00 [DBG] Connection id "0HNFRJ0A1A746", Request id "0HNFRJ0A1A746:00000005": done reading request body.
2025-09-25 01:28:12.048 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 01:28:12.049 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 01:28:12.049 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 01:28:12.049 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 01:28:12.053 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 01:28:12.054 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 01:28:12.055 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 01:28:12.055 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 01:28:12.056 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 01:28:12.056 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 01:28:12.056 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 01:28:12.056 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 01:28:12.061 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T18:16:01.9660000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 01:28:12.087 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 01:28:12.092 +07:00 [DBG] Creating DbConnection.
2025-09-25 01:28:12.093 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 01:28:12.094 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:28:12.095 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:28:12.095 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:28:12.096 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:28:12.096 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 01:28:12.097 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 01:28:12.099 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 01:28:12.102 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:28:12.102 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-25 01:28:12.103 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:28:12.103 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 01:28:12.105 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:28:12.106 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:28:12.106 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 01:28:12.109 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-25 01:28:12.109 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (3ms).
2025-09-25 01:28:12.109 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 01:28:12.112 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 01:28:12.116 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 01:28:12.116 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-09-25 01:28:12.116 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:28:12.117 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 01:28:12.118 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 01:28:12.118 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 01:28:12.118 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 01:28:12.119 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 01:28:14.232 +07:00 [DBG] AI explanation generated (preview): Recommendation: rv2@.com (Id: 10)

Rationale:
* Highest OverallScore (0.5073) among the candidates.
* Possesses relevant expertise in "AI" as indicated by MatchedSkills.
* Higher SkillMatchScore (0.53...
2025-09-25 01:28:14.233 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 01:28:14.233 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 01:28:14.233 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 01:28:14.234 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 01:28:14.234 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 01:28:14.235 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2200.7379ms
2025-09-25 01:28:14.235 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 01:28:14.235 +07:00 [DBG] Connection id "0HNFRJ0A1A746" completed keep alive response.
2025-09-25 01:28:14.235 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 01:28:14.236 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 01:28:14.236 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 01:28:14.236 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2236.743ms
2025-09-25 01:30:06.682 +07:00 [DBG] Connection id "0HNFRJ0A1A747" disconnecting.
2025-09-25 01:30:06.683 +07:00 [DBG] Connection id "0HNFRJ0A1A747" stopped.
2025-09-25 01:30:06.689 +07:00 [DBG] Connection id "0HNFRJ0A1A747" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 01:30:25.792 +07:00 [DBG] Connection id "0HNFRJ0A1A746" disconnecting.
2025-09-25 01:30:25.792 +07:00 [DBG] Connection id "0HNFRJ0A1A746" stopped.
2025-09-25 01:30:25.792 +07:00 [DBG] Connection id "0HNFRJ0A1A746" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 05:59:50.789 +07:00 [INF] Application is shutting down...
2025-09-25 05:59:50.791 +07:00 [DBG] Hosting stopping
2025-09-25 05:59:50.797 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 05:59:50.823 +07:00 [DBG] Hosting stopped
2025-09-25 06:00:11.274 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 06:00:11.332 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 06:00:11.515 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.527 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.537 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.538 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.538 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.539 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.710 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.710 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.728 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.728 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.728 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.729 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.732 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.732 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 06:00:11.770 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 06:00:11.771 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 06:00:11.771 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 06:00:11.771 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 06:00:11.771 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 06:00:11.771 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 06:00:11.890 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:00:11.890 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:00:11.890 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:00:11.890 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:00:11.890 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:00:11.890 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:00:11.890 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:00:11.890 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:00:11.891 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:00:11.891 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:00:11.891 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:00:11.992 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:00:12.033 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 06:00:12.157 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 06:00:12.181 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:00:12.201 +07:00 [DBG] Created DbConnection. (16ms).
2025-09-25 06:00:12.206 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.399 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.401 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:00:12.404 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-25 06:00:12.408 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-25 06:00:12.413 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:00:12.450 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:00:12.482 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:00:12.500 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.505 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 51ms reading results.
2025-09-25 06:00:12.506 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.509 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-25 06:00:12.510 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.511 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.511 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:00:12.511 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.511 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.512 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:00:12.514 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:00:12.515 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:00:12.515 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.515 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:00:12.515 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.515 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:00:12.515 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.515 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.515 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:00:12.515 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.515 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.515 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:00:12.516 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:00:12.516 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:00:12.516 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.516 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:00:12.516 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.516 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:00:12.517 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.517 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.517 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:00:12.517 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.517 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.517 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:00:12.518 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:00:12.519 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:00:12.519 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.519 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:00:12.519 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.519 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:00:12.522 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 06:00:12.528 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 06:00:12.529 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.529 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.529 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:00:12.529 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.529 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.529 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:00:12.535 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:00:12.550 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:00:12.573 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.574 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-25 06:00:12.574 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.574 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:00:12.578 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 06:00:12.582 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.582 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.582 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:00:12.582 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.582 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.583 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:00:12.584 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:00:12.584 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:00:12.584 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.584 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:00:12.584 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.585 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:00:12.585 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 06:00:12.586 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.586 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.586 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:00:12.586 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.586 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.586 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:00:12.588 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:00:12.588 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:00:12.589 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.589 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:00:12.589 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.590 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:00:12.590 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.590 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.590 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:00:12.590 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.591 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:00:12.591 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:00:12.592 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:00:12.592 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:00:12.592 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.593 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:00:12.593 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.593 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:00:12.593 +07:00 [INF] Data seeding completed successfully
2025-09-25 06:00:12.595 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:00:12.597 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:00:12.598 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:00:12.607 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 06:00:12.716 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 06:00:12.784 +07:00 [DBG] Hosting starting
2025-09-25 06:00:12.790 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 06:00:12.792 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 06:00:12.792 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 06:00:12.795 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 06:00:12.797 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 06:00:12.797 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 06:00:12.802 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 06:00:12.805 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 06:00:12.805 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 06:00:12.813 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 06:00:12.814 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 06:00:12.815 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 06:00:12.815 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 06:00:12.816 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 06:00:12.821 +07:00 [DBG] Middleware loaded
2025-09-25 06:00:12.822 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 06:00:12.823 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 06:00:12.849 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 06:00:12.858 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 06:00:12.858 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 06:00:12.858 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 06:00:12.858 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 06:00:12.858 +07:00 [INF] Hosting environment: Development
2025-09-25 06:00:12.858 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 06:00:12.859 +07:00 [DBG] Hosting started
2025-09-25 06:00:12.987 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" accepted.
2025-09-25 06:00:12.987 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" started.
2025-09-25 06:00:13.021 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 06:00:13.030 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 06:00:13.080 +07:00 [DBG] Connection id "0HNFRNOF7BFJ4" accepted.
2025-09-25 06:00:13.081 +07:00 [DBG] Connection id "0HNFRNOF7BFJ4" started.
2025-09-25 06:00:13.171 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 06:00:13.178 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 06:00:13.179 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" completed keep alive response.
2025-09-25 06:00:13.181 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 161.4736ms
2025-09-25 06:00:13.191 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 06:00:13.194 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 06:00:13.194 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" completed keep alive response.
2025-09-25 06:00:13.195 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.2008ms
2025-09-25 06:00:13.244 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 06:00:13.452 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" completed keep alive response.
2025-09-25 06:00:13.452 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 207.6174ms
2025-09-25 06:01:20.750 +07:00 [DBG] Connection id "0HNFRNOF7BFJ4" received FIN.
2025-09-25 06:01:20.750 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:01:20.753 +07:00 [DBG] Connection id "0HNFRNOF7BFJ4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:01:20.756 +07:00 [DBG] POST requests are not supported
2025-09-25 06:01:20.756 +07:00 [DBG] Connection id "0HNFRNOF7BFJ4" disconnecting.
2025-09-25 06:01:20.758 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 06:01:20.758 +07:00 [DBG] POST requests are not supported
2025-09-25 06:01:20.759 +07:00 [DBG] Connection id "0HNFRNOF7BFJ4" stopped.
2025-09-25 06:01:20.759 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:01:20.760 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:01:20.843 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:01:20.845 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:01:20.848 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:01:20.992 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:01:20.994 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:01:21.002 +07:00 [DBG] Authorization was successful.
2025-09-25 06:01:21.024 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:01:21.059 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:01:21.061 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:01:21.062 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:01:21.063 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:01:21.064 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:01:21.064 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:01:21.067 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:01:21.229 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:01:21.237 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:01:21.241 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:01:21.247 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:01:21.247 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:01:21.248 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:01:21.248 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:01:21.268 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000004": started reading request body.
2025-09-25 06:01:21.268 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000004": done reading request body.
2025-09-25 06:01:21.280 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:01:21.281 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:01:21.282 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:01:21.282 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:01:21.296 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:01:21.298 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:01:21.319 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:01:21.326 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:01:21.326 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:01:21.332 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:01:21.333 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:01:21.351 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:01:21.358 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:01:21.481 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:01:21.493 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-25 06:01:21.523 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-25 06:01:21.618 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 06:01:21.627 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:01:21.628 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:01:21.629 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:01:21.629 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:01:21.629 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:01:21.630 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:01:21.630 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:01:21.633 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:01:21.662 +07:00 [INF] Executed DbCommand (31ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:01:21.670 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:01:21.670 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 7ms reading results.
2025-09-25 06:01:21.670 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:01:21.670 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:01:21.684 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-25 06:01:21.702 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-25 06:01:21.702 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-25 06:01:21.704 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-25 06:01:21.705 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-25 06:01:21.834 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-25 06:01:21.856 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 06:01:21.867 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:01:21.868 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:01:21.869 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:01:21.869 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:01:21.870 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:01:21.870 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:01:21.973 +07:00 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:01:21.990 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:01:21.992 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 18ms reading results.
2025-09-25 06:01:21.993 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:01:21.994 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-25 06:01:22.067 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:01:22.069 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:01:22.071 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:01:22.072 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:01:24.643 +07:00 [DBG] AI explanation generated (preview): Recommend: hieptmse140293@fpt.edu.vn (Id: 7)

* Highest overall score (0.6490) among candidates.
* Strong match with "mobile" keyword and high performance score (1.500).

* Lower workload (0.6) than o...
2025-09-25 06:01:24.649 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:01:24.650 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:01:24.651 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:01:24.652 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:01:24.652 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:01:24.731 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3663.4154ms
2025-09-25 06:01:24.732 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:01:24.737 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" completed keep alive response.
2025-09-25 06:01:24.737 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:01:24.738 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:01:24.738 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:01:24.740 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3989.9179ms
2025-09-25 06:03:24.103 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:03:24.104 +07:00 [DBG] POST requests are not supported
2025-09-25 06:03:24.104 +07:00 [DBG] POST requests are not supported
2025-09-25 06:03:24.108 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:03:24.108 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:03:24.120 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:03:24.121 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:03:24.123 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:03:24.130 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:03:24.131 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:03:24.135 +07:00 [DBG] Authorization was successful.
2025-09-25 06:03:24.137 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:03:24.138 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:03:24.138 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:03:24.138 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:03:24.139 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:03:24.139 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:03:24.140 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:03:24.141 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:03:24.148 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:03:24.149 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:03:24.151 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:03:24.152 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:03:24.152 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:03:24.153 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:03:24.153 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:03:24.154 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000005": started reading request body.
2025-09-25 06:03:24.154 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000005": done reading request body.
2025-09-25 06:03:24.155 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:03:24.155 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:03:24.155 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:03:24.156 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:03:24.158 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:03:24.160 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:03:24.160 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:03:24.161 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:03:24.161 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:03:24.161 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:03:24.161 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:03:24.162 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 06:03:24.163 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:03:24.184 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:03:24.188 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:03:24.189 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:03:24.189 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:24.189 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:24.190 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:03:24.190 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:03:24.191 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:03:24.191 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:03:24.217 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:03:24.222 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:03:24.223 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 5ms reading results.
2025-09-25 06:03:24.223 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:24.223 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:03:24.225 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:24.226 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:24.227 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:03:24.228 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:03:24.228 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-25 06:03:24.229 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:03:24.341 +07:00 [INF] Executed DbCommand (113ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:03:24.348 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:03:24.348 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 6ms reading results.
2025-09-25 06:03:24.349 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:24.350 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:03:24.356 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:03:24.356 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:03:24.358 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:03:24.358 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:03:25.911 +07:00 [DBG] AI explanation generated (preview): Recommend: hieptmse140293@fpt.edu.vn (Id: 7)

* Higher overall score (0.7473) compared to other candidates.
* Demonstrated expertise in "mobile" based on matched tokens.

* Lacks AI-related tokens in ...
2025-09-25 06:03:25.912 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:03:25.913 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:03:25.913 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:03:25.914 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:03:25.914 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:03:25.916 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1775.3982ms
2025-09-25 06:03:25.916 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:03:25.917 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" completed keep alive response.
2025-09-25 06:03:25.918 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:03:25.918 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:25.918 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:03:25.918 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1814.7279ms
2025-09-25 06:03:41.190 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:03:41.190 +07:00 [DBG] POST requests are not supported
2025-09-25 06:03:41.191 +07:00 [DBG] POST requests are not supported
2025-09-25 06:03:41.191 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:03:41.191 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:03:41.191 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:03:41.191 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:03:41.191 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:03:41.194 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:03:41.194 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:03:41.195 +07:00 [DBG] Authorization was successful.
2025-09-25 06:03:41.196 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:03:41.196 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:03:41.196 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:03:41.197 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:03:41.197 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:03:41.197 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:03:41.197 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:03:41.197 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:03:41.214 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:03:41.214 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:03:41.215 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:03:41.216 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:03:41.216 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:03:41.216 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:03:41.217 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:03:41.217 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000006": started reading request body.
2025-09-25 06:03:41.217 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000006": done reading request body.
2025-09-25 06:03:41.217 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:03:41.217 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:03:41.217 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:03:41.218 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:03:41.218 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:03:41.218 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:03:41.218 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:03:41.218 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:03:41.218 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:03:41.219 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:03:41.219 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:03:41.219 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:03:41.219 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:03:41.223 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:03:41.224 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:03:41.224 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:03:41.224 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:41.224 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:41.224 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:03:41.224 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:03:41.225 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:03:41.225 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:03:41.226 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:03:41.227 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:03:41.227 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:03:41.227 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:41.227 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:03:41.230 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:41.231 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:41.231 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:03:41.231 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:03:41.231 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:03:41.231 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:03:41.233 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:03:41.234 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:03:41.234 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 06:03:41.234 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:41.235 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:03:41.237 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:03:41.238 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:03:41.238 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:03:41.238 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:03:42.882 +07:00 [DBG] AI explanation generated (preview): Recommend: hieptmse140293@fpt.edu.vn (Id: 7)

* Highest Overall score (0.6490) indicating strong suitability.
* High Performance score (1.500) suggesting experience and reliability.

* Lower Skill sco...
2025-09-25 06:03:42.882 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:03:42.882 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:03:42.882 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:03:42.882 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:03:42.883 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:03:42.884 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1687.0054ms
2025-09-25 06:03:42.884 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:03:42.884 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" completed keep alive response.
2025-09-25 06:03:42.884 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:03:42.885 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:42.885 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:03:42.885 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1694.8261ms
2025-09-25 06:03:55.896 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:03:55.897 +07:00 [DBG] POST requests are not supported
2025-09-25 06:03:55.897 +07:00 [DBG] POST requests are not supported
2025-09-25 06:03:55.897 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:03:55.897 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:03:55.897 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:03:55.897 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:03:55.897 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:03:55.897 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:03:55.897 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:03:55.898 +07:00 [DBG] Authorization was successful.
2025-09-25 06:03:55.898 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:03:55.898 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:03:55.898 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:03:55.898 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:03:55.898 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:03:55.898 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:03:55.898 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:03:55.899 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:03:55.899 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:03:55.899 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:03:55.899 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:03:55.900 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:03:55.900 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:03:55.900 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:03:55.900 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:03:55.900 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000007": started reading request body.
2025-09-25 06:03:55.900 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000007": done reading request body.
2025-09-25 06:03:55.900 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:03:55.900 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:03:55.900 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:03:55.900 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:03:55.900 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:03:55.900 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:03:55.901 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:03:55.901 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:03:55.901 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:03:55.901 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:03:55.901 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:03:55.901 +07:00 [INF] Processing AI suggestion for SubmissionId: 7
2025-09-25 06:03:55.901 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":7,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:03:55.902 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:03:55.903 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:03:55.903 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:03:55.903 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:55.903 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:55.903 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:03:55.904 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:03:55.904 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:03:55.904 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:03:55.906 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:03:55.907 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:03:55.907 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:03:55.907 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:55.907 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:03:55.907 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:03:55.908 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:03:55.908 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:03:55.908 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:03:55.908 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:03:55.908 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 9.9162ms
2025-09-25 06:03:55.909 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:03:55.909 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" completed keep alive response.
2025-09-25 06:03:55.909 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:03:55.909 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:03:55.909 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:03:55.909 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 404 null application/json; charset=utf-8 13.0468ms
2025-09-25 06:04:23.727 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:04:23.728 +07:00 [DBG] POST requests are not supported
2025-09-25 06:04:23.728 +07:00 [DBG] POST requests are not supported
2025-09-25 06:04:23.728 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:04:23.728 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:04:23.728 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:04:23.728 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:04:23.728 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:04:23.728 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:04:23.728 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:04:23.728 +07:00 [DBG] Authorization was successful.
2025-09-25 06:04:23.729 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:04:23.729 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:04:23.729 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:04:23.729 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:04:23.729 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:04:23.729 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:04:23.731 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:04:23.731 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:04:23.732 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:04:23.732 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:04:23.732 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:04:23.732 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:04:23.732 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:04:23.732 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:04:23.733 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:04:23.733 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000008": started reading request body.
2025-09-25 06:04:23.733 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000008": done reading request body.
2025-09-25 06:04:23.734 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:04:23.734 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:04:23.734 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:04:23.734 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:04:23.735 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:04:23.735 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:04:23.735 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:04:23.735 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:04:23.735 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:04:23.735 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:04:23.736 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:04:23.736 +07:00 [INF] Processing AI suggestion for SubmissionId: 2
2025-09-25 06:04:23.736 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":2,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:04:23.738 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:04:23.739 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:04:23.741 +07:00 [DBG] Created DbConnection. (2ms).
2025-09-25 06:04:23.741 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:04:23.741 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:04:23.741 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:04:23.742 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:04:23.742 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:04:23.742 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:04:23.765 +07:00 [INF] Executed DbCommand (24ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:04:23.766 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:04:23.766 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:04:23.766 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:04:23.766 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:04:23.766 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:04:23.766 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:04:23.766 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:04:23.767 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:04:23.767 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:04:23.767 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 35.7439ms
2025-09-25 06:04:23.769 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:04:23.770 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" completed keep alive response.
2025-09-25 06:04:23.770 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:04:23.770 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:04:23.770 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:04:23.770 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 404 null application/json; charset=utf-8 42.6665ms
2025-09-25 06:04:36.379 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 06:04:36.379 +07:00 [DBG] POST requests are not supported
2025-09-25 06:04:36.379 +07:00 [DBG] POST requests are not supported
2025-09-25 06:04:36.379 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:04:36.379 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:04:36.379 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:04:36.379 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:04:36.380 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:04:36.380 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:04:36.380 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:04:36.380 +07:00 [DBG] Authorization was successful.
2025-09-25 06:04:36.381 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:04:36.381 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:04:36.381 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:04:36.381 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:04:36.381 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:04:36.382 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:04:36.382 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:04:36.382 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:04:36.383 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:04:36.384 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:04:36.384 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:04:36.384 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:04:36.384 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:04:36.384 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:04:36.384 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:04:36.386 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000009": started reading request body.
2025-09-25 06:04:36.386 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3", Request id "0HNFRNOF7BFJ3:00000009": done reading request body.
2025-09-25 06:04:36.387 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:04:36.387 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:04:36.387 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:04:36.387 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:04:36.387 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:04:36.387 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:04:36.387 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:04:36.388 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:04:36.388 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:04:36.388 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:04:36.388 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:04:36.388 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 06:04:36.388 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:04:36.391 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:04:36.392 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:04:36.393 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:04:36.393 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:04:36.393 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:04:36.393 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:04:36.393 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:04:36.393 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:04:36.393 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:04:36.399 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:04:36.400 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:04:36.400 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:04:36.400 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:04:36.400 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:04:36.401 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:04:36.402 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:04:36.402 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:04:36.402 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:04:36.402 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:04:36.403 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:04:36.497 +07:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:04:36.498 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:04:36.498 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:04:36.498 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:04:36.498 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:04:36.499 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:04:36.499 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:04:36.499 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:04:36.500 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:04:37.665 +07:00 [DBG] AI explanation generated (preview): Recommend: rv2@.com (Id: 10)

* Higher overall score (0.5073) compared to rv1@.com (0.2400).
* Possesses relevant skills and matched tokens related to "AI".

* Low performance score (0).
* Relatively ...
2025-09-25 06:04:37.665 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:04:37.665 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:04:37.665 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:04:37.666 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:04:37.666 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:04:37.666 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1284.2168ms
2025-09-25 06:04:37.666 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:04:37.666 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" completed keep alive response.
2025-09-25 06:04:37.666 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:04:37.666 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:04:37.666 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:04:37.666 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1287.464ms
2025-09-25 06:06:48.857 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" disconnecting.
2025-09-25 06:06:48.857 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" stopped.
2025-09-25 06:06:48.859 +07:00 [DBG] Connection id "0HNFRNOF7BFJ3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:10:58.420 +07:00 [INF] Application is shutting down...
2025-09-25 06:10:58.421 +07:00 [DBG] Hosting stopping
2025-09-25 06:10:58.427 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 06:10:58.461 +07:00 [DBG] Hosting stopped
2025-09-25 06:12:25.680 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 06:12:25.733 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 06:12:25.878 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:25.891 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:25.902 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:25.903 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:25.903 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:25.905 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:26.043 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:26.044 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:26.055 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:26.056 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:26.057 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:26.058 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:26.061 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:26.061 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 06:12:26.096 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 06:12:26.193 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:12:26.193 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:12:26.193 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:12:26.193 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:12:26.193 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:12:26.193 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:12:26.193 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:12:26.193 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:12:26.193 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:12:26.194 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:12:26.194 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:12:26.303 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:12:26.339 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 06:12:26.430 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 06:12:26.451 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:12:26.461 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-25 06:12:26.463 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.608 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.610 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:12:26.613 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-25 06:12:26.618 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-25 06:12:26.622 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:12:26.662 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:12:26.686 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:12:26.699 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.703 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-25 06:12:26.704 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.707 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-25 06:12:26.709 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.710 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.710 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:12:26.710 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.710 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.710 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:12:26.713 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:12:26.713 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:12:26.713 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.713 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:12:26.713 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.713 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:12:26.714 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.714 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.714 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:12:26.714 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.714 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.714 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:12:26.716 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:12:26.716 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:12:26.716 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.717 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:12:26.717 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.717 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:12:26.717 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.717 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.717 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:12:26.717 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.717 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.718 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:12:26.718 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:12:26.719 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:12:26.719 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.719 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:12:26.719 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.719 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:12:26.722 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 06:12:26.727 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 06:12:26.728 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.728 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.728 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:12:26.728 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.728 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.728 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:12:26.737 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:12:26.753 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:12:26.773 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.773 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 35ms reading results.
2025-09-25 06:12:26.773 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.773 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:12:26.775 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 06:12:26.777 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.777 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.777 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:12:26.777 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.777 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.777 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:12:26.779 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:12:26.779 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:12:26.779 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.779 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:12:26.780 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.780 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:12:26.780 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 06:12:26.780 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.780 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.780 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:12:26.780 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.780 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.780 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:12:26.781 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:12:26.781 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:12:26.781 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.782 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:12:26.782 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.782 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:12:26.782 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.782 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.782 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:12:26.782 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.782 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:26.782 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:12:26.783 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:12:26.784 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:12:26.784 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.784 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:12:26.784 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.784 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:12:26.785 +07:00 [INF] Data seeding completed successfully
2025-09-25 06:12:26.786 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:12:26.787 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:26.788 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:12:26.803 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 06:12:26.910 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 06:12:26.977 +07:00 [DBG] Hosting starting
2025-09-25 06:12:26.983 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 06:12:26.984 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 06:12:26.985 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 06:12:26.987 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 06:12:26.989 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 06:12:26.990 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 06:12:26.993 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 06:12:26.995 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 06:12:26.995 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 06:12:26.996 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 06:12:26.997 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 06:12:26.997 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 06:12:26.998 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 06:12:26.998 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 06:12:27.001 +07:00 [DBG] Middleware loaded
2025-09-25 06:12:27.002 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 06:12:27.003 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 06:12:27.023 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 06:12:27.031 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 06:12:27.031 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 06:12:27.031 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 06:12:27.031 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 06:12:27.031 +07:00 [INF] Hosting environment: Development
2025-09-25 06:12:27.031 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 06:12:27.032 +07:00 [DBG] Hosting started
2025-09-25 06:12:27.102 +07:00 [DBG] Connection id "0HNFRNVA0DOIU" accepted.
2025-09-25 06:12:27.104 +07:00 [DBG] Connection id "0HNFRNVA0DOIU" started.
2025-09-25 06:12:27.131 +07:00 [DBG] Connection id "0HNFRNVA0DOIV" accepted.
2025-09-25 06:12:27.132 +07:00 [DBG] Connection id "0HNFRNVA0DOIV" started.
2025-09-25 06:12:27.134 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 06:12:27.142 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 06:12:27.220 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 06:12:27.227 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 06:12:27.227 +07:00 [DBG] Connection id "0HNFRNVA0DOIU" completed keep alive response.
2025-09-25 06:12:27.230 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 96.2504ms
2025-09-25 06:12:27.233 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 06:12:27.236 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 06:12:27.236 +07:00 [DBG] Connection id "0HNFRNVA0DOIU" completed keep alive response.
2025-09-25 06:12:27.237 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.1161ms
2025-09-25 06:12:27.282 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 06:12:27.467 +07:00 [DBG] Connection id "0HNFRNVA0DOIU" completed keep alive response.
2025-09-25 06:12:27.467 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 184.805ms
2025-09-25 06:12:37.290 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 06:12:37.294 +07:00 [DBG] POST requests are not supported
2025-09-25 06:12:37.296 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 06:12:37.296 +07:00 [DBG] POST requests are not supported
2025-09-25 06:12:37.297 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:12:37.298 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:12:37.368 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:12:37.369 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:12:37.371 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:12:37.478 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:12:37.479 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:12:37.485 +07:00 [DBG] Authorization was successful.
2025-09-25 06:12:37.496 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:12:37.545 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:12:37.548 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:12:37.549 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:12:37.550 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:12:37.551 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:12:37.551 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:12:37.554 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:12:37.696 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:12:37.704 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:12:37.713 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:12:37.714 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:12:37.717 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:12:37.718 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:12:37.719 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:12:37.735 +07:00 [DBG] Connection id "0HNFRNVA0DOIU", Request id "0HNFRNVA0DOIU:00000004": started reading request body.
2025-09-25 06:12:37.736 +07:00 [DBG] Connection id "0HNFRNVA0DOIU", Request id "0HNFRNVA0DOIU:00000004": done reading request body.
2025-09-25 06:12:37.749 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:12:37.750 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:12:37.750 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:12:37.750 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:12:37.764 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:12:37.766 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:12:37.768 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:12:37.769 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:12:37.770 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:12:37.770 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:12:37.770 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:12:37.776 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 06:12:37.778 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:12:37.862 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:12:37.873 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-25 06:12:37.901 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-25 06:12:37.999 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 06:12:38.012 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:12:38.016 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-25 06:12:38.016 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:38.017 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:38.017 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:12:38.017 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:38.018 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:12:38.019 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:12:38.041 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:12:38.055 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:12:38.055 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 13ms reading results.
2025-09-25 06:12:38.055 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:38.056 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:12:38.069 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-25 06:12:38.081 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-25 06:12:38.081 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-25 06:12:38.082 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-25 06:12:38.085 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-25 06:12:38.189 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-25 06:12:38.205 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 06:12:38.220 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:38.221 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:38.222 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:12:38.223 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-25 06:12:38.224 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-25 06:12:38.224 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:12:38.309 +07:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:12:38.331 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:12:38.332 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 22ms reading results.
2025-09-25 06:12:38.333 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:38.334 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:12:38.381 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:12:38.383 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:12:38.385 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:12:38.385 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:12:40.568 +07:00 [DBG] AI explanation generated (preview): Recommend: rv2@.com (Id: 10)

* Higher overall score (0.5073) compared to rv1@.com.
* Possesses relevant skills and matched tokens related to AI.

* Relatively low overall score.
* Performance score i...
2025-09-25 06:12:40.577 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:12:40.580 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:12:40.581 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:12:40.586 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:12:40.587 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:12:40.669 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3114.6781ms
2025-09-25 06:12:40.670 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:12:40.674 +07:00 [DBG] Connection id "0HNFRNVA0DOIU" completed keep alive response.
2025-09-25 06:12:40.675 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:12:40.675 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:12:40.675 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:12:40.679 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3388.6971ms
2025-09-25 06:13:16.941 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:13:16.941 +07:00 [DBG] POST requests are not supported
2025-09-25 06:13:16.941 +07:00 [DBG] POST requests are not supported
2025-09-25 06:13:16.942 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:13:16.942 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:13:16.948 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:13:16.949 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:13:16.949 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:13:16.962 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:13:16.962 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:13:16.968 +07:00 [DBG] Authorization was successful.
2025-09-25 06:13:16.969 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:13:16.971 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:13:16.972 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:13:16.972 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:13:16.972 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:13:16.973 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:13:16.973 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:13:16.974 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:13:16.979 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:13:16.980 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:13:16.981 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:13:16.982 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:13:16.982 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:13:16.982 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:13:16.982 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:13:16.983 +07:00 [DBG] Connection id "0HNFRNVA0DOIU", Request id "0HNFRNVA0DOIU:00000005": started reading request body.
2025-09-25 06:13:16.985 +07:00 [DBG] Connection id "0HNFRNVA0DOIU", Request id "0HNFRNVA0DOIU:00000005": done reading request body.
2025-09-25 06:13:16.986 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:13:16.986 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:13:16.986 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:13:16.987 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:13:16.988 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:13:16.988 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:13:16.988 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:13:16.988 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:13:16.988 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:13:16.988 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:13:16.989 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:13:16.989 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 06:13:16.990 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:13:17.013 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:13:17.016 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:13:17.016 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:13:17.016 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:13:17.017 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:13:17.017 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:13:17.017 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:13:17.017 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:13:17.017 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:13:17.027 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:13:17.028 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:13:17.028 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:13:17.028 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:13:17.029 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:13:17.030 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:13:17.033 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:13:17.033 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:13:17.034 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:13:17.034 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:13:17.034 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:13:17.124 +07:00 [INF] Executed DbCommand (90ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:13:17.128 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:13:17.128 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-09-25 06:13:17.129 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:13:17.130 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:13:17.134 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:13:17.135 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:13:17.136 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:13:17.140 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:13:18.500 +07:00 [DBG] AI explanation generated (preview): Recommend: hieptmse140293@fpt.edu.vn (Id: 7)
* Higher overall score (0.7473) and performance score (1.500).
* Relevant expertise indicated by matched token "mobile".

Concerns:
* Moderate workload (0....
2025-09-25 06:13:18.501 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:13:18.501 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:13:18.502 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:13:18.502 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:13:18.502 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:13:18.504 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1530.2992ms
2025-09-25 06:13:18.504 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:13:18.505 +07:00 [DBG] Connection id "0HNFRNVA0DOIU" completed keep alive response.
2025-09-25 06:13:18.505 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:13:18.505 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:13:18.505 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:13:18.506 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1565.0868ms
2025-09-25 06:14:39.143 +07:00 [DBG] Connection id "0HNFRNVA0DOIV" disconnecting.
2025-09-25 06:14:39.145 +07:00 [DBG] Connection id "0HNFRNVA0DOIV" stopped.
2025-09-25 06:14:39.149 +07:00 [DBG] Connection id "0HNFRNVA0DOIV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:15:29.554 +07:00 [DBG] Connection id "0HNFRNVA0DOIU" disconnecting.
2025-09-25 06:15:29.554 +07:00 [DBG] Connection id "0HNFRNVA0DOIU" stopped.
2025-09-25 06:15:29.554 +07:00 [DBG] Connection id "0HNFRNVA0DOIU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:17:19.178 +07:00 [DBG] Connection id "0HNFRNVA0DOJ0" accepted.
2025-09-25 06:17:19.179 +07:00 [DBG] Connection id "0HNFRNVA0DOJ0" started.
2025-09-25 06:17:19.179 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:17:19.179 +07:00 [DBG] POST requests are not supported
2025-09-25 06:17:19.179 +07:00 [DBG] POST requests are not supported
2025-09-25 06:17:19.179 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:17:19.179 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:17:19.179 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:17:19.180 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:17:19.180 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:17:19.183 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:17:19.183 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:17:19.184 +07:00 [DBG] Authorization was successful.
2025-09-25 06:17:19.184 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:17:19.185 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:17:19.185 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:17:19.185 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:17:19.185 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:17:19.185 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:17:19.185 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:17:19.186 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:17:19.215 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:17:19.215 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:17:19.224 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:17:19.224 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:17:19.224 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:17:19.224 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:17:19.225 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:17:19.225 +07:00 [DBG] Connection id "0HNFRNVA0DOJ0", Request id "0HNFRNVA0DOJ0:00000001": started reading request body.
2025-09-25 06:17:19.225 +07:00 [DBG] Connection id "0HNFRNVA0DOJ0", Request id "0HNFRNVA0DOJ0:00000001": done reading request body.
2025-09-25 06:17:19.225 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:17:19.225 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:17:19.225 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:17:19.225 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:17:19.225 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:17:19.225 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:17:19.225 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:17:19.226 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:17:19.226 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:17:19.226 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:17:19.226 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:17:19.226 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:17:19.226 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:17:19.228 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:17:19.230 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:17:19.230 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:17:19.230 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:17:19.231 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:17:19.231 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:17:19.232 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:17:19.232 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:17:19.232 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:17:19.246 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:17:19.247 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:17:19.247 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:17:19.247 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:17:19.247 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:17:19.249 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:17:19.249 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:17:19.250 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:17:19.250 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:17:19.250 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:17:19.250 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:17:19.333 +07:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:17:19.335 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:17:19.335 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 06:17:19.335 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:17:19.335 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:17:19.337 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:17:19.337 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:17:19.338 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:17:19.338 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:17:21.051 +07:00 [DBG] AI explanation generated (preview): Recommend: hieptmse140293@fpt.edu.vn (Id: 7)
* Highest overall score (0.6490) indicating strong suitability.
* High performance score (1.500) and relevant "mobile" token match.

Concerns:
* Moderate w...
2025-09-25 06:17:21.051 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:17:21.052 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:17:21.052 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:17:21.052 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:17:21.052 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:17:21.052 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1866.7723ms
2025-09-25 06:17:21.052 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:17:21.052 +07:00 [DBG] Connection id "0HNFRNVA0DOJ0" completed keep alive response.
2025-09-25 06:17:21.053 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:17:21.053 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:17:21.053 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:17:21.053 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1873.8404ms
2025-09-25 06:19:24.361 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:19:24.361 +07:00 [DBG] POST requests are not supported
2025-09-25 06:19:24.361 +07:00 [DBG] POST requests are not supported
2025-09-25 06:19:24.361 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:19:24.361 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:19:24.361 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:19:24.361 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:19:24.361 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:19:24.362 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:19:24.362 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:19:24.362 +07:00 [DBG] Authorization was successful.
2025-09-25 06:19:24.362 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:19:24.362 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:19:24.362 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:19:24.362 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:19:24.362 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:19:24.362 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:19:24.362 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:19:24.363 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:19:24.363 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:19:24.363 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:19:24.363 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:19:24.363 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:19:24.363 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:19:24.363 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:19:24.363 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:19:24.363 +07:00 [DBG] Connection id "0HNFRNVA0DOJ0", Request id "0HNFRNVA0DOJ0:00000002": started reading request body.
2025-09-25 06:19:24.363 +07:00 [DBG] Connection id "0HNFRNVA0DOJ0", Request id "0HNFRNVA0DOJ0:00000002": done reading request body.
2025-09-25 06:19:24.364 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:19:24.364 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:19:24.364 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:19:24.364 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:19:24.364 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:19:24.364 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:19:24.364 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:19:24.364 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:19:24.364 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:19:24.364 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:19:24.364 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:19:24.364 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:19:24.364 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:19:24.365 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:19:24.365 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:19:24.365 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:19:24.365 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:19:24.365 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:19:24.365 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:19:24.366 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:19:24.366 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:19:24.366 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:19:24.381 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:19:24.382 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:19:24.382 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:19:24.382 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:19:24.382 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:19:24.383 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:19:24.385 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:19:24.385 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:19:24.385 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:19:24.385 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:19:24.385 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:19:24.462 +07:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:19:24.462 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:19:24.462 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:19:24.462 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:19:24.462 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:19:24.463 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:19:24.463 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:19:24.463 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:19:24.464 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:19:26.177 +07:00 [DBG] AI explanation generated (preview): Recommend: hieptmse140293@fpt.edu.vn (Id: 7)
Rationale:
- Top internal overall score (0.6490) and good skill overlap (0.3381).
Alternatives:
- rv2@.com (Id: 10): score 0.4090
- rv3@.com (Id: 11): ...
2025-09-25 06:19:26.177 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:19:26.178 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:19:26.178 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:19:26.178 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:19:26.178 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:19:26.178 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1815.8231ms
2025-09-25 06:19:26.178 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:19:26.179 +07:00 [DBG] Connection id "0HNFRNVA0DOJ0" completed keep alive response.
2025-09-25 06:19:26.179 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:19:26.179 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:19:26.179 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:19:26.179 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1818.2317ms
2025-09-25 06:21:36.493 +07:00 [DBG] Connection id "0HNFRNVA0DOJ0" disconnecting.
2025-09-25 06:21:36.493 +07:00 [DBG] Connection id "0HNFRNVA0DOJ0" stopped.
2025-09-25 06:21:36.493 +07:00 [DBG] Connection id "0HNFRNVA0DOJ0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:21:47.624 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1" accepted.
2025-09-25 06:21:47.624 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1" started.
2025-09-25 06:21:47.624 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:21:47.624 +07:00 [DBG] POST requests are not supported
2025-09-25 06:21:47.625 +07:00 [DBG] POST requests are not supported
2025-09-25 06:21:47.625 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:21:47.625 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:21:47.625 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:21:47.625 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:21:47.625 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:21:47.625 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:21:47.625 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:21:47.625 +07:00 [DBG] Authorization was successful.
2025-09-25 06:21:47.627 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:21:47.628 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:21:47.628 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:21:47.629 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:21:47.629 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:21:47.629 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:21:47.629 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:21:47.629 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:21:47.630 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:21:47.630 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:21:47.630 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:21:47.630 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:21:47.630 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:21:47.630 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:21:47.630 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:21:47.630 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1", Request id "0HNFRNVA0DOJ1:00000001": started reading request body.
2025-09-25 06:21:47.630 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1", Request id "0HNFRNVA0DOJ1:00000001": done reading request body.
2025-09-25 06:21:47.630 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:21:47.630 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:21:47.630 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:21:47.631 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:21:47.631 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:21:47.631 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:21:47.631 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:21:47.631 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:21:47.632 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:21:47.633 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:21:47.633 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:21:47.633 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:21:47.633 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:21:47.634 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:21:47.635 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:21:47.635 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:21:47.635 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:47.636 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:47.636 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:21:47.636 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:47.636 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:47.636 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:21:47.646 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:21:47.646 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:21:47.646 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:21:47.646 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:47.646 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:21:47.647 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:47.647 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:47.647 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:21:47.647 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:47.647 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:47.647 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:21:47.716 +07:00 [INF] Executed DbCommand (68ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:21:47.717 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:21:47.717 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:21:47.717 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:47.717 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:21:47.717 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:21:47.717 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:21:47.718 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:21:47.718 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:21:49.635 +07:00 [DBG] AI explanation generated (preview): Recommend: hieptmse140293@fpt.edu.vn (Id: 7)
* High Overall score (0.6490) indicating strong suitability.
* High Performance score (1.500) and relevant 'mobile' token match.
Concerns:
* Moderate workl...
2025-09-25 06:21:49.636 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:21:49.636 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:21:49.636 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:21:49.636 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:21:49.636 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:21:49.636 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2007.3037ms
2025-09-25 06:21:49.636 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:21:49.636 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1" completed keep alive response.
2025-09-25 06:21:49.636 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:21:49.636 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:49.636 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:21:49.636 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2012.0467ms
2025-09-25 06:21:53.900 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:21:53.900 +07:00 [DBG] POST requests are not supported
2025-09-25 06:21:53.900 +07:00 [DBG] POST requests are not supported
2025-09-25 06:21:53.900 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:21:53.900 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:21:53.900 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:21:53.900 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:21:53.900 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:21:53.901 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:21:53.901 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:21:53.901 +07:00 [DBG] Authorization was successful.
2025-09-25 06:21:53.901 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:21:53.901 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:21:53.901 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:21:53.901 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:21:53.901 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:21:53.901 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:21:53.901 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:21:53.901 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:21:53.901 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:21:53.905 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:21:53.906 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:21:53.906 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:21:53.906 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:21:53.906 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:21:53.906 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:21:53.906 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1", Request id "0HNFRNVA0DOJ1:00000002": started reading request body.
2025-09-25 06:21:53.906 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1", Request id "0HNFRNVA0DOJ1:00000002": done reading request body.
2025-09-25 06:21:53.907 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:21:53.907 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:21:53.907 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:21:53.907 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:21:53.907 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:21:53.907 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:21:53.907 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:21:53.907 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:21:53.907 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:21:53.907 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:21:53.907 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:21:53.908 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:21:53.908 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:21:53.909 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:21:53.910 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:21:53.910 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:21:53.910 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:53.910 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:53.911 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:21:53.911 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:53.911 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:53.911 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:21:53.921 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:21:53.921 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:21:53.921 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:21:53.921 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:53.921 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:21:53.922 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:53.922 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:53.922 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:21:53.922 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:53.922 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:53.922 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:21:54.003 +07:00 [INF] Executed DbCommand (81ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:21:54.004 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:21:54.004 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:21:54.004 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:54.004 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:21:54.005 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:21:54.005 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:21:54.005 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:21:54.005 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:21:55.612 +07:00 [DBG] AI explanation generated (preview): Recommend: hieptmse140293@fpt.edu.vn (Id: 7)
Rationale:
- Top internal overall score (0.6490) and good skill overlap (0.3381).
Alternatives:
- rv2@.com (Id: 10): score 0.4090
- rv3@.com (Id: 11): ...
2025-09-25 06:21:55.612 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:21:55.613 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:21:55.613 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:21:55.613 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:21:55.613 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:21:55.615 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1714.2473ms
2025-09-25 06:21:55.616 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:21:55.616 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1" completed keep alive response.
2025-09-25 06:21:55.616 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:21:55.616 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:55.616 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:21:55.616 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1716.2328ms
2025-09-25 06:21:59.131 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:21:59.131 +07:00 [DBG] POST requests are not supported
2025-09-25 06:21:59.131 +07:00 [DBG] POST requests are not supported
2025-09-25 06:21:59.131 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:21:59.131 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:21:59.131 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:21:59.131 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:21:59.131 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:21:59.132 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:21:59.132 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:21:59.132 +07:00 [DBG] Authorization was successful.
2025-09-25 06:21:59.132 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:21:59.132 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:21:59.132 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:21:59.132 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:21:59.132 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:21:59.132 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:21:59.132 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:21:59.132 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:21:59.133 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:21:59.133 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:21:59.133 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:21:59.133 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:21:59.133 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:21:59.133 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:21:59.133 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:21:59.133 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1", Request id "0HNFRNVA0DOJ1:00000003": started reading request body.
2025-09-25 06:21:59.133 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1", Request id "0HNFRNVA0DOJ1:00000003": done reading request body.
2025-09-25 06:21:59.133 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:21:59.133 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:21:59.133 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:21:59.134 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:21:59.134 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:21:59.134 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:21:59.134 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:21:59.134 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:21:59.134 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:21:59.134 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:21:59.134 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:21:59.134 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:21:59.134 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:21:59.135 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:21:59.135 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:21:59.135 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:21:59.135 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:59.135 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:59.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:21:59.136 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:59.136 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:59.136 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:21:59.137 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:21:59.137 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:21:59.137 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:21:59.137 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:59.137 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:21:59.138 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:59.138 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:59.139 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:21:59.139 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:59.139 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:21:59.139 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:21:59.145 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:21:59.146 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:21:59.146 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:21:59.146 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:21:59.146 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:21:59.147 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:21:59.147 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:21:59.147 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:21:59.147 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:22:01.240 +07:00 [DBG] AI explanation generated (preview): Recommend: hieptmse140293@fpt.edu.vn (Id: 7)
Rationale:
- Top internal overall score (0.6490) and good skill overlap (0.3381).
Alternatives:
- rv2@.com (Id: 10): score 0.4090
- rv3@.com (Id: 11): ...
2025-09-25 06:22:01.240 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:22:01.240 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:22:01.240 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:22:01.240 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:22:01.240 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:22:01.241 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2108.2334ms
2025-09-25 06:22:01.241 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:22:01.243 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1" completed keep alive response.
2025-09-25 06:22:01.243 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:22:01.243 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:22:01.244 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:22:01.244 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2112.9902ms
2025-09-25 06:22:09.195 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:22:09.195 +07:00 [DBG] POST requests are not supported
2025-09-25 06:22:09.195 +07:00 [DBG] POST requests are not supported
2025-09-25 06:22:09.195 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:22:09.195 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:22:09.195 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:22:09.195 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:22:09.195 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:22:09.196 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:22:09.196 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:22:09.196 +07:00 [DBG] Authorization was successful.
2025-09-25 06:22:09.196 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:22:09.196 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:22:09.196 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:22:09.196 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:22:09.196 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:22:09.196 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:22:09.196 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:22:09.196 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:22:09.197 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:22:09.197 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:22:09.197 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:22:09.198 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:22:09.198 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:22:09.198 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:22:09.198 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:22:09.198 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1", Request id "0HNFRNVA0DOJ1:00000004": started reading request body.
2025-09-25 06:22:09.198 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1", Request id "0HNFRNVA0DOJ1:00000004": done reading request body.
2025-09-25 06:22:09.198 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:22:09.198 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:22:09.198 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:22:09.198 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:22:09.198 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:22:09.198 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:22:09.198 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:22:09.198 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:22:09.198 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:22:09.199 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:22:09.199 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:22:09.199 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:22:09.199 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:22:09.199 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:22:09.200 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:22:09.200 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:22:09.200 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:22:09.200 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:22:09.200 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:22:09.200 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:22:09.200 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:22:09.200 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:22:09.201 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:22:09.202 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:22:09.202 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:22:09.202 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:22:09.202 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:22:09.202 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:22:09.203 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:22:09.203 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:22:09.203 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:22:09.203 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:22:09.203 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:22:09.205 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:22:09.210 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:22:09.210 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:22:09.210 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:22:09.210 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:22:09.211 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:22:09.211 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:22:09.211 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:22:09.211 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:22:10.831 +07:00 [DBG] AI explanation generated (preview): Recommend: hieptmse140293@fpt.edu.vn (Id: 7)
Rationale:
- Top internal overall score (0.6490) and good skill overlap (0.3381).
Alternatives:
- rv2@.com (Id: 10): score 0.4090
- rv3@.com (Id: 11): ...
2025-09-25 06:22:10.832 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:22:10.832 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:22:10.832 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:22:10.832 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:22:10.832 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:22:10.832 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1636.1813ms
2025-09-25 06:22:10.833 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:22:10.833 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1" completed keep alive response.
2025-09-25 06:22:10.833 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:22:10.833 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:22:10.833 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:22:10.833 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1638.0269ms
2025-09-25 06:23:35.172 +07:00 [INF] Application is shutting down...
2025-09-25 06:23:35.174 +07:00 [DBG] Hosting stopping
2025-09-25 06:23:35.179 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1" disconnecting.
2025-09-25 06:23:35.184 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1" stopped.
2025-09-25 06:23:35.184 +07:00 [DBG] Connection id "0HNFRNVA0DOJ1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:23:35.186 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 06:23:35.189 +07:00 [DBG] Hosting stopped
2025-09-25 06:31:14.963 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 06:31:15.018 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 06:31:15.159 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.172 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.183 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.185 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.185 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.186 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.323 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.324 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.339 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.340 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.340 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.341 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.345 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.346 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 06:31:15.379 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 06:31:15.379 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 06:31:15.380 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 06:31:15.380 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 06:31:15.380 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 06:31:15.380 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 06:31:15.380 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 06:31:15.381 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 06:31:15.478 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:31:15.478 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:31:15.478 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:31:15.479 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:31:15.479 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:31:15.479 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:31:15.479 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:31:15.479 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:31:15.479 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:31:15.480 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:31:15.480 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 06:31:15.583 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:31:15.624 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 06:31:15.724 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 06:31:15.750 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:31:15.760 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-25 06:31:15.762 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:15.893 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:15.895 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:31:15.898 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-25 06:31:15.902 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-25 06:31:15.906 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:31:15.946 +07:00 [INF] Executed DbCommand (39ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:31:15.970 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:31:15.983 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:31:15.988 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-25 06:31:15.989 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:15.993 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-25 06:31:15.995 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:15.995 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:15.996 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:31:15.996 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:15.996 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:15.996 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:31:15.999 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:31:15.999 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:31:16.000 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.000 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:31:16.000 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.000 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:31:16.000 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.001 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.001 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:31:16.001 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.001 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.001 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:31:16.002 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:31:16.002 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:31:16.002 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.002 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:31:16.002 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.002 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:31:16.003 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.003 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.003 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:31:16.003 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.004 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.004 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:31:16.005 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 06:31:16.005 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:31:16.006 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.006 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:31:16.006 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.006 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:31:16.009 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 06:31:16.014 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 06:31:16.015 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.015 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.015 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:31:16.015 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.015 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.015 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:31:16.024 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:31:16.041 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:31:16.062 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.062 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-25 06:31:16.062 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.062 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:31:16.064 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 06:31:16.066 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.067 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.067 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:31:16.067 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.067 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.067 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:31:16.068 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:31:16.068 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:31:16.068 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.068 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:31:16.069 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.069 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:31:16.069 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 06:31:16.069 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.069 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.069 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:31:16.069 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.069 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.069 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:31:16.070 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:31:16.070 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:31:16.071 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.071 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:31:16.071 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.071 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:31:16.071 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.071 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.071 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:31:16.071 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.071 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:16.071 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:31:16.073 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 06:31:16.073 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 06:31:16.074 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.074 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:31:16.074 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.074 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:31:16.074 +07:00 [INF] Data seeding completed successfully
2025-09-25 06:31:16.075 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:31:16.076 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:16.077 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:31:16.085 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 06:31:16.185 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 06:31:16.254 +07:00 [DBG] Hosting starting
2025-09-25 06:31:16.260 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 06:31:16.262 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 06:31:16.262 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 06:31:16.265 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 06:31:16.268 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 06:31:16.268 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 06:31:16.272 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 06:31:16.274 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 06:31:16.275 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 06:31:16.276 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 06:31:16.277 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 06:31:16.277 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 06:31:16.278 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 06:31:16.278 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 06:31:16.282 +07:00 [DBG] Middleware loaded
2025-09-25 06:31:16.283 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 06:31:16.283 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 06:31:16.315 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 06:31:16.328 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 06:31:16.328 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 06:31:16.328 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 06:31:16.329 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 06:31:16.329 +07:00 [INF] Hosting environment: Development
2025-09-25 06:31:16.329 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 06:31:16.330 +07:00 [DBG] Hosting started
2025-09-25 06:31:16.400 +07:00 [DBG] Connection id "0HNFRO9QI81NV" accepted.
2025-09-25 06:31:16.401 +07:00 [DBG] Connection id "0HNFRO9QI81NV" started.
2025-09-25 06:31:16.428 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 06:31:16.433 +07:00 [DBG] Connection id "0HNFRO9QI81O0" accepted.
2025-09-25 06:31:16.433 +07:00 [DBG] Connection id "0HNFRO9QI81O0" started.
2025-09-25 06:31:16.437 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 06:31:16.512 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 06:31:16.519 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 06:31:16.520 +07:00 [DBG] Connection id "0HNFRO9QI81NV" completed keep alive response.
2025-09-25 06:31:16.521 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 93.9451ms
2025-09-25 06:31:16.526 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 06:31:16.528 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 06:31:16.528 +07:00 [DBG] Connection id "0HNFRO9QI81NV" completed keep alive response.
2025-09-25 06:31:16.529 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.407ms
2025-09-25 06:31:16.574 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 06:31:16.740 +07:00 [DBG] Connection id "0HNFRO9QI81NV" completed keep alive response.
2025-09-25 06:31:16.741 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 167.0204ms
2025-09-25 06:31:24.765 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:31:24.773 +07:00 [DBG] POST requests are not supported
2025-09-25 06:31:24.776 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 06:31:24.776 +07:00 [DBG] POST requests are not supported
2025-09-25 06:31:24.779 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:31:24.782 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:31:24.876 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:31:24.879 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:31:24.880 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:31:24.982 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:31:24.983 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:31:24.991 +07:00 [DBG] Authorization was successful.
2025-09-25 06:31:25.011 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:31:25.060 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:31:25.063 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:31:25.064 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:31:25.065 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:31:25.065 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:31:25.066 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:31:25.067 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:31:25.202 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:31:25.206 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:31:25.208 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:31:25.209 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:31:25.210 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:31:25.210 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:31:25.218 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:31:25.247 +07:00 [DBG] Connection id "0HNFRO9QI81NV", Request id "0HNFRO9QI81NV:00000004": started reading request body.
2025-09-25 06:31:25.248 +07:00 [DBG] Connection id "0HNFRO9QI81NV", Request id "0HNFRO9QI81NV:00000004": done reading request body.
2025-09-25 06:31:25.258 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:31:25.259 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:31:25.260 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:31:25.260 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:31:25.274 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:31:25.275 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:31:25.276 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:31:25.280 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:31:25.281 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:31:25.281 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:31:25.281 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:31:25.287 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:31:25.289 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:31:25.373 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:31:25.394 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-25 06:31:25.419 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-25 06:31:25.503 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 06:31:25.508 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:31:25.508 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:31:25.509 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:25.509 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:25.509 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:31:25.509 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:25.510 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:25.510 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:31:25.524 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:31:25.544 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:31:25.545 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 19ms reading results.
2025-09-25 06:31:25.547 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:25.548 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:31:25.566 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-25 06:31:25.588 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-25 06:31:25.589 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-25 06:31:25.590 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-25 06:31:25.591 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-25 06:31:25.714 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-25 06:31:25.727 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 06:31:25.735 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:25.736 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:25.737 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:31:25.737 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:25.737 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:31:25.738 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:31:25.822 +07:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:31:25.836 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:31:25.836 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 12ms reading results.
2025-09-25 06:31:25.837 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:25.837 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:31:25.903 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:31:25.904 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:31:25.907 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:31:25.907 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:31:28.654 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 40.9%, SkillMatch: 33.8%. Rationale: Strong match on AI, a key submission element.
Recommendation 2: rv7@fpt.edu.vn (Id:7), Overall: 64.9%, SkillM...
2025-09-25 06:31:28.659 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:31:28.660 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:31:28.661 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:31:28.663 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:31:28.663 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:31:28.731 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3661.5427ms
2025-09-25 06:31:28.733 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:31:28.739 +07:00 [DBG] Connection id "0HNFRO9QI81NV" completed keep alive response.
2025-09-25 06:31:28.739 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:31:28.740 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:31:28.740 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:31:28.741 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3976.0215ms
2025-09-25 06:33:27.478 +07:00 [DBG] Connection id "0HNFRO9QI81O0" disconnecting.
2025-09-25 06:33:27.480 +07:00 [DBG] Connection id "0HNFRO9QI81O0" stopped.
2025-09-25 06:33:27.482 +07:00 [DBG] Connection id "0HNFRO9QI81O0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:33:39.575 +07:00 [DBG] Connection id "0HNFRO9QI81NV" disconnecting.
2025-09-25 06:33:39.576 +07:00 [DBG] Connection id "0HNFRO9QI81NV" stopped.
2025-09-25 06:33:39.576 +07:00 [DBG] Connection id "0HNFRO9QI81NV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:35:33.963 +07:00 [DBG] Connection id "0HNFRO9QI81O1" accepted.
2025-09-25 06:35:33.963 +07:00 [DBG] Connection id "0HNFRO9QI81O1" started.
2025-09-25 06:35:33.964 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 06:35:33.966 +07:00 [DBG] POST requests are not supported
2025-09-25 06:35:33.966 +07:00 [DBG] POST requests are not supported
2025-09-25 06:35:33.967 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:35:33.967 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:35:33.973 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:35:33.975 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:35:33.976 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:35:33.984 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:35:33.986 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:35:33.990 +07:00 [DBG] Authorization was successful.
2025-09-25 06:35:33.993 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:35:33.994 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:35:33.994 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:35:33.995 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:35:33.995 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:35:33.996 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:35:33.997 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:35:33.998 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:35:34.002 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:35:34.005 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:35:34.006 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:35:34.006 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:35:34.006 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:35:34.007 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:35:34.007 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:35:34.007 +07:00 [DBG] Connection id "0HNFRO9QI81O1", Request id "0HNFRO9QI81O1:00000001": started reading request body.
2025-09-25 06:35:34.008 +07:00 [DBG] Connection id "0HNFRO9QI81O1", Request id "0HNFRO9QI81O1:00000001": done reading request body.
2025-09-25 06:35:34.008 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:35:34.009 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:35:34.009 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:35:34.009 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:35:34.011 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:35:34.011 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:35:34.013 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:35:34.014 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:35:34.014 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:35:34.014 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:35:34.015 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:35:34.016 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:35:34.020 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":3,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:35:34.038 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:35:34.040 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:35:34.041 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:35:34.041 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:35:34.042 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:35:34.042 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:35:34.043 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:35:34.043 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:35:34.043 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:35:34.054 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:35:34.056 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:35:34.057 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 06:35:34.057 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:35:34.057 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:35:34.060 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:35:34.060 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:35:34.062 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:35:34.063 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:35:34.063 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-25 06:35:34.063 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:35:34.152 +07:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:35:34.157 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:35:34.157 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-09-25 06:35:34.158 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:35:34.158 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:35:34.163 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:35:34.167 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:35:34.168 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:35:34.170 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:35:36.923 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 40.9%, SkillMatch: 33.8%. Rationale: Strong AI expertise matching submission's AI and agent keywords.
Recommendation 2: rv3@.com (Id:11), Overall:...
2025-09-25 06:35:36.923 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:35:36.923 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:35:36.924 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:35:36.924 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:35:36.924 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:35:36.924 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2927.3479ms
2025-09-25 06:35:36.925 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:35:36.925 +07:00 [DBG] Connection id "0HNFRO9QI81O1" completed keep alive response.
2025-09-25 06:35:36.926 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:35:36.926 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:35:36.926 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:35:36.926 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2961.9467ms
2025-09-25 06:35:46.985 +07:00 [DBG] Connection id "0HNFRO9QI81O1" received FIN.
2025-09-25 06:35:46.985 +07:00 [DBG] Connection id "0HNFRO9QI81O1" disconnecting.
2025-09-25 06:35:46.986 +07:00 [DBG] Connection id "0HNFRO9QI81O1" stopped.
2025-09-25 06:35:46.986 +07:00 [DBG] Connection id "0HNFRO9QI81O1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:37:48.907 +07:00 [DBG] Connection id "0HNFRO9QI81O2" accepted.
2025-09-25 06:37:48.907 +07:00 [DBG] Connection id "0HNFRO9QI81O2" started.
2025-09-25 06:37:48.908 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 06:37:48.908 +07:00 [DBG] POST requests are not supported
2025-09-25 06:37:48.908 +07:00 [DBG] POST requests are not supported
2025-09-25 06:37:48.908 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:37:48.908 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:37:48.908 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:37:48.908 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:37:48.908 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:37:48.911 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:37:48.911 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:37:48.912 +07:00 [DBG] Authorization was successful.
2025-09-25 06:37:48.913 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:37:48.914 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:37:48.914 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:37:48.914 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:37:48.914 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:37:48.914 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:37:48.914 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:37:48.918 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:37:48.931 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:37:48.931 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:37:48.931 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:37:48.931 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:37:48.931 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:37:48.932 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:37:48.932 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:37:48.932 +07:00 [DBG] Connection id "0HNFRO9QI81O2", Request id "0HNFRO9QI81O2:00000001": started reading request body.
2025-09-25 06:37:48.932 +07:00 [DBG] Connection id "0HNFRO9QI81O2", Request id "0HNFRO9QI81O2:00000001": done reading request body.
2025-09-25 06:37:48.932 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:37:48.932 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:37:48.932 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:37:48.932 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:37:48.932 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:37:48.932 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:37:48.933 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:37:48.933 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:37:48.933 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:37:48.933 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:37:48.933 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:37:48.933 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:37:48.933 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:37:48.934 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:37:48.935 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:37:48.936 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:37:48.936 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:37:48.939 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:37:48.939 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:37:48.940 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:37:48.940 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-25 06:37:48.941 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:37:48.951 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:37:48.954 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:37:48.954 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:37:48.954 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:37:48.954 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:37:48.956 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:37:48.956 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:37:48.956 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:37:48.956 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:37:48.956 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:37:48.956 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:37:49.040 +07:00 [INF] Executed DbCommand (84ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:37:49.042 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:37:49.043 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-25 06:37:49.043 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:37:49.043 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:37:49.045 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:37:49.046 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:37:49.046 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:37:49.047 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:37:51.088 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 40.9%, SkillMatch: 33.8%. Rationale:  Matches "AI" and related tokens from the submission.

Recommendation 2:  No second reviewer available given ...
2025-09-25 06:37:51.088 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:37:51.088 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:37:51.088 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:37:51.088 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:37:51.089 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:37:51.091 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2176.2764ms
2025-09-25 06:37:51.091 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:37:51.091 +07:00 [DBG] Connection id "0HNFRO9QI81O2" completed keep alive response.
2025-09-25 06:37:51.091 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:37:51.092 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:37:51.092 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:37:51.092 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2184.2216ms
2025-09-25 06:38:39.072 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 06:38:39.072 +07:00 [DBG] POST requests are not supported
2025-09-25 06:38:39.073 +07:00 [DBG] POST requests are not supported
2025-09-25 06:38:39.073 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:38:39.073 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:38:39.073 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:38:39.073 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:38:39.073 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:38:39.073 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:38:39.073 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:38:39.073 +07:00 [DBG] Authorization was successful.
2025-09-25 06:38:39.074 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:38:39.076 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:38:39.076 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:38:39.076 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:38:39.076 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:38:39.076 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:38:39.077 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:38:39.077 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:38:39.078 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:38:39.078 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:38:39.078 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:38:39.079 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:38:39.079 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:38:39.079 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:38:39.079 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:38:39.079 +07:00 [DBG] Connection id "0HNFRO9QI81O2", Request id "0HNFRO9QI81O2:00000002": started reading request body.
2025-09-25 06:38:39.079 +07:00 [DBG] Connection id "0HNFRO9QI81O2", Request id "0HNFRO9QI81O2:00000002": done reading request body.
2025-09-25 06:38:39.080 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:38:39.080 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:38:39.081 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:38:39.081 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:38:39.082 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:38:39.082 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:38:39.082 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:38:39.082 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:38:39.082 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:38:39.082 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:38:39.082 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:38:39.082 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:38:39.082 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:38:39.085 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:38:39.086 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:38:39.086 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:38:39.086 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:38:39.086 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:38:39.086 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:38:39.087 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:38:39.087 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:38:39.087 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:38:39.098 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:38:39.099 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:38:39.099 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:38:39.099 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:38:39.100 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:38:39.102 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:38:39.102 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:38:39.103 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:38:39.103 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:38:39.103 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:38:39.105 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:38:39.205 +07:00 [INF] Executed DbCommand (100ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:38:39.207 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:38:39.207 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:38:39.207 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:38:39.207 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:38:39.207 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:38:39.208 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:38:39.209 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:38:39.209 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:38:41.692 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 40.9%, SkillMatch: 33.8%. Rationale: Strong match on AI skills, relevant to "ai agent" in submission context.
Recommendation 2: rv3@.com (Id:11), ...
2025-09-25 06:38:41.692 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:38:41.692 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:38:41.692 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:38:41.693 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:38:41.702 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:38:41.702 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2625.435ms
2025-09-25 06:38:41.703 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:38:41.703 +07:00 [DBG] Connection id "0HNFRO9QI81O2" completed keep alive response.
2025-09-25 06:38:41.703 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:38:41.703 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:38:41.703 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:38:41.703 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2630.6207ms
2025-09-25 06:40:51.983 +07:00 [DBG] Connection id "0HNFRO9QI81O2" disconnecting.
2025-09-25 06:40:51.984 +07:00 [DBG] Connection id "0HNFRO9QI81O2" stopped.
2025-09-25 06:40:52.004 +07:00 [DBG] Connection id "0HNFRO9QI81O2" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:44:12.653 +07:00 [DBG] Connection id "0HNFRO9QI81O3" accepted.
2025-09-25 06:44:12.653 +07:00 [DBG] Connection id "0HNFRO9QI81O3" started.
2025-09-25 06:44:12.653 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 06:44:12.653 +07:00 [DBG] POST requests are not supported
2025-09-25 06:44:12.653 +07:00 [DBG] POST requests are not supported
2025-09-25 06:44:12.653 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:44:12.653 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:44:12.653 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:44:12.653 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:44:12.653 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:44:12.659 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:44:12.659 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:44:12.660 +07:00 [DBG] Authorization was successful.
2025-09-25 06:44:12.661 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:44:12.661 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:44:12.661 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:44:12.661 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:44:12.661 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:44:12.661 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:44:12.662 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:44:12.663 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:44:12.663 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:44:12.664 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:44:12.664 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:44:12.664 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:44:12.664 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:44:12.664 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:44:12.664 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:44:12.664 +07:00 [DBG] Connection id "0HNFRO9QI81O3", Request id "0HNFRO9QI81O3:00000001": started reading request body.
2025-09-25 06:44:12.664 +07:00 [DBG] Connection id "0HNFRO9QI81O3", Request id "0HNFRO9QI81O3:00000001": done reading request body.
2025-09-25 06:44:12.665 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:44:12.665 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:44:12.665 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:44:12.665 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:44:12.665 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:44:12.665 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:44:12.665 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:44:12.665 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:44:12.665 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:44:12.665 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:44:12.665 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:44:12.666 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:44:12.666 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":3,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:44:12.667 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:44:12.667 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:44:12.667 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:44:12.667 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:44:12.734 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:44:12.734 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:44:12.734 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:44:12.734 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:44:12.735 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:44:12.763 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:44:12.763 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:44:12.763 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:44:12.764 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:44:12.764 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:44:12.767 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:44:12.767 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:44:12.767 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:44:12.767 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:44:12.768 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:44:12.768 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:44:12.871 +07:00 [INF] Executed DbCommand (103ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:44:12.871 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:44:12.871 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:44:12.871 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:44:12.871 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:44:12.872 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:44:12.872 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:44:12.872 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:44:12.872 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:44:15.423 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 40.9%, SkillMatch: 33.8%. Rationale: Strong AI skills match submission's "ai agent" focus.
Recommendation 2: rv3@.com (Id:11), Overall: 38.6%, Ski...
2025-09-25 06:44:15.423 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:44:15.423 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:44:15.423 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:44:15.423 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:44:15.423 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:44:15.424 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2762.3179ms
2025-09-25 06:44:15.424 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:44:15.424 +07:00 [DBG] Connection id "0HNFRO9QI81O3" completed keep alive response.
2025-09-25 06:44:15.424 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:44:15.425 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:44:15.425 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:44:15.425 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2772.2215ms
2025-09-25 06:45:30.343 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:45:30.344 +07:00 [DBG] POST requests are not supported
2025-09-25 06:45:30.344 +07:00 [DBG] POST requests are not supported
2025-09-25 06:45:30.344 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:45:30.344 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:45:30.344 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:45:30.344 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:45:30.344 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:45:30.344 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:45:30.344 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:45:30.345 +07:00 [DBG] Authorization was successful.
2025-09-25 06:45:30.345 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:45:30.345 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:45:30.345 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:45:30.345 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:45:30.347 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:45:30.347 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:45:30.351 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:45:30.351 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:45:30.351 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:45:30.351 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:45:30.352 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:45:30.352 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:45:30.352 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:45:30.352 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:45:30.353 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:45:30.353 +07:00 [DBG] Connection id "0HNFRO9QI81O3", Request id "0HNFRO9QI81O3:00000002": started reading request body.
2025-09-25 06:45:30.354 +07:00 [DBG] Connection id "0HNFRO9QI81O3", Request id "0HNFRO9QI81O3:00000002": done reading request body.
2025-09-25 06:45:30.354 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:45:30.354 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:45:30.354 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:45:30.354 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:45:30.354 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:45:30.354 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:45:30.354 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:45:30.354 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:45:30.354 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:45:30.354 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:45:30.354 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:45:30.354 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 06:45:30.354 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:45:30.355 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:45:30.356 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:45:30.356 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:45:30.356 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:45:30.356 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:45:30.357 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:45:30.357 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:45:30.357 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:45:30.357 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:45:30.367 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:45:30.367 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:45:30.367 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:45:30.368 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:45:30.368 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:45:30.368 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:45:30.368 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:45:30.368 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:45:30.368 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:45:30.369 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:45:30.369 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:45:30.454 +07:00 [INF] Executed DbCommand (86ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:45:30.455 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:45:30.455 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:45:30.455 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:45:30.455 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:45:30.456 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 06:45:30.456 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:45:30.456 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:45:30.457 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 06:45:33.174 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 40.9%, SkillMatch: 33.8%.  Rationale: Strong AI skills match submission's AI agent focus.
Recommendation 2: rv7@fpt.edu.vn (Id:7), Overall: 64.9%,...
2025-09-25 06:45:33.174 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:45:33.174 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:45:33.174 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:45:33.174 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:45:33.174 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:45:33.175 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2823.936ms
2025-09-25 06:45:33.175 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:45:33.175 +07:00 [DBG] Connection id "0HNFRO9QI81O3" completed keep alive response.
2025-09-25 06:45:33.175 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:45:33.175 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:45:33.175 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:45:33.175 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2831.3706ms
2025-09-25 06:47:06.765 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:47:06.766 +07:00 [DBG] POST requests are not supported
2025-09-25 06:47:06.766 +07:00 [DBG] POST requests are not supported
2025-09-25 06:47:06.766 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:47:06.766 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:47:06.766 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:47:06.766 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:47:06.767 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:47:06.768 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:47:06.768 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:47:06.768 +07:00 [DBG] Authorization was successful.
2025-09-25 06:47:06.770 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:47:06.770 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:47:06.770 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:47:06.770 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:47:06.770 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:47:06.770 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:47:06.770 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:47:06.770 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:47:06.771 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:47:06.771 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:47:06.771 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:47:06.771 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:47:06.771 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:47:06.771 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:47:06.771 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:47:06.771 +07:00 [DBG] Connection id "0HNFRO9QI81O3", Request id "0HNFRO9QI81O3:00000003": started reading request body.
2025-09-25 06:47:06.771 +07:00 [DBG] Connection id "0HNFRO9QI81O3", Request id "0HNFRO9QI81O3:00000003": done reading request body.
2025-09-25 06:47:06.772 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:47:06.772 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:47:06.772 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:47:06.772 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:47:06.772 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:47:06.772 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:47:06.772 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:47:06.772 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:47:06.772 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:47:06.772 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:47:06.772 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:47:06.773 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 06:47:06.773 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:47:06.773 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:47:06.774 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:47:06.774 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:47:06.774 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:47:06.774 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:47:06.774 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:47:06.774 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:47:06.774 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:47:06.774 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:47:06.785 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:47:06.785 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:47:06.786 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:47:06.786 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:47:06.786 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:47:06.786 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:47:06.786 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:47:06.786 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:47:06.786 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:47:06.787 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:47:06.787 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:47:06.860 +07:00 [INF] Executed DbCommand (74ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:47:06.861 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:47:06.861 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:47:06.861 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:47:06.861 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:47:06.861 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:47:06.861 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:47:06.861 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:47:06.861 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:47:09.591 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 50.7%, SkillMatch: 53.5%. Rationale: Matches AI-related skills and tokens.
Recommendation 2: hieptmse140293@fpt.edu.vn (Id:7), Overall: 74.7%, Ski...
2025-09-25 06:47:09.592 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:47:09.592 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:47:09.592 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:47:09.592 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:47:09.592 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:47:09.593 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2822.1577ms
2025-09-25 06:47:09.593 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:47:09.593 +07:00 [DBG] Connection id "0HNFRO9QI81O3" completed keep alive response.
2025-09-25 06:47:09.593 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:47:09.593 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:47:09.593 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:47:09.593 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2827.7397ms
2025-09-25 06:49:20.702 +07:00 [DBG] Connection id "0HNFRO9QI81O3" disconnecting.
2025-09-25 06:49:20.702 +07:00 [DBG] Connection id "0HNFRO9QI81O3" stopped.
2025-09-25 06:49:20.702 +07:00 [DBG] Connection id "0HNFRO9QI81O3" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:49:28.656 +07:00 [DBG] Connection id "0HNFRO9QI81O4" accepted.
2025-09-25 06:49:28.656 +07:00 [DBG] Connection id "0HNFRO9QI81O4" started.
2025-09-25 06:49:28.656 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 06:49:28.656 +07:00 [DBG] POST requests are not supported
2025-09-25 06:49:28.656 +07:00 [DBG] POST requests are not supported
2025-09-25 06:49:28.656 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:49:28.656 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:49:28.656 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:49:28.656 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:49:28.656 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:49:28.659 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:49:28.659 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:49:28.660 +07:00 [DBG] Authorization was successful.
2025-09-25 06:49:28.661 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:49:28.661 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:49:28.661 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:49:28.661 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:49:28.661 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:49:28.661 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:49:28.661 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:49:28.661 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:49:28.662 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:49:28.663 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:49:28.664 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:49:28.664 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:49:28.664 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:49:28.664 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:49:28.664 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:49:28.664 +07:00 [DBG] Connection id "0HNFRO9QI81O4", Request id "0HNFRO9QI81O4:00000001": started reading request body.
2025-09-25 06:49:28.664 +07:00 [DBG] Connection id "0HNFRO9QI81O4", Request id "0HNFRO9QI81O4:00000001": done reading request body.
2025-09-25 06:49:28.665 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:49:28.665 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:49:28.665 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:49:28.665 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:49:28.665 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:49:28.665 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:49:28.666 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:49:28.666 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:49:28.666 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:49:28.666 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:49:28.666 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:49:28.666 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 06:49:28.666 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":3,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:49:28.667 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:49:28.668 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:49:28.668 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:49:28.668 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:28.668 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:28.668 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:49:28.668 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:49:28.668 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:49:28.668 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:49:28.678 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:49:28.678 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:49:28.678 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:49:28.678 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:28.678 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:49:28.679 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:28.679 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:28.679 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:49:28.679 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:49:28.679 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:49:28.679 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:49:28.758 +07:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:49:28.759 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:49:28.759 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:49:28.759 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:28.760 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:49:28.760 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:49:28.760 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:49:28.760 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:49:28.761 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:49:31.218 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 50.7%, SkillMatch: 53.5%. Rationale: Strong match on AI skills, including "ai" and "artificial intelligence" tokens.
Recommendation 2: rv1@.com (I...
2025-09-25 06:49:31.219 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:49:31.220 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:49:31.220 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:49:31.220 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:49:31.220 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:49:31.220 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2558.9499ms
2025-09-25 06:49:31.220 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:49:31.220 +07:00 [DBG] Connection id "0HNFRO9QI81O4" completed keep alive response.
2025-09-25 06:49:31.221 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:49:31.221 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:31.221 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:49:31.222 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2565.7051ms
2025-09-25 06:49:37.532 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 06:49:37.532 +07:00 [DBG] POST requests are not supported
2025-09-25 06:49:37.532 +07:00 [DBG] POST requests are not supported
2025-09-25 06:49:37.532 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:49:37.532 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:49:37.533 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:49:37.533 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:49:37.533 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:49:37.533 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:49:37.533 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:49:37.533 +07:00 [DBG] Authorization was successful.
2025-09-25 06:49:37.533 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:49:37.533 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:49:37.540 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:49:37.540 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:49:37.540 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:49:37.540 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:49:37.540 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:49:37.541 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:49:37.542 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:49:37.544 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:49:37.544 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:49:37.544 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:49:37.544 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:49:37.544 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:49:37.544 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:49:37.545 +07:00 [DBG] Connection id "0HNFRO9QI81O4", Request id "0HNFRO9QI81O4:00000002": started reading request body.
2025-09-25 06:49:37.545 +07:00 [DBG] Connection id "0HNFRO9QI81O4", Request id "0HNFRO9QI81O4:00000002": done reading request body.
2025-09-25 06:49:37.545 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:49:37.545 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:49:37.545 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:49:37.545 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:49:37.545 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:49:37.545 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:49:37.545 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:49:37.545 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:49:37.546 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:49:37.546 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:49:37.546 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:49:37.546 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 06:49:37.546 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":3,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:49:37.547 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:49:37.548 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:49:37.548 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:49:37.548 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:37.548 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:37.548 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:49:37.548 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:49:37.548 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:49:37.548 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:49:37.557 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:49:37.557 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:49:37.557 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:49:37.558 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:37.558 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:49:37.558 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:37.558 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:37.558 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:49:37.558 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:49:37.558 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:49:37.559 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:49:37.633 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:49:37.634 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:49:37.634 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:49:37.634 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:37.634 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:49:37.634 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:49:37.634 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:49:37.634 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:49:37.635 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:49:39.845 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 50.7%, SkillMatch: 53.5%. Rationale: Strong match on AI-related skills and tokens.
Recommendation 2: rv1@.com (Id:9), Overall: 24.0%, SkillMatch: ...
2025-09-25 06:49:39.845 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:49:39.845 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:49:39.845 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:49:39.846 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:49:39.846 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:49:39.846 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2305.7516ms
2025-09-25 06:49:39.846 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:49:39.847 +07:00 [DBG] Connection id "0HNFRO9QI81O4" completed keep alive response.
2025-09-25 06:49:39.847 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:49:39.847 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:49:39.847 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:49:39.847 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2315.1784ms
2025-09-25 06:51:40.257 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 06:51:40.257 +07:00 [DBG] POST requests are not supported
2025-09-25 06:51:40.258 +07:00 [DBG] POST requests are not supported
2025-09-25 06:51:40.258 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:51:40.258 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:51:40.258 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:51:40.258 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:51:40.258 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:51:40.258 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:51:40.258 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:51:40.258 +07:00 [DBG] Authorization was successful.
2025-09-25 06:51:40.258 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:51:40.258 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:51:40.258 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:51:40.258 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:51:40.259 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:51:40.259 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:51:40.259 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:51:40.259 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:51:40.262 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:51:40.262 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:51:40.262 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:51:40.262 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:51:40.262 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:51:40.263 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:51:40.263 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:51:40.263 +07:00 [DBG] Connection id "0HNFRO9QI81O4", Request id "0HNFRO9QI81O4:00000003": started reading request body.
2025-09-25 06:51:40.263 +07:00 [DBG] Connection id "0HNFRO9QI81O4", Request id "0HNFRO9QI81O4:00000003": done reading request body.
2025-09-25 06:51:40.263 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:51:40.263 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:51:40.263 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:51:40.264 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:51:40.265 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:51:40.265 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:51:40.265 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:51:40.265 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:51:40.265 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:51:40.265 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:51:40.265 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:51:40.265 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 06:51:40.265 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:51:40.267 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:51:40.267 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:51:40.267 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:51:40.268 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:51:40.268 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:51:40.268 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:51:40.268 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:51:40.268 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:51:40.268 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:51:40.278 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:51:40.279 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:51:40.279 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:51:40.279 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:51:40.279 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:51:40.280 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:51:40.280 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:51:40.280 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:51:40.280 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:51:40.280 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:51:40.280 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:51:40.358 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:51:40.359 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:51:40.359 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:51:40.359 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:51:40.359 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:51:40.360 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:51:40.360 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:51:40.361 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:51:40.361 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:51:42.874 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10) Overall: 50.7%, SkillMatch: 53.5%  Rationale: Strong match on AI-related skills and tokens.
Recommendation 2: rv1@.com (Id:9) Overall: 24.0%, SkillMatch: 0....
2025-09-25 06:51:42.874 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:51:42.874 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:51:42.874 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:51:42.874 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:51:42.874 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:51:42.875 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2616.0682ms
2025-09-25 06:51:42.875 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:51:42.875 +07:00 [DBG] Connection id "0HNFRO9QI81O4" completed keep alive response.
2025-09-25 06:51:42.875 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:51:42.876 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:51:42.876 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:51:42.876 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2619.1898ms
2025-09-25 06:53:53.918 +07:00 [DBG] Connection id "0HNFRO9QI81O4" disconnecting.
2025-09-25 06:53:53.918 +07:00 [DBG] Connection id "0HNFRO9QI81O4" stopped.
2025-09-25 06:53:53.918 +07:00 [DBG] Connection id "0HNFRO9QI81O4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 06:54:29.270 +07:00 [DBG] Connection id "0HNFRO9QI81O5" accepted.
2025-09-25 06:54:29.270 +07:00 [DBG] Connection id "0HNFRO9QI81O5" started.
2025-09-25 06:54:29.270 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 06:54:29.271 +07:00 [DBG] POST requests are not supported
2025-09-25 06:54:29.271 +07:00 [DBG] POST requests are not supported
2025-09-25 06:54:29.271 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:54:29.271 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:54:29.271 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:54:29.271 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:54:29.271 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:54:29.271 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:54:29.271 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:54:29.271 +07:00 [DBG] Authorization was successful.
2025-09-25 06:54:29.271 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:54:29.271 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:54:29.271 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:54:29.272 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:54:29.272 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:54:29.272 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:54:29.272 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:54:29.272 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:54:29.272 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:54:29.273 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:54:29.273 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:54:29.273 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:54:29.273 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:54:29.273 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:54:29.273 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:54:29.273 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000001": started reading request body.
2025-09-25 06:54:29.273 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000001": done reading request body.
2025-09-25 06:54:29.273 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:54:29.273 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:54:29.273 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:54:29.273 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:54:29.273 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:54:29.273 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:54:29.273 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:54:29.273 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:54:29.273 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:54:29.273 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:54:29.273 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:54:29.273 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 06:54:29.274 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":1,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:54:29.274 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:54:29.275 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:54:29.275 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:54:29.275 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:54:29.275 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:54:29.275 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:54:29.275 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:54:29.276 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:54:29.276 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:54:29.286 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:54:29.287 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:54:29.288 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 06:54:29.288 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:54:29.288 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:54:29.288 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:54:29.289 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:54:29.289 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:54:29.289 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:54:29.289 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:54:29.289 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:54:29.377 +07:00 [INF] Executed DbCommand (89ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:54:29.378 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:54:29.378 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:54:29.378 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:54:29.378 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:54:29.378 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:54:29.378 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:54:29.379 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:54:29.379 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:54:31.714 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 50.7%, SkillMatch: 53.5%. Rationale: Strong match on AI-related skills including "ai", "artificial intelligence".

Recommendation 2:  No other can...
2025-09-25 06:54:31.714 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:54:31.714 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:54:31.714 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:54:31.714 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:54:31.714 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:54:31.715 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2442.7311ms
2025-09-25 06:54:31.715 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:54:31.715 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 06:54:31.715 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:54:31.715 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:54:31.715 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:54:31.715 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2444.6091ms
2025-09-25 06:55:28.850 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 06:55:28.850 +07:00 [DBG] POST requests are not supported
2025-09-25 06:55:28.850 +07:00 [DBG] POST requests are not supported
2025-09-25 06:55:28.850 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:55:28.850 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:55:28.850 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:55:28.850 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:55:28.850 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:55:28.850 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:55:28.851 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:55:28.851 +07:00 [DBG] Authorization was successful.
2025-09-25 06:55:28.851 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:55:28.851 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:55:28.851 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:55:28.851 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:55:28.851 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:55:28.855 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:55:28.855 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:55:28.855 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:55:28.856 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:55:28.856 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:55:28.856 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:55:28.856 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:55:28.856 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:55:28.856 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:55:28.856 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:55:28.856 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000002": started reading request body.
2025-09-25 06:55:28.857 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000002": done reading request body.
2025-09-25 06:55:28.857 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:55:28.857 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:55:28.857 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:55:28.857 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:55:28.859 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:55:28.860 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:55:28.860 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:55:28.860 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:55:28.860 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:55:28.860 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:55:28.860 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:55:28.867 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:55:28.868 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:55:28.868 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:55:28.868 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:55:28.868 +07:00 [INF] Executing UnprocessableEntityObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:55:28.873 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 17.771ms
2025-09-25 06:55:28.873 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:55:28.873 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 06:55:28.873 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 422 null application/json; charset=utf-8 23.4816ms
2025-09-25 06:55:50.828 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 06:55:50.828 +07:00 [DBG] POST requests are not supported
2025-09-25 06:55:50.828 +07:00 [DBG] POST requests are not supported
2025-09-25 06:55:50.828 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:55:50.828 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:55:50.828 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:55:50.829 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:55:50.829 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:55:50.829 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:55:50.829 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:55:50.829 +07:00 [DBG] Authorization was successful.
2025-09-25 06:55:50.829 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:55:50.829 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:55:50.829 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:55:50.829 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:55:50.829 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:55:50.829 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:55:50.829 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:55:50.829 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:55:50.830 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:55:50.830 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:55:50.830 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:55:50.830 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:55:50.830 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:55:50.830 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:55:50.830 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:55:50.830 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000003": started reading request body.
2025-09-25 06:55:50.830 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000003": done reading request body.
2025-09-25 06:55:50.830 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:55:50.830 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:55:50.830 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:55:50.830 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:55:50.830 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:55:50.830 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:55:50.830 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:55:50.830 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:55:50.830 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:55:50.830 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:55:50.831 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:55:50.831 +07:00 [INF] Processing AI suggestion for SubmissionId: 8
2025-09-25 06:55:50.831 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":8,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:55:50.831 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:55:50.832 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:55:50.833 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:55:50.833 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:55:50.833 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:55:50.833 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:55:50.833 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:55:50.833 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:55:50.833 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:55:50.846 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:55:50.846 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:55:50.847 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:55:50.847 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:55:50.847 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:55:50.851 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:55:50.851 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:55:50.853 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:55:50.854 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:55:50.854 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:55:50.857 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 27.2761ms
2025-09-25 06:55:50.857 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:55:50.858 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 06:55:50.858 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:55:50.858 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:55:50.859 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:55:50.859 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 404 null application/json; charset=utf-8 30.8663ms
2025-09-25 06:55:56.909 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 113
2025-09-25 06:55:56.910 +07:00 [DBG] POST requests are not supported
2025-09-25 06:55:56.910 +07:00 [DBG] POST requests are not supported
2025-09-25 06:55:56.910 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:55:56.910 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:55:56.910 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:55:56.910 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:55:56.910 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:55:56.910 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:55:56.910 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:55:56.910 +07:00 [DBG] Authorization was successful.
2025-09-25 06:55:56.911 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:55:56.911 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:55:56.912 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:55:56.915 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:55:56.915 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:55:56.917 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:55:56.918 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:55:56.918 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:55:56.919 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:55:56.919 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:55:56.919 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:55:56.919 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:55:56.919 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:55:56.919 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:55:56.921 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:55:56.921 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000004": started reading request body.
2025-09-25 06:55:56.921 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000004": done reading request body.
2025-09-25 06:55:56.921 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:55:56.921 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:55:56.921 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:55:56.921 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:55:56.921 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:55:56.921 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:55:56.921 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:55:56.922 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:55:56.922 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:55:56.922 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:55:56.922 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:55:56.922 +07:00 [INF] Processing AI suggestion for SubmissionId: 10
2025-09-25 06:55:56.922 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":10,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:55:56.922 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:55:56.923 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:55:56.923 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:55:56.923 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:55:56.923 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:55:56.923 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:55:56.923 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:55:56.923 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:55:56.923 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:55:56.924 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:55:56.925 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:55:56.925 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:55:56.925 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:55:56.925 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:55:56.925 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:55:56.926 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:55:56.927 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:55:56.927 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:55:56.927 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:55:56.927 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:55:57.008 +07:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:55:57.009 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:55:57.009 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:55:57.010 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:55:57.010 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:55:57.010 +07:00 [DBG] Reviewer 7: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:55:57.010 +07:00 [DBG] Reviewer 9: overallSkill=0.2132 fieldScores=Title:0.2294,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:55:57.010 +07:00 [DBG] Reviewer 10: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:55:57.010 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:56:00.569 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 45.3%, SkillMatch: 42.6%.  AI expertise matches submission's AI keywords.
Recommendation 2: rv7@.com (Id:7), Overall: 69.3%, SkillMatch: 42.6%. Mo...
2025-09-25 06:56:00.569 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:56:00.569 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:56:00.569 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:56:00.569 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:56:00.569 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:56:00.570 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3651.8927ms
2025-09-25 06:56:00.570 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:56:00.570 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 06:56:00.570 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:56:00.570 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:56:00.570 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:56:00.570 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3660.973ms
2025-09-25 06:57:36.614 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-09-25 06:57:36.615 +07:00 [DBG] POST requests are not supported
2025-09-25 06:57:36.615 +07:00 [DBG] POST requests are not supported
2025-09-25 06:57:36.615 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:57:36.615 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:57:36.615 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:57:36.615 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:57:36.615 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:57:36.615 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:57:36.615 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:57:36.615 +07:00 [DBG] Authorization was successful.
2025-09-25 06:57:36.615 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:57:36.615 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:57:36.615 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:57:36.615 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:57:36.616 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:57:36.616 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:57:36.616 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:57:36.616 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:57:36.616 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:57:36.617 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:57:36.617 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:57:36.617 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:57:36.617 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:57:36.617 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:57:36.617 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:57:36.617 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000005": started reading request body.
2025-09-25 06:57:36.617 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000005": done reading request body.
2025-09-25 06:57:36.617 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:57:36.617 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:57:36.617 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:57:36.617 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:57:36.617 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:57:36.617 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:57:36.617 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:57:36.617 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:57:36.617 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:57:36.617 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:57:36.617 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:57:36.617 +07:00 [INF] Processing AI suggestion for SubmissionId: 10
2025-09-25 06:57:36.617 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":10,"MaxSuggestions":3,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:57:36.618 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:57:36.625 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:57:36.625 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:57:36.625 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:57:36.625 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:57:36.625 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:57:36.625 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:57:36.625 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:57:36.626 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:57:36.634 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:57:36.634 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:57:36.634 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:57:36.635 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:57:36.635 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:57:36.635 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:57:36.635 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:57:36.636 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:57:36.636 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:57:36.636 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:57:36.636 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:57:36.711 +07:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:57:36.712 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:57:36.712 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:57:36.712 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:57:36.713 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:57:36.713 +07:00 [DBG] Reviewer 7: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:57:36.713 +07:00 [DBG] Reviewer 9: overallSkill=0.2132 fieldScores=Title:0.2294,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:57:36.713 +07:00 [DBG] Reviewer 10: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:57:36.714 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:57:39.614 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 45.3%, SkillMatch: 42.6%.  Rationale: Strong match on AI-related skills, crucial for submission context.
Recommendation 2: rv1@.com (Id:9), Overal...
2025-09-25 06:57:39.614 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:57:39.614 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:57:39.614 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:57:39.614 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:57:39.614 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:57:39.614 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2998.6787ms
2025-09-25 06:57:39.614 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:57:39.615 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 06:57:39.615 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:57:39.615 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:57:39.615 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:57:39.615 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3000.4196ms
2025-09-25 06:59:34.556 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-09-25 06:59:34.556 +07:00 [DBG] POST requests are not supported
2025-09-25 06:59:34.557 +07:00 [DBG] POST requests are not supported
2025-09-25 06:59:34.557 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 06:59:34.557 +07:00 [INF] CORS policy execution successful.
2025-09-25 06:59:34.557 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:59:34.557 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 06:59:34.557 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:59:34.557 +07:00 [DBG] Successfully validated the token.
2025-09-25 06:59:34.557 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 06:59:34.557 +07:00 [DBG] Authorization was successful.
2025-09-25 06:59:34.557 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:59:34.562 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 06:59:34.562 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 06:59:34.562 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 06:59:34.562 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 06:59:34.562 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 06:59:34.563 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 06:59:34.564 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:59:34.565 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 06:59:34.566 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:59:34.566 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 06:59:34.566 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:59:34.566 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:59:34.566 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 06:59:34.566 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 06:59:34.566 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000006": started reading request body.
2025-09-25 06:59:34.566 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000006": done reading request body.
2025-09-25 06:59:34.566 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 06:59:34.566 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:59:34.566 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:59:34.566 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 06:59:34.566 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 06:59:34.566 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:59:34.566 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 06:59:34.566 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:59:34.566 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:59:34.566 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 06:59:34.567 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 06:59:34.567 +07:00 [INF] Processing AI suggestion for SubmissionId: 10
2025-09-25 06:59:34.567 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":10,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 06:59:34.568 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 06:59:34.569 +07:00 [DBG] Creating DbConnection.
2025-09-25 06:59:34.569 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 06:59:34.569 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:59:34.570 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:59:34.570 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:59:34.570 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:59:34.570 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:59:34.570 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:59:34.580 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 06:59:34.580 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:59:34.581 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:59:34.581 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:59:34.581 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:59:34.581 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:59:34.582 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:59:34.582 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 06:59:34.582 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:59:34.582 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 06:59:34.582 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:59:34.664 +07:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 06:59:34.665 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 06:59:34.665 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 06:59:34.665 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:59:34.665 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 06:59:34.665 +07:00 [DBG] Reviewer 7: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:59:34.665 +07:00 [DBG] Reviewer 9: overallSkill=0.2132 fieldScores=Title:0.2294,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:59:34.665 +07:00 [DBG] Reviewer 10: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:59:34.665 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 06:59:38.092 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 45.3%, SkillMatch: 42.6%. Rationale: Strong match on AI skills, crucial for the submission's AI and zhsi aspects.
Recommendation 2: rv1@.com (Id:9...
2025-09-25 06:59:38.093 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 06:59:38.094 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 06:59:38.094 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 06:59:38.095 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 06:59:38.095 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 06:59:38.095 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3531.7637ms
2025-09-25 06:59:38.096 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 06:59:38.096 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 06:59:38.096 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 06:59:38.096 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 06:59:38.096 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 06:59:38.096 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3539.7904ms
2025-09-25 07:01:10.614 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-09-25 07:01:10.614 +07:00 [DBG] POST requests are not supported
2025-09-25 07:01:10.614 +07:00 [DBG] POST requests are not supported
2025-09-25 07:01:10.614 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:01:10.614 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:01:10.614 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:01:10.614 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:01:10.614 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:01:10.614 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:01:10.615 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:01:10.615 +07:00 [DBG] Authorization was successful.
2025-09-25 07:01:10.615 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:01:10.615 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:01:10.615 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:01:10.615 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:01:10.615 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:01:10.615 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:01:10.615 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:01:10.615 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:01:10.615 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:01:10.615 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:01:10.616 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:01:10.618 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:01:10.619 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:01:10.619 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:01:10.619 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:01:10.619 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000007": started reading request body.
2025-09-25 07:01:10.619 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000007": done reading request body.
2025-09-25 07:01:10.619 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:01:10.619 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:01:10.619 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:01:10.619 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:01:10.619 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:01:10.619 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:01:10.619 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:01:10.619 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:01:10.619 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:01:10.619 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:01:10.619 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:01:10.619 +07:00 [INF] Processing AI suggestion for SubmissionId: 10
2025-09-25 07:01:10.619 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":10,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:01:10.620 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:01:10.620 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:01:10.621 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:01:10.621 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:01:10.621 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:01:10.621 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:01:10.621 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:01:10.621 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:01:10.621 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:01:10.633 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:01:10.633 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:01:10.633 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:01:10.633 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:01:10.634 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:01:10.634 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:01:10.634 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:01:10.634 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:01:10.634 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:01:10.634 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:01:10.634 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:01:10.718 +07:00 [INF] Executed DbCommand (83ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:01:10.718 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:01:10.718 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:01:10.718 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:01:10.718 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:01:10.719 +07:00 [DBG] Reviewer 7: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:01:10.719 +07:00 [DBG] Reviewer 9: overallSkill=0.2132 fieldScores=Title:0.2294,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:01:10.719 +07:00 [DBG] Reviewer 10: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:01:10.719 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:01:13.196 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 45.3%, SkillMatch: 42.6%. Rationale: Strong match on AI skills, crucial for submission's AI and zhsi components.
Recommendation 2: rv1@.com (Id:9)...
2025-09-25 07:01:13.197 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:01:13.197 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:01:13.197 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:01:13.197 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:01:13.197 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:01:13.198 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2582.8305ms
2025-09-25 07:01:13.198 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:01:13.198 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 07:01:13.199 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:01:13.199 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:01:13.199 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:01:13.199 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2585.0044ms
2025-09-25 07:02:06.367 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 110
2025-09-25 07:02:06.367 +07:00 [DBG] POST requests are not supported
2025-09-25 07:02:06.367 +07:00 [DBG] POST requests are not supported
2025-09-25 07:02:06.368 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:02:06.368 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:02:06.368 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:02:06.368 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:02:06.368 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:02:06.368 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:02:06.368 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:02:06.368 +07:00 [DBG] Authorization was successful.
2025-09-25 07:02:06.368 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:02:06.368 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:02:06.368 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:02:06.368 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:02:06.368 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:02:06.368 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:02:06.369 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:02:06.369 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:02:06.373 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:02:06.374 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:02:06.374 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:02:06.375 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:02:06.375 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:02:06.375 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:02:06.375 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:02:06.375 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000008": started reading request body.
2025-09-25 07:02:06.375 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000008": done reading request body.
2025-09-25 07:02:06.375 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:02:06.378 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:02:06.378 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:02:06.378 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:02:06.378 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:02:06.378 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:02:06.378 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:02:06.378 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:02:06.378 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:02:06.378 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:02:06.378 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:02:06.379 +07:00 [INF] Processing AI suggestion for SubmissionId: 10
2025-09-25 07:02:06.379 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":10,"MaxSuggestions":1,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:02:06.381 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:02:06.384 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:02:06.384 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:02:06.384 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:02:06.384 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:02:06.384 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:02:06.385 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:02:06.385 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:02:06.385 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:02:06.396 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:02:06.396 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:02:06.396 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:02:06.396 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:02:06.396 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:02:06.397 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:02:06.397 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:02:06.397 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:02:06.397 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:02:06.397 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:02:06.397 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:02:06.472 +07:00 [INF] Executed DbCommand (75ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:02:06.473 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:02:06.473 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:02:06.473 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:02:06.473 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:02:06.474 +07:00 [DBG] Reviewer 7: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:02:06.474 +07:00 [DBG] Reviewer 9: overallSkill=0.2132 fieldScores=Title:0.2294,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:02:06.475 +07:00 [DBG] Reviewer 10: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:02:06.475 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:02:08.140 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 45.3%, SkillMatch: 42.6%. Rationale: Strong match on AI skills, covering "ai" and related tokens.
Recommendation 2:  No other candidates available...
2025-09-25 07:02:08.140 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:02:08.140 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:02:08.140 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:02:08.140 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:02:08.140 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:02:08.140 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1770.804ms
2025-09-25 07:02:08.140 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:02:08.140 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 07:02:08.140 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:02:08.140 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:02:08.141 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:02:08.141 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1773.3737ms
2025-09-25 07:03:36.669 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 113
2025-09-25 07:03:36.670 +07:00 [DBG] POST requests are not supported
2025-09-25 07:03:36.670 +07:00 [DBG] POST requests are not supported
2025-09-25 07:03:36.670 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:03:36.670 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:03:36.670 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:03:36.670 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:03:36.670 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:03:36.670 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:03:36.670 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:03:36.670 +07:00 [DBG] Authorization was successful.
2025-09-25 07:03:36.670 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:03:36.671 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:03:36.671 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:03:36.671 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:03:36.671 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:03:36.671 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:03:36.671 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:03:36.671 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:03:36.671 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:03:36.671 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:03:36.671 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:03:36.672 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:03:36.672 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:03:36.672 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:03:36.672 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:03:36.672 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000009": started reading request body.
2025-09-25 07:03:36.672 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:00000009": done reading request body.
2025-09-25 07:03:36.672 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:03:36.672 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:03:36.672 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:03:36.672 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:03:36.672 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:03:36.672 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:03:36.672 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:03:36.672 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:03:36.672 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:03:36.672 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:03:36.672 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:03:36.673 +07:00 [INF] Processing AI suggestion for SubmissionId: 10
2025-09-25 07:03:36.673 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":10,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:03:36.674 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:03:36.675 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:03:36.675 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:03:36.675 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:03:36.675 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:03:36.675 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:03:36.675 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:03:36.675 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:03:36.675 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:03:36.684 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:03:36.684 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:03:36.685 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:03:36.685 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:03:36.686 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:03:36.686 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:03:36.686 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:03:36.687 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:03:36.687 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:03:36.687 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:03:36.687 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:03:36.772 +07:00 [INF] Executed DbCommand (85ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:03:36.773 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:03:36.774 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 07:03:36.774 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:03:36.774 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:03:36.774 +07:00 [DBG] Reviewer 7: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:03:36.775 +07:00 [DBG] Reviewer 9: overallSkill=0.2132 fieldScores=Title:0.2294,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:03:36.776 +07:00 [DBG] Reviewer 10: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:03:36.776 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:03:39.321 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 45.3%, SkillMatch: 42.6%.  Matches AI-related skills in submission.
Recommendation 2: rv7@.com (Id:7), Overall: 69.3%, SkillMatch: 42.6%. Matches ...
2025-09-25 07:03:39.321 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:03:39.321 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:03:39.322 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:03:39.322 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:03:39.322 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:03:39.323 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2651.7077ms
2025-09-25 07:03:39.323 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:03:39.323 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 07:03:39.323 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:03:39.323 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:03:39.323 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:03:39.324 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2654.1692ms
2025-09-25 07:04:43.138 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 113
2025-09-25 07:04:43.138 +07:00 [DBG] POST requests are not supported
2025-09-25 07:04:43.138 +07:00 [DBG] POST requests are not supported
2025-09-25 07:04:43.138 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:04:43.138 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:04:43.138 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:04:43.138 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:04:43.138 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:04:43.139 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:04:43.139 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:04:43.139 +07:00 [DBG] Authorization was successful.
2025-09-25 07:04:43.139 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:04:43.140 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:04:43.140 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:04:43.140 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:04:43.140 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:04:43.140 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:04:43.140 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:04:43.140 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:04:43.141 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:04:43.141 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:04:43.141 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:04:43.142 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:04:43.142 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:04:43.142 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:04:43.142 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:04:43.143 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:0000000A": started reading request body.
2025-09-25 07:04:43.143 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:0000000A": done reading request body.
2025-09-25 07:04:43.143 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:04:43.143 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:04:43.143 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:04:43.144 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:04:43.145 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:04:43.145 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:04:43.147 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:04:43.147 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:04:43.147 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:04:43.147 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:04:43.147 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:04:43.147 +07:00 [INF] Processing AI suggestion for SubmissionId: 10
2025-09-25 07:04:43.147 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":10,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:04:43.149 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:04:43.151 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:04:43.151 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:04:43.152 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:04:43.152 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:04:43.152 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:04:43.152 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:04:43.152 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:04:43.152 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:04:43.162 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:04:43.163 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:04:43.163 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:04:43.163 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:04:43.164 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:04:43.165 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:04:43.166 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:04:43.168 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:04:43.168 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:04:43.168 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:04:43.170 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:04:43.257 +07:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:04:43.258 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:04:43.258 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:04:43.258 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:04:43.259 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:04:43.259 +07:00 [DBG] Reviewer 7: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:04:43.259 +07:00 [DBG] Reviewer 9: overallSkill=0.2132 fieldScores=Title:0.2294,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:04:43.259 +07:00 [DBG] Reviewer 10: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:04:43.260 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:04:45.872 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 45.3%, SkillMatch: 42.6%.  AI expertise matches submission's AI-related keywords.
Recommendation 2: rv7@.com (Id:7), Overall: 69.3%, SkillMatch: 4...
2025-09-25 07:04:45.872 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:04:45.872 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:04:45.872 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:04:45.873 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:04:45.873 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:04:45.873 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2732.6982ms
2025-09-25 07:04:45.873 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:04:45.873 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 07:04:45.873 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:04:45.873 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:04:45.874 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:04:45.874 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2736.3525ms
2025-09-25 07:05:38.812 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 113
2025-09-25 07:05:38.812 +07:00 [DBG] POST requests are not supported
2025-09-25 07:05:38.812 +07:00 [DBG] POST requests are not supported
2025-09-25 07:05:38.812 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:05:38.812 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:05:38.812 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:05:38.812 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:05:38.812 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:05:38.813 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:05:38.813 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:05:38.813 +07:00 [DBG] Authorization was successful.
2025-09-25 07:05:38.813 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:05:38.813 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:05:38.813 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:05:38.813 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:05:38.813 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:05:38.813 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:05:38.813 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:05:38.813 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:05:38.814 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:05:38.814 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:05:38.814 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:05:38.814 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:05:38.814 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:05:38.814 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:05:38.814 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:05:38.814 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:0000000B": started reading request body.
2025-09-25 07:05:38.814 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:0000000B": done reading request body.
2025-09-25 07:05:38.814 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:05:38.814 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:05:38.815 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:05:38.815 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:05:38.815 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:05:38.815 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:05:38.815 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:05:38.815 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:05:38.815 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:05:38.815 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:05:38.815 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:05:38.815 +07:00 [INF] Processing AI suggestion for SubmissionId: 10
2025-09-25 07:05:38.815 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":10,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:05:38.815 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:05:38.816 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:05:38.816 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:05:38.816 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:38.816 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:38.816 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:05:38.817 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:05:38.817 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:05:38.817 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:05:38.826 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:05:38.828 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:05:38.828 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 07:05:38.828 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:38.828 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:05:38.829 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:38.829 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:38.829 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:05:38.829 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:05:38.829 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:05:38.829 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:05:38.926 +07:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:05:38.927 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:05:38.927 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:05:38.927 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:38.927 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:05:38.927 +07:00 [DBG] Reviewer 7: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:05:38.927 +07:00 [DBG] Reviewer 9: overallSkill=0.2132 fieldScores=Title:0.2294,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:05:38.927 +07:00 [DBG] Reviewer 10: overallSkill=0.4264 fieldScores=Title:0.4588,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:05:38.927 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:05:41.301 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 45.3%, SkillMatch: 42.6%.  AI expertise matches submission's AI-related keywords.
Recommendation 2: rv7@.com (Id:7), Overall: 69.3%, SkillMatch: 4...
2025-09-25 07:05:41.301 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:05:41.301 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:05:41.301 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:05:41.301 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:05:41.301 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:05:41.302 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2488.4807ms
2025-09-25 07:05:41.302 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:05:41.302 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 07:05:41.302 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:05:41.302 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:41.302 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:05:41.302 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2490.4381ms
2025-09-25 07:05:53.367 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 113
2025-09-25 07:05:53.367 +07:00 [DBG] POST requests are not supported
2025-09-25 07:05:53.368 +07:00 [DBG] POST requests are not supported
2025-09-25 07:05:53.368 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:05:53.368 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:05:53.368 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:05:53.368 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:05:53.368 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:05:53.368 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:05:53.368 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:05:53.368 +07:00 [DBG] Authorization was successful.
2025-09-25 07:05:53.368 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:05:53.369 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:05:53.369 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:05:53.369 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:05:53.369 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:05:53.369 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:05:53.369 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:05:53.369 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:05:53.370 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:05:53.370 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:05:53.370 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:05:53.370 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:05:53.370 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:05:53.370 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:05:53.370 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:05:53.370 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:0000000C": started reading request body.
2025-09-25 07:05:53.370 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:0000000C": done reading request body.
2025-09-25 07:05:53.370 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:05:53.371 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:05:53.371 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:05:53.371 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:05:53.371 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:05:53.371 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:05:53.371 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:05:53.371 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:05:53.371 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:05:53.371 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:05:53.371 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:05:53.371 +07:00 [INF] Processing AI suggestion for SubmissionId: 11
2025-09-25 07:05:53.371 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":11,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:05:53.372 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:05:53.373 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:05:53.373 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:05:53.373 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:53.373 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:53.373 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:05:53.373 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:05:53.373 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:05:53.373 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:05:53.375 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:05:53.375 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:05:53.375 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:05:53.375 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:53.376 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:05:53.376 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:05:53.376 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:05:53.376 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:05:53.376 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:05:53.376 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:05:53.376 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7.3682ms
2025-09-25 07:05:53.380 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:05:53.380 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 07:05:53.380 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:05:53.380 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:53.380 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:05:53.380 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 404 null application/json; charset=utf-8 13.0855ms
2025-09-25 07:05:59.335 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 07:05:59.335 +07:00 [DBG] POST requests are not supported
2025-09-25 07:05:59.335 +07:00 [DBG] POST requests are not supported
2025-09-25 07:05:59.335 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:05:59.335 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:05:59.335 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:05:59.335 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:05:59.335 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:05:59.335 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:05:59.335 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:05:59.335 +07:00 [DBG] Authorization was successful.
2025-09-25 07:05:59.335 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:05:59.336 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:05:59.336 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:05:59.336 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:05:59.336 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:05:59.336 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:05:59.336 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:05:59.336 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:05:59.336 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:05:59.336 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:05:59.337 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:05:59.337 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:05:59.337 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:05:59.337 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:05:59.337 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:05:59.337 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:0000000D": started reading request body.
2025-09-25 07:05:59.337 +07:00 [DBG] Connection id "0HNFRO9QI81O5", Request id "0HNFRO9QI81O5:0000000D": done reading request body.
2025-09-25 07:05:59.338 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:05:59.338 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:05:59.338 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:05:59.338 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:05:59.338 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:05:59.338 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:05:59.338 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:05:59.338 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:05:59.338 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:05:59.338 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:05:59.338 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:05:59.338 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 07:05:59.338 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:05:59.339 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:05:59.339 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:05:59.340 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:05:59.340 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:59.340 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:59.340 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:05:59.340 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:05:59.340 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:05:59.340 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:05:59.350 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:05:59.350 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:05:59.350 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:05:59.350 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:59.350 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:05:59.351 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:59.351 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:59.351 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:05:59.351 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:05:59.351 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:05:59.351 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:05:59.443 +07:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:05:59.443 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:05:59.443 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:05:59.443 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:05:59.443 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:05:59.444 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 07:05:59.444 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:05:59.444 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:05:59.444 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 07:06:02.019 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 40.9%, SkillMatch: 33.8%. Rationale: Strong match on AI, a key submission element.
Recommendation 2: rv7@fpt.edu.vn (Id:7), Overall: 64.9%, SkillM...
2025-09-25 07:06:02.019 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:06:02.019 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:06:02.019 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:06:02.019 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:06:02.019 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:06:02.020 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2684.1946ms
2025-09-25 07:06:02.020 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:06:02.020 +07:00 [DBG] Connection id "0HNFRO9QI81O5" completed keep alive response.
2025-09-25 07:06:02.020 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:06:02.020 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:02.020 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:06:02.020 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2685.8078ms
2025-09-25 07:06:30.525 +07:00 [INF] Application is shutting down...
2025-09-25 07:06:30.527 +07:00 [DBG] Hosting stopping
2025-09-25 07:06:30.532 +07:00 [DBG] Connection id "0HNFRO9QI81O5" disconnecting.
2025-09-25 07:06:30.532 +07:00 [DBG] Connection id "0HNFRO9QI81O5" stopped.
2025-09-25 07:06:30.532 +07:00 [DBG] Connection id "0HNFRO9QI81O5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 07:06:30.535 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 07:06:30.562 +07:00 [DBG] Hosting stopped
2025-09-25 07:06:42.878 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 07:06:42.954 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 07:06:43.095 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.108 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.119 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.122 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.122 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.123 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.251 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.251 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.263 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.263 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.263 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.264 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.268 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.268 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:06:43.302 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 07:06:43.302 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 07:06:43.302 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 07:06:43.302 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 07:06:43.302 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 07:06:43.302 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 07:06:43.302 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 07:06:43.302 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 07:06:43.302 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 07:06:43.303 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 07:06:43.303 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 07:06:43.303 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 07:06:43.303 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 07:06:43.303 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 07:06:43.303 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 07:06:43.303 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 07:06:43.304 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 07:06:43.304 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 07:06:43.304 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 07:06:43.403 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:06:43.403 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:06:43.403 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:06:43.404 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:06:43.404 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:06:43.404 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:06:43.404 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:06:43.404 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:06:43.404 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:06:43.404 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:06:43.405 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:06:43.500 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:06:43.536 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 07:06:43.631 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 07:06:43.652 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:06:43.663 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-25 07:06:43.665 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.802 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.804 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:06:43.808 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-25 07:06:43.812 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-25 07:06:43.817 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:06:43.877 +07:00 [INF] Executed DbCommand (59ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:06:43.904 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:06:43.916 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.920 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 40ms reading results.
2025-09-25 07:06:43.921 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.924 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-25 07:06:43.926 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.926 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.926 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:06:43.927 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.927 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.927 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:06:43.929 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:06:43.929 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:06:43.929 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.929 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:06:43.929 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.929 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:06:43.930 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.930 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.930 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:06:43.930 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.930 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.930 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:06:43.930 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:06:43.931 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:06:43.931 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.931 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:06:43.931 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.931 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:06:43.931 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.931 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.931 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:06:43.931 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.931 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.931 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:06:43.932 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:06:43.932 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:06:43.932 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.932 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:06:43.932 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.933 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:06:43.935 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 07:06:43.939 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 07:06:43.940 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.940 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.940 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:06:43.940 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.940 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.940 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:06:43.948 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:06:43.964 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:06:43.985 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.985 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-25 07:06:43.985 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.985 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:06:43.987 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 07:06:43.989 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.989 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.989 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:06:43.989 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.989 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.989 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:06:43.990 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:06:43.990 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:06:43.991 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.991 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:06:43.991 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.991 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:06:43.991 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 07:06:43.991 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.991 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.991 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:06:43.991 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.991 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.991 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:06:43.992 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:06:43.992 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:06:43.993 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.993 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:06:43.993 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.993 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:06:43.993 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.993 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.993 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:06:43.993 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.993 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:43.993 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:06:43.994 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:06:43.994 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:06:43.995 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.995 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:06:43.995 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.995 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:06:43.995 +07:00 [INF] Data seeding completed successfully
2025-09-25 07:06:43.996 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:06:43.998 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:43.998 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:06:44.007 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 07:06:44.110 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 07:06:44.181 +07:00 [DBG] Hosting starting
2025-09-25 07:06:44.188 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 07:06:44.190 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 07:06:44.190 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 07:06:44.193 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 07:06:44.195 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 07:06:44.196 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 07:06:44.200 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 07:06:44.202 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 07:06:44.203 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 07:06:44.205 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 07:06:44.205 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 07:06:44.206 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 07:06:44.207 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 07:06:44.207 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 07:06:44.210 +07:00 [DBG] Middleware loaded
2025-09-25 07:06:44.211 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 07:06:44.212 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 07:06:44.235 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 07:06:44.242 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 07:06:44.242 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 07:06:44.242 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 07:06:44.242 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 07:06:44.242 +07:00 [INF] Hosting environment: Development
2025-09-25 07:06:44.242 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 07:06:44.243 +07:00 [DBG] Hosting started
2025-09-25 07:06:44.306 +07:00 [DBG] Connection id "0HNFROTKNHA1G" accepted.
2025-09-25 07:06:44.307 +07:00 [DBG] Connection id "0HNFROTKNHA1G" started.
2025-09-25 07:06:44.335 +07:00 [DBG] Connection id "0HNFROTKNHA1H" accepted.
2025-09-25 07:06:44.335 +07:00 [DBG] Connection id "0HNFROTKNHA1H" started.
2025-09-25 07:06:44.339 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 07:06:44.348 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 07:06:44.415 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 07:06:44.426 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 07:06:44.427 +07:00 [DBG] Connection id "0HNFROTKNHA1G" completed keep alive response.
2025-09-25 07:06:44.429 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 90.6863ms
2025-09-25 07:06:44.435 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 07:06:44.437 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 07:06:44.437 +07:00 [DBG] Connection id "0HNFROTKNHA1G" completed keep alive response.
2025-09-25 07:06:44.437 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.3546ms
2025-09-25 07:06:44.486 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 07:06:44.747 +07:00 [DBG] Connection id "0HNFROTKNHA1G" completed keep alive response.
2025-09-25 07:06:44.747 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 260.7523ms
2025-09-25 07:06:54.438 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 07:06:54.445 +07:00 [DBG] POST requests are not supported
2025-09-25 07:06:54.447 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 07:06:54.447 +07:00 [DBG] POST requests are not supported
2025-09-25 07:06:54.449 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:06:54.450 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:06:54.530 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:06:54.532 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:06:54.533 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:06:54.647 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:06:54.648 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:06:54.656 +07:00 [DBG] Authorization was successful.
2025-09-25 07:06:54.668 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:06:54.697 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:06:54.699 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:06:54.700 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:06:54.701 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:06:54.701 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:06:54.702 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:06:54.705 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:06:54.875 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:06:54.881 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:06:54.885 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:06:54.889 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:06:54.889 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:06:54.889 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:06:54.890 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:06:54.908 +07:00 [DBG] Connection id "0HNFROTKNHA1G", Request id "0HNFROTKNHA1G:00000004": started reading request body.
2025-09-25 07:06:54.908 +07:00 [DBG] Connection id "0HNFROTKNHA1G", Request id "0HNFROTKNHA1G:00000004": done reading request body.
2025-09-25 07:06:54.919 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:06:54.921 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:06:54.922 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:06:54.922 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:06:54.933 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:06:54.936 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:06:54.937 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:06:54.939 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:06:54.939 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:06:54.939 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:06:54.940 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:06:54.946 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 07:06:54.950 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:06:55.046 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:06:55.066 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-25 07:06:55.086 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-25 07:06:55.186 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 07:06:55.197 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:06:55.199 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-25 07:06:55.200 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:55.200 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:55.200 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:06:55.200 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:55.201 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:55.201 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:06:55.217 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:06:55.229 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:06:55.230 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 12ms reading results.
2025-09-25 07:06:55.230 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:55.230 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:06:55.239 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-25 07:06:55.254 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-25 07:06:55.255 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-25 07:06:55.256 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-25 07:06:55.256 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-25 07:06:55.365 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-25 07:06:55.380 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 07:06:55.396 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:55.397 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:55.397 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:06:55.397 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:55.397 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:06:55.398 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:06:55.493 +07:00 [INF] Executed DbCommand (95ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:06:55.517 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:06:55.518 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 24ms reading results.
2025-09-25 07:06:55.518 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:55.519 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:06:55.564 +07:00 [DBG] Reviewer 7: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 07:06:55.565 +07:00 [DBG] Reviewer 9: overallSkill=0.1690 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:06:55.568 +07:00 [DBG] Reviewer 10: overallSkill=0.3381 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:06:55.569 +07:00 [DBG] Reviewer 11: overallSkill=0.2928 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 07:06:58.370 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 40.9%, SkillMatch: 33.8%. Rationale: Strong AI skills matching submission's AI agent focus.
Recommendation 2: rv7@.com (Id:7), Overall: 64.9%, Ski...
2025-09-25 07:06:58.382 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:06:58.389 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:06:58.391 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:06:58.399 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:06:58.402 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:06:58.487 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3781.7884ms
2025-09-25 07:06:58.488 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:06:58.491 +07:00 [DBG] Connection id "0HNFROTKNHA1G" completed keep alive response.
2025-09-25 07:06:58.492 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:06:58.492 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:06:58.492 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:06:58.494 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 4055.8619ms
2025-09-25 07:07:31.046 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 07:07:31.046 +07:00 [DBG] POST requests are not supported
2025-09-25 07:07:31.046 +07:00 [DBG] POST requests are not supported
2025-09-25 07:07:31.047 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:07:31.047 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:07:31.055 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:07:31.056 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:07:31.056 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:07:31.062 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:07:31.062 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:07:31.066 +07:00 [DBG] Authorization was successful.
2025-09-25 07:07:31.067 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:07:31.068 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:07:31.069 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:07:31.069 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:07:31.069 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:07:31.070 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:07:31.070 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:07:31.071 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:07:31.075 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:07:31.077 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:07:31.077 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:07:31.078 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:07:31.078 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:07:31.078 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:07:31.078 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:07:31.079 +07:00 [DBG] Connection id "0HNFROTKNHA1G", Request id "0HNFROTKNHA1G:00000005": started reading request body.
2025-09-25 07:07:31.079 +07:00 [DBG] Connection id "0HNFROTKNHA1G", Request id "0HNFROTKNHA1G:00000005": done reading request body.
2025-09-25 07:07:31.080 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:07:31.084 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:07:31.085 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:07:31.085 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:07:31.089 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:07:31.089 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:07:31.089 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:07:31.090 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:07:31.090 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:07:31.090 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:07:31.091 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:07:31.091 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 07:07:31.093 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:07:31.119 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:07:31.121 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:07:31.122 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:07:31.122 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:07:31.122 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:07:31.122 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:07:31.122 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:07:31.122 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:07:31.123 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:07:31.132 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:07:31.133 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:07:31.133 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:07:31.133 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:07:31.133 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:07:31.135 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:07:31.136 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:07:31.137 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:07:31.137 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:07:31.137 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:07:31.138 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:07:31.219 +07:00 [INF] Executed DbCommand (82ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:07:31.223 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:07:31.224 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-09-25 07:07:31.224 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:07:31.225 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:07:31.228 +07:00 [DBG] Reviewer 7: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:07:31.232 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:07:31.235 +07:00 [DBG] Reviewer 10: overallSkill=0.5345 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:07:31.237 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:07:33.764 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 50.7%, SkillMatch: 53.5%. Rationale: Strong match on AI-related skills.
Recommendation 2: hieptmse140293@fpt.edu.vn (Id:7), Overall: 74.7%, SkillM...
2025-09-25 07:07:33.764 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:07:33.765 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:07:33.765 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:07:33.765 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:07:33.765 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:07:33.770 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2699.4404ms
2025-09-25 07:07:33.770 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:07:33.771 +07:00 [DBG] Connection id "0HNFROTKNHA1G" completed keep alive response.
2025-09-25 07:07:33.771 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:07:33.771 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:07:33.771 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:07:33.771 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2724.9896ms
2025-09-25 07:08:56.338 +07:00 [DBG] Connection id "0HNFROTKNHA1H" disconnecting.
2025-09-25 07:08:56.340 +07:00 [DBG] Connection id "0HNFROTKNHA1H" stopped.
2025-09-25 07:08:56.342 +07:00 [DBG] Connection id "0HNFROTKNHA1H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 07:09:44.675 +07:00 [DBG] Connection id "0HNFROTKNHA1G" disconnecting.
2025-09-25 07:09:44.675 +07:00 [DBG] Connection id "0HNFROTKNHA1G" stopped.
2025-09-25 07:09:44.675 +07:00 [DBG] Connection id "0HNFROTKNHA1G" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 07:12:30.046 +07:00 [DBG] Connection id "0HNFROTKNHA1I" accepted.
2025-09-25 07:12:30.046 +07:00 [DBG] Connection id "0HNFROTKNHA1I" started.
2025-09-25 07:12:30.046 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/reviewer-suggestion/check-eligibility-by-topic?reviewerId=7&topicId=5 - null null
2025-09-25 07:12:30.047 +07:00 [DBG] The request path /api/reviewer-suggestion/check-eligibility-by-topic does not match a supported file type
2025-09-25 07:12:30.047 +07:00 [DBG] The request path /api/reviewer-suggestion/check-eligibility-by-topic does not match a supported file type
2025-09-25 07:12:30.048 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/check-eligibility-by-topic'
2025-09-25 07:12:30.048 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.CheckEligibilityByTopicId (CapBot.api)' with route pattern 'api/reviewer-suggestion/check-eligibility-by-topic' is valid for the request path '/api/reviewer-suggestion/check-eligibility-by-topic'
2025-09-25 07:12:30.048 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.CheckEligibilityByTopicId (CapBot.api)'
2025-09-25 07:12:30.052 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:12:30.052 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:12:30.060 +07:00 [DBG] Authorization was successful.
2025-09-25 07:12:30.061 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.CheckEligibilityByTopicId (CapBot.api)'
2025-09-25 07:12:30.075 +07:00 [INF] Route matched with {action = "CheckEligibilityByTopicId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CheckEligibilityByTopicId(Int32, Int32) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:12:30.075 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:12:30.075 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-25 07:12:30.075 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:12:30.075 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:12:30.075 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:12:30.075 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:12:30.091 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:12:30.091 +07:00 [DBG] Attempting to bind parameter 'reviewerId' of type 'System.Int32' ...
2025-09-25 07:12:30.091 +07:00 [DBG] Attempting to bind parameter 'reviewerId' of type 'System.Int32' using the name 'reviewerId' in request data ...
2025-09-25 07:12:30.091 +07:00 [DBG] Done attempting to bind parameter 'reviewerId' of type 'System.Int32'.
2025-09-25 07:12:30.091 +07:00 [DBG] Done attempting to bind parameter 'reviewerId' of type 'System.Int32'.
2025-09-25 07:12:30.091 +07:00 [DBG] Attempting to validate the bound parameter 'reviewerId' of type 'System.Int32' ...
2025-09-25 07:12:30.091 +07:00 [DBG] Done attempting to validate the bound parameter 'reviewerId' of type 'System.Int32'.
2025-09-25 07:12:30.091 +07:00 [DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' ...
2025-09-25 07:12:30.092 +07:00 [DBG] Attempting to bind parameter 'topicId' of type 'System.Int32' using the name 'topicId' in request data ...
2025-09-25 07:12:30.092 +07:00 [DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
2025-09-25 07:12:30.092 +07:00 [DBG] Done attempting to bind parameter 'topicId' of type 'System.Int32'.
2025-09-25 07:12:30.092 +07:00 [DBG] Attempting to validate the bound parameter 'topicId' of type 'System.Int32' ...
2025-09-25 07:12:30.092 +07:00 [DBG] Done attempting to validate the bound parameter 'topicId' of type 'System.Int32'.
2025-09-25 07:12:30.102 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:12:30.104 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.Id == __reviewerId_0)
    .FirstOrDefault()'
2025-09-25 07:12:30.105 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-25 07:12:30.105 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-25 07:12:30.106 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-25 07:12:30.144 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-25 07:12:30.153 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
                1 -> 0
                2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
                3 -> 19
                4 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 29], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 30], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 31], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.CompletedAt (DateTime?), 33], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 34], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 35], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 36], [Property: ReviewerAssignment.StartedAt (DateTime?), 37], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 38], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 39] }
                5 -> 29
                6 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 40], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 41], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 43], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.OnTimeRate (decimal?), 45], [Property: ReviewerPerformance.QualityRating (decimal?), 46], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 47], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 48], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 49] }
                7 -> 40
            SELECT t.Id, t.AccessFailedCount, t.ConcurrencyStamp, t.CreatedAt, t.DeletedAt, t.Email, t.EmailConfirmed, t.LastModifiedAt, t.LastModifiedBy, t.LockoutEnabled, t.LockoutEnd, t.NormalizedEmail, t.NormalizedUserName, t.PasswordHash, t.PhoneNumber, t.PhoneNumberConfirmed, t.SecurityStamp, t.TwoFactorEnabled, t.UserName, l.Id, l.CreatedAt, l.CreatedBy, l.DeletedAt, l.IsActive, l.LastModifiedAt, l.LastModifiedBy, l.LecturerId, l.ProficiencyLevel, l.SkillTag, r.Id, r.AssignedAt, r.AssignedBy, r.AssignmentType, r.CompletedAt, r.Deadline, r.ReviewerId, r.SkillMatchScore, r.StartedAt, r.Status, r.SubmissionId, r0.Id, r0.AverageScoreGiven, r0.AverageTimeMinutes, r0.CompletedAssignments, r0.LastUpdated, r0.OnTimeRate, r0.QualityRating, r0.ReviewerId, r0.SemesterId, r0.TotalAssignments
            FROM 
            (
                SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
                FROM users AS u
                WHERE u.Id == @__reviewerId_0
            ) AS t
            LEFT JOIN lecturer_skills AS l ON t.Id == l.LecturerId
            LEFT JOIN reviewer_assignments AS r ON t.Id == r.ReviewerId
            LEFT JOIN reviewer_performance AS r0 ON t.Id == r0.ReviewerId
            ORDER BY t.Id ASC, l.Id ASC, r.Id ASC), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 07:12:30.158 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:12:30.158 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:12:30.158 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:12:30.158 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:12:30.159 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:12:30.159 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:12:30.159 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:12:30.159 +07:00 [DBG] Executing DbCommand [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [l].[Id], [l].[CreatedAt], [l].[CreatedBy], [l].[DeletedAt], [l].[IsActive], [l].[LastModifiedAt], [l].[LastModifiedBy], [l].[LecturerId], [l].[ProficiencyLevel], [l].[SkillTag], [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [r0].[Id], [r0].[AverageScoreGiven], [r0].[AverageTimeMinutes], [r0].[CompletedAssignments], [r0].[LastUpdated], [r0].[OnTimeRate], [r0].[QualityRating], [r0].[ReviewerId], [r0].[SemesterId], [r0].[TotalAssignments]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__reviewerId_0
) AS [t]
LEFT JOIN [lecturer_skills] AS [l] ON [t].[Id] = [l].[LecturerId]
LEFT JOIN [reviewer_assignments] AS [r] ON [t].[Id] = [r].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r0] ON [t].[Id] = [r0].[ReviewerId]
ORDER BY [t].[Id], [l].[Id], [r].[Id]
2025-09-25 07:12:30.174 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__reviewerId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AccessFailedCount], [t].[ConcurrencyStamp], [t].[CreatedAt], [t].[DeletedAt], [t].[Email], [t].[EmailConfirmed], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[LockoutEnabled], [t].[LockoutEnd], [t].[NormalizedEmail], [t].[NormalizedUserName], [t].[PasswordHash], [t].[PhoneNumber], [t].[PhoneNumberConfirmed], [t].[SecurityStamp], [t].[TwoFactorEnabled], [t].[UserName], [l].[Id], [l].[CreatedAt], [l].[CreatedBy], [l].[DeletedAt], [l].[IsActive], [l].[LastModifiedAt], [l].[LastModifiedBy], [l].[LecturerId], [l].[ProficiencyLevel], [l].[SkillTag], [r].[Id], [r].[AssignedAt], [r].[AssignedBy], [r].[AssignmentType], [r].[CompletedAt], [r].[Deadline], [r].[ReviewerId], [r].[SkillMatchScore], [r].[StartedAt], [r].[Status], [r].[SubmissionId], [r0].[Id], [r0].[AverageScoreGiven], [r0].[AverageTimeMinutes], [r0].[CompletedAssignments], [r0].[LastUpdated], [r0].[OnTimeRate], [r0].[QualityRating], [r0].[ReviewerId], [r0].[SemesterId], [r0].[TotalAssignments]
FROM (
    SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
    FROM [users] AS [u]
    WHERE [u].[Id] = @__reviewerId_0
) AS [t]
LEFT JOIN [lecturer_skills] AS [l] ON [t].[Id] = [l].[LecturerId]
LEFT JOIN [reviewer_assignments] AS [r] ON [t].[Id] = [r].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r0] ON [t].[Id] = [r0].[ReviewerId]
ORDER BY [t].[Id], [l].[Id], [r].[Id]
2025-09-25 07:12:30.175 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:12:30.175 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:12:30.175 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:12:30.175 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:12:30.179 +07:00 [DBG] Compiling query expression: 
'DbSet<Topic>()
    .AsNoTracking()
    .Where(t => t.Id == __topicId_0)
    .FirstOrDefault()'
2025-09-25 07:12:30.189 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Topic>(
    asyncEnumerable: new SingleQueryingEnumerable<Topic>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Topic.Abbreviation (string), 1], [Property: Topic.CategoryId (int?) FK Index, 2], [Property: Topic.Content (string), 3], [Property: Topic.Context (string), 4], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 5], [Property: Topic.CreatedBy (string), 6], [Property: Topic.DeletedAt (DateTime?), 7], [Property: Topic.Description (string), 8], [Property: Topic.EN_Title (string) Required MaxLength(500), 9], [Property: Topic.IsActive (bool) Required, 10], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 11], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 12], [Property: Topic.LastModifiedAt (DateTime?), 13], [Property: Topic.LastModifiedBy (string), 14], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 15], [Property: Topic.Objectives (string), 16], [Property: Topic.Problem (string), 17], [Property: Topic.SemesterId (int) Required FK Index, 18], [Property: Topic.SupervisorId (int) Required FK Index, 19], [Property: Topic.VN_title (string), 20] }
            SELECT TOP(1) t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM topics AS t
            WHERE t.Id == @__topicId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Topic>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 07:12:30.193 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:12:30.193 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:12:30.193 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:12:30.193 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:12:30.194 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:12:30.194 +07:00 [DBG] Executing DbCommand [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [topics] AS [t]
WHERE [t].[Id] = @__topicId_0
2025-09-25 07:12:30.199 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__topicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [topics] AS [t]
WHERE [t].[Id] = @__topicId_0
2025-09-25 07:12:30.201 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:12:30.201 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-25 07:12:30.201 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:12:30.201 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:12:30.203 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:12:30.204 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:12:30.204 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:12:30.204 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:12:30.204 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:12:30.209 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.CheckEligibilityByTopicId (CapBot.api) in 133.873ms
2025-09-25 07:12:30.209 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.CheckEligibilityByTopicId (CapBot.api)'
2025-09-25 07:12:30.209 +07:00 [DBG] Connection id "0HNFROTKNHA1I" completed keep alive response.
2025-09-25 07:12:30.210 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:12:30.210 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:12:30.210 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:12:30.210 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/reviewer-suggestion/check-eligibility-by-topic?reviewerId=7&topicId=5 - 200 null application/json; charset=utf-8 163.5685ms
2025-09-25 07:12:52.403 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-topic - application/json 63
2025-09-25 07:12:52.403 +07:00 [DBG] POST requests are not supported
2025-09-25 07:12:52.403 +07:00 [DBG] POST requests are not supported
2025-09-25 07:12:52.403 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:12:52.403 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:12:52.403 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-topic'
2025-09-25 07:12:52.407 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestByTopicId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-topic' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-topic'
2025-09-25 07:12:52.407 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestByTopicId (CapBot.api)'
2025-09-25 07:12:52.408 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:12:52.408 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:12:52.410 +07:00 [DBG] Authorization was successful.
2025-09-25 07:12:52.410 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestByTopicId (CapBot.api)'
2025-09-25 07:12:52.421 +07:00 [INF] Route matched with {action = "SuggestByTopicId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestByTopicId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionByTopicInputDTO) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:12:52.421 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:12:52.421 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:12:52.421 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:12:52.421 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:12:52.421 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:12:52.421 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:12:52.423 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:12:52.424 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionByTopicInputDTO' ...
2025-09-25 07:12:52.425 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionByTopicInputDTO' using the name '' in request data ...
2025-09-25 07:12:52.425 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:12:52.425 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:12:52.425 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:12:52.425 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:12:52.426 +07:00 [DBG] Connection id "0HNFROTKNHA1I", Request id "0HNFROTKNHA1I:00000002": started reading request body.
2025-09-25 07:12:52.426 +07:00 [DBG] Connection id "0HNFROTKNHA1I", Request id "0HNFROTKNHA1I:00000002": done reading request body.
2025-09-25 07:12:52.428 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionByTopicInputDTO'
2025-09-25 07:12:52.429 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionByTopicInputDTO'.
2025-09-25 07:12:52.429 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionByTopicInputDTO'.
2025-09-25 07:12:52.429 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionByTopicInputDTO' ...
2025-09-25 07:12:52.433 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionByTopicInputDTO'.
2025-09-25 07:12:52.439 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:12:52.440 +07:00 [DBG] Compiling query expression: 
'DbSet<Topic>()
    .AsNoTracking()
    .Where(t => t.Id == __input_TopicId_0)
    .FirstOrDefault()'
2025-09-25 07:12:52.447 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Topic>(
    asyncEnumerable: new SingleQueryingEnumerable<Topic>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Topic.Abbreviation (string), 1], [Property: Topic.CategoryId (int?) FK Index, 2], [Property: Topic.Content (string), 3], [Property: Topic.Context (string), 4], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 5], [Property: Topic.CreatedBy (string), 6], [Property: Topic.DeletedAt (DateTime?), 7], [Property: Topic.Description (string), 8], [Property: Topic.EN_Title (string) Required MaxLength(500), 9], [Property: Topic.IsActive (bool) Required, 10], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 11], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 12], [Property: Topic.LastModifiedAt (DateTime?), 13], [Property: Topic.LastModifiedBy (string), 14], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 15], [Property: Topic.Objectives (string), 16], [Property: Topic.Problem (string), 17], [Property: Topic.SemesterId (int) Required FK Index, 18], [Property: Topic.SupervisorId (int) Required FK Index, 19], [Property: Topic.VN_title (string), 20] }
            SELECT TOP(1) t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM topics AS t
            WHERE t.Id == @__input_TopicId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Topic>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 07:12:52.448 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:12:52.448 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:12:52.448 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:12:52.448 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:12:52.448 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:12:52.449 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:12:52.449 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:12:52.449 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_TopicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [topics] AS [t]
WHERE [t].[Id] = @__input_TopicId_0
2025-09-25 07:12:52.457 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__input_TopicId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [topics] AS [t]
WHERE [t].[Id] = @__input_TopicId_0
2025-09-25 07:12:52.458 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:12:52.458 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:12:52.459 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:12:52.459 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:12:52.461 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:12:52.462 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:12:52.462 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:12:52.462 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:12:52.463 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:12:52.466 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestByTopicId (CapBot.api) in 45.0552ms
2025-09-25 07:12:52.467 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestByTopicId (CapBot.api)'
2025-09-25 07:12:52.467 +07:00 [DBG] Connection id "0HNFROTKNHA1I" completed keep alive response.
2025-09-25 07:12:52.467 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:12:52.467 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:12:52.467 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:12:52.467 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-topic - 404 null application/json; charset=utf-8 64.1823ms
2025-09-25 07:13:15.910 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest - application/json 70
2025-09-25 07:13:15.911 +07:00 [DBG] POST requests are not supported
2025-09-25 07:13:15.911 +07:00 [DBG] POST requests are not supported
2025-09-25 07:13:15.911 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:13:15.911 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:13:15.911 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest'
2025-09-25 07:13:15.911 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.Suggest (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest' is valid for the request path '/api/reviewer-suggestion/ai-suggest'
2025-09-25 07:13:15.911 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.Suggest (CapBot.api)'
2025-09-25 07:13:15.916 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:13:15.916 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:13:15.916 +07:00 [DBG] Authorization was successful.
2025-09-25 07:13:15.917 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.Suggest (CapBot.api)'
2025-09-25 07:13:15.927 +07:00 [INF] Route matched with {action = "Suggest", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Suggest(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionInputDTO) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:13:15.928 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:13:15.928 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:13:15.928 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:13:15.928 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:13:15.928 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:13:15.929 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:13:15.930 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:13:15.931 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionInputDTO' ...
2025-09-25 07:13:15.931 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionInputDTO' using the name '' in request data ...
2025-09-25 07:13:15.932 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:13:15.932 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:13:15.932 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:13:15.932 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:13:15.933 +07:00 [DBG] Connection id "0HNFROTKNHA1I", Request id "0HNFROTKNHA1I:00000003": started reading request body.
2025-09-25 07:13:15.934 +07:00 [DBG] Connection id "0HNFROTKNHA1I", Request id "0HNFROTKNHA1I:00000003": done reading request body.
2025-09-25 07:13:15.940 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionInputDTO'
2025-09-25 07:13:15.940 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionInputDTO'.
2025-09-25 07:13:15.941 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionInputDTO'.
2025-09-25 07:13:15.941 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionInputDTO' ...
2025-09-25 07:13:15.952 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionInputDTO'.
2025-09-25 07:13:15.954 +07:00 [INF] Suggest called with TopicVersionId=2 MaxSuggestions=20 UsePrompt=true
2025-09-25 07:13:15.962 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:13:15.966 +07:00 [DBG] Compiling query expression: 
'DbSet<TopicVersion>()
    .AsNoTracking()
    .Include(tv => tv.Topic)
    .Where(tv => tv.Id == __input_TopicVersionId_0)
    .FirstOrDefault()'
2025-09-25 07:13:15.968 +07:00 [DBG] Including navigation: 'TopicVersion.Topic'.
2025-09-25 07:13:15.982 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<TopicVersion>(
    asyncEnumerable: new SingleQueryingEnumerable<TopicVersion>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: TopicVersion.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: TopicVersion.Content (string), 1], [Property: TopicVersion.Context (string), 2], [Property: TopicVersion.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 3], [Property: TopicVersion.CreatedBy (string), 4], [Property: TopicVersion.DeletedAt (DateTime?), 5], [Property: TopicVersion.Description (string), 6], [Property: TopicVersion.DocumentUrl (string) MaxLength(500), 7], [Property: TopicVersion.EN_Title (string) Required MaxLength(500), 8], [Property: TopicVersion.ExpectedOutcomes (string), 9], [Property: TopicVersion.IsActive (bool) Required, 10], [Property: TopicVersion.LastModifiedAt (DateTime?), 11], [Property: TopicVersion.LastModifiedBy (string), 12], [Property: TopicVersion.Methodology (string), 13], [Property: TopicVersion.Objectives (string), 14], [Property: TopicVersion.Problem (string), 15], [Property: TopicVersion.Requirements (string), 16], [Property: TopicVersion.Status (TopicStatus) Required Index ValueGenerated.OnAdd, 17], [Property: TopicVersion.SubmittedAt (DateTime?), 18], [Property: TopicVersion.SubmittedBy (int?) FK Index, 19], [Property: TopicVersion.TopicId (int) Required FK Index, 20], [Property: TopicVersion.VN_title (string), 21], [Property: TopicVersion.VersionNumber (int) Required Index, 22] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 23], [Property: Topic.Abbreviation (string), 24], [Property: Topic.CategoryId (int?) FK Index, 25], [Property: Topic.Content (string), 26], [Property: Topic.Context (string), 27], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 28], [Property: Topic.CreatedBy (string), 29], [Property: Topic.DeletedAt (DateTime?), 30], [Property: Topic.Description (string), 31], [Property: Topic.EN_Title (string) Required MaxLength(500), 32], [Property: Topic.IsActive (bool) Required, 33], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 34], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 35], [Property: Topic.LastModifiedAt (DateTime?), 36], [Property: Topic.LastModifiedBy (string), 37], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 38], [Property: Topic.Objectives (string), 39], [Property: Topic.Problem (string), 40], [Property: Topic.SemesterId (int) Required FK Index, 41], [Property: Topic.SupervisorId (int) Required FK Index, 42], [Property: Topic.VN_title (string), 43] }
            SELECT TOP(1) t.Id, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.DocumentUrl, t.EN_Title, t.ExpectedOutcomes, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.Methodology, t.Objectives, t.Problem, t.Requirements, t.Status, t.SubmittedAt, t.SubmittedBy, t.TopicId, t.VN_title, t.VersionNumber, t0.Id, t0.Abbreviation, t0.CategoryId, t0.Content, t0.Context, t0.CreatedAt, t0.CreatedBy, t0.DeletedAt, t0.Description, t0.EN_Title, t0.IsActive, t0.IsApproved, t0.IsLegacy, t0.LastModifiedAt, t0.LastModifiedBy, t0.MaxStudents, t0.Objectives, t0.Problem, t0.SemesterId, t0.SupervisorId, t0.VN_title
            FROM topic_versions AS t
            INNER JOIN topics AS t0 ON t.TopicId == t0.Id
            WHERE t.Id == @__input_TopicVersionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, TopicVersion>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 07:13:15.983 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:13:15.984 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:13:15.984 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:13:15.984 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:13:15.986 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:13:15.986 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:13:15.986 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:13:15.987 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_TopicVersionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [topic_versions] AS [t]
INNER JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [t].[Id] = @__input_TopicVersionId_0
2025-09-25 07:13:15.999 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_TopicVersionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [t].[Id], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[DocumentUrl], [t].[EN_Title], [t].[ExpectedOutcomes], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[Methodology], [t].[Objectives], [t].[Problem], [t].[Requirements], [t].[Status], [t].[SubmittedAt], [t].[SubmittedBy], [t].[TopicId], [t].[VN_title], [t].[VersionNumber], [t0].[Id], [t0].[Abbreviation], [t0].[CategoryId], [t0].[Content], [t0].[Context], [t0].[CreatedAt], [t0].[CreatedBy], [t0].[DeletedAt], [t0].[Description], [t0].[EN_Title], [t0].[IsActive], [t0].[IsApproved], [t0].[IsLegacy], [t0].[LastModifiedAt], [t0].[LastModifiedBy], [t0].[MaxStudents], [t0].[Objectives], [t0].[Problem], [t0].[SemesterId], [t0].[SupervisorId], [t0].[VN_title]
FROM [topic_versions] AS [t]
INNER JOIN [topics] AS [t0] ON [t].[TopicId] = [t0].[Id]
WHERE [t].[Id] = @__input_TopicVersionId_0
2025-09-25 07:13:16.001 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:13:16.002 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 07:13:16.002 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:13:16.002 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:13:16.003 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:13:16.003 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:13:16.004 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:13:16.004 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:13:16.004 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:13:16.004 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:13:16.101 +07:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:13:16.104 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:13:16.104 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-25 07:13:16.104 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:13:16.104 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:13:16.106 +07:00 [DBG] Reviewer 7: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:13:16.107 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:13:16.107 +07:00 [DBG] Reviewer 10: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:13:16.108 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:13:19.775 +07:00 [DBG] AI explanation generated (preview): ENGLISH

Recommendation 1: rv2@.com (Id:10), Overall: 24.0%, SkillMatch: 0.0%. Rationale: Lowest active assignments, tied overall score with other candidates.
Recommendation 2: rv3@.com (Id:11), Overa...
2025-09-25 07:13:19.776 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:13:19.776 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:13:19.776 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:13:19.777 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:13:19.777 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:13:19.778 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.Suggest (CapBot.api) in 3849.0019ms
2025-09-25 07:13:19.778 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.Suggest (CapBot.api)'
2025-09-25 07:13:19.778 +07:00 [DBG] Connection id "0HNFROTKNHA1I" completed keep alive response.
2025-09-25 07:13:19.778 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:13:19.778 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:13:19.778 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:13:19.778 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest - 200 null application/json; charset=utf-8 3868.1536ms
2025-09-25 07:14:29.253 +07:00 [INF] Application is shutting down...
2025-09-25 07:14:29.255 +07:00 [DBG] Hosting stopping
2025-09-25 07:14:29.259 +07:00 [DBG] Connection id "0HNFROTKNHA1I" disconnecting.
2025-09-25 07:14:29.260 +07:00 [DBG] Connection id "0HNFROTKNHA1I" stopped.
2025-09-25 07:14:29.260 +07:00 [DBG] Connection id "0HNFROTKNHA1I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 07:14:29.264 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 07:14:29.271 +07:00 [DBG] Hosting stopped
2025-09-25 07:41:32.187 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 07:41:32.246 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 07:41:32.386 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.404 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.413 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.415 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.415 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.416 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.561 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.562 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.575 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.575 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.575 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.576 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.580 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.580 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 07:41:32.611 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 07:41:32.611 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 07:41:32.611 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 07:41:32.611 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 07:41:32.612 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 07:41:32.612 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 07:41:32.612 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 07:41:32.612 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 07:41:32.612 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 07:41:32.612 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 07:41:32.612 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 07:41:32.612 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 07:41:32.612 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 07:41:32.613 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 07:41:32.613 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 07:41:32.613 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 07:41:32.613 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 07:41:32.613 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 07:41:32.613 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 07:41:32.714 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:41:32.714 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:41:32.714 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:41:32.714 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:41:32.714 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:41:32.714 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:41:32.715 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:41:32.715 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:41:32.715 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:41:32.715 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:41:32.715 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 07:41:32.816 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:41:32.854 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 07:41:32.957 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 07:41:32.979 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:41:32.989 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-25 07:41:32.992 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.149 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.152 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:41:33.157 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-25 07:41:33.161 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (9ms).
2025-09-25 07:41:33.166 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:41:33.205 +07:00 [INF] Executed DbCommand (40ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:41:33.231 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:41:33.243 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.248 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-25 07:41:33.249 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.252 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-25 07:41:33.254 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.254 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.254 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:41:33.254 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.254 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.255 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:41:33.257 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:41:33.258 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:41:33.258 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.258 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:41:33.258 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.258 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:41:33.259 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.259 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.259 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:41:33.259 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.259 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.259 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:41:33.261 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:41:33.261 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:41:33.261 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.261 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:41:33.262 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.262 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:41:33.262 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.262 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.262 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:41:33.262 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.262 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.262 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:41:33.263 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 07:41:33.264 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:41:33.264 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.264 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:41:33.264 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.264 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:41:33.267 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 07:41:33.272 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 07:41:33.273 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.273 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.273 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:41:33.273 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.274 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.274 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:41:33.282 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:41:33.300 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:41:33.318 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.318 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 36ms reading results.
2025-09-25 07:41:33.318 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.318 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:41:33.320 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 07:41:33.322 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.322 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.322 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:41:33.323 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.323 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.323 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:41:33.324 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:41:33.324 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:41:33.324 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.324 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:41:33.325 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.325 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:41:33.325 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 07:41:33.325 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.325 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.326 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:41:33.326 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.326 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.326 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:41:33.327 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:41:33.327 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:41:33.327 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.327 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:41:33.327 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.327 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:41:33.327 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.327 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.327 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:41:33.327 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.327 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:33.327 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:41:33.328 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 07:41:33.328 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 07:41:33.328 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.328 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:41:33.329 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.329 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:41:33.329 +07:00 [INF] Data seeding completed successfully
2025-09-25 07:41:33.330 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:41:33.332 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:33.332 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:41:33.343 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 07:41:33.447 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 07:41:33.523 +07:00 [DBG] Hosting starting
2025-09-25 07:41:33.529 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 07:41:33.531 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 07:41:33.531 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 07:41:33.533 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 07:41:33.535 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 07:41:33.535 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 07:41:33.538 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 07:41:33.540 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 07:41:33.540 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 07:41:33.541 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 07:41:33.542 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 07:41:33.543 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 07:41:33.543 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 07:41:33.543 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 07:41:33.547 +07:00 [DBG] Middleware loaded
2025-09-25 07:41:33.548 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 07:41:33.548 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 07:41:33.569 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 07:41:33.576 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 07:41:33.577 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 07:41:33.577 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 07:41:33.577 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 07:41:33.577 +07:00 [INF] Hosting environment: Development
2025-09-25 07:41:33.577 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 07:41:33.578 +07:00 [DBG] Hosting started
2025-09-25 07:41:33.642 +07:00 [DBG] Connection id "0HNFRPH3D09CU" accepted.
2025-09-25 07:41:33.644 +07:00 [DBG] Connection id "0HNFRPH3D09CU" started.
2025-09-25 07:41:33.674 +07:00 [DBG] Connection id "0HNFRPH3D09CV" accepted.
2025-09-25 07:41:33.674 +07:00 [DBG] Connection id "0HNFRPH3D09CV" started.
2025-09-25 07:41:33.691 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 07:41:33.699 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 07:41:33.793 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 07:41:33.800 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 07:41:33.800 +07:00 [DBG] Connection id "0HNFRPH3D09CU" completed keep alive response.
2025-09-25 07:41:33.803 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 114.8569ms
2025-09-25 07:41:33.806 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 07:41:33.808 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 07:41:33.808 +07:00 [DBG] Connection id "0HNFRPH3D09CU" completed keep alive response.
2025-09-25 07:41:33.809 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.2426ms
2025-09-25 07:41:33.859 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 07:41:34.051 +07:00 [DBG] Connection id "0HNFRPH3D09CU" completed keep alive response.
2025-09-25 07:41:34.051 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 191.7254ms
2025-09-25 07:41:50.487 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 07:41:50.493 +07:00 [DBG] POST requests are not supported
2025-09-25 07:41:50.495 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 07:41:50.497 +07:00 [DBG] POST requests are not supported
2025-09-25 07:41:50.499 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:41:50.505 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:41:50.589 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:41:50.591 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:41:50.593 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:41:50.711 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:41:50.713 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:41:50.724 +07:00 [DBG] Authorization was successful.
2025-09-25 07:41:50.752 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:41:50.791 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:41:50.793 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:41:50.793 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:41:50.797 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:41:50.798 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:41:50.798 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:41:50.802 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:41:50.969 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:41:50.977 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:41:50.981 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:41:50.987 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:41:50.987 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:41:50.988 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:41:50.988 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:41:51.015 +07:00 [DBG] Connection id "0HNFRPH3D09CU", Request id "0HNFRPH3D09CU:00000004": started reading request body.
2025-09-25 07:41:51.016 +07:00 [DBG] Connection id "0HNFRPH3D09CU", Request id "0HNFRPH3D09CU:00000004": done reading request body.
2025-09-25 07:41:51.025 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:41:51.025 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:41:51.027 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:41:51.028 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:41:51.048 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:41:51.050 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:41:51.051 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:41:51.052 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:41:51.053 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:41:51.053 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:41:51.053 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:41:51.057 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 07:41:51.061 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:41:51.147 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:41:51.161 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-25 07:41:51.197 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-25 07:41:51.296 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 07:41:51.303 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:41:51.304 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:41:51.304 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:51.305 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:51.305 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:41:51.305 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:51.305 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:51.306 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:41:51.329 +07:00 [INF] Executed DbCommand (23ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:41:51.345 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:41:51.345 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 15ms reading results.
2025-09-25 07:41:51.345 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:51.346 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:41:51.360 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-25 07:41:51.376 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-25 07:41:51.377 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-25 07:41:51.380 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-25 07:41:51.380 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-25 07:41:51.490 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-25 07:41:51.506 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 07:41:51.521 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:51.522 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:51.522 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:41:51.522 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:51.523 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:41:51.523 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:41:51.611 +07:00 [INF] Executed DbCommand (88ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:41:51.633 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:41:51.634 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 22ms reading results.
2025-09-25 07:41:51.635 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:41:51.635 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:41:54.532 +07:00 [DBG] Reviewer 7: overallSkill=0.6014 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:41:55.569 +07:00 [DBG] Reviewer 9: overallSkill=0.3330 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:41:56.385 +07:00 [DBG] Reviewer 10: overallSkill=0.5943 fieldScores=Title:0.6030,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:41:57.258 +07:00 [DBG] Reviewer 11: overallSkill=0.3213 fieldScores=Title:0,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:42:00.099 +07:00 [DBG] AI explanation generated (preview): Recommendation 1: hieptmse140293@fpt.edu.vn (Id:7), Overall:78.1%, SkillMatch:60.1%.  Matched "mobile" skill; currently has 2 active assignments.
Recommendation 2: rv2@.com (Id:10), Overall:53.7%, Ski...
2025-09-25 07:42:00.110 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:42:00.115 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:42:00.116 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:42:00.123 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:42:00.128 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:42:00.245 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 9441.2064ms
2025-09-25 07:42:00.246 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:42:00.251 +07:00 [DBG] Connection id "0HNFRPH3D09CU" completed keep alive response.
2025-09-25 07:42:00.252 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:42:00.252 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:42:00.252 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:42:00.255 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 9767.5881ms
2025-09-25 07:43:45.574 +07:00 [DBG] Connection id "0HNFRPH3D09CV" disconnecting.
2025-09-25 07:43:45.576 +07:00 [DBG] Connection id "0HNFRPH3D09CV" stopped.
2025-09-25 07:43:45.579 +07:00 [DBG] Connection id "0HNFRPH3D09CV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 07:44:10.807 +07:00 [DBG] Connection id "0HNFRPH3D09CU" disconnecting.
2025-09-25 07:44:10.808 +07:00 [DBG] Connection id "0HNFRPH3D09CU" stopped.
2025-09-25 07:44:10.808 +07:00 [DBG] Connection id "0HNFRPH3D09CU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 07:44:31.791 +07:00 [DBG] Connection id "0HNFRPH3D09D0" accepted.
2025-09-25 07:44:31.792 +07:00 [DBG] Connection id "0HNFRPH3D09D0" started.
2025-09-25 07:44:31.792 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 07:44:31.794 +07:00 [DBG] POST requests are not supported
2025-09-25 07:44:31.794 +07:00 [DBG] POST requests are not supported
2025-09-25 07:44:31.798 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:44:31.798 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:44:31.810 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:44:31.810 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:44:31.811 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:44:31.815 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:44:31.816 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:44:31.821 +07:00 [DBG] Authorization was successful.
2025-09-25 07:44:31.822 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:44:31.823 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:44:31.823 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:44:31.823 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:44:31.823 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:44:31.823 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:44:31.825 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:44:31.825 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:44:31.829 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:44:31.830 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:44:31.830 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:44:31.830 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:44:31.831 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:44:31.831 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:44:31.832 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:44:31.833 +07:00 [DBG] Connection id "0HNFRPH3D09D0", Request id "0HNFRPH3D09D0:00000001": started reading request body.
2025-09-25 07:44:31.834 +07:00 [DBG] Connection id "0HNFRPH3D09D0", Request id "0HNFRPH3D09D0:00000001": done reading request body.
2025-09-25 07:44:31.834 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:44:31.834 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:44:31.835 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:44:31.835 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:44:31.835 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:44:31.835 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:44:31.836 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:44:31.836 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:44:31.836 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:44:31.836 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:44:31.836 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:44:31.837 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 07:44:31.838 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:44:31.858 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:44:31.861 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:44:31.861 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:44:31.861 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:44:31.861 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:44:31.862 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:44:31.862 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:44:31.862 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:44:31.862 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:44:31.872 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:44:31.872 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:44:31.873 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:44:31.873 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:44:31.873 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:44:31.878 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:44:31.878 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:44:31.879 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:44:31.879 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:44:31.879 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:44:31.879 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:44:31.974 +07:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:44:31.979 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:44:31.979 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-09-25 07:44:31.979 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:44:31.980 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:44:34.218 +07:00 [DBG] Reviewer 7: overallSkill=0.4895 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 07:44:34.219 +07:00 [DBG] Reviewer 9: overallSkill=0.4080 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:44:34.221 +07:00 [DBG] Reviewer 10: overallSkill=0.4853 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:44:34.225 +07:00 [DBG] Reviewer 11: overallSkill=0.5151 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 07:44:36.550 +07:00 [DBG] AI explanation generated (preview): Recommended Reviewers:

1) rv3@.com (Id:11): Overall: 49.8%, SkillMatch: 51.5%  Recommendation:  Strong match on "iot" skills; currently has 1 active assignment.
2) rv2@.com (Id:10): Overall: 48.3%, S...
2025-09-25 07:44:36.552 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:44:36.553 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:44:36.553 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:44:36.554 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:44:36.554 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:44:36.555 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 4730.1856ms
2025-09-25 07:44:36.555 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:44:36.556 +07:00 [DBG] Connection id "0HNFRPH3D09D0" completed keep alive response.
2025-09-25 07:44:36.556 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:44:36.556 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:44:36.556 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:44:36.556 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 4763.7669ms
2025-09-25 07:46:47.947 +07:00 [DBG] Connection id "0HNFRPH3D09D0" disconnecting.
2025-09-25 07:46:47.948 +07:00 [DBG] Connection id "0HNFRPH3D09D0" stopped.
2025-09-25 07:46:47.948 +07:00 [DBG] Connection id "0HNFRPH3D09D0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 07:46:58.580 +07:00 [DBG] Connection id "0HNFRPH3D09D1" accepted.
2025-09-25 07:46:58.580 +07:00 [DBG] Connection id "0HNFRPH3D09D1" started.
2025-09-25 07:46:58.581 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 07:46:58.581 +07:00 [DBG] POST requests are not supported
2025-09-25 07:46:58.581 +07:00 [DBG] POST requests are not supported
2025-09-25 07:46:58.581 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:46:58.581 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:46:58.581 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:46:58.581 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:46:58.586 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:46:58.590 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:46:58.593 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:46:58.594 +07:00 [DBG] Authorization was successful.
2025-09-25 07:46:58.595 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:46:58.595 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:46:58.595 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:46:58.595 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:46:58.596 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:46:58.596 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:46:58.596 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:46:58.596 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:46:58.609 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:46:58.609 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:46:58.609 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:46:58.610 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:46:58.610 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:46:58.610 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:46:58.610 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:46:58.610 +07:00 [DBG] Connection id "0HNFRPH3D09D1", Request id "0HNFRPH3D09D1:00000001": started reading request body.
2025-09-25 07:46:58.610 +07:00 [DBG] Connection id "0HNFRPH3D09D1", Request id "0HNFRPH3D09D1:00000001": done reading request body.
2025-09-25 07:46:58.610 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:46:58.610 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:46:58.610 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:46:58.611 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:46:58.611 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:46:58.611 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:46:58.611 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:46:58.611 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:46:58.611 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:46:58.611 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:46:58.611 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:46:58.611 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 07:46:58.611 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":3,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:46:58.616 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:46:58.617 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:46:58.617 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:46:58.617 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:46:58.617 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:46:58.617 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:46:58.618 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:46:58.618 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:46:58.618 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:46:58.629 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:46:58.629 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:46:58.629 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:46:58.629 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:46:58.629 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:46:58.631 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:46:58.631 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:46:58.631 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:46:58.631 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:46:58.631 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:46:58.631 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:46:58.707 +07:00 [INF] Executed DbCommand (76ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:46:58.708 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:46:58.708 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:46:58.708 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:46:58.708 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:46:59.852 +07:00 [DBG] Reviewer 7: overallSkill=0.4895 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 07:46:59.853 +07:00 [DBG] Reviewer 9: overallSkill=0.4080 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:46:59.857 +07:00 [DBG] Reviewer 10: overallSkill=0.4853 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:46:59.858 +07:00 [DBG] Reviewer 11: overallSkill=0.5151 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 07:47:01.999 +07:00 [DBG] AI explanation generated (preview): Reviewers:

rv3@.com (Id:11): Overall 49.8%, SkillMatch 51.5%.  Recommendation:  Strong match on "iot" skills; currently has 1 active assignment.
rv2@.com (Id:10): Overall 48.3%, SkillMatch 48.5%. Rec...
2025-09-25 07:47:01.999 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:47:01.999 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:47:02.000 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:47:02.000 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:47:02.000 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:47:02.000 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3404.4242ms
2025-09-25 07:47:02.000 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:47:02.000 +07:00 [DBG] Connection id "0HNFRPH3D09D1" completed keep alive response.
2025-09-25 07:47:02.001 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:47:02.001 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:47:02.001 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:47:02.001 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3420.5831ms
2025-09-25 07:48:27.475 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 07:48:27.475 +07:00 [DBG] POST requests are not supported
2025-09-25 07:48:27.475 +07:00 [DBG] POST requests are not supported
2025-09-25 07:48:27.475 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:48:27.475 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:48:27.475 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:48:27.475 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:48:27.475 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:48:27.476 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:48:27.476 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:48:27.476 +07:00 [DBG] Authorization was successful.
2025-09-25 07:48:27.476 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:48:27.476 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:48:27.476 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:48:27.476 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:48:27.476 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:48:27.476 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:48:27.476 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:48:27.476 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:48:27.477 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:48:27.477 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:48:27.477 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:48:27.477 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:48:27.477 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:48:27.478 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:48:27.478 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:48:27.478 +07:00 [DBG] Connection id "0HNFRPH3D09D1", Request id "0HNFRPH3D09D1:00000002": started reading request body.
2025-09-25 07:48:27.478 +07:00 [DBG] Connection id "0HNFRPH3D09D1", Request id "0HNFRPH3D09D1:00000002": done reading request body.
2025-09-25 07:48:27.478 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:48:27.478 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:48:27.478 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:48:27.478 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:48:27.478 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:48:27.478 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:48:27.478 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:48:27.478 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:48:27.478 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:48:27.478 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:48:27.478 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:48:27.478 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 07:48:27.478 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:48:27.479 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:48:27.480 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:48:27.480 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:48:27.480 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:48:27.480 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:48:27.480 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:48:27.480 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:48:27.480 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:48:27.480 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:48:27.490 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:48:27.491 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:48:27.491 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:48:27.491 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:48:27.491 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:48:27.492 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:48:27.492 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:48:27.492 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:48:27.492 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:48:27.492 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:48:27.493 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:48:27.589 +07:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:48:27.590 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:48:27.591 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:48:27.591 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:48:27.591 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:48:28.841 +07:00 [DBG] Reviewer 7: overallSkill=0.4895 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 07:48:28.842 +07:00 [DBG] Reviewer 9: overallSkill=0.4080 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:48:28.843 +07:00 [DBG] Reviewer 10: overallSkill=0.4853 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:48:28.846 +07:00 [DBG] Reviewer 11: overallSkill=0.5151 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 07:48:31.543 +07:00 [DBG] AI explanation generated (preview): Recommendation 1: rv3@.com (Id:11), Overall: 49.8%, SkillMatch: 51.5%.  Rationale: Matched "iot" skills; currently has 1 active assignment.
Recommendation 2: rv2@.com (Id:10), Overall: 48.3%, SkillMat...
2025-09-25 07:48:31.543 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:48:31.544 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:48:31.544 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:48:31.544 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:48:31.544 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:48:31.545 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 4068.1107ms
2025-09-25 07:48:31.545 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:48:31.545 +07:00 [DBG] Connection id "0HNFRPH3D09D1" completed keep alive response.
2025-09-25 07:48:31.546 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:48:31.546 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:48:31.546 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:48:31.546 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 4071.4451ms
2025-09-25 07:50:41.364 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 07:50:41.364 +07:00 [DBG] POST requests are not supported
2025-09-25 07:50:41.364 +07:00 [DBG] POST requests are not supported
2025-09-25 07:50:41.364 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:50:41.364 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:50:41.364 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:50:41.364 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:50:41.364 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:50:41.365 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:50:41.365 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:50:41.365 +07:00 [DBG] Authorization was successful.
2025-09-25 07:50:41.365 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:50:41.365 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:50:41.368 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:50:41.370 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:50:41.370 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:50:41.370 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:50:41.370 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:50:41.371 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:50:41.372 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:50:41.374 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:50:41.375 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:50:41.375 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:50:41.375 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:50:41.375 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:50:41.375 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:50:41.375 +07:00 [DBG] Connection id "0HNFRPH3D09D1", Request id "0HNFRPH3D09D1:00000003": started reading request body.
2025-09-25 07:50:41.375 +07:00 [DBG] Connection id "0HNFRPH3D09D1", Request id "0HNFRPH3D09D1:00000003": done reading request body.
2025-09-25 07:50:41.376 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:50:41.376 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:50:41.376 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:50:41.376 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:50:41.376 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:50:41.376 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:50:41.376 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:50:41.377 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:50:41.377 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:50:41.377 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:50:41.377 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:50:41.377 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 07:50:41.377 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:50:41.378 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:50:41.379 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:50:41.380 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:50:41.380 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:50:41.380 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:50:41.380 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:50:41.380 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:50:41.380 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:50:41.380 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:50:41.389 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:50:41.389 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:50:41.389 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:50:41.389 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:50:41.389 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:50:41.391 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:50:41.392 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:50:41.392 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:50:41.392 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:50:41.392 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:50:41.393 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:50:41.472 +07:00 [INF] Executed DbCommand (79ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:50:41.473 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:50:41.473 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 07:50:41.473 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:50:41.473 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:50:42.875 +07:00 [DBG] Reviewer 7: overallSkill=0.4895 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 07:50:42.877 +07:00 [DBG] Reviewer 9: overallSkill=0.4080 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:50:42.878 +07:00 [DBG] Reviewer 10: overallSkill=0.4853 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:50:42.879 +07:00 [DBG] Reviewer 11: overallSkill=0.5151 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 07:50:45.582 +07:00 [DBG] AI explanation generated (preview): Recommendation 1: rv3@.com, Id:11. Overall: 49.8%, SkillMatch: 51.5%.  Rationale: Matched "iot" skills; currently has 1 active assignment.
Recommendation 2: rv2@.com, Id:10. Overall: 48.3%, SkillMatch...
2025-09-25 07:50:45.582 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:50:45.583 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:50:45.583 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:50:45.583 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:50:45.583 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:50:45.586 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 4215.2074ms
2025-09-25 07:50:45.586 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:50:45.586 +07:00 [DBG] Connection id "0HNFRPH3D09D1" completed keep alive response.
2025-09-25 07:50:45.586 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:50:45.587 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:50:45.587 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:50:45.587 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 4223.1033ms
2025-09-25 07:51:07.320 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 07:51:07.320 +07:00 [DBG] POST requests are not supported
2025-09-25 07:51:07.320 +07:00 [DBG] POST requests are not supported
2025-09-25 07:51:07.320 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:51:07.320 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:51:07.320 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:51:07.320 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:51:07.320 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:51:07.321 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:51:07.321 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:51:07.321 +07:00 [DBG] Authorization was successful.
2025-09-25 07:51:07.321 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:51:07.324 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:51:07.324 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:51:07.325 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:51:07.326 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:51:07.326 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:51:07.326 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:51:07.326 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:51:07.327 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:51:07.328 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:51:07.329 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:51:07.329 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:51:07.329 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:51:07.330 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:51:07.330 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:51:07.330 +07:00 [DBG] Connection id "0HNFRPH3D09D1", Request id "0HNFRPH3D09D1:00000004": started reading request body.
2025-09-25 07:51:07.331 +07:00 [DBG] Connection id "0HNFRPH3D09D1", Request id "0HNFRPH3D09D1:00000004": done reading request body.
2025-09-25 07:51:07.331 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:51:07.331 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:51:07.331 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:51:07.331 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:51:07.331 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:51:07.331 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:51:07.332 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:51:07.332 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:51:07.332 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:51:07.332 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:51:07.332 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:51:07.332 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 07:51:07.332 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:51:07.333 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:51:07.334 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:51:07.334 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:51:07.334 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:07.335 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:07.335 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:51:07.335 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:51:07.335 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:51:07.335 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:51:07.337 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:51:07.338 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:51:07.338 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:51:07.338 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:07.338 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:51:07.341 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:07.341 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:07.341 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:51:07.341 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:51:07.341 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:51:07.341 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:51:07.343 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:51:07.344 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:51:07.344 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:51:07.344 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:07.344 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:51:08.622 +07:00 [DBG] Reviewer 7: overallSkill=0.4895 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 07:51:08.623 +07:00 [DBG] Reviewer 9: overallSkill=0.4080 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:51:08.624 +07:00 [DBG] Reviewer 10: overallSkill=0.4853 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:51:08.625 +07:00 [DBG] Reviewer 11: overallSkill=0.5151 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 07:51:11.239 +07:00 [DBG] AI explanation generated (preview): Recommendation 1: rv3@.com (Id:11) Overall: 49.8%, SkillMatch: 51.5%  Rationale: Matched "iot" skill, currently has 1 active assignment.
Recommendation 2: rv2@.com (Id:10) Overall: 48.3%, SkillMatch: ...
2025-09-25 07:51:11.240 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:51:11.240 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:51:11.240 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:51:11.240 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:51:11.240 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:51:11.241 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3914.7914ms
2025-09-25 07:51:11.241 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:51:11.242 +07:00 [DBG] Connection id "0HNFRPH3D09D1" completed keep alive response.
2025-09-25 07:51:11.242 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:51:11.242 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:11.244 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-25 07:51:11.244 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3924.3031ms
2025-09-25 07:51:17.135 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 07:51:17.135 +07:00 [DBG] POST requests are not supported
2025-09-25 07:51:17.135 +07:00 [DBG] POST requests are not supported
2025-09-25 07:51:17.135 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 07:51:17.135 +07:00 [INF] CORS policy execution successful.
2025-09-25 07:51:17.135 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:51:17.135 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 07:51:17.135 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:51:17.136 +07:00 [DBG] Successfully validated the token.
2025-09-25 07:51:17.136 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 07:51:17.136 +07:00 [DBG] Authorization was successful.
2025-09-25 07:51:17.136 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:51:17.136 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 07:51:17.136 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 07:51:17.136 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 07:51:17.136 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 07:51:17.136 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 07:51:17.137 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 07:51:17.137 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:51:17.137 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 07:51:17.138 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:51:17.138 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 07:51:17.138 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:51:17.138 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:51:17.138 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 07:51:17.138 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 07:51:17.138 +07:00 [DBG] Connection id "0HNFRPH3D09D1", Request id "0HNFRPH3D09D1:00000005": started reading request body.
2025-09-25 07:51:17.139 +07:00 [DBG] Connection id "0HNFRPH3D09D1", Request id "0HNFRPH3D09D1:00000005": done reading request body.
2025-09-25 07:51:17.139 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 07:51:17.139 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:51:17.139 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:51:17.139 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 07:51:17.139 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 07:51:17.140 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:51:17.140 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 07:51:17.141 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:51:17.141 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:51:17.142 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 07:51:17.142 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 07:51:17.142 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 07:51:17.142 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 07:51:17.143 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 07:51:17.144 +07:00 [DBG] Creating DbConnection.
2025-09-25 07:51:17.144 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 07:51:17.144 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:17.144 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:17.144 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:51:17.144 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:51:17.144 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:51:17.145 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:51:17.157 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 07:51:17.158 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:51:17.158 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:51:17.158 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:17.159 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:51:17.161 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:17.162 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:17.163 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 07:51:17.163 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:51:17.163 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 07:51:17.163 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:51:17.254 +07:00 [INF] Executed DbCommand (91ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 07:51:17.255 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 07:51:17.256 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 07:51:17.256 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:17.256 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 07:51:18.194 +07:00 [DBG] Reviewer 7: overallSkill=0.4895 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:0,Context:0
2025-09-25 07:51:18.195 +07:00 [DBG] Reviewer 9: overallSkill=0.4080 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:51:18.197 +07:00 [DBG] Reviewer 10: overallSkill=0.4853 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 07:51:18.198 +07:00 [DBG] Reviewer 11: overallSkill=0.5151 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 07:51:20.831 +07:00 [DBG] AI explanation generated (preview): Recommendation 1: rv3@.com (Id:11), Overall: 49.8%, SkillMatch: 51.5%.  Rationale: Matched skills in "iot" with one current active assignment.
Recommendation 2: rv2@.com (Id:10), Overall: 48.3%, Skill...
2025-09-25 07:51:20.831 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 07:51:20.831 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 07:51:20.831 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 07:51:20.831 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 07:51:20.831 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 07:51:20.832 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3695.3914ms
2025-09-25 07:51:20.832 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 07:51:20.832 +07:00 [DBG] Connection id "0HNFRPH3D09D1" completed keep alive response.
2025-09-25 07:51:20.833 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 07:51:20.833 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 07:51:20.833 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 07:51:20.833 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3698.3327ms
2025-09-25 07:53:32.795 +07:00 [DBG] Connection id "0HNFRPH3D09D1" disconnecting.
2025-09-25 07:53:32.796 +07:00 [DBG] Connection id "0HNFRPH3D09D1" stopped.
2025-09-25 07:53:32.796 +07:00 [DBG] Connection id "0HNFRPH3D09D1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 07:57:41.701 +07:00 [INF] Application is shutting down...
2025-09-25 07:57:41.704 +07:00 [DBG] Hosting stopping
2025-09-25 07:57:41.715 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 07:57:41.741 +07:00 [DBG] Hosting stopped
2025-09-25 08:28:38.719 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 08:28:38.778 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 08:28:38.922 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:38.936 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:38.946 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:38.947 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:38.947 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:38.949 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:39.090 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:39.090 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:39.102 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:39.102 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:39.102 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:39.103 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:39.108 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:39.108 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 08:28:39.136 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 08:28:39.136 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 08:28:39.136 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 08:28:39.136 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 08:28:39.136 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 08:28:39.137 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 08:28:39.137 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 08:28:39.137 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 08:28:39.137 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 08:28:39.137 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 08:28:39.137 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 08:28:39.137 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 08:28:39.137 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 08:28:39.137 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 08:28:39.138 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 08:28:39.138 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 08:28:39.138 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 08:28:39.138 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 08:28:39.138 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 08:28:39.234 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 08:28:39.234 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 08:28:39.234 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 08:28:39.234 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 08:28:39.234 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 08:28:39.234 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 08:28:39.234 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 08:28:39.234 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 08:28:39.235 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 08:28:39.235 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 08:28:39.235 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 08:28:39.332 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 08:28:39.368 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 08:28:39.467 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 08:28:39.492 +07:00 [DBG] Creating DbConnection.
2025-09-25 08:28:39.503 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-25 08:28:39.506 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.636 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.638 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:28:39.641 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-25 08:28:39.646 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-25 08:28:39.651 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 08:28:39.688 +07:00 [INF] Executed DbCommand (37ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 08:28:39.712 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 08:28:39.724 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.728 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-25 08:28:39.730 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.733 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-25 08:28:39.735 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.735 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.735 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:28:39.735 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.736 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.736 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 08:28:39.739 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 08:28:39.740 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 08:28:39.740 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.740 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 08:28:39.741 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.741 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:28:39.741 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.742 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.742 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:28:39.742 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.742 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.742 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 08:28:39.743 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 08:28:39.743 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 08:28:39.743 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.743 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 08:28:39.743 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.743 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:28:39.744 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.744 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.744 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:28:39.744 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.744 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.744 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 08:28:39.744 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 08:28:39.745 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 08:28:39.745 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.745 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 08:28:39.745 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.745 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:28:39.748 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 08:28:39.753 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 08:28:39.753 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.753 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.754 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:28:39.754 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.754 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.754 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 08:28:39.761 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 08:28:39.778 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 08:28:39.797 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.797 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 36ms reading results.
2025-09-25 08:28:39.798 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.798 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:28:39.799 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 08:28:39.801 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.801 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.801 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:28:39.801 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.801 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.801 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 08:28:39.802 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 08:28:39.803 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 08:28:39.803 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.804 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 08:28:39.804 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.804 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:28:39.804 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 08:28:39.804 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.805 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.805 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:28:39.805 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.805 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.805 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 08:28:39.806 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 08:28:39.806 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 08:28:39.806 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.806 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 08:28:39.806 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.806 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:28:39.806 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.807 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.807 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:28:39.807 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.807 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:28:39.807 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 08:28:39.808 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 08:28:39.808 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 08:28:39.809 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.809 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 08:28:39.809 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.809 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:28:39.809 +07:00 [INF] Data seeding completed successfully
2025-09-25 08:28:39.810 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 08:28:39.812 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:28:39.812 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 08:28:39.821 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 08:28:39.918 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 08:28:40.036 +07:00 [DBG] Hosting starting
2025-09-25 08:28:40.043 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 08:28:40.044 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 08:28:40.044 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 08:28:40.047 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 08:28:40.049 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 08:28:40.049 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 08:28:40.053 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 08:28:40.055 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 08:28:40.055 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 08:28:40.056 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 08:28:40.057 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 08:28:40.057 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 08:28:40.058 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 08:28:40.058 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 08:28:40.061 +07:00 [DBG] Middleware loaded
2025-09-25 08:28:40.062 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 08:28:40.063 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 08:28:40.082 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 08:28:40.089 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 08:28:40.089 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 08:28:40.089 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 08:28:40.090 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 08:28:40.090 +07:00 [INF] Hosting environment: Development
2025-09-25 08:28:40.090 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 08:28:40.090 +07:00 [DBG] Hosting started
2025-09-25 08:28:40.157 +07:00 [DBG] Connection id "0HNFRQBDOO2B7" accepted.
2025-09-25 08:28:40.158 +07:00 [DBG] Connection id "0HNFRQBDOO2B7" started.
2025-09-25 08:28:40.184 +07:00 [DBG] Connection id "0HNFRQBDOO2B8" accepted.
2025-09-25 08:28:40.184 +07:00 [DBG] Connection id "0HNFRQBDOO2B8" started.
2025-09-25 08:28:40.182 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 08:28:40.191 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 08:28:40.265 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 08:28:40.271 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 08:28:40.271 +07:00 [DBG] Connection id "0HNFRQBDOO2B7" completed keep alive response.
2025-09-25 08:28:40.274 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 92.595ms
2025-09-25 08:28:40.281 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 08:28:40.283 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 08:28:40.283 +07:00 [DBG] Connection id "0HNFRQBDOO2B7" completed keep alive response.
2025-09-25 08:28:40.284 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.9916ms
2025-09-25 08:28:40.329 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 08:28:40.494 +07:00 [DBG] Connection id "0HNFRQBDOO2B7" completed keep alive response.
2025-09-25 08:28:40.494 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 165.2071ms
2025-09-25 08:29:23.003 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 08:29:23.005 +07:00 [DBG] POST requests are not supported
2025-09-25 08:29:23.010 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 08:29:23.011 +07:00 [DBG] POST requests are not supported
2025-09-25 08:29:23.012 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 08:29:23.013 +07:00 [INF] CORS policy execution successful.
2025-09-25 08:29:23.094 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 08:29:23.096 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 08:29:23.097 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:29:23.232 +07:00 [DBG] Successfully validated the token.
2025-09-25 08:29:23.234 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 08:29:23.241 +07:00 [DBG] Authorization was successful.
2025-09-25 08:29:23.259 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:29:23.306 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 08:29:23.309 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 08:29:23.310 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 08:29:23.311 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 08:29:23.312 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 08:29:23.312 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 08:29:23.318 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 08:29:23.485 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 08:29:23.491 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 08:29:23.496 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 08:29:23.498 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:29:23.499 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:29:23.499 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:29:23.500 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 08:29:23.515 +07:00 [DBG] Connection id "0HNFRQBDOO2B7", Request id "0HNFRQBDOO2B7:00000004": started reading request body.
2025-09-25 08:29:23.516 +07:00 [DBG] Connection id "0HNFRQBDOO2B7", Request id "0HNFRQBDOO2B7:00000004": done reading request body.
2025-09-25 08:29:23.529 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 08:29:23.531 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:29:23.532 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:29:23.533 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 08:29:23.545 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:29:23.547 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 08:29:23.548 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 08:29:23.551 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:29:23.551 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:29:23.552 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 08:29:23.553 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:29:23.557 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 08:29:23.560 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 08:29:23.643 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 08:29:23.656 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-25 08:29:23.687 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-25 08:29:23.791 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 08:29:23.799 +07:00 [DBG] Creating DbConnection.
2025-09-25 08:29:23.800 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 08:29:23.800 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:29:23.800 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:29:23.801 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:29:23.802 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:29:23.802 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:29:23.804 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 08:29:23.825 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 08:29:23.838 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:29:23.839 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 13ms reading results.
2025-09-25 08:29:23.839 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:29:23.839 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:29:23.850 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-25 08:29:23.866 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-25 08:29:23.866 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-25 08:29:23.867 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-25 08:29:23.868 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-25 08:29:23.971 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-25 08:29:23.984 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 08:29:24.006 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:29:24.006 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:29:24.006 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:29:24.007 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:29:24.007 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:29:24.007 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 08:29:24.100 +07:00 [INF] Executed DbCommand (93ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 08:29:24.115 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:29:24.118 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 17ms reading results.
2025-09-25 08:29:24.119 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:29:24.119 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:29:26.243 +07:00 [DBG] Reviewer 7: overallSkill=0.4948 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:1,Context:0
2025-09-25 08:29:27.260 +07:00 [DBG] Reviewer 9: overallSkill=0.4079 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 08:29:28.455 +07:00 [DBG] Reviewer 10: overallSkill=0.4820 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 08:29:29.399 +07:00 [DBG] Reviewer 11: overallSkill=0.5094 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 08:29:32.052 +07:00 [DBG] AI explanation generated (preview): Recommended Reviewers:

1) rv3@.com (Id:11): Overall 49.5%, SkillMatch 50.9%.  Recommendation: Strong match on "iot" skills; currently has 1 active assignment.
2) hieptmse140293@fpt.edu.vn (Id:7): Ove...
2025-09-25 08:29:32.058 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 08:29:32.060 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 08:29:32.061 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 08:29:32.064 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 08:29:32.064 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 08:29:32.183 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 8863.0601ms
2025-09-25 08:29:32.184 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:29:32.190 +07:00 [DBG] Connection id "0HNFRQBDOO2B7" completed keep alive response.
2025-09-25 08:29:32.190 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 08:29:32.191 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:29:32.192 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 08:29:32.196 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 9193.2117ms
2025-09-25 08:30:51.193 +07:00 [DBG] Connection id "0HNFRQBDOO2B8" disconnecting.
2025-09-25 08:30:51.195 +07:00 [DBG] Connection id "0HNFRQBDOO2B8" stopped.
2025-09-25 08:30:51.197 +07:00 [DBG] Connection id "0HNFRQBDOO2B8" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 08:31:43.565 +07:00 [DBG] Connection id "0HNFRQBDOO2B7" disconnecting.
2025-09-25 08:31:43.565 +07:00 [DBG] Connection id "0HNFRQBDOO2B7" stopped.
2025-09-25 08:31:43.565 +07:00 [DBG] Connection id "0HNFRQBDOO2B7" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 08:33:05.984 +07:00 [DBG] Connection id "0HNFRQBDOO2B9" accepted.
2025-09-25 08:33:05.985 +07:00 [DBG] Connection id "0HNFRQBDOO2B9" started.
2025-09-25 08:33:05.986 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 08:33:05.986 +07:00 [DBG] POST requests are not supported
2025-09-25 08:33:05.986 +07:00 [DBG] POST requests are not supported
2025-09-25 08:33:05.987 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 08:33:05.987 +07:00 [INF] CORS policy execution successful.
2025-09-25 08:33:05.997 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 08:33:05.997 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 08:33:05.998 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:33:06.007 +07:00 [DBG] Successfully validated the token.
2025-09-25 08:33:06.008 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 08:33:06.014 +07:00 [DBG] Authorization was successful.
2025-09-25 08:33:06.017 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:33:06.018 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 08:33:06.018 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 08:33:06.019 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 08:33:06.020 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 08:33:06.020 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 08:33:06.020 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 08:33:06.021 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 08:33:06.026 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 08:33:06.027 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 08:33:06.028 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 08:33:06.028 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:33:06.031 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:33:06.031 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:33:06.032 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 08:33:06.032 +07:00 [DBG] Connection id "0HNFRQBDOO2B9", Request id "0HNFRQBDOO2B9:00000001": started reading request body.
2025-09-25 08:33:06.032 +07:00 [DBG] Connection id "0HNFRQBDOO2B9", Request id "0HNFRQBDOO2B9:00000001": done reading request body.
2025-09-25 08:33:06.033 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 08:33:06.033 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:33:06.033 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:33:06.033 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 08:33:06.034 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:33:06.034 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 08:33:06.034 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 08:33:06.035 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:33:06.037 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:33:06.037 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 08:33:06.037 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:33:06.038 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 08:33:06.040 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 08:33:06.058 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 08:33:06.061 +07:00 [DBG] Creating DbConnection.
2025-09-25 08:33:06.061 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 08:33:06.061 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:33:06.061 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:33:06.062 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:33:06.062 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:33:06.062 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:33:06.062 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 08:33:06.073 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 08:33:06.074 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:33:06.074 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 08:33:06.074 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:33:06.075 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:33:06.076 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:33:06.076 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:33:06.077 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:33:06.077 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:33:06.077 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:33:06.077 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 08:33:06.171 +07:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 08:33:06.179 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:33:06.180 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 8ms reading results.
2025-09-25 08:33:06.180 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:33:06.180 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:33:07.257 +07:00 [DBG] Reviewer 7: overallSkill=0.4948 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:1,Context:0
2025-09-25 08:33:07.259 +07:00 [DBG] Reviewer 9: overallSkill=0.4079 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 08:33:07.260 +07:00 [DBG] Reviewer 10: overallSkill=0.4820 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 08:33:07.262 +07:00 [DBG] Reviewer 11: overallSkill=0.5094 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 08:33:09.634 +07:00 [DBG] AI explanation generated (preview): Recommendation 1: rv3@.com (Id:11), Overall: 49.5%, SkillMatch: 50.9%  Rationale: Matched skills in "iot" and has 1 current active assignment.
Recommendation 2: rv2@.com (Id:10), Overall: 48.1%, Skill...
2025-09-25 08:33:09.636 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 08:33:09.636 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 08:33:09.636 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 08:33:09.637 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 08:33:09.637 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 08:33:09.639 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3618.3536ms
2025-09-25 08:33:09.639 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:33:09.640 +07:00 [DBG] Connection id "0HNFRQBDOO2B9" completed keep alive response.
2025-09-25 08:33:09.640 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 08:33:09.641 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:33:09.641 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 08:33:09.641 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3655.6585ms
2025-09-25 08:35:20.247 +07:00 [DBG] Connection id "0HNFRQBDOO2B9" disconnecting.
2025-09-25 08:35:20.248 +07:00 [DBG] Connection id "0HNFRQBDOO2B9" stopped.
2025-09-25 08:35:20.248 +07:00 [DBG] Connection id "0HNFRQBDOO2B9" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 08:39:52.621 +07:00 [DBG] Connection id "0HNFRQBDOO2BA" accepted.
2025-09-25 08:39:52.622 +07:00 [DBG] Connection id "0HNFRQBDOO2BA" started.
2025-09-25 08:39:52.622 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 08:39:52.622 +07:00 [DBG] POST requests are not supported
2025-09-25 08:39:52.622 +07:00 [DBG] POST requests are not supported
2025-09-25 08:39:52.623 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 08:39:52.623 +07:00 [INF] CORS policy execution successful.
2025-09-25 08:39:52.623 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 08:39:52.623 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 08:39:52.623 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:39:52.627 +07:00 [DBG] Successfully validated the token.
2025-09-25 08:39:52.627 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 08:39:52.628 +07:00 [DBG] Authorization was successful.
2025-09-25 08:39:52.629 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:39:52.629 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 08:39:52.629 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 08:39:52.629 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 08:39:52.629 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 08:39:52.629 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 08:39:52.629 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 08:39:52.630 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 08:39:52.644 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 08:39:52.645 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 08:39:52.645 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 08:39:52.646 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:39:52.646 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:39:52.646 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:39:52.646 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 08:39:52.646 +07:00 [DBG] Connection id "0HNFRQBDOO2BA", Request id "0HNFRQBDOO2BA:00000001": started reading request body.
2025-09-25 08:39:52.646 +07:00 [DBG] Connection id "0HNFRQBDOO2BA", Request id "0HNFRQBDOO2BA:00000001": done reading request body.
2025-09-25 08:39:52.647 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 08:39:52.647 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:39:52.647 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:39:52.647 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 08:39:52.647 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:39:52.648 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 08:39:52.648 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 08:39:52.648 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:39:52.648 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:39:52.648 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 08:39:52.648 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:39:52.649 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 08:39:52.649 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 08:39:52.653 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 08:39:52.653 +07:00 [DBG] Creating DbConnection.
2025-09-25 08:39:52.654 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 08:39:52.654 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:39:52.730 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:39:52.730 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:39:52.730 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:39:52.730 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:39:52.731 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 08:39:52.757 +07:00 [INF] Executed DbCommand (26ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 08:39:52.757 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:39:52.757 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 08:39:52.758 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:39:52.758 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:39:52.763 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:39:52.764 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:39:52.764 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:39:52.764 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:39:52.764 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:39:52.765 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 08:39:52.866 +07:00 [INF] Executed DbCommand (102ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 08:39:52.868 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:39:52.868 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 08:39:52.869 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:39:52.869 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:39:54.022 +07:00 [DBG] Reviewer 7: overallSkill=0.4948 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:1,Context:0
2025-09-25 08:39:54.023 +07:00 [DBG] Reviewer 9: overallSkill=0.4079 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 08:39:54.024 +07:00 [DBG] Reviewer 10: overallSkill=0.4820 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 08:39:54.029 +07:00 [DBG] Reviewer 11: overallSkill=0.5094 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 08:39:56.424 +07:00 [DBG] AI explanation generated (preview): Recommended Reviewers:

rv3@.com (Id:11): Overall 49.5%, SkillMatch 50.9%.  Recommendation: rv3@.com has relevant IoT expertise (matched token: iot) and only one active assignment.
rv2@.com (Id:10): O...
2025-09-25 08:39:56.425 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 08:39:56.425 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 08:39:56.425 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 08:39:56.425 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 08:39:56.427 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 08:39:56.428 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3798.2985ms
2025-09-25 08:39:56.428 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:39:56.428 +07:00 [DBG] Connection id "0HNFRQBDOO2BA" completed keep alive response.
2025-09-25 08:39:56.428 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 08:39:56.428 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:39:56.429 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 08:39:56.429 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3806.9332ms
2025-09-25 08:42:07.543 +07:00 [DBG] Connection id "0HNFRQBDOO2BA" disconnecting.
2025-09-25 08:42:07.543 +07:00 [DBG] Connection id "0HNFRQBDOO2BA" stopped.
2025-09-25 08:42:07.543 +07:00 [DBG] Connection id "0HNFRQBDOO2BA" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 08:44:40.010 +07:00 [DBG] Connection id "0HNFRQBDOO2BB" accepted.
2025-09-25 08:44:40.010 +07:00 [DBG] Connection id "0HNFRQBDOO2BB" started.
2025-09-25 08:44:40.011 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 08:44:40.016 +07:00 [DBG] POST requests are not supported
2025-09-25 08:44:40.017 +07:00 [DBG] POST requests are not supported
2025-09-25 08:44:40.017 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 08:44:40.017 +07:00 [INF] CORS policy execution successful.
2025-09-25 08:44:40.017 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 08:44:40.017 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 08:44:40.017 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:44:40.019 +07:00 [DBG] Successfully validated the token.
2025-09-25 08:44:40.019 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 08:44:40.019 +07:00 [DBG] Authorization was successful.
2025-09-25 08:44:40.020 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:44:40.020 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 08:44:40.020 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 08:44:40.021 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 08:44:40.021 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 08:44:40.021 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 08:44:40.021 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 08:44:40.021 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 08:44:40.022 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 08:44:40.024 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 08:44:40.025 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 08:44:40.025 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:44:40.025 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:44:40.025 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 08:44:40.025 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 08:44:40.026 +07:00 [DBG] Connection id "0HNFRQBDOO2BB", Request id "0HNFRQBDOO2BB:00000001": started reading request body.
2025-09-25 08:44:40.026 +07:00 [DBG] Connection id "0HNFRQBDOO2BB", Request id "0HNFRQBDOO2BB:00000001": done reading request body.
2025-09-25 08:44:40.026 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 08:44:40.026 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:44:40.026 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:44:40.026 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 08:44:40.027 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 08:44:40.027 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 08:44:40.027 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 08:44:40.027 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:44:40.027 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:44:40.027 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 08:44:40.027 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 08:44:40.027 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 08:44:40.027 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-09-24T23:01:12.4550000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 08:44:40.029 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 08:44:40.030 +07:00 [DBG] Creating DbConnection.
2025-09-25 08:44:40.030 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 08:44:40.030 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:44:40.030 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:44:40.030 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:44:40.031 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:44:40.031 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:44:40.031 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 08:44:40.042 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 08:44:40.043 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:44:40.043 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 08:44:40.043 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:44:40.044 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:44:40.045 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:44:40.046 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:44:40.046 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 08:44:40.046 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:44:40.047 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 08:44:40.048 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 08:44:40.125 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 08:44:40.126 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 08:44:40.126 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 08:44:40.127 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:44:40.127 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 08:44:42.796 +07:00 [DBG] Reviewer 7: overallSkill=0.4948 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:1,Content:1,Context:0
2025-09-25 08:44:42.797 +07:00 [DBG] Reviewer 9: overallSkill=0.4079 fieldScores=Title:0.1741,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 08:44:42.798 +07:00 [DBG] Reviewer 10: overallSkill=0.4820 fieldScores=Title:0.3482,Category:0,Description:0,Objectives:0,Content:0,Context:0
2025-09-25 08:44:42.800 +07:00 [DBG] Reviewer 11: overallSkill=0.5094 fieldScores=Title:0.3015,Category:0,Description:1.0000,Objectives:0,Content:0,Context:0
2025-09-25 08:44:44.959 +07:00 [DBG] AI explanation generated (preview): Recommendation 1: rv3@.com (Id:11), Overall:49.5%, SkillMatch:50.9%  Rationale: Matched 'iot' skills; currently has 1 active assignment.
Recommendation 2: rv2@.com (Id:10), Overall:48.1%, SkillMatch:4...
2025-09-25 08:44:44.960 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 08:44:44.960 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 08:44:44.960 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 08:44:44.960 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 08:44:44.960 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 08:44:44.960 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 4939.2518ms
2025-09-25 08:44:44.960 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 08:44:44.960 +07:00 [DBG] Connection id "0HNFRQBDOO2BB" completed keep alive response.
2025-09-25 08:44:44.960 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 08:44:44.961 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 08:44:44.961 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 08:44:44.961 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 4949.763ms
2025-09-25 08:45:36.739 +07:00 [INF] Application is shutting down...
2025-09-25 08:45:36.742 +07:00 [DBG] Hosting stopping
2025-09-25 08:45:36.747 +07:00 [DBG] Connection id "0HNFRQBDOO2BB" disconnecting.
2025-09-25 08:45:36.747 +07:00 [DBG] Connection id "0HNFRQBDOO2BB" stopped.
2025-09-25 08:45:36.747 +07:00 [DBG] Connection id "0HNFRQBDOO2BB" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 08:45:36.751 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 08:45:36.755 +07:00 [DBG] Hosting stopped
2025-09-25 09:49:26.775 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 09:49:26.833 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 09:49:26.976 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:26.990 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.000 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.002 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.002 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.003 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.147 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.148 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.161 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.161 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.161 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.163 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.166 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.166 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 09:49:27.200 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 09:49:27.200 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 09:49:27.200 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 09:49:27.200 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 09:49:27.200 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 09:49:27.200 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 09:49:27.201 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 09:49:27.202 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 09:49:27.307 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 09:49:27.307 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 09:49:27.307 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 09:49:27.307 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 09:49:27.307 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 09:49:27.307 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 09:49:27.307 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 09:49:27.307 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 09:49:27.307 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 09:49:27.308 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 09:49:27.308 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 09:49:27.413 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 09:49:27.453 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 09:49:27.549 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 09:49:27.574 +07:00 [DBG] Creating DbConnection.
2025-09-25 09:49:27.583 +07:00 [DBG] Created DbConnection. (7ms).
2025-09-25 09:49:27.586 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.732 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.734 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:49:27.738 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-25 09:49:27.742 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-25 09:49:27.747 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 09:49:27.789 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 09:49:27.814 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 09:49:27.829 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.833 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 41ms reading results.
2025-09-25 09:49:27.834 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.838 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-25 09:49:27.840 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.840 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.840 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:49:27.840 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.841 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.841 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 09:49:27.845 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 09:49:27.845 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 09:49:27.846 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.846 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 09:49:27.846 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.846 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:49:27.846 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.846 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.846 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:49:27.846 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.847 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.847 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 09:49:27.847 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 09:49:27.848 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 09:49:27.848 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.848 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 09:49:27.848 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.848 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:49:27.848 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.848 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.848 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:49:27.849 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.849 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.849 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 09:49:27.850 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 09:49:27.850 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 09:49:27.851 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.851 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 09:49:27.851 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.851 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:49:27.854 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 09:49:27.859 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 09:49:27.860 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.860 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.860 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:49:27.860 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.861 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.861 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 09:49:27.869 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 09:49:27.888 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 09:49:27.908 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.909 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 39ms reading results.
2025-09-25 09:49:27.909 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.909 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:49:27.910 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 09:49:27.912 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.912 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.913 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:49:27.913 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.913 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.913 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 09:49:27.914 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 09:49:27.914 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 09:49:27.914 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.914 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 09:49:27.914 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.914 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:49:27.915 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 09:49:27.915 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.915 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.915 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:49:27.915 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.915 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.915 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 09:49:27.916 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 09:49:27.916 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 09:49:27.916 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.916 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 09:49:27.916 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.916 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:49:27.916 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.916 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.916 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:49:27.916 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.917 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:27.917 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 09:49:27.917 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 09:49:27.917 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 09:49:27.917 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.917 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 09:49:27.918 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.918 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:49:27.918 +07:00 [INF] Data seeding completed successfully
2025-09-25 09:49:27.919 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 09:49:27.920 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:27.921 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 09:49:27.930 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 09:49:28.037 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 09:49:28.116 +07:00 [DBG] Hosting starting
2025-09-25 09:49:28.122 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 09:49:28.124 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 09:49:28.124 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 09:49:28.128 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 09:49:28.130 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 09:49:28.130 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 09:49:28.134 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 09:49:28.136 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 09:49:28.136 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 09:49:28.137 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 09:49:28.138 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 09:49:28.139 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 09:49:28.140 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 09:49:28.140 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 09:49:28.143 +07:00 [DBG] Middleware loaded
2025-09-25 09:49:28.144 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 09:49:28.145 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 09:49:28.167 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 09:49:28.175 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 09:49:28.175 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 09:49:28.175 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 09:49:28.175 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 09:49:28.175 +07:00 [INF] Hosting environment: Development
2025-09-25 09:49:28.175 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 09:49:28.177 +07:00 [DBG] Hosting started
2025-09-25 09:49:28.243 +07:00 [DBG] Connection id "0HNFRROIJMHE0" accepted.
2025-09-25 09:49:28.244 +07:00 [DBG] Connection id "0HNFRROIJMHE0" started.
2025-09-25 09:49:28.271 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 09:49:28.278 +07:00 [DBG] Connection id "0HNFRROIJMHE1" accepted.
2025-09-25 09:49:28.278 +07:00 [DBG] Connection id "0HNFRROIJMHE1" started.
2025-09-25 09:49:28.280 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 09:49:28.355 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 09:49:28.362 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 09:49:28.362 +07:00 [DBG] Connection id "0HNFRROIJMHE0" completed keep alive response.
2025-09-25 09:49:28.365 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 95.0547ms
2025-09-25 09:49:28.368 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 09:49:28.370 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 09:49:28.370 +07:00 [DBG] Connection id "0HNFRROIJMHE0" completed keep alive response.
2025-09-25 09:49:28.370 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.456ms
2025-09-25 09:49:28.425 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 09:49:28.606 +07:00 [DBG] Connection id "0HNFRROIJMHE0" completed keep alive response.
2025-09-25 09:49:28.606 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 181.3608ms
2025-09-25 09:49:37.478 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/Account/my-user-roles - null null
2025-09-25 09:49:37.483 +07:00 [DBG] The request path /api/Account/my-user-roles does not match a supported file type
2025-09-25 09:49:37.485 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 09:49:37.486 +07:00 [DBG] The request path /api/Account/my-user-roles does not match a supported file type
2025-09-25 09:49:37.571 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Account/my-user-roles'
2025-09-25 09:49:37.572 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)' with route pattern 'api/Account/my-user-roles' is valid for the request path '/api/Account/my-user-roles'
2025-09-25 09:49:37.573 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)'
2025-09-25 09:49:37.683 +07:00 [DBG] Successfully validated the token.
2025-09-25 09:49:37.684 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 09:49:37.690 +07:00 [DBG] Authorization was successful.
2025-09-25 09:49:37.704 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)'
2025-09-25 09:49:37.722 +07:00 [INF] Route matched with {action = "GetMyUserRoles", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyUserRoles() on controller CapBot.api.Controllers.AccountController (CapBot.api).
2025-09-25 09:49:37.725 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 09:49:37.726 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 09:49:37.728 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 09:49:37.728 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 09:49:37.728 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 09:49:37.731 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.AccountController (CapBot.api)
2025-09-25 09:49:37.741 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.AccountController (CapBot.api)
2025-09-25 09:49:37.836 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 09:49:37.857 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2025-09-25 09:49:37.919 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 09:49:37.920 +07:00 [DBG] Creating DbConnection.
2025-09-25 09:49:37.922 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-25 09:49:37.922 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:37.923 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:37.923 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:49:37.923 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:37.923 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:37.925 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[Id] = @__p_0
2025-09-25 09:49:37.933 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[Id] = @__p_0
2025-09-25 09:49:37.934 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 09:49:37.936 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:49:37.937 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-09-25 09:49:37.939 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:37.939 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:49:37.960 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .Join(
        inner: DbSet<Role>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-09-25 09:49:38.017 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Name
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 09:49:38.021 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:38.022 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:38.023 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:49:38.023 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:38.023 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:38.023 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-09-25 09:49:38.035 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-09-25 09:49:38.036 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:49:38.037 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 09:49:38.037 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:38.038 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:49:38.044 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .Where(r => __roleNames_0.Contains(r.Name))'
2025-09-25 09:49:38.125 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Role>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
        SELECT r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM roles AS r
        WHERE r.Name IN (
            SELECT r0.value
            FROM OPENJSON(@__roleNames_0) WITH (value nvarchar(max) '') AS r0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 09:49:38.134 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:38.134 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:38.134 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:49:38.135 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:49:38.141 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (6ms).
2025-09-25 09:49:38.142 +07:00 [DBG] Executing DbCommand [Parameters=[@__roleNames_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleNames_0) WITH ([value] nvarchar(max) '$') AS [r0]
)
2025-09-25 09:49:38.150 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__roleNames_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleNames_0) WITH ([value] nvarchar(max) '$') AS [r0]
)
2025-09-25 09:49:38.151 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 09:49:38.153 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:49:38.153 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-25 09:49:38.153 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:38.154 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:49:38.165 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 09:49:38.169 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 09:49:38.170 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 09:49:38.173 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 09:49:38.174 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 09:49:38.233 +07:00 [INF] Executed action CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api) in 500.0396ms
2025-09-25 09:49:38.234 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)'
2025-09-25 09:49:38.238 +07:00 [DBG] Connection id "0HNFRROIJMHE0" completed keep alive response.
2025-09-25 09:49:38.240 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 09:49:38.240 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:49:38.242 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-25 09:49:38.247 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/Account/my-user-roles - 200 null application/json; charset=utf-8 768.7016ms
2025-09-25 09:51:21.317 +07:00 [DBG] Connection id "0HNFRROIJMHE1" received FIN.
2025-09-25 09:51:21.318 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/auth/login - application/json 74
2025-09-25 09:51:21.318 +07:00 [DBG] POST requests are not supported
2025-09-25 09:51:21.318 +07:00 [DBG] POST requests are not supported
2025-09-25 09:51:21.319 +07:00 [DBG] Connection id "0HNFRROIJMHE1" disconnecting.
2025-09-25 09:51:21.319 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 09:51:21.319 +07:00 [INF] CORS policy execution successful.
2025-09-25 09:51:21.320 +07:00 [DBG] Connection id "0HNFRROIJMHE1" stopped.
2025-09-25 09:51:21.321 +07:00 [DBG] Connection id "0HNFRROIJMHE1" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 09:51:21.324 +07:00 [DBG] 1 candidate(s) found for the request path '/api/auth/login'
2025-09-25 09:51:21.324 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)' with route pattern 'api/auth/login' is valid for the request path '/api/auth/login'
2025-09-25 09:51:21.325 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-09-25 09:51:21.329 +07:00 [DBG] Successfully validated the token.
2025-09-25 09:51:21.329 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 09:51:21.332 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-09-25 09:51:21.356 +07:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(App.Entities.DTOs.Auth.LoginDTO) on controller CapBot.api.Controllers.AuthController (CapBot.api).
2025-09-25 09:51:21.359 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 09:51:21.361 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 09:51:21.361 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 09:51:21.362 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 09:51:21.362 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 09:51:21.362 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-09-25 09:51:21.368 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.AuthController (CapBot.api)
2025-09-25 09:51:21.376 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-09-25 09:51:21.381 +07:00 [DBG] Attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' using the name '' in request data ...
2025-09-25 09:51:21.383 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 09:51:21.384 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 09:51:21.386 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 09:51:21.386 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 09:51:21.401 +07:00 [DBG] Connection id "0HNFRROIJMHE0", Request id "0HNFRROIJMHE0:00000005": started reading request body.
2025-09-25 09:51:21.401 +07:00 [DBG] Connection id "0HNFRROIJMHE0", Request id "0HNFRROIJMHE0:00000005": done reading request body.
2025-09-25 09:51:21.415 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.Auth.LoginDTO'
2025-09-25 09:51:21.416 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-09-25 09:51:21.416 +07:00 [DBG] Done attempting to bind parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-09-25 09:51:21.416 +07:00 [DBG] Attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO' ...
2025-09-25 09:51:21.431 +07:00 [DBG] Done attempting to validate the bound parameter 'loginDTO' of type 'App.Entities.DTOs.Auth.LoginDTO'.
2025-09-25 09:51:21.458 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 09:51:21.460 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(u => u.NormalizedUserName == __normalizedUserName_0)'
2025-09-25 09:51:21.471 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedUserName == @__normalizedUserName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 09:51:21.472 +07:00 [DBG] Creating DbConnection.
2025-09-25 09:51:21.473 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 09:51:21.473 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:51:21.473 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:51:21.473 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:51:21.474 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:51:21.474 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:51:21.475 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedUserName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-09-25 09:51:21.482 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedUserName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedUserName] = @__normalizedUserName_0
2025-09-25 09:51:21.484 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 09:51:21.485 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:51:21.485 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 09:51:21.485 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:51:21.485 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:51:21.492 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:51:21.492 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:51:21.492 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 09:51:21.492 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:51:21.493 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 09:51:21.493 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-09-25 09:51:21.499 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-09-25 09:51:21.500 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 09:51:21.500 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 09:51:21.500 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:51:21.500 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 09:51:21.620 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 09:51:21.620 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 09:51:21.621 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 09:51:21.621 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 09:51:21.621 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 09:51:21.629 +07:00 [INF] Executed action CapBot.api.Controllers.AuthController.Login (CapBot.api) in 267.0909ms
2025-09-25 09:51:21.629 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.AuthController.Login (CapBot.api)'
2025-09-25 09:51:21.630 +07:00 [DBG] Connection id "0HNFRROIJMHE0" completed keep alive response.
2025-09-25 09:51:21.630 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 09:51:21.631 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 09:51:21.631 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 09:51:21.631 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/auth/login - 200 null application/json; charset=utf-8 313.5888ms
2025-09-25 09:53:32.183 +07:00 [DBG] Connection id "0HNFRROIJMHE0" disconnecting.
2025-09-25 09:53:32.183 +07:00 [DBG] Connection id "0HNFRROIJMHE0" stopped.
2025-09-25 09:53:32.184 +07:00 [DBG] Connection id "0HNFRROIJMHE0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 09:53:35.035 +07:00 [INF] Application is shutting down...
2025-09-25 09:53:35.039 +07:00 [DBG] Hosting stopping
2025-09-25 09:53:35.051 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 09:53:35.090 +07:00 [DBG] Hosting stopped
2025-09-25 10:16:45.352 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 10:16:45.409 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 10:16:45.540 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.552 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.564 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.565 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.565 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.566 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.696 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.697 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.711 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.711 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.712 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.713 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.716 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.717 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:16:45.750 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 10:16:45.750 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 10:16:45.750 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 10:16:45.750 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 10:16:45.750 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 10:16:45.751 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 10:16:45.843 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:16:45.843 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:16:45.843 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:16:45.844 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:16:45.844 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:16:45.844 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:16:45.844 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:16:45.844 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:16:45.844 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:16:45.844 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:16:45.845 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:16:45.937 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 10:16:45.972 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 10:16:46.060 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 10:16:46.079 +07:00 [DBG] Creating DbConnection.
2025-09-25 10:16:46.090 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-25 10:16:46.093 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.244 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.245 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:16:46.249 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-25 10:16:46.253 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-25 10:16:46.258 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:16:46.299 +07:00 [INF] Executed DbCommand (41ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:16:46.323 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:16:46.336 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.341 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 38ms reading results.
2025-09-25 10:16:46.342 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.345 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-25 10:16:46.347 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.348 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.348 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:16:46.348 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.348 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.348 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:16:46.352 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:16:46.353 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:16:46.354 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.354 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 10:16:46.354 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.354 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:16:46.355 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.355 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.355 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:16:46.355 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.355 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.355 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:16:46.356 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:16:46.356 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:16:46.356 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.356 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:16:46.356 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.356 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:16:46.356 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.356 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.356 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:16:46.357 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.357 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.357 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:16:46.357 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:16:46.357 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:16:46.358 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.358 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:16:46.358 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.358 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:16:46.361 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 10:16:46.365 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 10:16:46.367 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.368 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.368 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:16:46.368 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.368 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.369 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:16:46.376 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:16:46.392 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:16:46.413 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.413 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 36ms reading results.
2025-09-25 10:16:46.413 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.413 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:16:46.415 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 10:16:46.416 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.417 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.417 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:16:46.417 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.417 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.417 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:16:46.418 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:16:46.418 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:16:46.418 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.418 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:16:46.418 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.418 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:16:46.418 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 10:16:46.419 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.419 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.419 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:16:46.419 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.419 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.419 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:16:46.420 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:16:46.420 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:16:46.420 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.420 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:16:46.420 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.420 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:16:46.420 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.420 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.420 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:16:46.420 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.420 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:16:46.420 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:16:46.421 +07:00 [INF] Executed DbCommand (0ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:16:46.421 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:16:46.421 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.421 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:16:46.421 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.422 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:16:46.422 +07:00 [INF] Data seeding completed successfully
2025-09-25 10:16:46.423 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 10:16:46.424 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:16:46.425 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 10:16:46.434 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 10:16:46.528 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 10:16:46.598 +07:00 [DBG] Hosting starting
2025-09-25 10:16:46.603 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 10:16:46.606 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 10:16:46.638 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 10:16:46.641 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 10:16:46.643 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 10:16:46.643 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 10:16:46.647 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 10:16:46.649 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 10:16:46.649 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 10:16:46.650 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 10:16:46.652 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 10:16:46.653 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 10:16:46.653 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 10:16:46.654 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 10:16:46.657 +07:00 [DBG] Middleware loaded
2025-09-25 10:16:46.657 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 10:16:46.658 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 10:16:46.680 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 10:16:46.686 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 10:16:46.687 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 10:16:46.687 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 10:16:46.687 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 10:16:46.687 +07:00 [INF] Hosting environment: Development
2025-09-25 10:16:46.687 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 10:16:46.688 +07:00 [DBG] Hosting started
2025-09-25 10:16:46.808 +07:00 [DBG] Connection id "0HNFRS7QU8PLG" accepted.
2025-09-25 10:16:46.809 +07:00 [DBG] Connection id "0HNFRS7QU8PLG" started.
2025-09-25 10:16:46.836 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 10:16:46.843 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 10:16:46.887 +07:00 [DBG] Connection id "0HNFRS7QU8PLH" accepted.
2025-09-25 10:16:46.887 +07:00 [DBG] Connection id "0HNFRS7QU8PLH" started.
2025-09-25 10:16:46.987 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 10:16:46.994 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 10:16:46.994 +07:00 [DBG] Connection id "0HNFRS7QU8PLG" completed keep alive response.
2025-09-25 10:16:46.996 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 160.197ms
2025-09-25 10:16:47.000 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 10:16:47.002 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 10:16:47.002 +07:00 [DBG] Connection id "0HNFRS7QU8PLG" completed keep alive response.
2025-09-25 10:16:47.002 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.5043ms
2025-09-25 10:16:47.052 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 10:16:47.103 +07:00 [DBG] Connection id "0HNFRS7QU8PLH" received FIN.
2025-09-25 10:16:47.104 +07:00 [DBG] Connection id "0HNFRS7QU8PLH" disconnecting.
2025-09-25 10:16:47.105 +07:00 [DBG] Connection id "0HNFRS7QU8PLH" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 10:16:47.117 +07:00 [DBG] Connection id "0HNFRS7QU8PLH" stopped.
2025-09-25 10:16:47.232 +07:00 [DBG] Connection id "0HNFRS7QU8PLG" completed keep alive response.
2025-09-25 10:16:47.233 +07:00 [DBG] Connection id "0HNFRS7QU8PLG" received FIN.
2025-09-25 10:16:47.233 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 181.0609ms
2025-09-25 10:16:47.233 +07:00 [DBG] Connection id "0HNFRS7QU8PLG" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 10:16:47.233 +07:00 [DBG] Connection id "0HNFRS7QU8PLG" disconnecting.
2025-09-25 10:16:47.242 +07:00 [DBG] Connection id "0HNFRS7QU8PLG" stopped.
2025-09-25 10:17:13.080 +07:00 [INF] Application is shutting down...
2025-09-25 10:17:13.081 +07:00 [DBG] Hosting stopping
2025-09-25 10:17:13.091 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 10:17:13.129 +07:00 [DBG] Hosting stopped
2025-09-25 10:17:22.157 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 10:17:22.217 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 10:17:22.369 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.388 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.401 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.404 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.404 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.406 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.541 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.541 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.553 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.553 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.553 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.554 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.559 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.559 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 10:17:22.594 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 10:17:22.594 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 10:17:22.594 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 10:17:22.594 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 10:17:22.594 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 10:17:22.594 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 10:17:22.595 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 10:17:22.595 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 10:17:22.595 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 10:17:22.595 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 10:17:22.595 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 10:17:22.595 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 10:17:22.595 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 10:17:22.595 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 10:17:22.596 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 10:17:22.596 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 10:17:22.596 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 10:17:22.596 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 10:17:22.596 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 10:17:22.694 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:17:22.695 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:17:22.695 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:17:22.695 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:17:22.695 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:17:22.695 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:17:22.696 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:17:22.696 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:17:22.696 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:17:22.696 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:17:22.696 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 10:17:22.798 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 10:17:22.833 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 10:17:22.924 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 10:17:22.946 +07:00 [DBG] Creating DbConnection.
2025-09-25 10:17:22.956 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-25 10:17:22.959 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.098 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.100 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:17:23.107 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (2ms).
2025-09-25 10:17:23.115 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (15ms).
2025-09-25 10:17:23.122 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:17:23.158 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:17:23.182 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:17:23.195 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.198 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-25 10:17:23.200 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.203 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (2ms).
2025-09-25 10:17:23.205 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.205 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.206 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:17:23.206 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.206 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.206 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:17:23.209 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:17:23.209 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:17:23.209 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.209 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:17:23.209 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.209 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:17:23.209 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.210 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.210 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:17:23.210 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.210 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.210 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:17:23.210 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:17:23.211 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:17:23.211 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.211 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:17:23.211 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.211 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:17:23.211 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.211 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.211 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:17:23.211 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.211 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.211 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:17:23.212 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 10:17:23.212 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:17:23.212 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.212 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:17:23.212 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.213 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:17:23.216 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 10:17:23.220 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 10:17:23.221 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.221 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.221 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:17:23.222 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.222 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.222 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:17:23.229 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:17:23.244 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:17:23.264 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.265 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 35ms reading results.
2025-09-25 10:17:23.265 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.265 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:17:23.266 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 10:17:23.268 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.268 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.269 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:17:23.269 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.269 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.269 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:17:23.270 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:17:23.270 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:17:23.270 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.270 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:17:23.270 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.271 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:17:23.271 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 10:17:23.271 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.271 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.271 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:17:23.271 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.271 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.271 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:17:23.272 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:17:23.272 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:17:23.272 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.272 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:17:23.272 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.273 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:17:23.273 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.273 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.273 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:17:23.273 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.273 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:23.273 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:17:23.274 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 10:17:23.274 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 10:17:23.274 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.274 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:17:23.274 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.274 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:17:23.274 +07:00 [INF] Data seeding completed successfully
2025-09-25 10:17:23.275 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 10:17:23.277 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:23.278 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 10:17:23.290 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 10:17:23.392 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 10:17:23.458 +07:00 [DBG] Hosting starting
2025-09-25 10:17:23.464 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 10:17:23.465 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 10:17:23.466 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 10:17:23.468 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 10:17:23.470 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 10:17:23.470 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 10:17:23.474 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 10:17:23.475 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 10:17:23.475 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 10:17:23.477 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 10:17:23.477 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 10:17:23.478 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 10:17:23.479 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 10:17:23.480 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 10:17:23.483 +07:00 [DBG] Middleware loaded
2025-09-25 10:17:23.484 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 10:17:23.485 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 10:17:23.506 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 10:17:23.515 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 10:17:23.515 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 10:17:23.515 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 10:17:23.515 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 10:17:23.515 +07:00 [INF] Hosting environment: Development
2025-09-25 10:17:23.515 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 10:17:23.516 +07:00 [DBG] Hosting started
2025-09-25 10:17:23.627 +07:00 [DBG] Connection id "0HNFRS85TD5HT" accepted.
2025-09-25 10:17:23.628 +07:00 [DBG] Connection id "0HNFRS85TD5HT" started.
2025-09-25 10:17:23.653 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 10:17:23.663 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 10:17:23.704 +07:00 [DBG] Connection id "0HNFRS85TD5HU" accepted.
2025-09-25 10:17:23.704 +07:00 [DBG] Connection id "0HNFRS85TD5HU" started.
2025-09-25 10:17:23.804 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 10:17:23.810 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 10:17:23.811 +07:00 [DBG] Connection id "0HNFRS85TD5HT" completed keep alive response.
2025-09-25 10:17:23.812 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 160.7099ms
2025-09-25 10:17:23.821 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 10:17:23.822 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 10:17:23.822 +07:00 [DBG] Connection id "0HNFRS85TD5HT" completed keep alive response.
2025-09-25 10:17:23.823 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.0698ms
2025-09-25 10:17:23.874 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 10:17:24.049 +07:00 [DBG] Connection id "0HNFRS85TD5HT" completed keep alive response.
2025-09-25 10:17:24.049 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 175.8371ms
2025-09-25 10:17:58.314 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria?PageNumber=1&PageSize=11 - null null
2025-09-25 10:17:58.322 +07:00 [DBG] The request path /api/evaluation-criteria does not match a supported file type
2025-09-25 10:17:58.326 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 10:17:58.326 +07:00 [DBG] The request path /api/evaluation-criteria does not match a supported file type
2025-09-25 10:17:58.406 +07:00 [DBG] 1 candidate(s) found for the request path '/api/evaluation-criteria'
2025-09-25 10:17:58.407 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAll (CapBot.api)' with route pattern 'api/evaluation-criteria' is valid for the request path '/api/evaluation-criteria'
2025-09-25 10:17:58.408 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAll (CapBot.api)'
2025-09-25 10:17:58.548 +07:00 [DBG] Successfully validated the token.
2025-09-25 10:17:58.550 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 10:17:58.560 +07:00 [DBG] Authorization was successful.
2025-09-25 10:17:58.586 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAll (CapBot.api)'
2025-09-25 10:17:58.630 +07:00 [INF] Route matched with {action = "GetAll", controller = "EvaluationCriteria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(App.Commons.Paging.PagingModel) on controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api).
2025-09-25 10:17:58.633 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 10:17:58.633 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-25 10:17:58.635 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 10:17:58.635 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 10:17:58.635 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-25 10:17:58.639 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:17:58.840 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:17:58.849 +07:00 [DBG] Attempting to bind parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel' ...
2025-09-25 10:17:58.854 +07:00 [DBG] Attempting to bind parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel' using the name '' in request data ...
2025-09-25 10:17:58.864 +07:00 [DBG] Attempting to bind property 'App.Commons.Paging.PagingModel.PageNumber' of type 'System.Int32' using the name 'PageNumber' in request data ...
2025-09-25 10:17:58.865 +07:00 [DBG] Done attempting to bind property 'App.Commons.Paging.PagingModel.PageNumber' of type 'System.Int32'.
2025-09-25 10:17:58.868 +07:00 [DBG] Attempting to bind property 'App.Commons.Paging.PagingModel.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-09-25 10:17:58.868 +07:00 [DBG] Done attempting to bind property 'App.Commons.Paging.PagingModel.PageSize' of type 'System.Int32'.
2025-09-25 10:17:58.869 +07:00 [DBG] Attempting to bind property 'App.Commons.Paging.PagingModel.Keyword' of type 'System.String' using the name 'Keyword' in request data ...
2025-09-25 10:17:58.870 +07:00 [DBG] Could not find a value in the request with name 'Keyword' for binding property 'App.Commons.Paging.PagingModel.Keyword' of type 'System.String'.
2025-09-25 10:17:58.870 +07:00 [DBG] Done attempting to bind property 'App.Commons.Paging.PagingModel.Keyword' of type 'System.String'.
2025-09-25 10:17:58.871 +07:00 [DBG] Attempting to bind property 'App.Commons.Paging.PagingModel.TotalRecord' of type 'System.Int32' using the name 'TotalRecord' in request data ...
2025-09-25 10:17:58.871 +07:00 [DBG] Could not find a value in the request with name 'TotalRecord' for binding property 'App.Commons.Paging.PagingModel.TotalRecord' of type 'System.Int32'.
2025-09-25 10:17:58.871 +07:00 [DBG] Done attempting to bind property 'App.Commons.Paging.PagingModel.TotalRecord' of type 'System.Int32'.
2025-09-25 10:17:58.872 +07:00 [DBG] Done attempting to bind parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel'.
2025-09-25 10:17:58.872 +07:00 [DBG] Done attempting to bind parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel'.
2025-09-25 10:17:58.874 +07:00 [DBG] Attempting to validate the bound parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel' ...
2025-09-25 10:17:58.883 +07:00 [DBG] Done attempting to validate the bound parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel'.
2025-09-25 10:17:58.950 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 10:17:58.960 +07:00 [DBG] Compiling query expression: 
'DbSet<EvaluationCriteria>()
    .AsNoTracking()
    .Include(x => x.Semester)
    .Where(x => x.IsActive)
    .OrderBy(x => x.CreatedAt)
    .Count()'
2025-09-25 10:17:59.021 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleAsync<int>(
    asyncEnumerable: new SingleQueryingEnumerable<int>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> 0
            SELECT COUNT(*)
            FROM evaluation_criteria AS e
            WHERE e.IsActive), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, int>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 10:17:59.032 +07:00 [DBG] Creating DbConnection.
2025-09-25 10:17:59.033 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 10:17:59.033 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:59.034 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:59.034 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:17:59.034 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:59.034 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:59.035 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit)
2025-09-25 10:17:59.047 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit)
2025-09-25 10:17:59.050 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:17:59.051 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-09-25 10:17:59.051 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:59.052 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:17:59.059 +07:00 [DBG] Compiling query expression: 
'DbSet<EvaluationCriteria>()
    .AsNoTracking()
    .Include(x => x.Semester)
    .Where(x => x.IsActive)
    .OrderBy(x => x.CreatedAt)
    .Skip(__p_0)
    .Take(__p_1)'
2025-09-25 10:17:59.077 +07:00 [DBG] Including navigation: 'EvaluationCriteria.Semester'.
2025-09-25 10:17:59.156 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<EvaluationCriteria>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: EvaluationCriteria.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: EvaluationCriteria.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: EvaluationCriteria.CreatedBy (string), 2], [Property: EvaluationCriteria.DeletedAt (DateTime?), 3], [Property: EvaluationCriteria.Description (string), 4], [Property: EvaluationCriteria.IsActive (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 5], [Property: EvaluationCriteria.LastModifiedAt (DateTime?), 6], [Property: EvaluationCriteria.LastModifiedBy (string), 7], [Property: EvaluationCriteria.MaxScore (int) Required ValueGenerated.OnAdd, 8], [Property: EvaluationCriteria.Name (string) Required MaxLength(100), 9], [Property: EvaluationCriteria.SemesterId (int?) Required FK Index, 10], [Property: EvaluationCriteria.Weight (decimal) Required ValueGenerated.OnAdd, 11] }
            1 -> Dictionary<IProperty, int> { [Property: Semester.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Semester.CreatedAt (DateTime) Required, 13], [Property: Semester.CreatedBy (string), 14], [Property: Semester.DeletedAt (DateTime?), 15], [Property: Semester.Description (string), 16], [Property: Semester.EndDate (DateTime) Required, 17], [Property: Semester.IsActive (bool) Required, 18], [Property: Semester.LastModifiedAt (DateTime?), 19], [Property: Semester.LastModifiedBy (string), 20], [Property: Semester.Name (string) Required Index MaxLength(50), 21], [Property: Semester.StartDate (DateTime) Required, 22] }
        SELECT t.Id, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.IsActive, t.LastModifiedAt, t.LastModifiedBy, t.MaxScore, t.Name, t.SemesterId, t.Weight, s.Id, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.Description, s.EndDate, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.Name, s.StartDate
        FROM 
        (
            SELECT e.Id, e.CreatedAt, e.CreatedBy, e.DeletedAt, e.Description, e.IsActive, e.LastModifiedAt, e.LastModifiedBy, e.MaxScore, e.Name, e.SemesterId, e.Weight
            FROM evaluation_criteria AS e
            WHERE e.IsActive
            ORDER BY e.CreatedAt ASC
            OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
        ) AS t
        INNER JOIN semesters AS s ON t.SemesterId == s.Id
        ORDER BY t.CreatedAt ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, EvaluationCriteria>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 10:17:59.165 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:59.169 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:59.170 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:17:59.170 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:17:59.172 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-25 10:17:59.175 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxScore], [t].[Name], [t].[SemesterId], [t].[Weight], [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM (
    SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
    FROM [evaluation_criteria] AS [e]
    WHERE [e].[IsActive] = CAST(1 AS bit)
    ORDER BY [e].[CreatedAt]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [semesters] AS [s] ON [t].[SemesterId] = [s].[Id]
ORDER BY [t].[CreatedAt]
2025-09-25 10:17:59.216 +07:00 [INF] Executed DbCommand (43ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxScore], [t].[Name], [t].[SemesterId], [t].[Weight], [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM (
    SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
    FROM [evaluation_criteria] AS [e]
    WHERE [e].[IsActive] = CAST(1 AS bit)
    ORDER BY [e].[CreatedAt]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [semesters] AS [s] ON [t].[SemesterId] = [s].[Id]
ORDER BY [t].[CreatedAt]
2025-09-25 10:17:59.238 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:17:59.238 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 21ms reading results.
2025-09-25 10:17:59.239 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:59.239 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:17:59.267 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 10:17:59.270 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 10:17:59.271 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-25 10:17:59.271 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-25 10:17:59.277 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 10:17:59.279 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 10:17:59.351 +07:00 [INF] Executed action CapBot.api.Controllers.EvaluationCriteriaController.GetAll (CapBot.api) in 712.3286ms
2025-09-25 10:17:59.352 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAll (CapBot.api)'
2025-09-25 10:17:59.355 +07:00 [DBG] Connection id "0HNFRS85TD5HT" completed keep alive response.
2025-09-25 10:17:59.355 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 10:17:59.355 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:17:59.356 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 10:17:59.357 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria?PageNumber=1&PageSize=11 - 200 null application/json; charset=utf-8 1042.5178ms
2025-09-25 10:18:42.560 +07:00 [DBG] Connection id "0HNFRS85TD5HU" received FIN.
2025-09-25 10:18:42.560 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/by-semester/1 - null null
2025-09-25 10:18:42.564 +07:00 [DBG] The request path /api/evaluation-criteria/by-semester/1 does not match a supported file type
2025-09-25 10:18:42.564 +07:00 [DBG] The request path /api/evaluation-criteria/by-semester/1 does not match a supported file type
2025-09-25 10:18:42.566 +07:00 [DBG] Connection id "0HNFRS85TD5HU" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 10:18:42.568 +07:00 [DBG] Connection id "0HNFRS85TD5HU" disconnecting.
2025-09-25 10:18:42.570 +07:00 [DBG] Connection id "0HNFRS85TD5HU" stopped.
2025-09-25 10:18:42.570 +07:00 [DBG] 1 candidate(s) found for the request path '/api/evaluation-criteria/by-semester/1'
2025-09-25 10:18:42.571 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetBySemester (CapBot.api)' with route pattern 'api/evaluation-criteria/by-semester/{semesterId?}' is valid for the request path '/api/evaluation-criteria/by-semester/1'
2025-09-25 10:18:42.572 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetBySemester (CapBot.api)'
2025-09-25 10:18:42.577 +07:00 [DBG] Successfully validated the token.
2025-09-25 10:18:42.577 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 10:18:42.581 +07:00 [DBG] Authorization was successful.
2025-09-25 10:18:42.583 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetBySemester (CapBot.api)'
2025-09-25 10:18:42.603 +07:00 [INF] Route matched with {action = "GetBySemester", controller = "EvaluationCriteria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBySemester(System.Nullable`1[System.Int32]) on controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api).
2025-09-25 10:18:42.603 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 10:18:42.604 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-25 10:18:42.604 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 10:18:42.605 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 10:18:42.606 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-25 10:18:42.606 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:18:42.610 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:18:42.611 +07:00 [DBG] Attempting to bind parameter 'semesterId' of type 'System.Nullable`1[System.Int32]' ...
2025-09-25 10:18:42.612 +07:00 [DBG] Attempting to bind parameter 'semesterId' of type 'System.Nullable`1[System.Int32]' using the name 'semesterId' in request data ...
2025-09-25 10:18:42.613 +07:00 [DBG] Done attempting to bind parameter 'semesterId' of type 'System.Nullable`1[System.Int32]'.
2025-09-25 10:18:42.613 +07:00 [DBG] Done attempting to bind parameter 'semesterId' of type 'System.Nullable`1[System.Int32]'.
2025-09-25 10:18:42.614 +07:00 [DBG] Attempting to validate the bound parameter 'semesterId' of type 'System.Nullable`1[System.Int32]' ...
2025-09-25 10:18:42.620 +07:00 [DBG] Done attempting to validate the bound parameter 'semesterId' of type 'System.Nullable`1[System.Int32]'.
2025-09-25 10:18:42.652 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 10:18:42.671 +07:00 [DBG] Compiling query expression: 
'DbSet<EvaluationCriteria>()
    .AsNoTracking()
    .Where(x => x.IsActive && x.SemesterId == __semesterId_0 || False)
    .OrderBy(x => x.Name)'
2025-09-25 10:18:42.691 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<EvaluationCriteria>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: EvaluationCriteria.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: EvaluationCriteria.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: EvaluationCriteria.CreatedBy (string), 2], [Property: EvaluationCriteria.DeletedAt (DateTime?), 3], [Property: EvaluationCriteria.Description (string), 4], [Property: EvaluationCriteria.IsActive (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 5], [Property: EvaluationCriteria.LastModifiedAt (DateTime?), 6], [Property: EvaluationCriteria.LastModifiedBy (string), 7], [Property: EvaluationCriteria.MaxScore (int) Required ValueGenerated.OnAdd, 8], [Property: EvaluationCriteria.Name (string) Required MaxLength(100), 9], [Property: EvaluationCriteria.SemesterId (int?) Required FK Index, 10], [Property: EvaluationCriteria.Weight (decimal) Required ValueGenerated.OnAdd, 11] }
        SELECT e.Id, e.CreatedAt, e.CreatedBy, e.DeletedAt, e.Description, e.IsActive, e.LastModifiedAt, e.LastModifiedBy, e.MaxScore, e.Name, e.SemesterId, e.Weight
        FROM evaluation_criteria AS e
        WHERE e.IsActive && ((e.SemesterId == @__semesterId_0) || CAST(0 AS bit))
        ORDER BY e.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, EvaluationCriteria>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 10:18:42.698 +07:00 [DBG] Creating DbConnection.
2025-09-25 10:18:42.699 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 10:18:42.701 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:18:42.701 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:18:42.701 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:18:42.702 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:18:42.702 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:18:42.702 +07:00 [DBG] Executing DbCommand [Parameters=[@__semesterId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit) AND [e].[SemesterId] = @__semesterId_0
ORDER BY [e].[Name]
2025-09-25 10:18:42.710 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__semesterId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit) AND [e].[SemesterId] = @__semesterId_0
ORDER BY [e].[Name]
2025-09-25 10:18:42.711 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:18:42.712 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:18:42.713 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:18:42.714 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:18:42.716 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 10:18:42.716 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 10:18:42.716 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-25 10:18:42.716 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-25 10:18:42.717 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 10:18:42.717 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 10:18:42.724 +07:00 [INF] Executed action CapBot.api.Controllers.EvaluationCriteriaController.GetBySemester (CapBot.api) in 118.0716ms
2025-09-25 10:18:42.725 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetBySemester (CapBot.api)'
2025-09-25 10:18:42.727 +07:00 [DBG] Connection id "0HNFRS85TD5HT" completed keep alive response.
2025-09-25 10:18:42.727 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 10:18:42.728 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:18:42.728 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 10:18:42.728 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/by-semester/1 - 200 null application/json; charset=utf-8 168.085ms
2025-09-25 10:18:54.491 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/active - null null
2025-09-25 10:18:54.496 +07:00 [DBG] The request path /api/evaluation-criteria/active does not match a supported file type
2025-09-25 10:18:54.497 +07:00 [DBG] The request path /api/evaluation-criteria/active does not match a supported file type
2025-09-25 10:18:54.498 +07:00 [DBG] 2 candidate(s) found for the request path '/api/evaluation-criteria/active'
2025-09-25 10:18:54.498 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAllActive (CapBot.api)' with route pattern 'api/evaluation-criteria/active' is valid for the request path '/api/evaluation-criteria/active'
2025-09-25 10:18:54.499 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)' with route pattern 'api/evaluation-criteria/{id}' is valid for the request path '/api/evaluation-criteria/active'
2025-09-25 10:18:54.499 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAllActive (CapBot.api)'
2025-09-25 10:18:54.503 +07:00 [DBG] Successfully validated the token.
2025-09-25 10:18:54.503 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 10:18:54.506 +07:00 [DBG] Authorization was successful.
2025-09-25 10:18:54.507 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAllActive (CapBot.api)'
2025-09-25 10:18:54.519 +07:00 [INF] Route matched with {action = "GetAllActive", controller = "EvaluationCriteria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllActive() on controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api).
2025-09-25 10:18:54.519 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 10:18:54.520 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-25 10:18:54.520 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 10:18:54.520 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 10:18:54.520 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-25 10:18:54.520 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:18:54.529 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:18:54.538 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 10:18:54.541 +07:00 [DBG] Compiling query expression: 
'DbSet<EvaluationCriteria>()
    .AsNoTracking()
    .Where(x => x.IsActive)
    .OrderBy(x => x.Name)'
2025-09-25 10:18:54.551 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<EvaluationCriteria>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: EvaluationCriteria.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: EvaluationCriteria.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: EvaluationCriteria.CreatedBy (string), 2], [Property: EvaluationCriteria.DeletedAt (DateTime?), 3], [Property: EvaluationCriteria.Description (string), 4], [Property: EvaluationCriteria.IsActive (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 5], [Property: EvaluationCriteria.LastModifiedAt (DateTime?), 6], [Property: EvaluationCriteria.LastModifiedBy (string), 7], [Property: EvaluationCriteria.MaxScore (int) Required ValueGenerated.OnAdd, 8], [Property: EvaluationCriteria.Name (string) Required MaxLength(100), 9], [Property: EvaluationCriteria.SemesterId (int?) Required FK Index, 10], [Property: EvaluationCriteria.Weight (decimal) Required ValueGenerated.OnAdd, 11] }
        SELECT e.Id, e.CreatedAt, e.CreatedBy, e.DeletedAt, e.Description, e.IsActive, e.LastModifiedAt, e.LastModifiedBy, e.MaxScore, e.Name, e.SemesterId, e.Weight
        FROM evaluation_criteria AS e
        WHERE e.IsActive
        ORDER BY e.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, EvaluationCriteria>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 10:18:54.552 +07:00 [DBG] Creating DbConnection.
2025-09-25 10:18:54.552 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 10:18:54.552 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:18:54.553 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:18:54.553 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:18:54.553 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:18:54.554 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:18:54.556 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit)
ORDER BY [e].[Name]
2025-09-25 10:18:54.563 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit)
ORDER BY [e].[Name]
2025-09-25 10:18:54.563 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:18:54.563 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:18:54.563 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:18:54.563 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:18:54.568 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 10:18:54.569 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 10:18:54.569 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-25 10:18:54.569 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-25 10:18:54.569 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 10:18:54.570 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 10:18:54.570 +07:00 [INF] Executed action CapBot.api.Controllers.EvaluationCriteriaController.GetAllActive (CapBot.api) in 49.9027ms
2025-09-25 10:18:54.570 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAllActive (CapBot.api)'
2025-09-25 10:18:54.570 +07:00 [DBG] Connection id "0HNFRS85TD5HT" completed keep alive response.
2025-09-25 10:18:54.571 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 10:18:54.571 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:18:54.571 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 10:18:54.571 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/active - 200 null application/json; charset=utf-8 80.0147ms
2025-09-25 10:20:02.924 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/1 - null null
2025-09-25 10:20:02.926 +07:00 [DBG] The request path /api/evaluation-criteria/1 does not match a supported file type
2025-09-25 10:20:02.927 +07:00 [DBG] The request path /api/evaluation-criteria/1 does not match a supported file type
2025-09-25 10:20:02.928 +07:00 [DBG] 1 candidate(s) found for the request path '/api/evaluation-criteria/1'
2025-09-25 10:20:02.928 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)' with route pattern 'api/evaluation-criteria/{id}' is valid for the request path '/api/evaluation-criteria/1'
2025-09-25 10:20:02.929 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)'
2025-09-25 10:20:02.931 +07:00 [DBG] Successfully validated the token.
2025-09-25 10:20:02.931 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 10:20:02.931 +07:00 [DBG] Authorization was successful.
2025-09-25 10:20:02.932 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)'
2025-09-25 10:20:02.940 +07:00 [INF] Route matched with {action = "GetById", controller = "EvaluationCriteria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api).
2025-09-25 10:20:02.940 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 10:20:02.940 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-25 10:20:02.940 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 10:20:02.941 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 10:20:02.941 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-25 10:20:02.941 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:20:02.942 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:20:02.942 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-09-25 10:20:02.943 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-09-25 10:20:02.943 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-09-25 10:20:02.943 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-09-25 10:20:02.944 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-09-25 10:20:02.944 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-09-25 10:20:02.950 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 10:20:02.956 +07:00 [DBG] Compiling query expression: 
'DbSet<EvaluationCriteria>()
    .AsNoTracking()
    .Include(x => x.Semester)
    .Where(x => x.Id == __id_0 && x.IsActive)
    .FirstOrDefault()'
2025-09-25 10:20:02.959 +07:00 [DBG] Including navigation: 'EvaluationCriteria.Semester'.
2025-09-25 10:20:03.027 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<EvaluationCriteria>(
    asyncEnumerable: new SingleQueryingEnumerable<EvaluationCriteria>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: EvaluationCriteria.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: EvaluationCriteria.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: EvaluationCriteria.CreatedBy (string), 2], [Property: EvaluationCriteria.DeletedAt (DateTime?), 3], [Property: EvaluationCriteria.Description (string), 4], [Property: EvaluationCriteria.IsActive (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 5], [Property: EvaluationCriteria.LastModifiedAt (DateTime?), 6], [Property: EvaluationCriteria.LastModifiedBy (string), 7], [Property: EvaluationCriteria.MaxScore (int) Required ValueGenerated.OnAdd, 8], [Property: EvaluationCriteria.Name (string) Required MaxLength(100), 9], [Property: EvaluationCriteria.SemesterId (int?) Required FK Index, 10], [Property: EvaluationCriteria.Weight (decimal) Required ValueGenerated.OnAdd, 11] }
                1 -> Dictionary<IProperty, int> { [Property: Semester.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 12], [Property: Semester.CreatedAt (DateTime) Required, 13], [Property: Semester.CreatedBy (string), 14], [Property: Semester.DeletedAt (DateTime?), 15], [Property: Semester.Description (string), 16], [Property: Semester.EndDate (DateTime) Required, 17], [Property: Semester.IsActive (bool) Required, 18], [Property: Semester.LastModifiedAt (DateTime?), 19], [Property: Semester.LastModifiedBy (string), 20], [Property: Semester.Name (string) Required Index MaxLength(50), 21], [Property: Semester.StartDate (DateTime) Required, 22] }
            SELECT TOP(1) e.Id, e.CreatedAt, e.CreatedBy, e.DeletedAt, e.Description, e.IsActive, e.LastModifiedAt, e.LastModifiedBy, e.MaxScore, e.Name, e.SemesterId, e.Weight, s.Id, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.Description, s.EndDate, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.Name, s.StartDate
            FROM evaluation_criteria AS e
            INNER JOIN semesters AS s ON e.SemesterId == s.Id
            WHERE (e.Id == @__id_0) && e.IsActive), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, EvaluationCriteria>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 10:20:03.033 +07:00 [DBG] Creating DbConnection.
2025-09-25 10:20:03.033 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 10:20:03.033 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:20:03.033 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:20:03.034 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:20:03.034 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:20:03.034 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:20:03.034 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight], [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [evaluation_criteria] AS [e]
INNER JOIN [semesters] AS [s] ON [e].[SemesterId] = [s].[Id]
WHERE [e].[Id] = @__id_0 AND [e].[IsActive] = CAST(1 AS bit)
2025-09-25 10:20:03.048 +07:00 [INF] Executed DbCommand (14ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight], [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [evaluation_criteria] AS [e]
INNER JOIN [semesters] AS [s] ON [e].[SemesterId] = [s].[Id]
WHERE [e].[Id] = @__id_0 AND [e].[IsActive] = CAST(1 AS bit)
2025-09-25 10:20:03.053 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:20:03.053 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:20:03.053 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:20:03.053 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:20:03.063 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 10:20:03.072 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 10:20:03.072 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-25 10:20:03.072 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-25 10:20:03.072 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 10:20:03.072 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 10:20:03.073 +07:00 [INF] Executed action CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api) in 131.8508ms
2025-09-25 10:20:03.073 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)'
2025-09-25 10:20:03.073 +07:00 [DBG] Connection id "0HNFRS85TD5HT" completed keep alive response.
2025-09-25 10:20:03.073 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 10:20:03.073 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:20:03.119 +07:00 [DBG] Disposed connection to database '' on server '' (45ms).
2025-09-25 10:20:03.119 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/1 - 200 null application/json; charset=utf-8 195.412ms
2025-09-25 10:22:13.730 +07:00 [DBG] Connection id "0HNFRS85TD5HT" disconnecting.
2025-09-25 10:22:13.731 +07:00 [DBG] Connection id "0HNFRS85TD5HT" stopped.
2025-09-25 10:22:13.733 +07:00 [DBG] Connection id "0HNFRS85TD5HT" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 10:23:38.658 +07:00 [DBG] Connection id "0HNFRS85TD5HV" accepted.
2025-09-25 10:23:38.664 +07:00 [DBG] Connection id "0HNFRS85TD5HV" started.
2025-09-25 10:23:38.664 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/current-semester - null null
2025-09-25 10:23:38.665 +07:00 [DBG] The request path /api/evaluation-criteria/current-semester does not match a supported file type
2025-09-25 10:23:38.665 +07:00 [DBG] The request path /api/evaluation-criteria/current-semester does not match a supported file type
2025-09-25 10:23:38.665 +07:00 [DBG] 2 candidate(s) found for the request path '/api/evaluation-criteria/current-semester'
2025-09-25 10:23:38.665 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)' with route pattern 'api/evaluation-criteria/current-semester' is valid for the request path '/api/evaluation-criteria/current-semester'
2025-09-25 10:23:38.665 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)' with route pattern 'api/evaluation-criteria/{id}' is valid for the request path '/api/evaluation-criteria/current-semester'
2025-09-25 10:23:38.665 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)'
2025-09-25 10:23:38.666 +07:00 [DBG] Successfully validated the token.
2025-09-25 10:23:38.666 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 10:23:38.666 +07:00 [DBG] Authorization was successful.
2025-09-25 10:23:38.666 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)'
2025-09-25 10:23:38.673 +07:00 [INF] Route matched with {action = "GetCurrentSemesterCriteria", controller = "EvaluationCriteria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentSemesterCriteria() on controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api).
2025-09-25 10:23:38.673 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 10:23:38.673 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-25 10:23:38.673 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 10:23:38.673 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 10:23:38.673 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-25 10:23:38.673 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:23:38.673 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:23:38.687 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 10:23:38.690 +07:00 [DBG] Compiling query expression: 
'DbSet<Semester>()
    .AsNoTracking()
    .Where(x => x.IsActive && x.DeletedAt == null && x.StartDate <= __currentDate_0 && x.EndDate >= __currentDate_0)
    .FirstOrDefault()'
2025-09-25 10:23:38.703 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Semester>(
    asyncEnumerable: new SingleQueryingEnumerable<Semester>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Semester.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Semester.CreatedAt (DateTime) Required, 1], [Property: Semester.CreatedBy (string), 2], [Property: Semester.DeletedAt (DateTime?), 3], [Property: Semester.Description (string), 4], [Property: Semester.EndDate (DateTime) Required, 5], [Property: Semester.IsActive (bool) Required, 6], [Property: Semester.LastModifiedAt (DateTime?), 7], [Property: Semester.LastModifiedBy (string), 8], [Property: Semester.Name (string) Required Index MaxLength(50), 9], [Property: Semester.StartDate (DateTime) Required, 10] }
            SELECT TOP(1) s.Id, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.Description, s.EndDate, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.Name, s.StartDate
            FROM semesters AS s
            WHERE ((s.IsActive && (s.DeletedAt == NULL)) && (s.StartDate <= @__currentDate_0)) && (s.EndDate >= @__currentDate_0)), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Semester>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 10:23:38.717 +07:00 [DBG] Creating DbConnection.
2025-09-25 10:23:38.718 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 10:23:38.718 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:38.718 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:38.719 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:23:38.720 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-25 10:23:38.721 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-25 10:23:38.721 +07:00 [DBG] Executing DbCommand [Parameters=[@__currentDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL AND [s].[StartDate] <= @__currentDate_0 AND [s].[EndDate] >= @__currentDate_0
2025-09-25 10:23:38.732 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__currentDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL AND [s].[StartDate] <= @__currentDate_0 AND [s].[EndDate] >= @__currentDate_0
2025-09-25 10:23:38.733 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:23:38.733 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:23:38.733 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:38.733 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:23:38.735 +07:00 [DBG] Compiling query expression: 
'DbSet<EvaluationCriteria>()
    .AsNoTracking()
    .Where(x => x.IsActive && x.SemesterId == __currentSemester_Id_0 || x.SemesterId == null)
    .OrderBy(x => x.Name)'
2025-09-25 10:23:38.742 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<EvaluationCriteria>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: EvaluationCriteria.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: EvaluationCriteria.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 1], [Property: EvaluationCriteria.CreatedBy (string), 2], [Property: EvaluationCriteria.DeletedAt (DateTime?), 3], [Property: EvaluationCriteria.Description (string), 4], [Property: EvaluationCriteria.IsActive (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 5], [Property: EvaluationCriteria.LastModifiedAt (DateTime?), 6], [Property: EvaluationCriteria.LastModifiedBy (string), 7], [Property: EvaluationCriteria.MaxScore (int) Required ValueGenerated.OnAdd, 8], [Property: EvaluationCriteria.Name (string) Required MaxLength(100), 9], [Property: EvaluationCriteria.SemesterId (int?) Required FK Index, 10], [Property: EvaluationCriteria.Weight (decimal) Required ValueGenerated.OnAdd, 11] }
        SELECT e.Id, e.CreatedAt, e.CreatedBy, e.DeletedAt, e.Description, e.IsActive, e.LastModifiedAt, e.LastModifiedBy, e.MaxScore, e.Name, e.SemesterId, e.Weight
        FROM evaluation_criteria AS e
        WHERE e.IsActive && ((e.SemesterId == @__currentSemester_Id_0) || (e.SemesterId == NULL))
        ORDER BY e.Name ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, EvaluationCriteria>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 10:23:38.744 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:38.745 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:38.745 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:23:38.746 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:23:38.746 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-25 10:23:38.747 +07:00 [DBG] Executing DbCommand [Parameters=[@__currentSemester_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit) AND [e].[SemesterId] = @__currentSemester_Id_0
ORDER BY [e].[Name]
2025-09-25 10:23:38.754 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__currentSemester_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit) AND [e].[SemesterId] = @__currentSemester_Id_0
ORDER BY [e].[Name]
2025-09-25 10:23:38.754 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:23:38.754 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:23:38.754 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:38.754 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:23:38.756 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 10:23:38.756 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 10:23:38.756 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-25 10:23:38.757 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-25 10:23:38.757 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 10:23:38.757 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 10:23:38.758 +07:00 [INF] Executed action CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api) in 85.3798ms
2025-09-25 10:23:38.759 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)'
2025-09-25 10:23:38.759 +07:00 [DBG] Connection id "0HNFRS85TD5HV" completed keep alive response.
2025-09-25 10:23:38.759 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 10:23:38.760 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:38.760 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 10:23:38.760 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/current-semester - 200 null application/json; charset=utf-8 95.4938ms
2025-09-25 10:23:41.613 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/current-semester - null null
2025-09-25 10:23:41.613 +07:00 [DBG] The request path /api/evaluation-criteria/current-semester does not match a supported file type
2025-09-25 10:23:41.613 +07:00 [DBG] The request path /api/evaluation-criteria/current-semester does not match a supported file type
2025-09-25 10:23:41.614 +07:00 [DBG] 2 candidate(s) found for the request path '/api/evaluation-criteria/current-semester'
2025-09-25 10:23:41.614 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)' with route pattern 'api/evaluation-criteria/current-semester' is valid for the request path '/api/evaluation-criteria/current-semester'
2025-09-25 10:23:41.614 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)' with route pattern 'api/evaluation-criteria/{id}' is valid for the request path '/api/evaluation-criteria/current-semester'
2025-09-25 10:23:41.614 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)'
2025-09-25 10:23:41.619 +07:00 [DBG] Successfully validated the token.
2025-09-25 10:23:41.619 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 10:23:41.620 +07:00 [DBG] Authorization was successful.
2025-09-25 10:23:41.621 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)'
2025-09-25 10:23:41.621 +07:00 [INF] Route matched with {action = "GetCurrentSemesterCriteria", controller = "EvaluationCriteria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentSemesterCriteria() on controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api).
2025-09-25 10:23:41.623 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 10:23:41.623 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-25 10:23:41.623 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 10:23:41.623 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 10:23:41.623 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-25 10:23:41.624 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:23:41.624 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:23:41.626 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 10:23:41.627 +07:00 [DBG] Creating DbConnection.
2025-09-25 10:23:41.627 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 10:23:41.627 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:41.627 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:41.627 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:23:41.628 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:23:41.628 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:23:41.628 +07:00 [DBG] Executing DbCommand [Parameters=[@__currentDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL AND [s].[StartDate] <= @__currentDate_0 AND [s].[EndDate] >= @__currentDate_0
2025-09-25 10:23:41.633 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[@__currentDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL AND [s].[StartDate] <= @__currentDate_0 AND [s].[EndDate] >= @__currentDate_0
2025-09-25 10:23:41.636 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:23:41.636 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 10:23:41.636 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:41.636 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:23:41.637 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:41.638 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:41.638 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:23:41.638 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:23:41.638 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:23:41.638 +07:00 [DBG] Executing DbCommand [Parameters=[@__currentSemester_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit) AND [e].[SemesterId] = @__currentSemester_Id_0
ORDER BY [e].[Name]
2025-09-25 10:23:41.645 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__currentSemester_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit) AND [e].[SemesterId] = @__currentSemester_Id_0
ORDER BY [e].[Name]
2025-09-25 10:23:41.646 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:23:41.646 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:23:41.646 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:41.646 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:23:41.647 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 10:23:41.648 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 10:23:41.648 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-25 10:23:41.648 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-25 10:23:41.648 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 10:23:41.648 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 10:23:41.650 +07:00 [INF] Executed action CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api) in 25.9537ms
2025-09-25 10:23:41.651 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)'
2025-09-25 10:23:41.652 +07:00 [DBG] Connection id "0HNFRS85TD5HV" completed keep alive response.
2025-09-25 10:23:41.652 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 10:23:41.652 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:23:41.653 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 10:23:41.654 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/current-semester - 200 null application/json; charset=utf-8 39.5168ms
2025-09-25 10:25:52.440 +07:00 [DBG] Connection id "0HNFRS85TD5HV" disconnecting.
2025-09-25 10:25:52.441 +07:00 [DBG] Connection id "0HNFRS85TD5HV" stopped.
2025-09-25 10:25:52.441 +07:00 [DBG] Connection id "0HNFRS85TD5HV" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 10:28:00.144 +07:00 [DBG] Connection id "0HNFRS85TD5I0" accepted.
2025-09-25 10:28:00.144 +07:00 [DBG] Connection id "0HNFRS85TD5I0" started.
2025-09-25 10:28:00.145 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria?PageNumber=1&PageSize=11 - null null
2025-09-25 10:28:00.145 +07:00 [DBG] The request path /api/evaluation-criteria does not match a supported file type
2025-09-25 10:28:00.145 +07:00 [DBG] The request path /api/evaluation-criteria does not match a supported file type
2025-09-25 10:28:00.145 +07:00 [DBG] 1 candidate(s) found for the request path '/api/evaluation-criteria'
2025-09-25 10:28:00.145 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAll (CapBot.api)' with route pattern 'api/evaluation-criteria' is valid for the request path '/api/evaluation-criteria'
2025-09-25 10:28:00.145 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAll (CapBot.api)'
2025-09-25 10:28:00.145 +07:00 [DBG] Successfully validated the token.
2025-09-25 10:28:00.145 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 10:28:00.145 +07:00 [DBG] Authorization was successful.
2025-09-25 10:28:00.146 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAll (CapBot.api)'
2025-09-25 10:28:00.146 +07:00 [INF] Route matched with {action = "GetAll", controller = "EvaluationCriteria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(App.Commons.Paging.PagingModel) on controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api).
2025-09-25 10:28:00.146 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 10:28:00.146 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-25 10:28:00.146 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 10:28:00.146 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 10:28:00.146 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-25 10:28:00.146 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:28:00.147 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:28:00.147 +07:00 [DBG] Attempting to bind parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel' ...
2025-09-25 10:28:00.147 +07:00 [DBG] Attempting to bind parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel' using the name '' in request data ...
2025-09-25 10:28:00.147 +07:00 [DBG] Attempting to bind property 'App.Commons.Paging.PagingModel.PageNumber' of type 'System.Int32' using the name 'PageNumber' in request data ...
2025-09-25 10:28:00.147 +07:00 [DBG] Done attempting to bind property 'App.Commons.Paging.PagingModel.PageNumber' of type 'System.Int32'.
2025-09-25 10:28:00.147 +07:00 [DBG] Attempting to bind property 'App.Commons.Paging.PagingModel.PageSize' of type 'System.Int32' using the name 'PageSize' in request data ...
2025-09-25 10:28:00.148 +07:00 [DBG] Done attempting to bind property 'App.Commons.Paging.PagingModel.PageSize' of type 'System.Int32'.
2025-09-25 10:28:00.148 +07:00 [DBG] Attempting to bind property 'App.Commons.Paging.PagingModel.Keyword' of type 'System.String' using the name 'Keyword' in request data ...
2025-09-25 10:28:00.148 +07:00 [DBG] Could not find a value in the request with name 'Keyword' for binding property 'App.Commons.Paging.PagingModel.Keyword' of type 'System.String'.
2025-09-25 10:28:00.148 +07:00 [DBG] Done attempting to bind property 'App.Commons.Paging.PagingModel.Keyword' of type 'System.String'.
2025-09-25 10:28:00.148 +07:00 [DBG] Attempting to bind property 'App.Commons.Paging.PagingModel.TotalRecord' of type 'System.Int32' using the name 'TotalRecord' in request data ...
2025-09-25 10:28:00.148 +07:00 [DBG] Could not find a value in the request with name 'TotalRecord' for binding property 'App.Commons.Paging.PagingModel.TotalRecord' of type 'System.Int32'.
2025-09-25 10:28:00.148 +07:00 [DBG] Done attempting to bind property 'App.Commons.Paging.PagingModel.TotalRecord' of type 'System.Int32'.
2025-09-25 10:28:00.148 +07:00 [DBG] Done attempting to bind parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel'.
2025-09-25 10:28:00.148 +07:00 [DBG] Done attempting to bind parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel'.
2025-09-25 10:28:00.148 +07:00 [DBG] Attempting to validate the bound parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel' ...
2025-09-25 10:28:00.149 +07:00 [DBG] Done attempting to validate the bound parameter 'pagingModel' of type 'App.Commons.Paging.PagingModel'.
2025-09-25 10:28:00.149 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 10:28:00.150 +07:00 [DBG] Creating DbConnection.
2025-09-25 10:28:00.151 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 10:28:00.151 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:00.223 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:00.224 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:28:00.224 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:28:00.224 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:28:00.224 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit)
2025-09-25 10:28:00.240 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit)
2025-09-25 10:28:00.241 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:28:00.241 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:28:00.241 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:00.241 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:28:00.243 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:00.243 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:00.243 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:28:00.243 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:28:00.243 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:28:00.243 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxScore], [t].[Name], [t].[SemesterId], [t].[Weight], [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM (
    SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
    FROM [evaluation_criteria] AS [e]
    WHERE [e].[IsActive] = CAST(1 AS bit)
    ORDER BY [e].[CreatedAt]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [semesters] AS [s] ON [t].[SemesterId] = [s].[Id]
ORDER BY [t].[CreatedAt]
2025-09-25 10:28:00.253 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[IsActive], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxScore], [t].[Name], [t].[SemesterId], [t].[Weight], [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM (
    SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
    FROM [evaluation_criteria] AS [e]
    WHERE [e].[IsActive] = CAST(1 AS bit)
    ORDER BY [e].[CreatedAt]
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [semesters] AS [s] ON [t].[SemesterId] = [s].[Id]
ORDER BY [t].[CreatedAt]
2025-09-25 10:28:00.254 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:28:00.254 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:28:00.254 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:00.254 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:28:00.254 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 10:28:00.255 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 10:28:00.255 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-25 10:28:00.255 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-25 10:28:00.255 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 10:28:00.255 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 10:28:00.255 +07:00 [INF] Executed action CapBot.api.Controllers.EvaluationCriteriaController.GetAll (CapBot.api) in 109.0686ms
2025-09-25 10:28:00.255 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetAll (CapBot.api)'
2025-09-25 10:28:00.256 +07:00 [DBG] Connection id "0HNFRS85TD5I0" completed keep alive response.
2025-09-25 10:28:00.256 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 10:28:00.256 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:00.256 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 10:28:00.256 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria?PageNumber=1&PageSize=11 - 200 null application/json; charset=utf-8 111.3215ms
2025-09-25 10:28:20.521 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/1 - null null
2025-09-25 10:28:20.521 +07:00 [DBG] The request path /api/evaluation-criteria/1 does not match a supported file type
2025-09-25 10:28:20.521 +07:00 [DBG] The request path /api/evaluation-criteria/1 does not match a supported file type
2025-09-25 10:28:20.522 +07:00 [DBG] 1 candidate(s) found for the request path '/api/evaluation-criteria/1'
2025-09-25 10:28:20.522 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)' with route pattern 'api/evaluation-criteria/{id}' is valid for the request path '/api/evaluation-criteria/1'
2025-09-25 10:28:20.522 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)'
2025-09-25 10:28:20.522 +07:00 [DBG] Successfully validated the token.
2025-09-25 10:28:20.522 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 10:28:20.522 +07:00 [DBG] Authorization was successful.
2025-09-25 10:28:20.522 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)'
2025-09-25 10:28:20.522 +07:00 [INF] Route matched with {action = "GetById", controller = "EvaluationCriteria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetById(Int32) on controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api).
2025-09-25 10:28:20.522 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 10:28:20.523 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-25 10:28:20.523 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 10:28:20.523 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 10:28:20.523 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-25 10:28:20.523 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:28:20.523 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:28:20.523 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' ...
2025-09-25 10:28:20.523 +07:00 [DBG] Attempting to bind parameter 'id' of type 'System.Int32' using the name 'id' in request data ...
2025-09-25 10:28:20.523 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-09-25 10:28:20.523 +07:00 [DBG] Done attempting to bind parameter 'id' of type 'System.Int32'.
2025-09-25 10:28:20.523 +07:00 [DBG] Attempting to validate the bound parameter 'id' of type 'System.Int32' ...
2025-09-25 10:28:20.523 +07:00 [DBG] Done attempting to validate the bound parameter 'id' of type 'System.Int32'.
2025-09-25 10:28:20.525 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 10:28:20.525 +07:00 [DBG] Creating DbConnection.
2025-09-25 10:28:20.525 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 10:28:20.525 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:20.525 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:20.525 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:28:20.525 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:28:20.525 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:28:20.526 +07:00 [DBG] Executing DbCommand [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight], [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [evaluation_criteria] AS [e]
INNER JOIN [semesters] AS [s] ON [e].[SemesterId] = [s].[Id]
WHERE [e].[Id] = @__id_0 AND [e].[IsActive] = CAST(1 AS bit)
2025-09-25 10:28:20.533 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight], [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [evaluation_criteria] AS [e]
INNER JOIN [semesters] AS [s] ON [e].[SemesterId] = [s].[Id]
WHERE [e].[Id] = @__id_0 AND [e].[IsActive] = CAST(1 AS bit)
2025-09-25 10:28:20.534 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:28:20.534 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:28:20.534 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:20.535 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:28:20.535 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 10:28:20.535 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 10:28:20.535 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-25 10:28:20.535 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-25 10:28:20.535 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 10:28:20.535 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 10:28:20.538 +07:00 [INF] Executed action CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api) in 15.163ms
2025-09-25 10:28:20.538 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)'
2025-09-25 10:28:20.538 +07:00 [DBG] Connection id "0HNFRS85TD5I0" completed keep alive response.
2025-09-25 10:28:20.538 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 10:28:20.539 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:20.539 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 10:28:20.539 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/1 - 200 null application/json; charset=utf-8 17.6551ms
2025-09-25 10:28:28.894 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/current-semester - null null
2025-09-25 10:28:28.894 +07:00 [DBG] The request path /api/evaluation-criteria/current-semester does not match a supported file type
2025-09-25 10:28:28.894 +07:00 [DBG] The request path /api/evaluation-criteria/current-semester does not match a supported file type
2025-09-25 10:28:28.894 +07:00 [DBG] 2 candidate(s) found for the request path '/api/evaluation-criteria/current-semester'
2025-09-25 10:28:28.894 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)' with route pattern 'api/evaluation-criteria/current-semester' is valid for the request path '/api/evaluation-criteria/current-semester'
2025-09-25 10:28:28.894 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetById (CapBot.api)' with route pattern 'api/evaluation-criteria/{id}' is valid for the request path '/api/evaluation-criteria/current-semester'
2025-09-25 10:28:28.894 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)'
2025-09-25 10:28:28.894 +07:00 [DBG] Successfully validated the token.
2025-09-25 10:28:28.894 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 10:28:28.894 +07:00 [DBG] Authorization was successful.
2025-09-25 10:28:28.895 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)'
2025-09-25 10:28:28.898 +07:00 [INF] Route matched with {action = "GetCurrentSemesterCriteria", controller = "EvaluationCriteria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetCurrentSemesterCriteria() on controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api).
2025-09-25 10:28:28.898 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 10:28:28.898 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-09-25 10:28:28.899 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 10:28:28.899 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 10:28:28.899 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-09-25 10:28:28.899 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:28:28.899 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.EvaluationCriteriaController (CapBot.api)
2025-09-25 10:28:28.905 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 10:28:28.905 +07:00 [DBG] Creating DbConnection.
2025-09-25 10:28:28.905 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 10:28:28.905 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:28.906 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:28.906 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:28:28.906 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:28:28.906 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:28:28.906 +07:00 [DBG] Executing DbCommand [Parameters=[@__currentDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL AND [s].[StartDate] <= @__currentDate_0 AND [s].[EndDate] >= @__currentDate_0
2025-09-25 10:28:28.910 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__currentDate_0='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[Description], [s].[EndDate], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[Name], [s].[StartDate]
FROM [semesters] AS [s]
WHERE [s].[IsActive] = CAST(1 AS bit) AND [s].[DeletedAt] IS NULL AND [s].[StartDate] <= @__currentDate_0 AND [s].[EndDate] >= @__currentDate_0
2025-09-25 10:28:28.911 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:28:28.911 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:28:28.911 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:28.911 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:28:28.912 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:28.913 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:28.913 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 10:28:28.914 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:28:28.914 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 10:28:28.914 +07:00 [DBG] Executing DbCommand [Parameters=[@__currentSemester_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit) AND [e].[SemesterId] = @__currentSemester_Id_0
ORDER BY [e].[Name]
2025-09-25 10:28:28.921 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__currentSemester_Id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [e].[Id], [e].[CreatedAt], [e].[CreatedBy], [e].[DeletedAt], [e].[Description], [e].[IsActive], [e].[LastModifiedAt], [e].[LastModifiedBy], [e].[MaxScore], [e].[Name], [e].[SemesterId], [e].[Weight]
FROM [evaluation_criteria] AS [e]
WHERE [e].[IsActive] = CAST(1 AS bit) AND [e].[SemesterId] = @__currentSemester_Id_0
ORDER BY [e].[Name]
2025-09-25 10:28:28.921 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 10:28:28.922 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 10:28:28.923 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:28.923 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 10:28:28.923 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 10:28:28.924 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 10:28:28.924 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-09-25 10:28:28.924 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-09-25 10:28:28.925 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 10:28:28.925 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 10:28:28.925 +07:00 [INF] Executed action CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api) in 26.6266ms
2025-09-25 10:28:28.926 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.EvaluationCriteriaController.GetCurrentSemesterCriteria (CapBot.api)'
2025-09-25 10:28:28.926 +07:00 [DBG] Connection id "0HNFRS85TD5I0" completed keep alive response.
2025-09-25 10:28:28.926 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 10:28:28.926 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 10:28:28.926 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 10:28:28.926 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/evaluation-criteria/current-semester - 200 null application/json; charset=utf-8 32.7219ms
2025-09-25 10:30:40.584 +07:00 [DBG] Connection id "0HNFRS85TD5I0" disconnecting.
2025-09-25 10:30:40.584 +07:00 [DBG] Connection id "0HNFRS85TD5I0" stopped.
2025-09-25 10:30:40.585 +07:00 [DBG] Connection id "0HNFRS85TD5I0" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 10:39:04.095 +07:00 [INF] Application is shutting down...
2025-09-25 10:39:04.097 +07:00 [DBG] Hosting stopping
2025-09-25 10:39:04.105 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 10:39:04.133 +07:00 [DBG] Hosting stopped
2025-09-25 11:47:44.518 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 11:47:44.574 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 11:47:44.712 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.727 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.738 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.740 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.740 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.741 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.875 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.875 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.890 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.891 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.891 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.892 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.895 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.895 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 11:47:44.926 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 11:47:44.926 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 11:47:44.926 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 11:47:44.926 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 11:47:44.926 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 11:47:44.926 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 11:47:44.927 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 11:47:44.927 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 11:47:44.927 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 11:47:44.927 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 11:47:44.927 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 11:47:44.927 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 11:47:44.927 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 11:47:44.927 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 11:47:44.927 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 11:47:44.927 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 11:47:44.927 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 11:47:44.928 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 11:47:44.928 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 11:47:45.027 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 11:47:45.028 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 11:47:45.028 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 11:47:45.028 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 11:47:45.029 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 11:47:45.029 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 11:47:45.029 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 11:47:45.029 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 11:47:45.030 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 11:47:45.030 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 11:47:45.030 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 11:47:45.127 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 11:47:45.163 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 11:47:45.255 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 11:47:45.274 +07:00 [DBG] Creating DbConnection.
2025-09-25 11:47:45.285 +07:00 [DBG] Created DbConnection. (9ms).
2025-09-25 11:47:45.288 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.438 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.440 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:47:45.443 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-25 11:47:45.448 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-25 11:47:45.453 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 11:47:45.497 +07:00 [INF] Executed DbCommand (44ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 11:47:45.523 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 11:47:45.535 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.539 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 39ms reading results.
2025-09-25 11:47:45.541 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.544 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-25 11:47:45.546 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.547 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.547 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:47:45.547 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.547 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.547 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 11:47:45.551 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 11:47:45.551 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 11:47:45.552 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.552 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 11:47:45.552 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.552 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:47:45.552 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.552 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.552 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:47:45.552 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.552 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.553 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 11:47:45.553 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 11:47:45.553 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 11:47:45.554 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.554 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 11:47:45.554 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.554 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:47:45.554 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.554 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.554 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:47:45.554 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.554 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.554 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 11:47:45.555 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 11:47:45.555 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 11:47:45.555 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.556 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 11:47:45.556 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.556 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:47:45.559 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 11:47:45.564 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 11:47:45.565 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.565 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.565 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:47:45.565 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.565 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.565 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:47:45.573 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:47:45.590 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 11:47:45.611 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.611 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-25 11:47:45.611 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.611 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:47:45.614 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 11:47:45.615 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.616 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.616 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:47:45.616 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.616 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.616 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:47:45.617 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:47:45.617 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 11:47:45.617 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.617 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 11:47:45.617 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.617 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:47:45.617 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 11:47:45.618 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.618 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.618 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:47:45.619 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.619 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.619 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:47:45.620 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:47:45.620 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 11:47:45.620 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.621 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 11:47:45.621 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.621 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:47:45.621 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.621 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.621 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:47:45.621 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.621 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:47:45.621 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:47:45.622 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 11:47:45.622 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 11:47:45.622 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.622 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 11:47:45.622 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.623 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:47:45.623 +07:00 [INF] Data seeding completed successfully
2025-09-25 11:47:45.623 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 11:47:45.625 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:47:45.625 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 11:47:45.635 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 11:47:45.732 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 11:47:45.807 +07:00 [DBG] Hosting starting
2025-09-25 11:47:45.813 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 11:47:45.816 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 11:47:45.848 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 11:47:45.851 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 11:47:45.853 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 11:47:45.854 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 11:47:45.857 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 11:47:45.859 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 11:47:45.859 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 11:47:45.867 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 11:47:45.867 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 11:47:45.868 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 11:47:45.869 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 11:47:45.869 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 11:47:45.872 +07:00 [DBG] Middleware loaded
2025-09-25 11:47:45.873 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 11:47:45.873 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 11:47:45.894 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 11:47:45.901 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 11:47:45.901 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 11:47:45.901 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 11:47:45.901 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 11:47:45.901 +07:00 [INF] Hosting environment: Development
2025-09-25 11:47:45.901 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 11:47:45.903 +07:00 [DBG] Hosting started
2025-09-25 11:47:46.023 +07:00 [DBG] Connection id "0HNFRTQLTD5EI" accepted.
2025-09-25 11:47:46.024 +07:00 [DBG] Connection id "0HNFRTQLTD5EI" started.
2025-09-25 11:47:46.055 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 11:47:46.068 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 11:47:46.119 +07:00 [DBG] Connection id "0HNFRTQLTD5EJ" accepted.
2025-09-25 11:47:46.119 +07:00 [DBG] Connection id "0HNFRTQLTD5EJ" started.
2025-09-25 11:47:46.249 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 11:47:46.256 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 11:47:46.256 +07:00 [DBG] Connection id "0HNFRTQLTD5EI" completed keep alive response.
2025-09-25 11:47:46.258 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 207.2102ms
2025-09-25 11:47:46.264 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 11:47:46.268 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 11:47:46.268 +07:00 [DBG] Connection id "0HNFRTQLTD5EI" completed keep alive response.
2025-09-25 11:47:46.268 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 4.1708ms
2025-09-25 11:47:46.320 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 11:47:46.510 +07:00 [DBG] Connection id "0HNFRTQLTD5EI" completed keep alive response.
2025-09-25 11:47:46.511 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 190.6609ms
2025-09-25 11:48:26.496 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/api/Account/my-user-roles - null null
2025-09-25 11:48:26.500 +07:00 [DBG] The request path /api/Account/my-user-roles does not match a supported file type
2025-09-25 11:48:26.501 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 11:48:26.501 +07:00 [DBG] The request path /api/Account/my-user-roles does not match a supported file type
2025-09-25 11:48:26.587 +07:00 [DBG] 1 candidate(s) found for the request path '/api/Account/my-user-roles'
2025-09-25 11:48:26.588 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)' with route pattern 'api/Account/my-user-roles' is valid for the request path '/api/Account/my-user-roles'
2025-09-25 11:48:26.590 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)'
2025-09-25 11:48:26.731 +07:00 [DBG] Successfully validated the token.
2025-09-25 11:48:26.734 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 11:48:26.745 +07:00 [DBG] Authorization was successful.
2025-09-25 11:48:26.762 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)'
2025-09-25 11:48:26.794 +07:00 [INF] Route matched with {action = "GetMyUserRoles", controller = "Account"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyUserRoles() on controller CapBot.api.Controllers.AccountController (CapBot.api).
2025-09-25 11:48:26.797 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 11:48:26.798 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 11:48:26.799 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 11:48:26.800 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 11:48:26.801 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 11:48:26.804 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.AccountController (CapBot.api)
2025-09-25 11:48:26.819 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.AccountController (CapBot.api)
2025-09-25 11:48:26.931 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 11:48:26.944 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .FirstOrDefault(e => EF.Property<int>(e, "Id") == __p_0)'
2025-09-25 11:48:27.003 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(1) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.Id == @__p_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 11:48:27.005 +07:00 [DBG] Creating DbConnection.
2025-09-25 11:48:27.007 +07:00 [DBG] Created DbConnection. (1ms).
2025-09-25 11:48:27.007 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.008 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.009 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:48:27.009 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:48:27.010 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-25 11:48:27.013 +07:00 [DBG] Executing DbCommand [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[Id] = @__p_0
2025-09-25 11:48:27.026 +07:00 [INF] Executed DbCommand (15ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[Id] = @__p_0
2025-09-25 11:48:27.027 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 11:48:27.029 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.033 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 5ms reading results.
2025-09-25 11:48:27.035 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.036 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:48:27.063 +07:00 [DBG] Compiling query expression: 
'DbSet<UserRole>()
    .Join(
        inner: DbSet<Role>(), 
        outerKeySelector: userRole => userRole.RoleId, 
        innerKeySelector: role => role.Id, 
        resultSelector: (userRole, role) => new { 
            userRole = userRole, 
            role = role
         })
    .Where(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.userRole.UserId.Equals(__userId_0))
    .Select(<>h__TransparentIdentifier0 => <>h__TransparentIdentifier0.role.Name)'
2025-09-25 11:48:27.111 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<string>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT r.Name
        FROM user_roles AS u
        INNER JOIN roles AS r ON u.RoleId == r.Id
        WHERE u.UserId == @__userId_0), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, string>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 11:48:27.114 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.114 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.114 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:48:27.115 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:48:27.115 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:48:27.115 +07:00 [DBG] Executing DbCommand [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-09-25 11:48:27.125 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__userId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Name]
FROM [user_roles] AS [u]
INNER JOIN [roles] AS [r] ON [u].[RoleId] = [r].[Id]
WHERE [u].[UserId] = @__userId_0
2025-09-25 11:48:27.128 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.129 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 3ms reading results.
2025-09-25 11:48:27.129 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.129 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:48:27.134 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .Where(r => __roleNames_0.Contains(r.Name))'
2025-09-25 11:48:27.203 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<Role>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
        SELECT r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
        FROM roles AS r
        WHERE r.Name IN (
            SELECT r0.value
            FROM OPENJSON(@__roleNames_0) WITH (value nvarchar(max) '') AS r0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 11:48:27.215 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.216 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.216 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:48:27.217 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:48:27.226 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (10ms).
2025-09-25 11:48:27.227 +07:00 [DBG] Executing DbCommand [Parameters=[@__roleNames_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleNames_0) WITH ([value] nvarchar(max) '$') AS [r0]
)
2025-09-25 11:48:27.234 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[@__roleNames_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[Name] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleNames_0) WITH ([value] nvarchar(max) '$') AS [r0]
)
2025-09-25 11:48:27.235 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 11:48:27.236 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.237 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-25 11:48:27.237 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.238 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:48:27.250 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 11:48:27.253 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 11:48:27.254 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 11:48:27.257 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 11:48:27.258 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 11:48:27.310 +07:00 [INF] Executed action CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api) in 505.7864ms
2025-09-25 11:48:27.310 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.AccountController.GetMyUserRoles (CapBot.api)'
2025-09-25 11:48:27.313 +07:00 [DBG] Connection id "0HNFRTQLTD5EI" completed keep alive response.
2025-09-25 11:48:27.314 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 11:48:27.315 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:27.315 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 11:48:27.318 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/api/Account/my-user-roles - 200 null application/json; charset=utf-8 822.021ms
2025-09-25 11:48:48.817 +07:00 [DBG] Connection id "0HNFRTQLTD5EJ" received FIN.
2025-09-25 11:48:48.817 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 112
2025-09-25 11:48:48.818 +07:00 [DBG] POST requests are not supported
2025-09-25 11:48:48.818 +07:00 [DBG] POST requests are not supported
2025-09-25 11:48:48.819 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 11:48:48.819 +07:00 [INF] CORS policy execution successful.
2025-09-25 11:48:48.819 +07:00 [DBG] Connection id "0HNFRTQLTD5EJ" disconnecting.
2025-09-25 11:48:48.820 +07:00 [DBG] Connection id "0HNFRTQLTD5EJ" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 11:48:48.821 +07:00 [DBG] Connection id "0HNFRTQLTD5EJ" stopped.
2025-09-25 11:48:48.824 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:48:48.824 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:48:48.824 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:48:48.827 +07:00 [DBG] Successfully validated the token.
2025-09-25 11:48:48.830 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 11:48:48.835 +07:00 [DBG] Authorization was successful.
2025-09-25 11:48:48.836 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:48:48.855 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 11:48:48.855 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 11:48:48.855 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 11:48:48.855 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 11:48:48.856 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 11:48:48.856 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 11:48:48.857 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:48:49.003 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:48:49.010 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:48:49.016 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 11:48:49.018 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:48:49.018 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:48:49.019 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:48:49.019 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 11:48:49.049 +07:00 [DBG] Connection id "0HNFRTQLTD5EI", Request id "0HNFRTQLTD5EI:00000005": started reading request body.
2025-09-25 11:48:49.050 +07:00 [DBG] Connection id "0HNFRTQLTD5EI", Request id "0HNFRTQLTD5EI:00000005": done reading request body.
2025-09-25 11:48:49.070 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 11:48:49.071 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:48:49.071 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:48:49.075 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:48:49.092 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:48:49.096 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:48:49.097 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 11:48:49.098 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:48:49.099 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:48:49.099 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:48:49.100 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:48:49.114 +07:00 [INF] Processing AI suggestion for SubmissionId: 5
2025-09-25 11:48:49.116 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":5,"MaxSuggestions":1000,"UsePrompt":true,"Deadline":"2025-09-25T04:48:41.6580000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 11:48:49.153 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 11:48:49.168 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-25 11:48:49.188 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-25 11:48:49.224 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 11:48:49.228 +07:00 [DBG] Creating DbConnection.
2025-09-25 11:48:49.228 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 11:48:49.228 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:49.229 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:49.229 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:48:49.229 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:48:49.229 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:48:49.229 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:48:49.252 +07:00 [INF] Executed DbCommand (22ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:48:49.262 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:48:49.263 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 10ms reading results.
2025-09-25 11:48:49.263 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:49.263 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:48:49.272 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-25 11:48:49.283 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-25 11:48:49.284 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-25 11:48:49.285 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-25 11:48:49.286 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-25 11:48:49.395 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-25 11:48:49.410 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 11:48:49.430 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:49.430 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:49.431 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:48:49.431 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:48:49.431 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:48:49.431 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:48:49.545 +07:00 [INF] Executed DbCommand (114ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:48:49.562 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:48:49.562 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 16ms reading results.
2025-09-25 11:48:49.563 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:49.563 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:48:51.683 +07:00 [DBG] Reviewer 7: overallSkill=0.5074 fieldScores=Title:0.3974,VN_Title:0,Category:0,Description:0,Objectives:1.0000,Problem:0,Content:1.0000,Context:0
2025-09-25 11:48:52.412 +07:00 [DBG] Reviewer 9: overallSkill=0.4009 fieldScores=Title:0.1622,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:48:53.424 +07:00 [DBG] Reviewer 10: overallSkill=0.4803 fieldScores=Title:0.3627,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:48:54.422 +07:00 [DBG] Reviewer 11: overallSkill=0.5030 fieldScores=Title:0.3244,VN_Title:0,Category:0,Description:1,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:48:57.322 +07:00 [DBG] AI explanation generated (preview): Recommendation 1: hieptmse140293@fpt.edu.vn (Id:7), Overall:73.4%, SkillMatch:50.7%.  Matched "mobile" skills; currently has 2 active assignments.
Recommendation 2: rv3@.com (Id:11), Overall:49.2%, Sk...
2025-09-25 11:48:57.323 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 11:48:57.324 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 11:48:57.324 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 11:48:57.324 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 11:48:57.325 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 11:48:57.366 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 8509.1131ms
2025-09-25 11:48:57.366 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:48:57.366 +07:00 [DBG] Connection id "0HNFRTQLTD5EI" completed keep alive response.
2025-09-25 11:48:57.367 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 11:48:57.367 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:48:57.367 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 11:48:57.367 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 8549.3465ms
2025-09-25 11:51:07.521 +07:00 [DBG] Connection id "0HNFRTQLTD5EI" disconnecting.
2025-09-25 11:51:07.522 +07:00 [DBG] Connection id "0HNFRTQLTD5EI" stopped.
2025-09-25 11:51:07.524 +07:00 [DBG] Connection id "0HNFRTQLTD5EI" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 11:51:36.015 +07:00 [DBG] Connection id "0HNFRTQLTD5EK" accepted.
2025-09-25 11:51:36.015 +07:00 [DBG] Connection id "0HNFRTQLTD5EK" started.
2025-09-25 11:51:36.015 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 11:51:36.016 +07:00 [DBG] POST requests are not supported
2025-09-25 11:51:36.016 +07:00 [DBG] POST requests are not supported
2025-09-25 11:51:36.016 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 11:51:36.016 +07:00 [INF] CORS policy execution successful.
2025-09-25 11:51:36.021 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:51:36.021 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:51:36.021 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:51:36.026 +07:00 [DBG] Successfully validated the token.
2025-09-25 11:51:36.027 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 11:51:36.030 +07:00 [DBG] Authorization was successful.
2025-09-25 11:51:36.031 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:51:36.032 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 11:51:36.032 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 11:51:36.032 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 11:51:36.033 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 11:51:36.033 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 11:51:36.033 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 11:51:36.033 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:51:36.040 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:51:36.041 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:51:36.042 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 11:51:36.043 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:51:36.043 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:51:36.043 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:51:36.043 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 11:51:36.044 +07:00 [DBG] Connection id "0HNFRTQLTD5EK", Request id "0HNFRTQLTD5EK:00000001": started reading request body.
2025-09-25 11:51:36.044 +07:00 [DBG] Connection id "0HNFRTQLTD5EK", Request id "0HNFRTQLTD5EK:00000001": done reading request body.
2025-09-25 11:51:36.044 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 11:51:36.045 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:51:36.045 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:51:36.045 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:51:36.047 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:51:36.047 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:51:36.048 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 11:51:36.049 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:51:36.050 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:51:36.050 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:51:36.050 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:51:36.050 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 11:51:36.052 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":2,"UsePrompt":true,"Deadline":"2025-09-25T04:48:41.6580000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 11:51:36.055 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 11:51:36.056 +07:00 [DBG] Creating DbConnection.
2025-09-25 11:51:36.056 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 11:51:36.056 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:51:36.056 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:51:36.057 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:51:36.057 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:51:36.057 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:51:36.058 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:51:36.068 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:51:36.070 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:51:36.070 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 11:51:36.070 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:51:36.070 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:51:36.072 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:51:36.072 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:51:36.072 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:51:36.072 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:51:36.072 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:51:36.072 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:51:36.150 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:51:36.152 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:51:36.152 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 11:51:36.152 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:51:36.152 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:51:37.521 +07:00 [DBG] Reviewer 7: overallSkill=0.6295 fieldScores=Title:0.6547,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:51:37.522 +07:00 [DBG] Reviewer 9: overallSkill=0.3365 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:51:37.524 +07:00 [DBG] Reviewer 10: overallSkill=0.6005 fieldScores=Title:0.5976,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:51:37.532 +07:00 [DBG] Reviewer 11: overallSkill=0.3226 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:51:39.783 +07:00 [DBG] AI explanation generated (preview): Recommendation 1: rv2@.com (Id:10), Overall: 54.0%, SkillMatch: 60.1%  Rationale: Matched AI skills (AI, ai, artificial intelligence) and has 1 active assignment.
Recommendation 2: rv1@.com (Id:9), Ov...
2025-09-25 11:51:39.784 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 11:51:39.784 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 11:51:39.784 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 11:51:39.785 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 11:51:39.785 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 11:51:39.785 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3752.0684ms
2025-09-25 11:51:39.785 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:51:39.786 +07:00 [DBG] Connection id "0HNFRTQLTD5EK" completed keep alive response.
2025-09-25 11:51:39.786 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 11:51:39.786 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:51:39.786 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 11:51:39.786 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3770.6616ms
2025-09-25 11:53:41.210 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 11:53:41.210 +07:00 [DBG] POST requests are not supported
2025-09-25 11:53:41.210 +07:00 [DBG] POST requests are not supported
2025-09-25 11:53:41.210 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 11:53:41.210 +07:00 [INF] CORS policy execution successful.
2025-09-25 11:53:41.210 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:53:41.210 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:53:41.210 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:53:41.211 +07:00 [DBG] Successfully validated the token.
2025-09-25 11:53:41.211 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 11:53:41.211 +07:00 [DBG] Authorization was successful.
2025-09-25 11:53:41.211 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:53:41.211 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 11:53:41.211 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 11:53:41.212 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 11:53:41.212 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 11:53:41.212 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 11:53:41.212 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 11:53:41.212 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:53:41.228 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:53:41.229 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:53:41.229 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 11:53:41.229 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:53:41.229 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:53:41.229 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:53:41.232 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 11:53:41.232 +07:00 [DBG] Connection id "0HNFRTQLTD5EK", Request id "0HNFRTQLTD5EK:00000002": started reading request body.
2025-09-25 11:53:41.232 +07:00 [DBG] Connection id "0HNFRTQLTD5EK", Request id "0HNFRTQLTD5EK:00000002": done reading request body.
2025-09-25 11:53:41.234 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 11:53:41.234 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:53:41.234 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:53:41.235 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:53:41.235 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:53:41.235 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:53:41.236 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 11:53:41.236 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:53:41.236 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:53:41.236 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:53:41.236 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:53:41.236 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 11:53:41.236 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":3,"UsePrompt":true,"Deadline":"2025-09-25T04:48:41.6580000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 11:53:41.239 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 11:53:41.240 +07:00 [DBG] Creating DbConnection.
2025-09-25 11:53:41.240 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 11:53:41.240 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:53:41.240 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:53:41.240 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:53:41.241 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:53:41.241 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:53:41.243 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:53:41.252 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:53:41.253 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:53:41.253 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 11:53:41.253 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:53:41.254 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:53:41.258 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:53:41.258 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:53:41.259 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:53:41.259 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:53:41.259 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:53:41.259 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:53:41.357 +07:00 [INF] Executed DbCommand (98ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:53:41.360 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:53:41.360 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 2ms reading results.
2025-09-25 11:53:41.360 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:53:41.361 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:53:42.320 +07:00 [DBG] Reviewer 7: overallSkill=0.6295 fieldScores=Title:0.6547,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:53:42.322 +07:00 [DBG] Reviewer 9: overallSkill=0.3365 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:53:42.324 +07:00 [DBG] Reviewer 10: overallSkill=0.6005 fieldScores=Title:0.5976,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:53:42.325 +07:00 [DBG] Reviewer 11: overallSkill=0.3226 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:53:44.953 +07:00 [DBG] AI explanation generated (preview): Recommendation 1: rv2@.com (Id:10), Overall: 54.0%, SkillMatch: 60.1%  Rationale: Matched AI skills ("AI", "ai", "artificial intelligence") and has 1 active assignment.
Recommendation 2: rv1@.com (Id:...
2025-09-25 11:53:44.954 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 11:53:44.954 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 11:53:44.954 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 11:53:44.954 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 11:53:44.954 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 11:53:44.955 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 3743.3023ms
2025-09-25 11:53:44.955 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:53:44.956 +07:00 [DBG] Connection id "0HNFRTQLTD5EK" completed keep alive response.
2025-09-25 11:53:44.956 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 11:53:44.956 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:53:44.956 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 11:53:44.956 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 3746.2217ms
2025-09-25 11:54:05.121 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 11:54:05.121 +07:00 [DBG] POST requests are not supported
2025-09-25 11:54:05.122 +07:00 [DBG] POST requests are not supported
2025-09-25 11:54:05.122 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 11:54:05.122 +07:00 [INF] CORS policy execution successful.
2025-09-25 11:54:05.122 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:54:05.122 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:54:05.122 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:54:05.122 +07:00 [DBG] Successfully validated the token.
2025-09-25 11:54:05.122 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 11:54:05.123 +07:00 [DBG] Authorization was successful.
2025-09-25 11:54:05.123 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:54:05.123 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 11:54:05.123 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 11:54:05.123 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 11:54:05.123 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 11:54:05.123 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 11:54:05.123 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 11:54:05.123 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:54:05.125 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:54:05.125 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:54:05.125 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 11:54:05.125 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:54:05.125 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:54:05.125 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:54:05.125 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 11:54:05.126 +07:00 [DBG] Connection id "0HNFRTQLTD5EK", Request id "0HNFRTQLTD5EK:00000003": started reading request body.
2025-09-25 11:54:05.126 +07:00 [DBG] Connection id "0HNFRTQLTD5EK", Request id "0HNFRTQLTD5EK:00000003": done reading request body.
2025-09-25 11:54:05.126 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 11:54:05.126 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:54:05.126 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:54:05.126 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:54:05.126 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:54:05.126 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:54:05.126 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 11:54:05.126 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:54:05.126 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:54:05.126 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:54:05.126 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:54:05.127 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 11:54:05.127 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-09-25T04:48:41.6580000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 11:54:05.128 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 11:54:05.132 +07:00 [DBG] Creating DbConnection.
2025-09-25 11:54:05.132 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 11:54:05.132 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:05.132 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:05.132 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:54:05.133 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:54:05.133 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:54:05.133 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:54:05.134 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:54:05.135 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:54:05.135 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 11:54:05.135 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:05.135 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:54:05.136 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:05.136 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:05.136 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:54:05.136 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:54:05.136 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:54:05.136 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:54:05.139 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:54:05.140 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:54:05.141 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 11:54:05.141 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:05.141 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:54:06.235 +07:00 [DBG] Reviewer 7: overallSkill=0.6295 fieldScores=Title:0.6547,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:54:06.236 +07:00 [DBG] Reviewer 9: overallSkill=0.3365 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:54:06.237 +07:00 [DBG] Reviewer 10: overallSkill=0.6005 fieldScores=Title:0.5976,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:54:06.238 +07:00 [DBG] Reviewer 11: overallSkill=0.3226 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:54:11.841 +07:00 [WRN] GenerateAIExplanation failed
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 690
2025-09-25 11:54:11.901 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 11:54:11.902 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 11:54:11.902 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 11:54:11.902 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 11:54:11.903 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 11:54:11.905 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6782.2966ms
2025-09-25 11:54:11.906 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:54:11.906 +07:00 [DBG] Connection id "0HNFRTQLTD5EK" completed keep alive response.
2025-09-25 11:54:11.907 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 11:54:11.907 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:11.907 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 11:54:11.907 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 6785.8824ms
2025-09-25 11:54:36.834 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 11:54:36.834 +07:00 [DBG] POST requests are not supported
2025-09-25 11:54:36.834 +07:00 [DBG] POST requests are not supported
2025-09-25 11:54:36.834 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 11:54:36.834 +07:00 [INF] CORS policy execution successful.
2025-09-25 11:54:36.834 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:54:36.834 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:54:36.835 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:54:36.835 +07:00 [DBG] Successfully validated the token.
2025-09-25 11:54:36.835 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 11:54:36.835 +07:00 [DBG] Authorization was successful.
2025-09-25 11:54:36.835 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:54:36.835 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 11:54:36.835 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 11:54:36.835 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 11:54:36.840 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 11:54:36.841 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 11:54:36.841 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 11:54:36.843 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:54:36.844 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:54:36.844 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:54:36.844 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 11:54:36.844 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:54:36.844 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:54:36.844 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:54:36.844 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 11:54:36.844 +07:00 [DBG] Connection id "0HNFRTQLTD5EK", Request id "0HNFRTQLTD5EK:00000004": started reading request body.
2025-09-25 11:54:36.844 +07:00 [DBG] Connection id "0HNFRTQLTD5EK", Request id "0HNFRTQLTD5EK:00000004": done reading request body.
2025-09-25 11:54:36.845 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 11:54:36.845 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:54:36.845 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:54:36.845 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:54:36.845 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:54:36.846 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:54:36.846 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 11:54:36.846 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:54:36.846 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:54:36.846 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:54:36.846 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:54:36.846 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 11:54:36.846 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-09-25T04:48:41.6580000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 11:54:36.847 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 11:54:36.848 +07:00 [DBG] Creating DbConnection.
2025-09-25 11:54:36.848 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 11:54:36.848 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:36.848 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:36.849 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:54:36.849 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:54:36.849 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:54:36.849 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:54:36.857 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:54:36.858 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:54:36.858 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 11:54:36.859 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:36.860 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:54:36.862 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:36.862 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:36.862 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:54:36.862 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:54:36.863 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:54:36.863 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:54:36.951 +07:00 [INF] Executed DbCommand (87ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:54:36.952 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:54:36.952 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 11:54:36.952 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:36.953 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:54:37.646 +07:00 [DBG] Reviewer 7: overallSkill=0.6295 fieldScores=Title:0.6547,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:54:37.647 +07:00 [DBG] Reviewer 9: overallSkill=0.3365 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:54:37.649 +07:00 [DBG] Reviewer 10: overallSkill=0.6005 fieldScores=Title:0.5976,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:54:37.650 +07:00 [DBG] Reviewer 11: overallSkill=0.3226 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:54:43.362 +07:00 [WRN] GenerateAIExplanation failed
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 690
2025-09-25 11:54:43.364 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 11:54:43.364 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 11:54:43.364 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 11:54:43.364 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 11:54:43.364 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 11:54:43.364 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6523.0357ms
2025-09-25 11:54:43.364 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:54:43.364 +07:00 [DBG] Connection id "0HNFRTQLTD5EK" completed keep alive response.
2025-09-25 11:54:43.364 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 11:54:43.364 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:54:43.364 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 11:54:43.365 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 6530.442ms
2025-09-25 11:55:02.749 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 11:55:02.749 +07:00 [DBG] POST requests are not supported
2025-09-25 11:55:02.749 +07:00 [DBG] POST requests are not supported
2025-09-25 11:55:02.749 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 11:55:02.749 +07:00 [INF] CORS policy execution successful.
2025-09-25 11:55:02.749 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:55:02.749 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 11:55:02.749 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:55:02.750 +07:00 [DBG] Successfully validated the token.
2025-09-25 11:55:02.750 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 11:55:02.750 +07:00 [DBG] Authorization was successful.
2025-09-25 11:55:02.750 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:55:02.750 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 11:55:02.752 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 11:55:02.753 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 11:55:02.753 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 11:55:02.753 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 11:55:02.753 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 11:55:02.753 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:55:02.754 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 11:55:02.754 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:55:02.755 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 11:55:02.755 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:55:02.755 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:55:02.755 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 11:55:02.755 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 11:55:02.755 +07:00 [DBG] Connection id "0HNFRTQLTD5EK", Request id "0HNFRTQLTD5EK:00000005": started reading request body.
2025-09-25 11:55:02.755 +07:00 [DBG] Connection id "0HNFRTQLTD5EK", Request id "0HNFRTQLTD5EK:00000005": done reading request body.
2025-09-25 11:55:02.755 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 11:55:02.755 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:55:02.755 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:55:02.755 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 11:55:02.755 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 11:55:02.755 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:55:02.755 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 11:55:02.756 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:55:02.756 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:55:02.756 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 11:55:02.756 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 11:55:02.756 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 11:55:02.756 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-09-25T04:48:41.6580000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 11:55:02.758 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 11:55:02.758 +07:00 [DBG] Creating DbConnection.
2025-09-25 11:55:02.759 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 11:55:02.759 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:55:02.759 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:55:02.759 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:55:02.759 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:55:02.759 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:55:02.759 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:55:02.768 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 11:55:02.768 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:55:02.768 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 11:55:02.768 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:55:02.768 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:55:02.769 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:55:02.769 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:55:02.769 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 11:55:02.769 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:55:02.769 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 11:55:02.769 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:55:02.846 +07:00 [INF] Executed DbCommand (77ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 11:55:02.847 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 11:55:02.847 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 11:55:02.847 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:55:02.847 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 11:55:04.240 +07:00 [DBG] Reviewer 7: overallSkill=0.6295 fieldScores=Title:0.6547,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:55:04.242 +07:00 [DBG] Reviewer 9: overallSkill=0.3365 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:55:04.244 +07:00 [DBG] Reviewer 10: overallSkill=0.6005 fieldScores=Title:0.5976,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:55:04.245 +07:00 [DBG] Reviewer 11: overallSkill=0.3226 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 11:55:10.048 +07:00 [WRN] GenerateAIExplanation failed
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 690
2025-09-25 11:55:10.050 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 11:55:10.050 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 11:55:10.050 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 11:55:10.050 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 11:55:10.050 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 11:55:10.051 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 7297.623ms
2025-09-25 11:55:10.051 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 11:55:10.051 +07:00 [DBG] Connection id "0HNFRTQLTD5EK" completed keep alive response.
2025-09-25 11:55:10.051 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 11:55:10.051 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 11:55:10.056 +07:00 [DBG] Disposed connection to database '' on server '' (4ms).
2025-09-25 11:55:10.056 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 7307.0653ms
2025-09-25 11:57:21.244 +07:00 [DBG] Connection id "0HNFRTQLTD5EK" disconnecting.
2025-09-25 11:57:21.244 +07:00 [DBG] Connection id "0HNFRTQLTD5EK" stopped.
2025-09-25 11:57:21.245 +07:00 [DBG] Connection id "0HNFRTQLTD5EK" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 12:05:58.980 +07:00 [INF] Application is shutting down...
2025-09-25 12:05:58.982 +07:00 [DBG] Hosting stopping
2025-09-25 12:05:58.992 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 12:05:59.029 +07:00 [DBG] Hosting stopped
2025-09-25 12:07:04.563 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 12:07:04.632 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 12:07:04.804 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.818 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.830 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.831 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.832 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.833 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.972 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.973 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.986 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.986 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.986 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.987 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.991 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:04.991 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:07:05.020 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 12:07:05.020 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 12:07:05.020 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 12:07:05.021 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 12:07:05.022 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 12:07:05.022 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 12:07:05.121 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:07:05.122 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:07:05.122 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:07:05.122 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:07:05.122 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:07:05.122 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:07:05.123 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:07:05.123 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:07:05.123 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:07:05.123 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:07:05.124 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:07:05.226 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 12:07:05.263 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 12:07:05.358 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 12:07:05.381 +07:00 [DBG] Creating DbConnection.
2025-09-25 12:07:05.391 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-25 12:07:05.394 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.526 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.528 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:05.532 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-25 12:07:05.537 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (8ms).
2025-09-25 12:07:05.542 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:07:05.580 +07:00 [INF] Executed DbCommand (38ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:07:05.605 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:07:05.619 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.624 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 40ms reading results.
2025-09-25 12:07:05.625 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.629 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-25 12:07:05.631 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.631 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.631 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:05.632 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.632 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.632 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:07:05.636 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:07:05.637 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:07:05.637 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.637 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:07:05.637 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.637 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:05.637 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.638 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.638 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:05.638 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.638 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.638 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:07:05.639 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:07:05.639 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:07:05.639 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.639 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:07:05.639 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.639 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:05.639 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.640 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.640 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:05.640 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.640 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.640 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:07:05.641 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:07:05.641 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:07:05.641 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.641 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:07:05.641 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.642 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:05.646 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 12:07:05.651 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 12:07:05.652 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.652 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.652 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:05.652 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.653 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.653 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:07:05.659 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:07:05.676 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:07:05.696 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.697 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-25 12:07:05.697 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.697 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:05.699 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 12:07:05.701 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.701 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.701 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:05.701 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.701 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.701 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:07:05.702 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:07:05.702 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:07:05.702 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.702 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:07:05.702 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.702 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:05.703 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 12:07:05.703 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.703 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.703 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:05.703 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.703 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.703 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:07:05.704 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:07:05.704 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:07:05.705 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.705 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:07:05.705 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.705 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:05.705 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.706 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.706 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:05.706 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.706 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:05.706 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:07:05.706 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:07:05.707 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:07:05.707 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.707 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:07:05.707 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.707 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:05.707 +07:00 [INF] Data seeding completed successfully
2025-09-25 12:07:05.708 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 12:07:05.709 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:05.709 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 12:07:05.718 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 12:07:05.821 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 12:07:05.893 +07:00 [DBG] Hosting starting
2025-09-25 12:07:05.899 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 12:07:05.900 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 12:07:05.900 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 12:07:05.902 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 12:07:05.904 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 12:07:05.905 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 12:07:05.909 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 12:07:05.910 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 12:07:05.911 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 12:07:05.912 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 12:07:05.913 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 12:07:05.914 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 12:07:05.915 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 12:07:05.915 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 12:07:05.918 +07:00 [DBG] Middleware loaded
2025-09-25 12:07:05.918 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 12:07:05.919 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 12:07:05.939 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 12:07:05.947 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 12:07:05.947 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 12:07:05.947 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 12:07:05.947 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 12:07:05.947 +07:00 [INF] Hosting environment: Development
2025-09-25 12:07:05.947 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 12:07:05.948 +07:00 [DBG] Hosting started
2025-09-25 12:07:06.011 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" accepted.
2025-09-25 12:07:06.012 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" started.
2025-09-25 12:07:06.039 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 12:07:06.045 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 12:07:06.076 +07:00 [DBG] Connection id "0HNFRU5FJTG6J" accepted.
2025-09-25 12:07:06.077 +07:00 [DBG] Connection id "0HNFRU5FJTG6J" started.
2025-09-25 12:07:06.160 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 12:07:06.170 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 12:07:06.171 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" completed keep alive response.
2025-09-25 12:07:06.175 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 135.8175ms
2025-09-25 12:07:06.180 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 12:07:06.183 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 12:07:06.183 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" completed keep alive response.
2025-09-25 12:07:06.184 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 3.8546ms
2025-09-25 12:07:06.227 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 12:07:06.397 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" completed keep alive response.
2025-09-25 12:07:06.398 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 171.0006ms
2025-09-25 12:07:16.690 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 12:07:16.695 +07:00 [DBG] POST requests are not supported
2025-09-25 12:07:16.697 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 12:07:16.697 +07:00 [DBG] POST requests are not supported
2025-09-25 12:07:16.700 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 12:07:16.700 +07:00 [INF] CORS policy execution successful.
2025-09-25 12:07:16.783 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:07:16.785 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:07:16.787 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:16.919 +07:00 [DBG] Successfully validated the token.
2025-09-25 12:07:16.920 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 12:07:16.928 +07:00 [DBG] Authorization was successful.
2025-09-25 12:07:16.952 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:16.991 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 12:07:16.992 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 12:07:16.993 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 12:07:16.995 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 12:07:16.995 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 12:07:16.996 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 12:07:17.000 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:07:17.162 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:07:17.169 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:07:17.175 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 12:07:17.179 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:17.180 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:17.181 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:17.181 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 12:07:17.203 +07:00 [DBG] Connection id "0HNFRU5FJTG6I", Request id "0HNFRU5FJTG6I:00000004": started reading request body.
2025-09-25 12:07:17.203 +07:00 [DBG] Connection id "0HNFRU5FJTG6I", Request id "0HNFRU5FJTG6I:00000004": done reading request body.
2025-09-25 12:07:17.219 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 12:07:17.221 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:17.222 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:17.222 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:07:17.234 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:17.237 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:07:17.238 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 12:07:17.240 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:17.240 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:17.240 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:07:17.242 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:17.250 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 12:07:17.252 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-09-25T04:48:41.6580000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 12:07:17.363 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 12:07:17.377 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-25 12:07:17.401 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-25 12:07:17.477 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 12:07:17.486 +07:00 [DBG] Creating DbConnection.
2025-09-25 12:07:17.487 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 12:07:17.487 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:17.487 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:17.488 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:17.488 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:17.488 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:17.490 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:07:17.506 +07:00 [INF] Executed DbCommand (17ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:07:17.514 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:17.514 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 7ms reading results.
2025-09-25 12:07:17.514 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:17.515 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:17.526 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-25 12:07:17.542 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-25 12:07:17.542 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-25 12:07:17.543 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-25 12:07:17.543 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-25 12:07:17.665 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-25 12:07:17.686 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 12:07:17.714 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:17.714 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:17.715 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:17.715 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:17.716 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (1ms).
2025-09-25 12:07:17.717 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:07:17.813 +07:00 [INF] Executed DbCommand (96ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:07:17.836 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:17.836 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 22ms reading results.
2025-09-25 12:07:17.837 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:17.838 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:19.800 +07:00 [DBG] Reviewer 7: overallSkill=0.6295 fieldScores=Title:0.6547,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:21.120 +07:00 [DBG] Reviewer 9: overallSkill=0.3365 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:22.099 +07:00 [DBG] Reviewer 10: overallSkill=0.6005 fieldScores=Title:0.5976,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:22.336 +07:00 [DBG] Reviewer embedding failed for 11
System.Exception: Failed to generate embedding for input text. Error: Gemini Embedding API error: BadRequest {
  "error": {
    "code": 400,
    "message": "API key expired. Please renew the API key.",
    "status": "INVALID_ARGUMENT",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "API_KEY_INVALID",
        "domain": "googleapis.com",
        "metadata": {
          "service": "generativelanguage.googleapis.com"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "API key expired. Please renew the API key."
      }
    ]
  }
}

See inner exception for details.
 ---> System.Exception: Gemini Embedding API error: BadRequest {
  "error": {
    "code": 400,
    "message": "API key expired. Please renew the API key.",
    "status": "INVALID_ARGUMENT",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "API_KEY_INVALID",
        "domain": "googleapis.com",
        "metadata": {
          "service": "generativelanguage.googleapis.com"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "API key expired. Please renew the API key."
      }
    ]
  }
}

   at App.BLL.Services.GeminiAIService.GetEmbeddingAsync(String text) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 75
   --- End of inner exception stack trace ---
   at App.BLL.Services.GeminiAIService.GetEmbeddingAsync(String text) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 178
   at App.BLL.Implementations.ReviewerSuggestionService.CalculateReviewerScores(List`1 reviewers, Dictionary`2 topicFields, String submissionContext, List`1 skipMessages, Nullable`1 semesterId) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 328
2025-09-25 12:07:22.345 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:25.940 +07:00 [WRN] GenerateAIExplanation failed
System.Exception: Gemini Prompt API error: BadRequest
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 211
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 690
2025-09-25 12:07:25.963 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 12:07:25.965 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 12:07:25.967 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 12:07:25.968 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 12:07:25.970 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 12:07:26.063 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 9061.8656ms
2025-09-25 12:07:26.063 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:26.066 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" completed keep alive response.
2025-09-25 12:07:26.067 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 12:07:26.067 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:26.067 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 12:07:26.068 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 9378.6411ms
2025-09-25 12:07:28.857 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 12:07:28.857 +07:00 [DBG] POST requests are not supported
2025-09-25 12:07:28.857 +07:00 [DBG] POST requests are not supported
2025-09-25 12:07:28.858 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 12:07:28.858 +07:00 [INF] CORS policy execution successful.
2025-09-25 12:07:28.871 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:07:28.872 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:07:28.873 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:28.881 +07:00 [DBG] Successfully validated the token.
2025-09-25 12:07:28.881 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 12:07:28.884 +07:00 [DBG] Authorization was successful.
2025-09-25 12:07:28.885 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:28.886 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 12:07:28.888 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 12:07:28.889 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 12:07:28.889 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 12:07:28.889 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 12:07:28.890 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 12:07:28.890 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:07:28.893 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:07:28.894 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:07:28.895 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 12:07:28.895 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:28.895 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:28.896 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:28.896 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 12:07:28.896 +07:00 [DBG] Connection id "0HNFRU5FJTG6I", Request id "0HNFRU5FJTG6I:00000005": started reading request body.
2025-09-25 12:07:28.896 +07:00 [DBG] Connection id "0HNFRU5FJTG6I", Request id "0HNFRU5FJTG6I:00000005": done reading request body.
2025-09-25 12:07:28.897 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 12:07:28.897 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:28.897 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:28.897 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:07:28.901 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:28.902 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:07:28.902 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 12:07:28.902 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:28.902 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:28.902 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:07:28.903 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:28.903 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 12:07:28.904 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-09-25T04:48:41.6580000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 12:07:28.926 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 12:07:28.931 +07:00 [DBG] Creating DbConnection.
2025-09-25 12:07:28.931 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 12:07:28.931 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:28.931 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:28.932 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:28.932 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:28.932 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:28.932 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:07:28.935 +07:00 [INF] Executed DbCommand (3ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:07:28.938 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:28.938 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 12:07:28.938 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:28.939 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:28.941 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:28.942 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:28.943 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:28.943 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:28.943 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:28.943 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:07:28.945 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:07:28.951 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:28.951 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 4ms reading results.
2025-09-25 12:07:28.951 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:28.951 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:29.690 +07:00 [DBG] Reviewer 7: overallSkill=0.6295 fieldScores=Title:0.6547,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:29.692 +07:00 [DBG] Reviewer 9: overallSkill=0.3365 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:29.693 +07:00 [DBG] Reviewer 10: overallSkill=0.6005 fieldScores=Title:0.5976,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:30.708 +07:00 [DBG] Reviewer 11: overallSkill=0.3226 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:30.936 +07:00 [WRN] GenerateAIExplanation failed
System.Exception: Gemini Prompt API error: BadRequest
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 211
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 690
2025-09-25 12:07:30.940 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 12:07:30.941 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 12:07:30.941 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 12:07:30.942 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 12:07:30.942 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 12:07:30.943 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 2053.4192ms
2025-09-25 12:07:30.949 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:30.950 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" completed keep alive response.
2025-09-25 12:07:30.951 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 12:07:30.951 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:30.953 +07:00 [DBG] Disposed connection to database '' on server '' (2ms).
2025-09-25 12:07:30.954 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 2097.3827ms
2025-09-25 12:07:41.614 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 12:07:41.614 +07:00 [DBG] POST requests are not supported
2025-09-25 12:07:41.614 +07:00 [DBG] POST requests are not supported
2025-09-25 12:07:41.615 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 12:07:41.615 +07:00 [INF] CORS policy execution successful.
2025-09-25 12:07:41.619 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:07:41.619 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:07:41.619 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:41.626 +07:00 [DBG] Successfully validated the token.
2025-09-25 12:07:41.626 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 12:07:41.627 +07:00 [DBG] Authorization was successful.
2025-09-25 12:07:41.629 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:41.630 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 12:07:41.630 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 12:07:41.630 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 12:07:41.630 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 12:07:41.630 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 12:07:41.630 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 12:07:41.630 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:07:41.641 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:07:41.644 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:07:41.645 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 12:07:41.645 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:41.646 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:41.646 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:41.647 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 12:07:41.647 +07:00 [DBG] Connection id "0HNFRU5FJTG6I", Request id "0HNFRU5FJTG6I:00000006": started reading request body.
2025-09-25 12:07:41.647 +07:00 [DBG] Connection id "0HNFRU5FJTG6I", Request id "0HNFRU5FJTG6I:00000006": done reading request body.
2025-09-25 12:07:41.648 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 12:07:41.648 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:41.648 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:41.648 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:07:41.648 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:41.648 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:07:41.649 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 12:07:41.649 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:41.650 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:41.651 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:07:41.651 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:41.652 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 12:07:41.652 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-09-25T04:48:41.6580000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 12:07:41.658 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 12:07:41.660 +07:00 [DBG] Creating DbConnection.
2025-09-25 12:07:41.660 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 12:07:41.660 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:41.661 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:41.661 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:41.661 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:41.664 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (2ms).
2025-09-25 12:07:41.665 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:07:41.677 +07:00 [INF] Executed DbCommand (13ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:07:41.678 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:41.678 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:07:41.678 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:41.678 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:41.681 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:41.681 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:41.681 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:41.681 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:41.681 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:41.682 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:07:41.760 +07:00 [INF] Executed DbCommand (78ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:07:41.762 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:41.762 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 1ms reading results.
2025-09-25 12:07:41.762 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:41.762 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:42.460 +07:00 [DBG] Reviewer 7: overallSkill=0.6295 fieldScores=Title:0.6547,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:42.461 +07:00 [DBG] Reviewer 9: overallSkill=0.3365 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:42.463 +07:00 [DBG] Reviewer 10: overallSkill=0.6005 fieldScores=Title:0.5976,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:42.464 +07:00 [DBG] Reviewer 11: overallSkill=0.3226 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:42.854 +07:00 [WRN] GenerateAIExplanation failed
System.Exception: Gemini Prompt API error: BadRequest
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 211
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 690
2025-09-25 12:07:42.857 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 12:07:42.857 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 12:07:42.857 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 12:07:42.858 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 12:07:42.858 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 12:07:42.861 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1231.3416ms
2025-09-25 12:07:42.862 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:42.862 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" completed keep alive response.
2025-09-25 12:07:42.862 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 12:07:42.862 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:42.862 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 12:07:42.862 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1248.1263ms
2025-09-25 12:07:47.471 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 12:07:47.472 +07:00 [DBG] POST requests are not supported
2025-09-25 12:07:47.472 +07:00 [DBG] POST requests are not supported
2025-09-25 12:07:47.472 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 12:07:47.472 +07:00 [INF] CORS policy execution successful.
2025-09-25 12:07:47.472 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:07:47.472 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:07:47.472 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:47.472 +07:00 [DBG] Successfully validated the token.
2025-09-25 12:07:47.472 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 12:07:47.475 +07:00 [DBG] Authorization was successful.
2025-09-25 12:07:47.475 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:47.475 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 12:07:47.476 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 12:07:47.476 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 12:07:47.476 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 12:07:47.476 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 12:07:47.476 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 12:07:47.476 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:07:47.476 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:07:47.476 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:07:47.476 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 12:07:47.476 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:47.477 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:47.477 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:07:47.477 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 12:07:47.477 +07:00 [DBG] Connection id "0HNFRU5FJTG6I", Request id "0HNFRU5FJTG6I:00000007": started reading request body.
2025-09-25 12:07:47.477 +07:00 [DBG] Connection id "0HNFRU5FJTG6I", Request id "0HNFRU5FJTG6I:00000007": done reading request body.
2025-09-25 12:07:47.477 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 12:07:47.477 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:47.477 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:47.477 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:07:47.477 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:07:47.477 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:07:47.478 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 12:07:47.479 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:47.479 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:47.479 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:07:47.479 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:07:47.479 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 12:07:47.479 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-09-25T04:48:41.6580000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 12:07:47.482 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 12:07:47.483 +07:00 [DBG] Creating DbConnection.
2025-09-25 12:07:47.484 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 12:07:47.484 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:47.484 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:47.485 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:47.485 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:47.485 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:47.486 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:07:47.488 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:07:47.489 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:47.489 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:07:47.489 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:47.491 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (1ms).
2025-09-25 12:07:47.491 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:47.492 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:47.492 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:07:47.493 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:47.493 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:07:47.493 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:07:47.498 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:07:47.500 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:07:47.500 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:07:47.500 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:47.500 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:07:48.571 +07:00 [DBG] Reviewer 7: overallSkill=0.6295 fieldScores=Title:0.6547,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:48.572 +07:00 [DBG] Reviewer 9: overallSkill=0.3365 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:48.573 +07:00 [DBG] Reviewer 10: overallSkill=0.6005 fieldScores=Title:0.5976,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:48.575 +07:00 [DBG] Reviewer 11: overallSkill=0.3226 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:07:54.258 +07:00 [WRN] GenerateAIExplanation failed
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 690
2025-09-25 12:07:54.260 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 12:07:54.260 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 12:07:54.260 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 12:07:54.260 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 12:07:54.260 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 12:07:54.261 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 6785.1299ms
2025-09-25 12:07:54.261 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:07:54.262 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" completed keep alive response.
2025-09-25 12:07:54.262 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 12:07:54.262 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:07:54.262 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 12:07:54.262 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 6790.8956ms
2025-09-25 12:09:17.899 +07:00 [DBG] Connection id "0HNFRU5FJTG6J" disconnecting.
2025-09-25 12:09:17.900 +07:00 [DBG] Connection id "0HNFRU5FJTG6J" stopped.
2025-09-25 12:09:17.905 +07:00 [DBG] Connection id "0HNFRU5FJTG6J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 12:10:05.201 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" disconnecting.
2025-09-25 12:10:05.201 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" stopped.
2025-09-25 12:10:05.202 +07:00 [DBG] Connection id "0HNFRU5FJTG6I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 12:21:53.891 +07:00 [DBG] Connection id "0HNFRU5FJTG6K" accepted.
2025-09-25 12:21:53.891 +07:00 [DBG] Connection id "0HNFRU5FJTG6K" started.
2025-09-25 12:21:53.892 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 12:21:53.892 +07:00 [DBG] POST requests are not supported
2025-09-25 12:21:53.892 +07:00 [DBG] POST requests are not supported
2025-09-25 12:21:53.892 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 12:21:53.892 +07:00 [INF] CORS policy execution successful.
2025-09-25 12:21:53.892 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:21:53.892 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:21:53.892 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:21:53.893 +07:00 [DBG] Successfully validated the token.
2025-09-25 12:21:53.893 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 12:21:53.893 +07:00 [DBG] Authorization was successful.
2025-09-25 12:21:53.893 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:21:53.893 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 12:21:53.894 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 12:21:53.894 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 12:21:53.894 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 12:21:53.894 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 12:21:53.894 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 12:21:53.894 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:21:53.894 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:21:53.894 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:21:53.894 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 12:21:53.895 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:21:53.895 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:21:53.895 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:21:53.895 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 12:21:53.895 +07:00 [DBG] Connection id "0HNFRU5FJTG6K", Request id "0HNFRU5FJTG6K:00000001": started reading request body.
2025-09-25 12:21:53.895 +07:00 [DBG] Connection id "0HNFRU5FJTG6K", Request id "0HNFRU5FJTG6K:00000001": done reading request body.
2025-09-25 12:21:53.895 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 12:21:53.895 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:21:53.895 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:21:53.895 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:21:53.895 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:21:53.896 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:21:53.896 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 12:21:53.896 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:21:53.896 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:21:53.896 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:21:53.897 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:21:53.897 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 12:21:53.897 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-09-25T04:48:41.6580000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 12:21:53.899 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 12:21:53.900 +07:00 [DBG] Creating DbConnection.
2025-09-25 12:21:53.901 +07:00 [DBG] Created DbConnection. (0ms).
2025-09-25 12:21:53.901 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:21:53.965 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:21:53.966 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:21:53.966 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:21:53.967 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:21:53.967 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:21:53.999 +07:00 [INF] Executed DbCommand (32ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:21:53.999 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:21:53.999 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:21:54.000 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:21:54.000 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:21:54.005 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:21:54.006 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:21:54.006 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:21:54.006 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:21:54.007 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:21:54.007 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:21:54.101 +07:00 [INF] Executed DbCommand (94ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:21:54.102 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:21:54.102 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:21:54.103 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:21:54.103 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:21:54.481 +07:00 [DBG] Topic embedding failed - falling back to TF-only similarity
System.Exception: Failed to generate embedding for input text. Error: Gemini Embedding API error: BadRequest {
  "error": {
    "code": 400,
    "message": "API key expired. Please renew the API key.",
    "status": "INVALID_ARGUMENT",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "API_KEY_INVALID",
        "domain": "googleapis.com",
        "metadata": {
          "service": "generativelanguage.googleapis.com"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "API key expired. Please renew the API key."
      }
    ]
  }
}

See inner exception for details.
 ---> System.Exception: Gemini Embedding API error: BadRequest {
  "error": {
    "code": 400,
    "message": "API key expired. Please renew the API key.",
    "status": "INVALID_ARGUMENT",
    "details": [
      {
        "@type": "type.googleapis.com/google.rpc.ErrorInfo",
        "reason": "API_KEY_INVALID",
        "domain": "googleapis.com",
        "metadata": {
          "service": "generativelanguage.googleapis.com"
        }
      },
      {
        "@type": "type.googleapis.com/google.rpc.LocalizedMessage",
        "locale": "en-US",
        "message": "API key expired. Please renew the API key."
      }
    ]
  }
}

   at App.BLL.Services.GeminiAIService.GetEmbeddingAsync(String text) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 75
   --- End of inner exception stack trace ---
   at App.BLL.Services.GeminiAIService.GetEmbeddingAsync(String text) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 178
   at App.BLL.Implementations.ReviewerSuggestionService.CalculateReviewerScores(List`1 reviewers, Dictionary`2 topicFields, String submissionContext, List`1 skipMessages, Nullable`1 semesterId) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 228
2025-09-25 12:21:54.482 +07:00 [DBG] Reviewer 7: overallSkill=0.5941 fieldScores=Title:0.6547,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:21:54.497 +07:00 [DBG] Reviewer 9: overallSkill=0 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:21:54.497 +07:00 [DBG] Reviewer 10: overallSkill=0.5423 fieldScores=Title:0.5976,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:21:54.497 +07:00 [DBG] Reviewer 11: overallSkill=0 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:21:55.352 +07:00 [WRN] GenerateAIExplanation failed
System.Exception: Gemini Prompt API error: BadRequest
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 211
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 690
2025-09-25 12:21:55.354 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 12:21:55.354 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 12:21:55.354 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 12:21:55.354 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 12:21:55.355 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 12:21:55.355 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 1461.1968ms
2025-09-25 12:21:55.355 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:21:55.356 +07:00 [DBG] Connection id "0HNFRU5FJTG6K" completed keep alive response.
2025-09-25 12:21:55.356 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 12:21:55.356 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:21:55.357 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 12:21:55.357 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 1465.5685ms
2025-09-25 12:24:05.724 +07:00 [DBG] Connection id "0HNFRU5FJTG6K" disconnecting.
2025-09-25 12:24:05.724 +07:00 [DBG] Connection id "0HNFRU5FJTG6K" stopped.
2025-09-25 12:24:05.725 +07:00 [DBG] Connection id "0HNFRU5FJTG6K" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 12:32:43.233 +07:00 [INF] Application is shutting down...
2025-09-25 12:32:43.236 +07:00 [DBG] Hosting stopping
2025-09-25 12:32:43.243 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 12:32:43.261 +07:00 [DBG] Hosting stopped
2025-09-25 12:33:36.025 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-09-25 12:33:36.078 +07:00 [INF] User profile is available. Using 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-09-25 12:33:36.209 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.222 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.231 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.233 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.233 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.234 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.357 +07:00 [DBG] No relationship from 'ReviewerAssignment' to 'User' has been configured by convention because there are multiple properties on one entity type - {'AssignedByUser', 'Reviewer'} that could be matched with the properties on the other entity type - {'ReviewerAssignments'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.358 +07:00 [DBG] No relationship from 'User' to 'ReviewerAssignment' has been configured by convention because there are multiple properties on one entity type - {'ReviewerAssignments'} that could be matched with the properties on the other entity type - {'AssignedByUser', 'Reviewer'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.370 +07:00 [DBG] No relationship from 'WorkflowTransition' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromTransitions', 'ToTransitions'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.371 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.371 +07:00 [DBG] No relationship from 'WorkflowState' to 'WorkflowTransition' has been configured by convention because there are multiple properties on one entity type - {'FromTransitions', 'ToTransitions'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.373 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.377 +07:00 [DBG] No relationship from 'SubmissionWorkflowLog' to 'WorkflowState' has been configured by convention because there are multiple properties on one entity type - {'FromState', 'ToState'} that could be matched with the properties on the other entity type - {'FromStateLogs', 'ToStateLogs'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.378 +07:00 [DBG] No relationship from 'WorkflowState' to 'SubmissionWorkflowLog' has been configured by convention because there are multiple properties on one entity type - {'FromStateLogs', 'ToStateLogs'} that could be matched with the properties on the other entity type - {'FromState', 'ToState'}. This message can be disregarded if explicit configuration has been specified in 'OnModelCreating'.
2025-09-25 12:33:36.407 +07:00 [DBG] The index {'LecturerId'} was not created on entity type 'LecturerSkill' as the properties are already covered by the index {'LecturerId', 'SkillTag'}.
2025-09-25 12:33:36.408 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Phase' as the properties are already covered by the index {'SemesterId', 'PhaseTypeId'}.
2025-09-25 12:33:36.408 +07:00 [DBG] The index {'AssignmentId'} was not created on entity type 'Review' as the properties are already covered by the index {'AssignmentId', 'Status'}.
2025-09-25 12:33:36.408 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewComment' as the properties are already covered by the index {'ReviewId', 'SectionName'}.
2025-09-25 12:33:36.408 +07:00 [DBG] The index {'ReviewId'} was not created on entity type 'ReviewCriteriaScore' as the properties are already covered by the index {'ReviewId', 'CriteriaId'}.
2025-09-25 12:33:36.408 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'ReviewerId', 'Status'}.
2025-09-25 12:33:36.409 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'ReviewerAssignment' as the properties are already covered by the index {'SubmissionId', 'ReviewerId'}.
2025-09-25 12:33:36.409 +07:00 [DBG] The index {'ReviewerId'} was not created on entity type 'ReviewerPerformance' as the properties are already covered by the index {'ReviewerId', 'SemesterId'}.
2025-09-25 12:33:36.409 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status'}.
2025-09-25 12:33:36.409 +07:00 [DBG] The index {'PhaseId'} was not created on entity type 'Submission' as the properties are already covered by the index {'PhaseId', 'Status', 'SubmittedAt'}.
2025-09-25 12:33:36.410 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'Submission' as the properties are already covered by the index {'TopicId', 'PhaseId', 'SubmissionRound'}.
2025-09-25 12:33:36.410 +07:00 [DBG] The index {'SubmissionId'} was not created on entity type 'SubmissionWorkflowLog' as the properties are already covered by the index {'SubmissionId', 'CreatedAt'}.
2025-09-25 12:33:36.411 +07:00 [DBG] The index {'UserId'} was not created on entity type 'SystemNotification' as the properties are already covered by the index {'UserId', 'IsRead', 'CreatedAt'}.
2025-09-25 12:33:36.411 +07:00 [DBG] The index {'SemesterId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SemesterId', 'IsApproved'}.
2025-09-25 12:33:36.411 +07:00 [DBG] The index {'SupervisorId'} was not created on entity type 'Topic' as the properties are already covered by the index {'SupervisorId', 'SemesterId'}.
2025-09-25 12:33:36.411 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'Status'}.
2025-09-25 12:33:36.411 +07:00 [DBG] The index {'TopicId'} was not created on entity type 'TopicVersion' as the properties are already covered by the index {'TopicId', 'VersionNumber'}.
2025-09-25 12:33:36.411 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserRole' as the properties are already covered by the index {'UserId', 'RoleId'}.
2025-09-25 12:33:36.411 +07:00 [DBG] The index {'UserId'} was not created on entity type 'UserToken' as the properties are already covered by the index {'UserId', 'LoginProvider', 'Name'}.
2025-09-25 12:33:36.502 +07:00 [WRN] The 'ProficiencyLevels' property 'ProficiencyLevel' on entity type 'LecturerSkill' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ProficiencyLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:33:36.502 +07:00 [WRN] The 'ReviewRecommendations' property 'Recommendation' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewRecommendations' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:33:36.502 +07:00 [WRN] The 'ReviewStatus' property 'Status' on entity type 'Review' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'ReviewStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:33:36.502 +07:00 [WRN] The 'CommentTypes' property 'CommentType' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'CommentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:33:36.502 +07:00 [WRN] The 'PriorityLevels' property 'Priority' on entity type 'ReviewComment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'PriorityLevels' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:33:36.502 +07:00 [WRN] The 'AssignmentTypes' property 'AssignmentType' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:33:36.502 +07:00 [WRN] The 'AssignmentStatus' property 'Status' on entity type 'ReviewerAssignment' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AssignmentStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:33:36.502 +07:00 [WRN] The 'AiCheckStatus' property 'AiCheckStatus' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'AiCheckStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:33:36.503 +07:00 [WRN] The 'SubmissionStatus' property 'Status' on entity type 'Submission' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'SubmissionStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:33:36.503 +07:00 [WRN] The 'NotificationTypes' property 'Type' on entity type 'SystemNotification' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'NotificationTypes' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:33:36.503 +07:00 [WRN] The 'TopicStatus' property 'Status' on entity type 'TopicVersion' is configured with a database-generated default, but has no configured sentinel value. The database-generated default will always be used for inserts when the property has the value '0', since this is the CLR default for the 'TopicStatus' type. Consider using a nullable type, using a nullable backing field, or setting the sentinel value for the property to ensure the database default is used when, and only when, appropriate. See https://aka.ms/efcore-docs-default-values for more information.
2025-09-25 12:33:36.594 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 12:33:36.631 +07:00 [DBG] Compiling query expression: 
'DbSet<Role>()
    .FirstOrDefault(r => r.NormalizedName == __normalizedName_0)'
2025-09-25 12:33:36.722 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Role>(
    asyncEnumerable: new SingleQueryingEnumerable<Role>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: Role.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Role.ConcurrencyStamp (string), 1], [Property: Role.IsAdmin (bool) Required, 2], [Property: Role.Name (string), 3], [Property: Role.NormalizedName (string), 4] }
            SELECT TOP(1) r.Id, r.ConcurrencyStamp, r.IsAdmin, r.Name, r.NormalizedName
            FROM roles AS r
            WHERE r.NormalizedName == @__normalizedName_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Role>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 12:33:36.743 +07:00 [DBG] Creating DbConnection.
2025-09-25 12:33:36.753 +07:00 [DBG] Created DbConnection. (8ms).
2025-09-25 12:33:36.755 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:36.904 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:36.906 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:33:36.909 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-09-25 12:33:36.914 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (7ms).
2025-09-25 12:33:36.919 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:33:36.961 +07:00 [INF] Executed DbCommand (42ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:33:36.985 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:33:36.998 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.002 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 39ms reading results.
2025-09-25 12:33:37.004 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.008 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (3ms).
2025-09-25 12:33:37.010 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.011 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.011 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:33:37.011 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.011 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.011 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:33:37.015 +07:00 [INF] Executed DbCommand (4ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:33:37.016 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:33:37.016 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.016 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:33:37.016 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.016 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:33:37.016 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.016 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.017 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:33:37.017 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.017 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.017 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:33:37.017 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:33:37.018 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:33:37.018 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.018 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:33:37.018 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.018 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:33:37.018 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.019 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.019 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:33:37.019 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.020 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.020 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:33:37.021 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedName_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[ConcurrencyStamp], [r].[IsAdmin], [r].[Name], [r].[NormalizedName]
FROM [roles] AS [r]
WHERE [r].[NormalizedName] = @__normalizedName_0
2025-09-25 12:33:37.021 +07:00 [DBG] Context 'MyDbContext' started tracking 'Role' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:33:37.021 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.021 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:33:37.022 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.022 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:33:37.025 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .SingleOrDefault(u => u.NormalizedEmail == __normalizedEmail_0)'
2025-09-25 12:33:37.030 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<User>(
    asyncEnumerable: new SingleQueryingEnumerable<User>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Projection Mapping:
                EmptyProjectionMember -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            SELECT TOP(2) u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName
            FROM users AS u
            WHERE u.NormalizedEmail == @__normalizedEmail_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 12:33:37.031 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.031 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.031 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:33:37.031 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.031 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.031 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:33:37.041 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:33:37.059 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:33:37.079 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.080 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 37ms reading results.
2025-09-25 12:33:37.080 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.080 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:33:37.082 +07:00 [INF] Admin user 'fptslayer@gmail.com' already exists
2025-09-25 12:33:37.084 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.085 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.085 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:33:37.085 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.085 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.085 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:33:37.086 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:33:37.086 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:33:37.086 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.086 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:33:37.086 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.086 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:33:37.086 +07:00 [INF] Sample moderator 'moderator@example.com' already exists
2025-09-25 12:33:37.087 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.087 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.087 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:33:37.087 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.087 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.087 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:33:37.088 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:33:37.088 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:33:37.089 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.089 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:33:37.089 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.089 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:33:37.090 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.091 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.091 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:33:37.091 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.091 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:33:37.092 +07:00 [DBG] Executing DbCommand [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:33:37.093 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[@__normalizedEmail_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(2) [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName]
FROM [users] AS [u]
WHERE [u].[NormalizedEmail] = @__normalizedEmail_0
2025-09-25 12:33:37.093 +07:00 [DBG] Context 'MyDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-09-25 12:33:37.093 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.093 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 0ms reading results.
2025-09-25 12:33:37.093 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.093 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:33:37.093 +07:00 [INF] Data seeding completed successfully
2025-09-25 12:33:37.094 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 12:33:37.097 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:33:37.098 +07:00 [DBG] Disposed connection to database '' on server '' (1ms).
2025-09-25 12:33:37.108 +07:00 [DBG] Registered SignalR Protocol: json, implemented by Microsoft.AspNetCore.SignalR.Protocol.JsonHubProtocol.
2025-09-25 12:33:37.211 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider"]
2025-09-25 12:33:37.280 +07:00 [DBG] Hosting starting
2025-09-25 12:33:37.286 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-1d6bcff1-a155-4167-8a22-de35a5f05047.xml'.
2025-09-25 12:33:37.314 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-2459dd29-32d5-4c49-ac9d-33896047bb78.xml'.
2025-09-25 12:33:37.343 +07:00 [DBG] Reading data from file 'C:\Users\Admin\AppData\Local\ASP.NET\DataProtection-Keys\key-374624f1-e856-4617-8ae6-fe6a81ce6346.xml'.
2025-09-25 12:33:37.373 +07:00 [DBG] Found key {1d6bcff1-a155-4167-8a22-de35a5f05047}.
2025-09-25 12:33:37.376 +07:00 [DBG] Found key {2459dd29-32d5-4c49-ac9d-33896047bb78}.
2025-09-25 12:33:37.376 +07:00 [DBG] Found key {374624f1-e856-4617-8ae6-fe6a81ce6346}.
2025-09-25 12:33:37.381 +07:00 [DBG] Considering key {2459dd29-32d5-4c49-ac9d-33896047bb78} with expiration date 2025-11-03 12:40:53Z as default key.
2025-09-25 12:33:37.383 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.XmlEncryption.DpapiXmlDecryptor, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 12:33:37.383 +07:00 [DBG] Decrypting secret element using Windows DPAPI.
2025-09-25 12:33:37.384 +07:00 [DBG] Forwarded activator type request from Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Version=8.0.0.0, Culture=neutral, PublicKeyToken=adb9793829ddae60 to Microsoft.AspNetCore.DataProtection.AuthenticatedEncryption.ConfigurationModel.AuthenticatedEncryptorDescriptorDeserializer, Microsoft.AspNetCore.DataProtection, Culture=neutral, PublicKeyToken=adb9793829ddae60
2025-09-25 12:33:37.385 +07:00 [DBG] Opening CNG algorithm 'AES' from provider 'null' with chaining mode CBC.
2025-09-25 12:33:37.385 +07:00 [DBG] Opening CNG algorithm 'SHA256' from provider 'null' with HMAC.
2025-09-25 12:33:37.386 +07:00 [DBG] Using key {2459dd29-32d5-4c49-ac9d-33896047bb78} as the default key.
2025-09-25 12:33:37.387 +07:00 [DBG] Key ring with default key {2459dd29-32d5-4c49-ac9d-33896047bb78} was loaded during application startup.
2025-09-25 12:33:37.390 +07:00 [DBG] Middleware loaded
2025-09-25 12:33:37.390 +07:00 [DBG] Middleware loaded. Script /_framework/aspnetcore-browser-refresh.js (16481 B).
2025-09-25 12:33:37.391 +07:00 [DBG] Middleware loaded. Script /_framework/blazor-hotreload.js (799 B).
2025-09-25 12:33:37.412 +07:00 [DBG] Middleware loaded: DOTNET_MODIFIABLE_ASSEMBLIES=debug, __ASPNETCORE_BROWSER_TOOLS=true
2025-09-25 12:33:37.418 +07:00 [INF] Now listening on: http://localhost:5207
2025-09-25 12:33:37.419 +07:00 [DBG] Loaded hosting startup assembly CapBot.api
2025-09-25 12:33:37.419 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-09-25 12:33:37.419 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-09-25 12:33:37.419 +07:00 [INF] Hosting environment: Development
2025-09-25 12:33:37.419 +07:00 [INF] Content root path: C:\Users\Admin\Downloads\CBAI_API\capbot.api
2025-09-25 12:33:37.420 +07:00 [DBG] Hosting started
2025-09-25 12:33:37.545 +07:00 [DBG] Connection id "0HNFRUK9TV2A4" accepted.
2025-09-25 12:33:37.547 +07:00 [DBG] Connection id "0HNFRUK9TV2A4" started.
2025-09-25 12:33:37.571 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/index.html - null null
2025-09-25 12:33:37.578 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-09-25 12:33:37.615 +07:00 [DBG] Connection id "0HNFRUK9TV2A5" accepted.
2025-09-25 12:33:37.615 +07:00 [DBG] Connection id "0HNFRUK9TV2A5" started.
2025-09-25 12:33:37.722 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-09-25 12:33:37.728 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-09-25 12:33:37.729 +07:00 [DBG] Connection id "0HNFRUK9TV2A4" completed keep alive response.
2025-09-25 12:33:37.730 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/index.html - 200 null text/html;charset=utf-8 161.2191ms
2025-09-25 12:33:37.733 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - null null
2025-09-25 12:33:37.736 +07:00 [DBG] Script injected: /_framework/aspnetcore-browser-refresh.js
2025-09-25 12:33:37.736 +07:00 [DBG] Connection id "0HNFRUK9TV2A4" completed keep alive response.
2025-09-25 12:33:37.736 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/_framework/aspnetcore-browser-refresh.js - 200 16481 application/javascript; charset=utf-8 2.9752ms
2025-09-25 12:33:37.783 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - null null
2025-09-25 12:33:37.967 +07:00 [DBG] Connection id "0HNFRUK9TV2A4" completed keep alive response.
2025-09-25 12:33:37.967 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5207/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 183.7938ms
2025-09-25 12:34:07.605 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - application/json 109
2025-09-25 12:34:07.609 +07:00 [DBG] POST requests are not supported
2025-09-25 12:34:07.611 +07:00 [WRN] Failed to determine the https port for redirect.
2025-09-25 12:34:07.611 +07:00 [DBG] POST requests are not supported
2025-09-25 12:34:07.613 +07:00 [DBG] The request has an origin header: 'http://localhost:5207'.
2025-09-25 12:34:07.614 +07:00 [INF] CORS policy execution successful.
2025-09-25 12:34:07.692 +07:00 [DBG] 1 candidate(s) found for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:34:07.694 +07:00 [DBG] Endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)' with route pattern 'api/reviewer-suggestion/ai-suggest-by-submission' is valid for the request path '/api/reviewer-suggestion/ai-suggest-by-submission'
2025-09-25 12:34:07.695 +07:00 [DBG] Request matched endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:34:07.820 +07:00 [DBG] Successfully validated the token.
2025-09-25 12:34:07.822 +07:00 [DBG] AuthenticationScheme: Bearer was successfully authenticated.
2025-09-25 12:34:07.829 +07:00 [DBG] Authorization was successful.
2025-09-25 12:34:07.840 +07:00 [INF] Executing endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:34:07.866 +07:00 [INF] Route matched with {action = "SuggestBySubmissionId", controller = "ReviewerSuggestion"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] SuggestBySubmissionId(App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO, Boolean) on controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api).
2025-09-25 12:34:07.869 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-09-25 12:34:07.870 +07:00 [DBG] Execution plan of resource filters (in the following order): ["Microsoft.AspNetCore.Mvc.ConsumesAttribute"]
2025-09-25 12:34:07.871 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)"]
2025-09-25 12:34:07.871 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-09-25 12:34:07.872 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)","Microsoft.AspNetCore.Mvc.ProducesAttribute (Order: 0)"]
2025-09-25 12:34:07.876 +07:00 [DBG] Executing controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:34:08.107 +07:00 [DBG] Executed controller factory for controller CapBot.api.Controllers.ReviewerSuggestionController (CapBot.api)
2025-09-25 12:34:08.122 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:34:08.132 +07:00 [DBG] Attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' using the name '' in request data ...
2025-09-25 12:34:08.139 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:34:08.140 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:34:08.140 +07:00 [DBG] Rejected input formatter 'Microsoft.AspNetCore.OData.Formatter.ODataInputFormatter' for content type 'application/json'.
2025-09-25 12:34:08.141 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-09-25 12:34:08.175 +07:00 [DBG] Connection id "0HNFRUK9TV2A4", Request id "0HNFRUK9TV2A4:00000004": started reading request body.
2025-09-25 12:34:08.175 +07:00 [DBG] Connection id "0HNFRUK9TV2A4", Request id "0HNFRUK9TV2A4:00000004": done reading request body.
2025-09-25 12:34:08.193 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'
2025-09-25 12:34:08.196 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:34:08.197 +07:00 [DBG] Done attempting to bind parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:34:08.198 +07:00 [DBG] Attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO' ...
2025-09-25 12:34:08.217 +07:00 [DBG] Done attempting to validate the bound parameter 'input' of type 'App.Entities.DTOs.ReviewerSuggestion.ReviewerSuggestionBySubmissionInputDTO'.
2025-09-25 12:34:08.220 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:34:08.221 +07:00 [DBG] Attempting to bind parameter 'assign' of type 'System.Boolean' using the name 'assign' in request data ...
2025-09-25 12:34:08.222 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:34:08.223 +07:00 [DBG] Done attempting to bind parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:34:08.223 +07:00 [DBG] Attempting to validate the bound parameter 'assign' of type 'System.Boolean' ...
2025-09-25 12:34:08.223 +07:00 [DBG] Done attempting to validate the bound parameter 'assign' of type 'System.Boolean'.
2025-09-25 12:34:08.228 +07:00 [INF] Processing AI suggestion for SubmissionId: 6
2025-09-25 12:34:08.231 +07:00 [INF] Received input for SuggestBySubmissionId: {"SubmissionId":6,"MaxSuggestions":4,"UsePrompt":true,"Deadline":"2025-09-25T05:34:00.7410000Z","$type":"ReviewerSuggestionBySubmissionInputDTO"}
2025-09-25 12:34:08.364 +07:00 [DBG] Entity Framework Core 8.0.16 initialized 'MyDbContext' using provider 'Microsoft.EntityFrameworkCore.SqlServer:8.0.13' with options: MigrationsAssembly=App.DAL 
2025-09-25 12:34:08.401 +07:00 [DBG] Compiling query expression: 
'DbSet<Submission>()
    .AsNoTracking()
    .Include(s => s.Topic)
    .Where(s => s.Id == __input_SubmissionId_0)
    .FirstOrDefault()'
2025-09-25 12:34:08.442 +07:00 [DBG] Including navigation: 'Submission.Topic'.
2025-09-25 12:34:08.566 +07:00 [DBG] Generated query execution expression: 
'queryContext => ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync<Submission>(
    asyncEnumerable: new SingleQueryingEnumerable<Submission>(
        (RelationalQueryContext)queryContext, 
        RelationalCommandCache.QueryExpression(
            Client Projections:
                0 -> Dictionary<IProperty, int> { [Property: Submission.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: Submission.AdditionalNotes (string), 1], [Property: Submission.AiCheckDetails (string), 2], [Property: Submission.AiCheckScore (decimal?), 3], [Property: Submission.AiCheckStatus (AiCheckStatus) Required ValueGenerated.OnAdd, 4], [Property: Submission.CreatedAt (DateTime) Required, 5], [Property: Submission.CreatedBy (string), 6], [Property: Submission.DeletedAt (DateTime?), 7], [Property: Submission.DocumentUrl (string) MaxLength(500), 8], [Property: Submission.IsActive (bool) Required, 9], [Property: Submission.LastModifiedAt (DateTime?), 10], [Property: Submission.LastModifiedBy (string), 11], [Property: Submission.PhaseId (int) Required FK Index, 12], [Property: Submission.Status (SubmissionStatus) Required Index ValueGenerated.OnAdd, 13], [Property: Submission.SubmissionRound (int) Required Index ValueGenerated.OnAdd, 14], [Property: Submission.SubmittedAt (DateTime?) Index ValueGenerated.OnAdd, 15], [Property: Submission.SubmittedBy (int) Required FK Index, 16], [Property: Submission.TopicId (int) Required FK Index, 17], [Property: Submission.TopicVersionId (int?) FK Index, 18] }
                1 -> Dictionary<IProperty, int> { [Property: Topic.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: Topic.Abbreviation (string), 20], [Property: Topic.CategoryId (int?) FK Index, 21], [Property: Topic.Content (string), 22], [Property: Topic.Context (string), 23], [Property: Topic.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 24], [Property: Topic.CreatedBy (string), 25], [Property: Topic.DeletedAt (DateTime?), 26], [Property: Topic.Description (string), 27], [Property: Topic.EN_Title (string) Required MaxLength(500), 28], [Property: Topic.IsActive (bool) Required, 29], [Property: Topic.IsApproved (bool) Required Index Sentinel:True ValueGenerated.OnAdd, 30], [Property: Topic.IsLegacy (bool) Required Index ValueGenerated.OnAdd, 31], [Property: Topic.LastModifiedAt (DateTime?), 32], [Property: Topic.LastModifiedBy (string), 33], [Property: Topic.MaxStudents (int) Required ValueGenerated.OnAdd, 34], [Property: Topic.Objectives (string), 35], [Property: Topic.Problem (string), 36], [Property: Topic.SemesterId (int) Required FK Index, 37], [Property: Topic.SupervisorId (int) Required FK Index, 38], [Property: Topic.VN_title (string), 39] }
            SELECT TOP(1) s.Id, s.AdditionalNotes, s.AiCheckDetails, s.AiCheckScore, s.AiCheckStatus, s.CreatedAt, s.CreatedBy, s.DeletedAt, s.DocumentUrl, s.IsActive, s.LastModifiedAt, s.LastModifiedBy, s.PhaseId, s.Status, s.SubmissionRound, s.SubmittedAt, s.SubmittedBy, s.TopicId, s.TopicVersionId, t.Id, t.Abbreviation, t.CategoryId, t.Content, t.Context, t.CreatedAt, t.CreatedBy, t.DeletedAt, t.Description, t.EN_Title, t.IsActive, t.IsApproved, t.IsLegacy, t.LastModifiedAt, t.LastModifiedBy, t.MaxStudents, t.Objectives, t.Problem, t.SemesterId, t.SupervisorId, t.VN_title
            FROM submissions AS s
            LEFT JOIN topics AS t ON s.TopicId == t.Id
            WHERE s.Id == @__input_SubmissionId_0), 
        null, 
        Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, Submission>, 
        App.DAL.Context.MyDbContext, 
        False, 
        False, 
        True
    ), 
    cancellationToken: queryContext.CancellationToken)'
2025-09-25 12:34:08.590 +07:00 [DBG] Creating DbConnection.
2025-09-25 12:34:08.591 +07:00 [DBG] Created DbConnection. (2ms).
2025-09-25 12:34:08.592 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:34:08.592 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:34:08.592 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:34:08.593 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:34:08.593 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:34:08.595 +07:00 [DBG] Executing DbCommand [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:34:08.620 +07:00 [INF] Executed DbCommand (27ms) [Parameters=[@__input_SubmissionId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[AdditionalNotes], [s].[AiCheckDetails], [s].[AiCheckScore], [s].[AiCheckStatus], [s].[CreatedAt], [s].[CreatedBy], [s].[DeletedAt], [s].[DocumentUrl], [s].[IsActive], [s].[LastModifiedAt], [s].[LastModifiedBy], [s].[PhaseId], [s].[Status], [s].[SubmissionRound], [s].[SubmittedAt], [s].[SubmittedBy], [s].[TopicId], [s].[TopicVersionId], [t].[Id], [t].[Abbreviation], [t].[CategoryId], [t].[Content], [t].[Context], [t].[CreatedAt], [t].[CreatedBy], [t].[DeletedAt], [t].[Description], [t].[EN_Title], [t].[IsActive], [t].[IsApproved], [t].[IsLegacy], [t].[LastModifiedAt], [t].[LastModifiedBy], [t].[MaxStudents], [t].[Objectives], [t].[Problem], [t].[SemesterId], [t].[SupervisorId], [t].[VN_title]
FROM [submissions] AS [s]
LEFT JOIN [topics] AS [t] ON [s].[TopicId] = [t].[Id]
WHERE [s].[Id] = @__input_SubmissionId_0
2025-09-25 12:34:08.634 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:34:08.635 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 14ms reading results.
2025-09-25 12:34:08.636 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:34:08.637 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:34:08.649 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .AsNoTracking()
    .Include(u => u.LecturerSkills)
    .Include(u => u.UserRoles)
    .Include(u => u.ReviewerAssignments)
    .Include(u => u.ReviewerPerformances)
    .Where(u => u.UserRoles
        .Any(r => r.Role != null && r.Role.Name == "Reviewer") && u.LecturerSkills
        .Any())'
2025-09-25 12:34:08.666 +07:00 [DBG] Including navigation: 'User.LecturerSkills'.
2025-09-25 12:34:08.666 +07:00 [DBG] Including navigation: 'User.UserRoles'.
2025-09-25 12:34:08.667 +07:00 [DBG] Including navigation: 'User.ReviewerAssignments'.
2025-09-25 12:34:08.668 +07:00 [DBG] Including navigation: 'User.ReviewerPerformances'.
2025-09-25 12:34:08.771 +07:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-09-25 12:34:08.784 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<User>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Client Projections:
            0 -> Dictionary<IProperty, int> { [Property: User.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 0], [Property: User.AccessFailedCount (int) Required, 1], [Property: User.ConcurrencyStamp (string), 2], [Property: User.CreatedAt (DateTime) Required, 3], [Property: User.DeletedAt (DateTime?), 4], [Property: User.Email (string), 5], [Property: User.EmailConfirmed (bool) Required, 6], [Property: User.LastModifiedAt (DateTime) Required, 7], [Property: User.LastModifiedBy (string), 8], [Property: User.LockoutEnabled (bool) Required, 9], [Property: User.LockoutEnd (DateTimeOffset?), 10], [Property: User.NormalizedEmail (string), 11], [Property: User.NormalizedUserName (string), 12], [Property: User.PasswordHash (string), 13], [Property: User.PhoneNumber (string), 14], [Property: User.PhoneNumberConfirmed (bool) Required, 15], [Property: User.SecurityStamp (string), 16], [Property: User.TwoFactorEnabled (bool) Required, 17], [Property: User.UserName (string), 18] }
            1 -> 0
            2 -> Dictionary<IProperty, int> { [Property: LecturerSkill.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 19], [Property: LecturerSkill.CreatedAt (DateTime) Required ValueGenerated.OnAdd, 20], [Property: LecturerSkill.CreatedBy (string), 21], [Property: LecturerSkill.DeletedAt (DateTime?), 22], [Property: LecturerSkill.IsActive (bool) Required, 23], [Property: LecturerSkill.LastModifiedAt (DateTime?), 24], [Property: LecturerSkill.LastModifiedBy (string), 25], [Property: LecturerSkill.LecturerId (int) Required FK Index, 26], [Property: LecturerSkill.ProficiencyLevel (ProficiencyLevels) Required ValueGenerated.OnAdd, 27], [Property: LecturerSkill.SkillTag (string) Required Index MaxLength(100), 28] }
            3 -> 19
            4 -> Dictionary<IProperty, int> { [Property: UserRole.UserId (int) Required PK FK AfterSave:Throw, 29], [Property: UserRole.RoleId (int) Required PK FK Index AfterSave:Throw, 30] }
            5 -> 29
            6 -> 30
            7 -> Dictionary<IProperty, int> { [Property: ReviewerAssignment.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 31], [Property: ReviewerAssignment.AssignedAt (DateTime) Required ValueGenerated.OnAdd, 32], [Property: ReviewerAssignment.AssignedBy (int) Required FK Index, 33], [Property: ReviewerAssignment.AssignmentType (AssignmentTypes) Required ValueGenerated.OnAdd, 34], [Property: ReviewerAssignment.CompletedAt (DateTime?), 35], [Property: ReviewerAssignment.Deadline (DateTime?) Index, 36], [Property: ReviewerAssignment.ReviewerId (int) Required FK Index, 37], [Property: ReviewerAssignment.SkillMatchScore (decimal?), 38], [Property: ReviewerAssignment.StartedAt (DateTime?), 39], [Property: ReviewerAssignment.Status (AssignmentStatus) Required Index ValueGenerated.OnAdd, 40], [Property: ReviewerAssignment.SubmissionId (int) Required FK Index, 41] }
            8 -> 31
            9 -> Dictionary<IProperty, int> { [Property: ReviewerPerformance.Id (int) Required PK AfterSave:Throw ValueGenerated.OnAdd, 42], [Property: ReviewerPerformance.AverageScoreGiven (decimal?), 43], [Property: ReviewerPerformance.AverageTimeMinutes (int) Required ValueGenerated.OnAdd, 44], [Property: ReviewerPerformance.CompletedAssignments (int) Required ValueGenerated.OnAdd, 45], [Property: ReviewerPerformance.LastUpdated (DateTime) Required ValueGenerated.OnAdd, 46], [Property: ReviewerPerformance.OnTimeRate (decimal?), 47], [Property: ReviewerPerformance.QualityRating (decimal?), 48], [Property: ReviewerPerformance.ReviewerId (int) Required FK Index, 49], [Property: ReviewerPerformance.SemesterId (int) Required FK Index, 50], [Property: ReviewerPerformance.TotalAssignments (int) Required ValueGenerated.OnAdd, 51] }
            10 -> 42
        SELECT u.Id, u.AccessFailedCount, u.ConcurrencyStamp, u.CreatedAt, u.DeletedAt, u.Email, u.EmailConfirmed, u.LastModifiedAt, u.LastModifiedBy, u.LockoutEnabled, u.LockoutEnd, u.NormalizedEmail, u.NormalizedUserName, u.PasswordHash, u.PhoneNumber, u.PhoneNumberConfirmed, u.SecurityStamp, u.TwoFactorEnabled, u.UserName, l0.Id, l0.CreatedAt, l0.CreatedBy, l0.DeletedAt, l0.IsActive, l0.LastModifiedAt, l0.LastModifiedBy, l0.LecturerId, l0.ProficiencyLevel, l0.SkillTag, u1.UserId, u1.RoleId, r0.Id, r0.AssignedAt, r0.AssignedBy, r0.AssignmentType, r0.CompletedAt, r0.Deadline, r0.ReviewerId, r0.SkillMatchScore, r0.StartedAt, r0.Status, r0.SubmissionId, r1.Id, r1.AverageScoreGiven, r1.AverageTimeMinutes, r1.CompletedAssignments, r1.LastUpdated, r1.OnTimeRate, r1.QualityRating, r1.ReviewerId, r1.SemesterId, r1.TotalAssignments
        FROM users AS u
        LEFT JOIN lecturer_skills AS l0 ON u.Id == l0.LecturerId
        LEFT JOIN user_roles AS u1 ON u.Id == u1.UserId
        LEFT JOIN reviewer_assignments AS r0 ON u.Id == r0.ReviewerId
        LEFT JOIN reviewer_performance AS r1 ON u.Id == r1.ReviewerId
        WHERE EXISTS (
            SELECT 1
            FROM user_roles AS u0
            INNER JOIN roles AS r ON u0.RoleId == r.Id
            WHERE ((u.Id != NULL) && (u.Id == u0.UserId)) && (Not(r.Id == NULL) && (r.Name == N'Reviewer'))) && EXISTS (
            SELECT 1
            FROM lecturer_skills AS l
            WHERE (u.Id != NULL) && (u.Id == l.LecturerId))
        ORDER BY u.Id ASC, l0.Id ASC, u1.UserId ASC, u1.RoleId ASC, r0.Id ASC), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, User>, 
    App.DAL.Context.MyDbContext, 
    False, 
    False, 
    True
)'
2025-09-25 12:34:08.799 +07:00 [DBG] Opening connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:34:08.800 +07:00 [DBG] Opened connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:34:08.800 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-09-25 12:34:08.800 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:34:08.801 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-09-25 12:34:08.802 +07:00 [DBG] Executing DbCommand [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:34:08.898 +07:00 [INF] Executed DbCommand (97ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[AccessFailedCount], [u].[ConcurrencyStamp], [u].[CreatedAt], [u].[DeletedAt], [u].[Email], [u].[EmailConfirmed], [u].[LastModifiedAt], [u].[LastModifiedBy], [u].[LockoutEnabled], [u].[LockoutEnd], [u].[NormalizedEmail], [u].[NormalizedUserName], [u].[PasswordHash], [u].[PhoneNumber], [u].[PhoneNumberConfirmed], [u].[SecurityStamp], [u].[TwoFactorEnabled], [u].[UserName], [l0].[Id], [l0].[CreatedAt], [l0].[CreatedBy], [l0].[DeletedAt], [l0].[IsActive], [l0].[LastModifiedAt], [l0].[LastModifiedBy], [l0].[LecturerId], [l0].[ProficiencyLevel], [l0].[SkillTag], [u1].[UserId], [u1].[RoleId], [r0].[Id], [r0].[AssignedAt], [r0].[AssignedBy], [r0].[AssignmentType], [r0].[CompletedAt], [r0].[Deadline], [r0].[ReviewerId], [r0].[SkillMatchScore], [r0].[StartedAt], [r0].[Status], [r0].[SubmissionId], [r1].[Id], [r1].[AverageScoreGiven], [r1].[AverageTimeMinutes], [r1].[CompletedAssignments], [r1].[LastUpdated], [r1].[OnTimeRate], [r1].[QualityRating], [r1].[ReviewerId], [r1].[SemesterId], [r1].[TotalAssignments]
FROM [users] AS [u]
LEFT JOIN [lecturer_skills] AS [l0] ON [u].[Id] = [l0].[LecturerId]
LEFT JOIN [user_roles] AS [u1] ON [u].[Id] = [u1].[UserId]
LEFT JOIN [reviewer_assignments] AS [r0] ON [u].[Id] = [r0].[ReviewerId]
LEFT JOIN [reviewer_performance] AS [r1] ON [u].[Id] = [r1].[ReviewerId]
WHERE EXISTS (
    SELECT 1
    FROM [user_roles] AS [u0]
    INNER JOIN [roles] AS [r] ON [u0].[RoleId] = [r].[Id]
    WHERE [u].[Id] = [u0].[UserId] AND [r].[Name] = N'Reviewer') AND EXISTS (
    SELECT 1
    FROM [lecturer_skills] AS [l]
    WHERE [u].[Id] = [l].[LecturerId])
ORDER BY [u].[Id], [l0].[Id], [u1].[UserId], [u1].[RoleId], [r0].[Id]
2025-09-25 12:34:08.915 +07:00 [DBG] Closing data reader to 'capbot_db' on server 'localhost'.
2025-09-25 12:34:08.916 +07:00 [DBG] A data reader for 'capbot_db' on server 'localhost' is being disposed after spending 16ms reading results.
2025-09-25 12:34:08.916 +07:00 [DBG] Closing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:34:08.917 +07:00 [DBG] Closed connection to database 'capbot_db' on server 'localhost' (0ms).
2025-09-25 12:34:10.949 +07:00 [DBG] Reviewer 7: overallSkill=0.6295 fieldScores=Title:0.6547,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:34:11.621 +07:00 [DBG] Reviewer 9: overallSkill=0.3365 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:34:12.748 +07:00 [DBG] Reviewer 10: overallSkill=0.6005 fieldScores=Title:0.5976,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:34:13.546 +07:00 [DBG] Reviewer 11: overallSkill=0.3226 fieldScores=Title:0,VN_Title:0,Category:0,Description:0,Objectives:0,Problem:0,Content:0,Context:0
2025-09-25 12:34:19.400 +07:00 [WRN] GenerateAIExplanation failed
System.Exception: Gemini Prompt API error after retries: TooManyRequests
   at App.BLL.Services.GeminiAIService.GetPromptCompletionAsync(String prompt) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Services\GeminiAIService.cs:line 249
   at App.BLL.Implementations.ReviewerSuggestionService.GenerateAIExplanation(String submissionContext, List`1 suggestions) in C:\Users\Admin\Downloads\CBAI_API\App.BLL\Implementations\ReviewerSuggestionService.cs:line 690
2025-09-25 12:34:19.443 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.OData.Formatter.ODataOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-09-25 12:34:19.446 +07:00 [DBG] No information found on request to perform content negotiation.
2025-09-25 12:34:19.447 +07:00 [DBG] Attempting to select the first output formatter in the output formatters list which supports a content type from the explicitly specified content types '["application/json"]'.
2025-09-25 12:34:19.453 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-09-25 12:34:19.454 +07:00 [INF] Executing ObjectResult, writing value of type 'FS.Commons.FSResponse'.
2025-09-25 12:34:19.532 +07:00 [INF] Executed action CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api) in 11655.229ms
2025-09-25 12:34:19.533 +07:00 [INF] Executed endpoint 'CapBot.api.Controllers.ReviewerSuggestionController.SuggestBySubmissionId (CapBot.api)'
2025-09-25 12:34:19.537 +07:00 [DBG] Connection id "0HNFRUK9TV2A4" completed keep alive response.
2025-09-25 12:34:19.538 +07:00 [DBG] 'MyDbContext' disposed.
2025-09-25 12:34:19.538 +07:00 [DBG] Disposing connection to database 'capbot_db' on server 'localhost'.
2025-09-25 12:34:19.538 +07:00 [DBG] Disposed connection to database '' on server '' (0ms).
2025-09-25 12:34:19.540 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5207/api/reviewer-suggestion/ai-suggest-by-submission?assign=false - 200 null application/json; charset=utf-8 11936.7524ms
2025-09-25 12:35:49.535 +07:00 [DBG] Connection id "0HNFRUK9TV2A5" disconnecting.
2025-09-25 12:35:49.538 +07:00 [DBG] Connection id "0HNFRUK9TV2A5" stopped.
2025-09-25 12:35:49.540 +07:00 [DBG] Connection id "0HNFRUK9TV2A5" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 12:36:14.526 +07:00 [DBG] Connection id "0HNFRUK9TV2A4" received FIN.
2025-09-25 12:36:14.527 +07:00 [DBG] Connection id "0HNFRUK9TV2A4" disconnecting.
2025-09-25 12:36:14.528 +07:00 [DBG] Connection id "0HNFRUK9TV2A4" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-09-25 12:36:14.533 +07:00 [DBG] Connection id "0HNFRUK9TV2A4" stopped.
2025-09-25 12:36:18.305 +07:00 [INF] Application is shutting down...
2025-09-25 12:36:18.308 +07:00 [DBG] Hosting stopping
2025-09-25 12:36:18.317 +07:00 [ERR] Lỗi khi kiểm tra deadline notifications
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at CapBot.api.Services.DeadlineNotificationService.ExecuteAsync(CancellationToken stoppingToken) in C:\Users\Admin\Downloads\CBAI_API\capbot.api\Services\DeadlineNotificationService.cs:line 41
2025-09-25 12:36:18.322 +07:00 [DBG] Hosting stopped
